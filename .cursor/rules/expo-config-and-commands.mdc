# Expo Config and Commands

## Configuration
- **App Config**: [app.json](mdc:app.json)
  - **Name**: DNS Chat
  - **Slug**: `chat-dns`
  - **Scheme**: `dnschat://`
  - **New Architecture**: `newArchEnabled: true`
  - **iOS**: `bundleIdentifier: org.mvneves.dnschat`
  - **Android**: package `org.mvneves.dnschat`, adaptive icon support
  - **Plugins**: `expo-asset`, `expo-splash-screen`, `react-native-edge-to-edge`, `./plugins/dns-native-plugin`

## Entry Point
- **Main Entry**: [index.tsx](mdc:index.tsx) â†’ [src/App.tsx](mdc:src/App.tsx)
- **Deep Linking**: Configured in [src/App.tsx](mdc:src/App.tsx) with scheme `dnschat://`

## Build Commands
### Package Scripts ([package.json](mdc:package.json))
- **`npm start`**: Start dev client with `expo start --dev-client`
- **`npm run ios`**: Run iOS simulator with `expo run:ios`
- **`npm run android`**: Run Android with JDK 17 wrapper
- **`npm run android:java24`**: Run Android with default JDK on PATH
- **`npm run web`**: Start web version with `expo start --web`

### Android JDK Configuration
- **JDK 17 Path**: `/opt/homebrew/opt/openjdk@17/libexec/openjdk.jdk/Contents/Home`
- **Wrapper Script**: `android-java17.sh` for consistent local builds
- **Fallback**: `android:java24` uses system default JDK

## Native Setup
### iOS
- **Pods**: `cd ios && pod install`
- **Native Module**: [ios/DNSNative/](mdc:ios/DNSNative/) with Swift and Objective-C bridge
- **Plugin Integration**: DNS native plugin copies code into iOS project

### Android
- **Gradle**: [android/build.gradle](mdc:android/build.gradle) and [android/app/build.gradle](mdc:android/app/build.gradle)
- **Native Module**: [android/app/src/main/java/com/dnschat/](mdc:android/app/src/main/java/com/dnschat/)
- **Plugin Integration**: DNS native plugin copies code into Android project

## Development Workflow
1. **Start Dev**: `npm start` for development client
2. **Platform Builds**: `npm run ios` or `npm run android`
3. **Native Changes**: Rebuild platform after native code changes
4. **Plugin Updates**: Run `expo prebuild` after plugin modifications

## Do Not
- **Change app scheme** without updating deep links in [src/App.tsx](mdc:src/App.tsx) and navigation
- **Remove DNS plugin** unless replacing native integration
- **Modify bundle identifiers** without updating native project files
- **Skip pod install** after iOS native changes
- **Do not**
  - Change app scheme without updating deep links in [src/App.tsx](mdc:src/App.tsx) and navigation
  - Remove the DNS plugin unless replacing native integration