<!--
Downloaded via https://llm.codes by @steipete on September 30, 2025 at 04:25 PM
Source URL: https://reactnative.dev/docs/next/
Total pages processed: 198
URLs filtered: No
Content de-duplicated: Yes
Availability strings filtered: Yes
Code blocks only: No
-->

# https://reactnative.dev/docs/next/appregistry

[Skip to main content](https://reactnative.dev/docs/next/appregistry#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/appregistry)** (0.81).

Version: Next

On this page

### Project with Native Code Required

If you are using the managed Expo workflow there is only ever one entry component registered with `AppRegistry` and it is handled automatically (or through [registerRootComponent](https://docs.expo.dev/versions/latest/sdk/register-root-component/)). You do not need to use this API.

`AppRegistry` is the JS entry point to running all React Native apps. App root components should register themselves with `AppRegistry.registerComponent`, then the native system can load the bundle for the app and then actually run the app when it's ready by invoking `AppRegistry.runApplication`.

tsx

```codeBlockLines_AclH
import {Text, AppRegistry} from 'react-native';

To "stop" an application when a view should be destroyed, call `AppRegistry.unmountApplicationComponentAtRootTag` with the tag that was passed into `runApplication`. These should always be used as a pair.

`AppRegistry` should be required early in the `require` sequence to make sure the JS execution environment is setup before other modules are required.

* * *

# Reference

## Methods [​](https://reactnative.dev/docs/next/appregistry\#methods "Direct link to Methods")

### `getAppKeys()` [​](https://reactnative.dev/docs/next/appregistry\#getappkeys "Direct link to getappkeys")

```codeBlockLines_AclH
static getAppKeys(): string[];

Returns an array of strings.

### `getRegistry()` [​](https://reactnative.dev/docs/next/appregistry\#getregistry "Direct link to getregistry")

```codeBlockLines_AclH
static getRegistry(): {sections: string[]; runnables: Runnable[]};

Returns a [Registry](https://reactnative.dev/docs/next/appregistry#registry) object.

### `getRunnable()` [​](https://reactnative.dev/docs/next/appregistry\#getrunnable "Direct link to getrunnable")

```codeBlockLines_AclH
static getRunnable(appKey: string): : Runnable | undefined;

Returns a [Runnable](https://reactnative.dev/docs/next/appregistry#runnable) object.

**Parameters:**

| Name | Type |
| --- | --- |

### `getSectionKeys()` [​](https://reactnative.dev/docs/next/appregistry\#getsectionkeys "Direct link to getsectionkeys")

```codeBlockLines_AclH
static getSectionKeys(): string[];

### `getSections()` [​](https://reactnative.dev/docs/next/appregistry\#getsections "Direct link to getsections")

```codeBlockLines_AclH

Returns a [Runnables](https://reactnative.dev/docs/next/appregistry#runnables) object.

### `registerCancellableHeadlessTask()` [​](https://reactnative.dev/docs/next/appregistry\#registercancellableheadlesstask "Direct link to registercancellableheadlesstask")

```codeBlockLines_AclH
static registerCancellableHeadlessTask(
taskKey: string,
taskProvider: TaskProvider,
taskCancelProvider: TaskCancelProvider,
);

Register a headless task which can be cancelled. A headless task is a bit of code that runs without a UI.

| Name | Type | Description |
| --- | --- | --- |

### `registerComponent()` [​](https://reactnative.dev/docs/next/appregistry\#registercomponent "Direct link to registercomponent")

```codeBlockLines_AclH
static registerComponent(
appKey: string,
getComponentFunc: ComponentProvider,
section?: boolean,
): string;

| section | boolean |

### `registerConfig()` [​](https://reactnative.dev/docs/next/appregistry\#registerconfig "Direct link to registerconfig")

```codeBlockLines_AclH
static registerConfig(config: AppConfig[]);

### `registerHeadlessTask()` [​](https://reactnative.dev/docs/next/appregistry\#registerheadlesstask "Direct link to registerheadlesstask")

```codeBlockLines_AclH
static registerHeadlessTask(
taskKey: string,
taskProvider: TaskProvider,
);

Register a headless task. A headless task is a bit of code that runs without a UI.

This is a way to run tasks in JavaScript while your app is in the background. It can be used, for example, to sync fresh data, handle push notifications, or play music.

### `registerRunnable()` [​](https://reactnative.dev/docs/next/appregistry\#registerrunnable "Direct link to registerrunnable")

```codeBlockLines_AclH
static registerRunnable(appKey: string, func: Runnable): string;

### `registerSection()` [​](https://reactnative.dev/docs/next/appregistry\#registersection "Direct link to registersection")

```codeBlockLines_AclH
static registerSection(
appKey: string,
component: ComponentProvider,
);

### `runApplication()` [​](https://reactnative.dev/docs/next/appregistry\#runapplication "Direct link to runapplication")

```codeBlockLines_AclH
static runApplication(appKey: string, appParameters: any): void;

Loads the JavaScript bundle and runs the app.

### `setComponentProviderInstrumentationHook()` [​](https://reactnative.dev/docs/next/appregistry\#setcomponentproviderinstrumentationhook "Direct link to setcomponentproviderinstrumentationhook")

```codeBlockLines_AclH
static setComponentProviderInstrumentationHook(
hook: ComponentProviderInstrumentationHook,
);

A valid `hook` function accepts the following as arguments:

The function must also return a React Component.

### `setWrapperComponentProvider()` [​](https://reactnative.dev/docs/next/appregistry\#setwrappercomponentprovider "Direct link to setwrappercomponentprovider")

```codeBlockLines_AclH
static setWrapperComponentProvider(
provider: WrapperComponentProvider,
);

### `startHeadlessTask()` [​](https://reactnative.dev/docs/next/appregistry\#startheadlesstask "Direct link to startheadlesstask")

```codeBlockLines_AclH
static startHeadlessTask(
taskId: number,
taskKey: string,
data: any,
);

Only called from native code. Starts a headless task.

### `unmountApplicationComponentAtRootTag()` [​](https://reactnative.dev/docs/next/appregistry\#unmountapplicationcomponentatroottag "Direct link to unmountapplicationcomponentatroottag")

```codeBlockLines_AclH
static unmountApplicationComponentAtRootTag(rootTag: number);

Stops an application when a view should be destroyed.

## Type Definitions [​](https://reactnative.dev/docs/next/appregistry\#type-definitions "Direct link to Type Definitions")

### AppConfig [​](https://reactnative.dev/docs/next/appregistry\#appconfig "Direct link to AppConfig")

Application configuration for the `registerConfig` method.

| Type |
| --- |
| object |

**Properties:**

| component | ComponentProvider |
| run | function |
| section | boolean |

note

Every config is expected to set either `component` or `run` function.

### Registry [​](https://reactnative.dev/docs/next/appregistry\#registry "Direct link to Registry")

| Name | Type |
| --- | --- |
| runnables | array of [Runnables](https://reactnative.dev/docs/next/appregistry#runnable) |
| sections | array of strings |

### Runnable [​](https://reactnative.dev/docs/next/appregistry\#runnable "Direct link to Runnable")

| Name | Type |
| --- | --- |
| component | ComponentProvider |
| run | function |

### Runnables [​](https://reactnative.dev/docs/next/appregistry\#runnables "Direct link to Runnables")

An object with key of `appKey` and value of type of [`Runnable`](https://reactnative.dev/docs/next/appregistry#runnable).

### Task [​](https://reactnative.dev/docs/next/appregistry\#task "Direct link to Task")

A `Task` is a function that accepts any data as argument and returns a Promise that resolves to `undefined`.

| Type |
| --- |
| function |

### TaskCanceller [​](https://reactnative.dev/docs/next/appregistry\#taskcanceller "Direct link to TaskCanceller")

A `TaskCanceller` is a function that accepts no argument and returns void.

### TaskCancelProvider [​](https://reactnative.dev/docs/next/appregistry\#taskcancelprovider "Direct link to TaskCancelProvider")

A valid `TaskCancelProvider` is a function that returns a [`TaskCanceller`](https://reactnative.dev/docs/next/appregistry#taskcanceller).

### TaskProvider [​](https://reactnative.dev/docs/next/appregistry\#taskprovider "Direct link to TaskProvider")

A valid `TaskProvider` is a function that returns a [`Task`](https://reactnative.dev/docs/next/appregistry#task).

Is this page useful?

- [Methods](https://reactnative.dev/docs/next/appregistry#methods)
- [`getAppKeys()`](https://reactnative.dev/docs/next/appregistry#getappkeys)
- [`getRegistry()`](https://reactnative.dev/docs/next/appregistry#getregistry)
- [`getRunnable()`](https://reactnative.dev/docs/next/appregistry#getrunnable)
- [`getSectionKeys()`](https://reactnative.dev/docs/next/appregistry#getsectionkeys)
- [`getSections()`](https://reactnative.dev/docs/next/appregistry#getsections)
- [`registerCancellableHeadlessTask()`](https://reactnative.dev/docs/next/appregistry#registercancellableheadlesstask)
- [`registerComponent()`](https://reactnative.dev/docs/next/appregistry#registercomponent)
- [`registerConfig()`](https://reactnative.dev/docs/next/appregistry#registerconfig)
- [`registerHeadlessTask()`](https://reactnative.dev/docs/next/appregistry#registerheadlesstask)
- [`registerRunnable()`](https://reactnative.dev/docs/next/appregistry#registerrunnable)
- [`registerSection()`](https://reactnative.dev/docs/next/appregistry#registersection)
- [`runApplication()`](https://reactnative.dev/docs/next/appregistry#runapplication)
- [`setComponentProviderInstrumentationHook()`](https://reactnative.dev/docs/next/appregistry#setcomponentproviderinstrumentationhook)
- [`setWrapperComponentProvider()`](https://reactnative.dev/docs/next/appregistry#setwrappercomponentprovider)
- [`startHeadlessTask()`](https://reactnative.dev/docs/next/appregistry#startheadlesstask)
- [`unmountApplicationComponentAtRootTag()`](https://reactnative.dev/docs/next/appregistry#unmountapplicationcomponentatroottag)
- [Type Definitions](https://reactnative.dev/docs/next/appregistry#type-definitions)
- [AppConfig](https://reactnative.dev/docs/next/appregistry#appconfig)
- [Registry](https://reactnative.dev/docs/next/appregistry#registry)
- [Runnable](https://reactnative.dev/docs/next/appregistry#runnable)
- [Runnables](https://reactnative.dev/docs/next/appregistry#runnables)
- [Task](https://reactnative.dev/docs/next/appregistry#task)
- [TaskCanceller](https://reactnative.dev/docs/next/appregistry#taskcanceller)
- [TaskCancelProvider](https://reactnative.dev/docs/next/appregistry#taskcancelprovider)
- [TaskProvider](https://reactnative.dev/docs/next/appregistry#taskprovider)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/asyncstorage

[Skip to main content](https://reactnative.dev/docs/next/asyncstorage#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/asyncstorage)** (0.81).

Version: Next

Removed from React Native

Use one of the [community packages](https://reactnative.directory/?search=storage) instead.

Is this page useful?

Twitter Widget Iframe

# How are we doing?

Help us make the site even better by answering a few quick questions!

[No Thanks](https://reactnative.dev/docs/next/asyncstorage#) [Give Feedback](https://www.surveymonkey.com/r/CCPP62S)

[powered by](https://www.surveymonkey.com/?ut_source=powered_by&ut_source2=new_website_collector)

---

# https://reactnative.dev/docs/next/appendix

[Skip to main content](https://reactnative.dev/docs/next/appendix#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/appendix)** (0.81).

Version: Next

On this page

## I. Terminology [​](https://reactnative.dev/docs/next/appendix\#i-terminology "Direct link to I. Terminology")

- **Spec** \- TypeScript or Flow code that describes the API for a Turbo Native Module or Fabric Native component. Used by **Codegen** to generate boilerplate code.

- **Native Modules** \- Native libraries that have no User Interface (UI) for the user. Examples would be persistent storage, notifications, network events. These are accessible to your JavaScript application code as functions and objects.

- **Native Component** \- Native platform views that are available to your application JavaScript code through React Components.

- **Legacy Native Components** \- Components which are running on the old React Native architecture.

- **Legacy Native Modules** \- Modules which are running on the old React Native architecture.

## II. Codegen Typings [​](https://reactnative.dev/docs/next/appendix\#ii-codegen-typings "Direct link to II. Codegen Typings")

You may use the following table as a reference for which types are supported and what they map to in each platform:

| Flow | TypeScript | Flow Nullable Support | TypeScript Nullable Support | Android (Java) | iOS (ObjC) |
| --- | --- | --- | --- | --- | --- |
| `string` | `string` | `?string` | `string | null` | `string` | `NSString` |
| `boolean` | `boolean` | `?boolean` | `boolean | null` | `Boolean` | `NSNumber` |

| Object \[ [1](https://reactnative.dev/docs/next/appendix#notes)\] | Object \[ [1](https://reactnative.dev/docs/next/appendix#notes)\] | `?Object` | `Object | null` | `ReadableMap` | `@` (untyped dictionary) |

| `Function` | `Function` | `?Function` | `Function | null` | - | - |

| `number` | `number` | No | | `double` | `NSNumber` |

### Notes: [​](https://reactnative.dev/docs/next/appendix\#notes "Direct link to Notes:")

**\[1\]** We strongly recommend using Object literals instead of Objects.

info

You may also find it useful to refer to the JavaScript specifications for the core modules in React Native. These are located inside the `Libraries/` directory in the React Native repository.

Is this page useful?

- [I. Terminology](https://reactnative.dev/docs/next/appendix#i-terminology)
- [II. Codegen Typings](https://reactnative.dev/docs/next/appendix#ii-codegen-typings)
- [Notes:](https://reactnative.dev/docs/next/appendix#notes)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/alert

[Skip to main content](https://reactnative.dev/docs/next/alert#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/alert)** (0.81).

Version: Next

On this page

Launches an alert dialog with the specified title and message.

Optionally provide a list of buttons. Tapping any button will fire the respective onPress callback and dismiss the alert. By default, the only button will be an 'OK' button.

This is an API that works both on Android and iOS and can show static alerts. Alert that prompts the user to enter some information is available on iOS only.

## Example [​](https://reactnative.dev/docs/next/alert\#example "Direct link to Example")

Alert Example - Snack

# Alert Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {StyleSheet, Button, Alert} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

{\
text: 'Cancel',\

style: 'cancel',\
},\

\]);

{\
text: 'Ask me later',\

},\
{\
text: 'Cancel',\

return (

};

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'space-around',
alignItems: 'center',
},
});

export default App;

{\
text: 'Cancel',\

style: 'cancel',\
},\

]);

{\
text: 'Ask me later',\

},\
{\
text: 'Cancel',\

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'space-around',
alignItems: 'center',
},
});

### Download [Expo Go](https://expo.dev/client) and scan the QR code to get started.

exp://u.expo.dev/933fd9c0-1666-11e7-afca-d980795c5824?runtime-version=exposdk%3A53.0.0&channel-name=production&snack-channel=9TsqevUiUr

### Connected devices

0

[Log in](https://expo.dev/login) to open this Snack from Expo Go on your device or simulator.

PreviewMy DeviceAndroidiOS

## iOS [​](https://reactnative.dev/docs/next/alert\#ios "Direct link to iOS")

On iOS you can specify any number of buttons. Each button can optionally specify a style or be emphasized, available options are represented by the [AlertButtonStyle](https://reactnative.dev/docs/next/alert#alertbuttonstyle-ios) enum and the `isPreferred` field on [AlertButton](https://reactnative.dev/docs/next/alert#alertbutton).

## Android [​](https://reactnative.dev/docs/next/alert\#android "Direct link to Android")

On Android at most three buttons can be specified. Android has a concept of a neutral, negative and a positive button:

- If you specify one button, it will be the 'positive' one (such as 'OK')
- Two buttons mean 'negative', 'positive' (such as 'Cancel', 'OK')
- Three buttons mean 'neutral', 'negative', 'positive' (such as 'Later', 'Cancel', 'OK')

Alerts on Android can be dismissed by tapping outside of the alert box. It is disabled by default and can be enabled by providing an optional [AlertOptions](https://reactnative.dev/docs/next/alert#alertoptions) parameter with the cancelable property set to `true` i.e.

`{cancelable: true}`.

The cancel event can be handled by providing an `onDismiss` callback property inside the `options` parameter.

### Example Android [​](https://reactnative.dev/docs/next/alert\#example-android "Direct link to example-android")

Alert Android Dissmissable Example - Snack

# Alert Android Dissmissable Example

'Alert Title',
'My Alert Msg',
\[\
{\
text: 'Cancel',\

style: 'cancel',\
},\
\],
{
cancelable: true,

'This alert was dismissed by tapping outside of the alert dialog.',
),
},
);

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
alignItems: 'center',
},
});

'Alert Title',
'My Alert Msg',
[\
{\
text: 'Cancel',\

style: 'cancel',\
},\
],
{
cancelable: true,

'This alert was dismissed by tapping outside of the alert dialog.',
),
},
);

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
alignItems: 'center',
},
});

### Download [Expo Go](https://expo.dev/client) and scan the QR code to get started.

exp://u.expo.dev/933fd9c0-1666-11e7-afca-d980795c5824?runtime-version=exposdk%3A53.0.0&channel-name=production&snack-channel=ZG50E8vd71

### Connected devices

PreviewMy DeviceAndroid

* * *

# Reference

## Methods [​](https://reactnative.dev/docs/next/alert\#methods "Direct link to Methods")

### `alert()` [​](https://reactnative.dev/docs/next/alert\#alert "Direct link to alert")

tsx

```codeBlockLines_AclH
static alert (
title: string,
message?: string,
buttons?: AlertButton[],
options?: AlertOptions,
);

**Parameters:**

| Name | Type | Description |
| --- | --- | --- |

| message | string | An optional message that appears below the dialog's title. |
| buttons | [AlertButton](https://reactnative.dev/docs/next/alert#alertbutton)\[\] | An optional array containing buttons configuration. |
| options | [AlertOptions](https://reactnative.dev/docs/next/alert#alertoptions) | An optional Alert configuration. |

### `prompt()` iOS [​](https://reactnative.dev/docs/next/alert\#prompt-ios "Direct link to prompt-ios")

```codeBlockLines_AclH
static prompt: (
title: string,
message?: string,

type?: AlertType,
defaultValue?: string,
keyboardType?: string,
);

Create and display a prompt to enter some text in form of Alert.

| message | string | An optional message that appears above the text input. |

| type | [AlertType](https://reactnative.dev/docs/next/alert#alerttype-ios) | This configures the text input. |
| defaultValue | string | The default text in text input. |
| keyboardType | string | The keyboard type of first text field (if exists). One of TextInput [keyboardTypes](https://reactnative.dev/docs/next/textinput#keyboardtype). |
| options | [AlertOptions](https://reactnative.dev/docs/next/alert#alertoptions) | An optional Alert configuration. |

## Type Definitions [​](https://reactnative.dev/docs/next/alert\#type-definitions "Direct link to Type Definitions")

### AlertButtonStyle iOS [​](https://reactnative.dev/docs/next/alert\#alertbuttonstyle-ios "Direct link to alertbuttonstyle-ios")

An iOS Alert button style.

| Type |
| --- |
| enum |

**Constants:**

| Value | Description |
| --- | --- |
| `'default'` | Default button style. |
| `'cancel'` | Cancel button style. |
| `'destructive'` | Destructive button style. |

### AlertType iOS [​](https://reactnative.dev/docs/next/alert\#alerttype-ios "Direct link to alerttype-ios")

An iOS Alert type.

| Value | Description |
| --- | --- |
| `'default'` | Default alert with no inputs |
| `'plain-text'` | Plain text input alert |
| `'secure-text'` | Secure text input alert |
| `'login-password'` | Login and password alert |

### AlertButton [​](https://reactnative.dev/docs/next/alert\#alertbutton "Direct link to AlertButton")

An object describing the configuration of a button in the alert.

| Type |
| --- |
| array of objects |

**Objects properties:**

| Name | Type | Description |
| --- | --- | --- |
| text | string | Button label. |
| onPress | function | Callback function when button is pressed. |

### AlertOptions [​](https://reactnative.dev/docs/next/alert\#alertoptions "Direct link to AlertOptions")

| Type |
| --- |
| object |

**Properties:**

Is this page useful?

- [Example](https://reactnative.dev/docs/next/alert#example)
- [iOS](https://reactnative.dev/docs/next/alert#ios)
- [Android](https://reactnative.dev/docs/next/alert#android)
- [Example \\
Android](https://reactnative.dev/docs/next/alert#example-android)
- [Methods](https://reactnative.dev/docs/next/alert#methods)
- [`alert()`](https://reactnative.dev/docs/next/alert#alert)
- [`prompt()` \\
iOS](https://reactnative.dev/docs/next/alert#prompt-ios)
- [Type Definitions](https://reactnative.dev/docs/next/alert#type-definitions)
- [AlertButtonStyle \\
iOS](https://reactnative.dev/docs/next/alert#alertbuttonstyle-ios)
- [AlertType \\
iOS](https://reactnative.dev/docs/next/alert#alerttype-ios)
- [AlertButton](https://reactnative.dev/docs/next/alert#alertbutton)
- [AlertOptions](https://reactnative.dev/docs/next/alert#alertoptions)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/appstate

[Skip to main content](https://reactnative.dev/docs/next/appstate#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/appstate)** (0.81).

Version: Next

On this page

`AppState` can tell you if the app is in the foreground or background, and notify you when the state changes.

AppState is frequently used to determine the intent and proper behavior when handling push notifications.

### App States [​](https://reactnative.dev/docs/next/appstate\#app-states "Direct link to App States")

- `active` \- The app is running in the foreground
- `background` \- The app is running in the background. The user is either:

- in another app
- on the home screen
- \[Android\] on another `Activity` (even if it was launched by your app)
- \[iOS\] `inactive` \- This is a state that occurs when transitioning between foreground & background, and during periods of inactivity such as entering the multitasking view, opening the Notification Center or in the event of an incoming call.

For more information, see [Apple's documentation](https://developer.apple.com/documentation/uikit/app_and_scenes/managing_your_app_s_life_cycle)

## Basic Usage [​](https://reactnative.dev/docs/next/appstate\#basic-usage "Direct link to Basic Usage")

To see the current state, you can check `AppState.currentState`, which will be kept up-to-date. However, `currentState` will be null at launch while `AppState` retrieves it over the bridge.

AppState Example - Snack

# AppState Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React, {useRef, useState, useEffect} from 'react';
import {AppState, StyleSheet, Text} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const appState = useRef(AppState.currentState);
const \[appStateVisible, setAppStateVisible\] = useState(appState.current);

if (
appState.current.match(/inactive\|background/) &&
nextAppState === 'active'
) {
console.log('App has come to the foreground!');
}

appState.current = nextAppState;
setAppStateVisible(appState.current);
console.log('AppState', appState.current);
});

subscription.remove();
};
}, \[\]);

return (

};

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
alignItems: 'center',
},
});

export default AppStateExample;

const appState = useRef(AppState.currentState);
const [appStateVisible, setAppStateVisible] = useState(appState.current);

if (
appState.current.match(/inactive|background/) &&
nextAppState === 'active'
) {
console.log('App has come to the foreground!');
}

appState.current = nextAppState;
setAppStateVisible(appState.current);
console.log('AppState', appState.current);
});

subscription.remove();
};
}, []);

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
alignItems: 'center',
},
});

Snack

Current state is: active

Updating…

PreviewMy DeviceAndroidiOSWeb

This example will only ever appear to say "Current state is: active" because the app is only visible to the user when in the `active` state, and the null state will happen only momentarily. If you want to experiment with the code we recommend to use your own device instead of embedded preview.

* * *

# Reference

## Events [​](https://reactnative.dev/docs/next/appstate\#events "Direct link to Events")

### `change` [​](https://reactnative.dev/docs/next/appstate\#change "Direct link to change")

This event is received when the app state has changed. The listener is called with one of [the current app state values](https://reactnative.dev/docs/next/appstate#app-states).

### `memoryWarning` [​](https://reactnative.dev/docs/next/appstate\#memorywarning "Direct link to memorywarning")

This event is used in the need of throwing memory warning or releasing it.

### `focus` Android [​](https://reactnative.dev/docs/next/appstate\#focus-android "Direct link to focus-android")

Received when the app gains focus (the user is interacting with the app).

### `blur` Android [​](https://reactnative.dev/docs/next/appstate\#blur-android "Direct link to blur-android")

Received when the user is not actively interacting with the app. Useful in situations when the user pulls down the [notification drawer](https://developer.android.com/guide/topics/ui/notifiers/notifications#bar-and-drawer). `AppState` won't change but the `blur` event will get fired.

## Methods [​](https://reactnative.dev/docs/next/appstate\#methods "Direct link to Methods")

### `addEventListener()` [​](https://reactnative.dev/docs/next/appstate\#addeventlistener "Direct link to addeventlistener")

tsx

```codeBlockLines_AclH
static addEventListener(
type: AppStateEvent,

): NativeEventSubscription;

Sets up a function that will be called whenever the specified event type on AppState occurs. Valid values for `eventType` are
[listed above](https://reactnative.dev/docs/next/appstate#events). Returns the `EventSubscription`.

## Properties [​](https://reactnative.dev/docs/next/appstate\#properties "Direct link to Properties")

### `currentState` [​](https://reactnative.dev/docs/next/appstate\#currentstate "Direct link to currentstate")

```codeBlockLines_AclH
static currentState: AppStateStatus;

Is this page useful?

- [App States](https://reactnative.dev/docs/next/appstate#app-states)
- [Basic Usage](https://reactnative.dev/docs/next/appstate#basic-usage)
- [Events](https://reactnative.dev/docs/next/appstate#events)
- [`change`](https://reactnative.dev/docs/next/appstate#change)
- [`memoryWarning`](https://reactnative.dev/docs/next/appstate#memorywarning)
- [`focus` \\
Android](https://reactnative.dev/docs/next/appstate#focus-android)
- [`blur` \\
Android](https://reactnative.dev/docs/next/appstate#blur-android)
- [Methods](https://reactnative.dev/docs/next/appstate#methods)
- [`addEventListener()`](https://reactnative.dev/docs/next/appstate#addeventlistener)
- [Properties](https://reactnative.dev/docs/next/appstate#properties)
- [`currentState`](https://reactnative.dev/docs/next/appstate#currentstate)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/appearance

[Skip to main content](https://reactnative.dev/docs/next/appearance#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/appearance)** (0.81).

Version: Next

On this page

tsx

```codeBlockLines_AclH
import {Appearance} from 'react-native';

The `Appearance` module exposes information about the user's appearance preferences, such as their preferred color scheme (light or dark).

#### Developer notes [​](https://reactnative.dev/docs/next/appearance\#developer-notes "Direct link to Developer notes")

- Android
- iOS
- Web

info

The `Appearance` API is inspired by the [Media Queries draft](https://drafts.csswg.org/mediaqueries-5/) from the W3C. The color scheme preference is modeled after the [`prefers-color-scheme` CSS media feature](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme).

The color scheme preference will map to the user's Light or [Dark theme](https://developer.android.com/guide/topics/ui/look-and-feel/darktheme) preference on Android 10 (API level 29) devices and higher.

The color scheme preference will map to the user's Light or [Dark Mode](https://developer.apple.com/design/human-interface-guidelines/ios/visual-design/dark-mode/) preference on iOS 13 devices and higher.

note

When taking a screenshot, by default, the color scheme may flicker between light and dark mode. It happens because the iOS takes snapshots on both color schemes and updating the user interface with color scheme is asynchronous.

## Example [​](https://reactnative.dev/docs/next/appearance\#example "Direct link to Example")

You can use the `Appearance` module to determine if the user prefers a dark color scheme:

```codeBlockLines_AclH
const colorScheme = Appearance.getColorScheme();
if (colorScheme === 'dark') {
// Use dark color scheme
}

Although the color scheme is available immediately, this may change (e.g. scheduled color scheme change at sunrise or sunset). Any rendering logic or styles that depend on the user preferred color scheme should try to call this function on every render, rather than caching the value. For example, you may use the [`useColorScheme`](https://reactnative.dev/docs/next/usecolorscheme) React hook as it provides and subscribes to color scheme updates, or you may use inline styles rather than setting a value in a `StyleSheet`.

* * *

# Reference

## Methods [​](https://reactnative.dev/docs/next/appearance\#methods "Direct link to Methods")

### `getColorScheme()` [​](https://reactnative.dev/docs/next/appearance\#getcolorscheme "Direct link to getcolorscheme")

```codeBlockLines_AclH
static getColorScheme(): 'light' | 'dark' | null;

Indicates the current user preferred color scheme. The value may be updated later, either through direct user action (e.g. theme selection in device settings or application-level selected user interface style via `setColorScheme`) or on a schedule (e.g. light and dark themes that follow the day/night cycle).

Supported color schemes:

- `'light'`: The user prefers a light color theme.
- `'dark'`: The user prefers a dark color theme.
- `null`: The user has not indicated a preferred color theme.

See also: `useColorScheme` hook.

`getColorScheme()` will always return `light` when debugging with Chrome.

### `setColorScheme()` [​](https://reactnative.dev/docs/next/appearance\#setcolorscheme "Direct link to setcolorscheme")

```codeBlockLines_AclH
static setColorScheme('light' | 'dark' | null): void;

Force the application to always adopt a light or dark interface style. The default value is `null` which causes the application to inherit the system's interface style. If you assign a different value, the new style applies to the application and all native elements within the application (Alerts, Pickers etc).

- `light`: Apply light user interface style.
- `dark`: Apply dark user interface style.
- null: Follow the system's interface style.

The change will not affect the system's selected interface style or any style set in other applications.

### `addChangeListener()` [​](https://reactnative.dev/docs/next/appearance\#addchangelistener "Direct link to addchangelistener")

```codeBlockLines_AclH
static addChangeListener(

): NativeEventSubscription;

Add an event handler that is fired when appearance preferences change.

Is this page useful?

- [Example](https://reactnative.dev/docs/next/appearance#example)
- [Methods](https://reactnative.dev/docs/next/appearance#methods)
- [`getColorScheme()`](https://reactnative.dev/docs/next/appearance#getcolorscheme)
- [`setColorScheme()`](https://reactnative.dev/docs/next/appearance#setcolorscheme)
- [`addChangeListener()`](https://reactnative.dev/docs/next/appearance#addchangelistener)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/boxshadowvalue

[Skip to main content](https://reactnative.dev/docs/next/boxshadowvalue#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/boxshadowvalue)** (0.81).

Version: Next

On this page

The `BoxShadowValue` object is taken by the [`boxShadow`](https://reactnative.dev/docs/next/view-style-props#boxshadow) style prop. It is comprised of 2-4 lengths, an optional color, and an optional `inset` boolean. These values collectively define the box shadow's color, position, size, and blurriness.

## Example [​](https://reactnative.dev/docs/next/boxshadowvalue\#example "Direct link to Example")

js

```codeBlockLines_AclH
{
offsetX: 10,
offsetY: -3,
blurRadius: '15px',
spreadDistance: '10px',
color: 'red',
inset: true,
}

## Keys and values [​](https://reactnative.dev/docs/next/boxshadowvalue\#keys-and-values "Direct link to Keys and values")

### `offsetX` [​](https://reactnative.dev/docs/next/boxshadowvalue\#offsetx "Direct link to offsetx")

The offset on the x-axis. This can be positive or negative. A positive value indicates right and negative indicates left.

| Type | Optional |
| --- | --- |
| number \| string | No |

### `offsetY` [​](https://reactnative.dev/docs/next/boxshadowvalue\#offsety "Direct link to offsety")

The offset on the y-axis. This can be positive or negative. A positive value indicates up and negative indicates down.

### `blurRadius` [​](https://reactnative.dev/docs/next/boxshadowvalue\#blurradius "Direct link to blurradius")

Represents the radius used in the [Guassian blur](https://en.wikipedia.org/wiki/Gaussian_blur) algorithm. The larger the value the blurrier the shadow is. Only non-negative values are valid. The default is 0.

| Type | Optional |
| --- | --- |
| numer \| string | Yes |

### `spreadDistance` [​](https://reactnative.dev/docs/next/boxshadowvalue\#spreaddistance "Direct link to spreaddistance")

How much larger or smaller the shadow grows or shrinks. A positive value will grow the shadow, a negative value will shrink the shadow.

### `color` [​](https://reactnative.dev/docs/next/boxshadowvalue\#color "Direct link to color")

The color of the shadow. The default is `black`.

| Type | Optional |
| --- | --- |
| [color](https://reactnative.dev/docs/next/colors) | Yes |

### `inset` [​](https://reactnative.dev/docs/next/boxshadowvalue\#inset "Direct link to inset")

Whether the shadow is inset or not. Inset shadows will appear around the inside of the element's border box as opposed to the outside.

| Type | Optional |
| --- | --- |
| boolean | Yes |

## Used by [​](https://reactnative.dev/docs/next/boxshadowvalue\#used-by "Direct link to Used by")

- [`boxShadow`](https://reactnative.dev/docs/next/view-style-props#boxshadow)

Is this page useful?

- [Example](https://reactnative.dev/docs/next/boxshadowvalue#example)
- [Keys and values](https://reactnative.dev/docs/next/boxshadowvalue#keys-and-values)
- [`offsetX`](https://reactnative.dev/docs/next/boxshadowvalue#offsetx)
- [`offsetY`](https://reactnative.dev/docs/next/boxshadowvalue#offsety)
- [`blurRadius`](https://reactnative.dev/docs/next/boxshadowvalue#blurradius)
- [`spreadDistance`](https://reactnative.dev/docs/next/boxshadowvalue#spreaddistance)
- [`color`](https://reactnative.dev/docs/next/boxshadowvalue#color)
- [`inset`](https://reactnative.dev/docs/next/boxshadowvalue#inset)
- [Used by](https://reactnative.dev/docs/next/boxshadowvalue#used-by)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/actionsheetios

[Skip to main content](https://reactnative.dev/docs/next/actionsheetios#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/actionsheetios)** (0.81).

Version: Next

On this page

Displays native to iOS [Action Sheet](https://developer.apple.com/design/human-interface-guidelines/ios/views/action-sheets/) component.

## Example [​](https://reactnative.dev/docs/next/actionsheetios\#example "Direct link to Example")

ActionSheetIOS Example - Snack

# ActionSheetIOS Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React, {useState} from 'react';
import {ActionSheetIOS, Button, StyleSheet, Text} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const \[result, setResult\] = useState('🔮');

{
options: \['Cancel', 'Generate number', 'Reset'\],
destructiveButtonIndex: 2,
cancelButtonIndex: 0,
userInterfaceStyle: 'dark',
},

if (buttonIndex === 0) {
// cancel action
} else if (buttonIndex === 1) {
setResult(String(Math.floor(Math.random() \* 100) + 1));
} else if (buttonIndex === 2) {
setResult('🔮');
}
},
);

return (

};

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
},
result: {
fontSize: 64,
textAlign: 'center',
},
});

export default App;

const [result, setResult] = useState('🔮');

{
options: ['Cancel', 'Generate number', 'Reset'],
destructiveButtonIndex: 2,
cancelButtonIndex: 0,
userInterfaceStyle: 'dark',
},

if (buttonIndex === 0) {
// cancel action
} else if (buttonIndex === 1) {
setResult(String(Math.floor(Math.random() * 100) + 1));
} else if (buttonIndex === 2) {
setResult('🔮');
}
},
);

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
},
result: {
fontSize: 64,
textAlign: 'center',
},
});

### Download [Expo Go](https://expo.dev/client) and scan the QR code to get started.

exp://u.expo.dev/933fd9c0-1666-11e7-afca-d980795c5824?runtime-version=exposdk%3A53.0.0&channel-name=production&snack-channel=2nRwUw7ols

### Connected devices

0

[Log in](https://expo.dev/login) to open this Snack from Expo Go on your device or simulator.

PreviewMy DeviceiOS

# Reference

## Methods [​](https://reactnative.dev/docs/next/actionsheetios\#methods "Direct link to Methods")

### `showActionSheetWithOptions()` [​](https://reactnative.dev/docs/next/actionsheetios\#showactionsheetwithoptions "Direct link to showactionsheetwithoptions")

tsx

```codeBlockLines_AclH
static showActionSheetWithOptions: (
options: ActionSheetIOSOptions,

);

Display an iOS action sheet. The `options` object must contain one or more of:

- `options` (array of strings) - a list of button titles (required)
- `cancelButtonIndex` (int) - index of cancel button in `options`
- `cancelButtonTintColor` (string) - the [color](https://reactnative.dev/docs/next/colors) used for the change the text color of the cancel button
- `destructiveButtonIndex` (int or array of ints) - indices of destructive buttons in `options`
- `title` (string) - a title to show above the action sheet
- `message` (string) - a message to show below the title
- `anchor` (number) - the node to which the action sheet should be anchored (used for iPad)
- `tintColor` (string) - the [color](https://reactnative.dev/docs/next/colors) used for non-destructive button titles
- `disabledButtonIndices` (array of numbers) - a list of button indices which should be disabled
- `userInterfaceStyle` (string) - the interface style used for the action sheet, can be set to `light` or `dark`, otherwise the default system style will be used

The 'callback' function takes one parameter, the zero-based index of the selected item.

Minimal example:

```codeBlockLines_AclH
ActionSheetIOS.showActionSheetWithOptions(
{
options: ['Cancel', 'Remove'],
destructiveButtonIndex: 1,
cancelButtonIndex: 0,
},

if (buttonIndex === 1) {
/* destructive action */
}
},
);

* * *

### `dismissActionSheet()` [​](https://reactnative.dev/docs/next/actionsheetios\#dismissactionsheet "Direct link to dismissactionsheet")

```codeBlockLines_AclH
static dismissActionSheet();

Dismisses the most upper iOS action sheet presented, if no action sheet is present a warning is displayed.

### `showShareActionSheetWithOptions()` [​](https://reactnative.dev/docs/next/actionsheetios\#showshareactionsheetwithoptions "Direct link to showshareactionsheetwithoptions")

```codeBlockLines_AclH
static showShareActionSheetWithOptions: (
options: ShareActionSheetIOSOptions,

Display the iOS share sheet. The `options` object should contain one or both of `message` and `url` and can additionally have a `subject` or `excludedActivityTypes`:

- `url` (string) - a URL to share
- `message` (string) - a message to share
- `subject` (string) - a subject for the message
- `excludedActivityTypes` (array) - the activities to exclude from the ActionSheet

note

If `url` points to a local file, or is a base64-encoded uri, the file it points to will be loaded and shared directly. In this way, you can share images, videos, PDF files, etc. If `url` points to a remote file or address it must conform to URL format as described in [RFC 2396](https://www.ietf.org/rfc/rfc2396.txt). For example, a web URL without a proper protocol (HTTP/HTTPS) will not be shared.

The 'failureCallback' function takes one parameter, an error object. The only property defined on this object is an optional `stack` property of type `string`.

The 'successCallback' function takes two parameters:

- a boolean value signifying success or failure
- a string that, in the case of success, indicates the method of sharing

Is this page useful?

- [Example](https://reactnative.dev/docs/next/actionsheetios#example)
- [Methods](https://reactnative.dev/docs/next/actionsheetios#methods)
- [`showActionSheetWithOptions()`](https://reactnative.dev/docs/next/actionsheetios#showactionsheetwithoptions)
- [`dismissActionSheet()`](https://reactnative.dev/docs/next/actionsheetios#dismissactionsheet)
- [`showShareActionSheetWithOptions()`](https://reactnative.dev/docs/next/actionsheetios#showshareactionsheetwithoptions)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/backhandler

[Skip to main content](https://reactnative.dev/docs/next/backhandler#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/backhandler)** (0.81).

Version: Next

On this page

The Backhandler API detects hardware button presses for back navigation, lets you register event listeners for the system's back action, and lets you control how your application responds. It is Android-only.

The event subscriptions are called in reverse order (i.e. the last registered subscription is called first).

- **If one subscription returns true,** then subscriptions registered earlier will not be called.
- **If no subscription returns true or none are registered,** it programmatically invokes the default back button functionality to exit the app.

Warning for modal users

If your app shows an opened `Modal`, `BackHandler` will not publish any events ( [see `Modal` docs](https://reactnative.dev/docs/next/modal#onrequestclose)).

## Pattern [​](https://reactnative.dev/docs/next/backhandler\#pattern "Direct link to Pattern")

tsx

```codeBlockLines_AclH
const subscription = BackHandler.addEventListener(
'hardwareBackPress',
function () {
/**
* this.onMainScreen and this.goBack are just examples,
* you need to use your own implementation here.

* Typically you would use the navigator here to go to the last state.
*/

if (!this.onMainScreen()) {
this.goBack();
/**
* When true is returned the event will not be bubbled up
* & no other back action will execute
*/
return true;
}
/**
* Returning false will let the event to bubble up & let other event listeners
* or the system's default back action to be executed.
*/
return false;
},
);

// Unsubscribe the listener on unmount
subscription.remove();

## Example [​](https://reactnative.dev/docs/next/backhandler\#example "Direct link to Example")

The following example implements a scenario where you confirm if the user wants to exit the app:

BackHandler - Snack

# BackHandler

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React, {useEffect} from 'react';
import {Text, StyleSheet, BackHandler, Alert} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

Alert.alert('Hold on!', 'Are you sure you want to go back?', \[\
{\
text: 'Cancel',\

style: 'cancel',\
},\

\]);
return true;
};

const backHandler = BackHandler.addEventListener(
'hardwareBackPress',
backAction,
);

}, \[\]);

return (

};

const styles = StyleSheet.create({
container: {
flex: 1,
alignItems: 'center',
justifyContent: 'center',
},
text: {
fontSize: 18,
fontWeight: 'bold',
},
});

export default App;

Alert.alert('Hold on!', 'Are you sure you want to go back?', [\
{\
text: 'Cancel',\

style: 'cancel',\
},\

]);
return true;
};

const backHandler = BackHandler.addEventListener(
'hardwareBackPress',
backAction,
);

}, []);

const styles = StyleSheet.create({
container: {
flex: 1,
alignItems: 'center',
justifyContent: 'center',
},
text: {
fontSize: 18,
fontWeight: 'bold',
},
});

### Download [Expo Go](https://expo.dev/client) and scan the QR code to get started.

exp://u.expo.dev/933fd9c0-1666-11e7-afca-d980795c5824?runtime-version=exposdk%3A53.0.0&channel-name=production&snack-channel=Mstdi0jLE3

### Connected devices

0

[Log in](https://expo.dev/login) to open this Snack from Expo Go on your device or simulator.

PreviewMy DeviceAndroid

`BackHandler.addEventListener` creates an event listener & returns a `NativeEventSubscription` object which should be cleared using `NativeEventSubscription.remove` method.

## Usage with React Navigation [​](https://reactnative.dev/docs/next/backhandler\#usage-with-react-navigation "Direct link to Usage with React Navigation")

If you are using React Navigation to navigate across different screens, you can follow their guide on [Custom Android back button behaviour](https://reactnavigation.org/docs/custom-android-back-button-handling/)

## Backhandler hook [​](https://reactnative.dev/docs/next/backhandler\#backhandler-hook "Direct link to Backhandler hook")

[React Native Hooks](https://github.com/react-native-community/hooks#usebackhandler) has a nice `useBackHandler` hook which will simplify the process of setting up event listeners.

* * *

# Reference

## Methods [​](https://reactnative.dev/docs/next/backhandler\#methods "Direct link to Methods")

### `addEventListener()` [​](https://reactnative.dev/docs/next/backhandler\#addeventlistener "Direct link to addeventlistener")

```codeBlockLines_AclH
static addEventListener(
eventName: BackPressEventName,

): NativeEventSubscription;

### `exitApp()` [​](https://reactnative.dev/docs/next/backhandler\#exitapp "Direct link to exitapp")

```codeBlockLines_AclH
static exitApp();

Is this page useful?

- [Pattern](https://reactnative.dev/docs/next/backhandler#pattern)
- [Example](https://reactnative.dev/docs/next/backhandler#example)
- [Usage with React Navigation](https://reactnative.dev/docs/next/backhandler#usage-with-react-navigation)
- [Backhandler hook](https://reactnative.dev/docs/next/backhandler#backhandler-hook)
- [Methods](https://reactnative.dev/docs/next/backhandler#methods)
- [`addEventListener()`](https://reactnative.dev/docs/next/backhandler#addeventlistener)
- [`exitApp()`](https://reactnative.dev/docs/next/backhandler#exitapp)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/activityindicator

[Skip to main content](https://reactnative.dev/docs/next/activityindicator#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/activityindicator)** (0.81).

Version: Next

On this page

Displays a circular loading indicator.

## Example [​](https://reactnative.dev/docs/next/activityindicator\#example "Direct link to Example")

ActivityIndicator Example - Snack

# ActivityIndicator Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {ActivityIndicator, StyleSheet} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
},
horizontal: {
flexDirection: 'row',
justifyContent: 'space-around',
padding: 10,
},
});

export default App;

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
},
horizontal: {
flexDirection: 'row',
justifyContent: 'space-around',
padding: 10,
},
});

Snack

Updating…

PreviewMy DeviceAndroidiOSWeb

# Reference

## Props [​](https://reactnative.dev/docs/next/activityindicator\#props "Direct link to Props")

### [View Props](https://reactnative.dev/docs/next/view\#props) [​](https://reactnative.dev/docs/next/activityindicator\#view-props "Direct link to view-props")

Inherits [View Props](https://reactnative.dev/docs/next/view#props).

* * *

### `animating` [​](https://reactnative.dev/docs/next/activityindicator\#animating "Direct link to animating")

Whether to show the indicator ( `true`) or hide it ( `false`).

| Type | Default |
| --- | --- |
| bool | `true` |

### `color` [​](https://reactnative.dev/docs/next/activityindicator\#color "Direct link to color")

The foreground color of the spinner.

| Type | Default |
| --- | --- |

### `hidesWhenStopped` iOS [​](https://reactnative.dev/docs/next/activityindicator\#hideswhenstopped-ios "Direct link to hideswhenstopped-ios")

Whether the indicator should hide when not animating.

### `ref` [​](https://reactnative.dev/docs/next/activityindicator\#ref "Direct link to ref")

A ref setter that will be assigned an [element node](https://reactnative.dev/docs/next/element-nodes) when mounted.

### `size` [​](https://reactnative.dev/docs/next/activityindicator\#size "Direct link to size")

Size of the indicator.

Is this page useful?

- [Example](https://reactnative.dev/docs/next/activityindicator#example)
- [Props](https://reactnative.dev/docs/next/activityindicator#props)
- [View Props](https://reactnative.dev/docs/next/activityindicator#view-props)
- [`animating`](https://reactnative.dev/docs/next/activityindicator#animating)
- [`color`](https://reactnative.dev/docs/next/activityindicator#color)
- [`hidesWhenStopped` \\
iOS](https://reactnative.dev/docs/next/activityindicator#hideswhenstopped-ios)
- [`ref`](https://reactnative.dev/docs/next/activityindicator#ref)
- [`size`](https://reactnative.dev/docs/next/activityindicator#size)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/accessibilityinfo

[Skip to main content](https://reactnative.dev/docs/next/accessibilityinfo#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/accessibilityinfo)** (0.81).

Version: Next

On this page

Sometimes it's useful to know whether or not the device has a screen reader that is currently active. The `AccessibilityInfo` API is designed for this purpose. You can use it to query the current state of the screen reader as well as to register to be notified when the state of the screen reader changes.

## Example [​](https://reactnative.dev/docs/next/accessibilityinfo\#example "Direct link to Example")

AccessibilityInfo Example - Snack

# AccessibilityInfo Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React, {useState, useEffect} from 'react';
import {AccessibilityInfo, Text, StyleSheet} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const \[reduceMotionEnabled, setReduceMotionEnabled\] = useState(false);
const \[screenReaderEnabled, setScreenReaderEnabled\] = useState(false);

const reduceMotionChangedSubscription = AccessibilityInfo.addEventListener(
'reduceMotionChanged',

setReduceMotionEnabled(isReduceMotionEnabled);
},
);
const screenReaderChangedSubscription = AccessibilityInfo.addEventListener(
'screenReaderChanged',

setScreenReaderEnabled(isScreenReaderEnabled);
},
);

setReduceMotionEnabled(isReduceMotionEnabled);
});

setScreenReaderEnabled(isScreenReaderEnabled);
});

reduceMotionChangedSubscription.remove();
screenReaderChangedSubscription.remove();
};
}, \[\]);

return (

};

const styles = StyleSheet.create({
container: {
flex: 1,
alignItems: 'center',
justifyContent: 'center',
},
status: {
margin: 30,
},
});

export default App;

const [reduceMotionEnabled, setReduceMotionEnabled] = useState(false);
const [screenReaderEnabled, setScreenReaderEnabled] = useState(false);

const reduceMotionChangedSubscription = AccessibilityInfo.addEventListener(
'reduceMotionChanged',

setReduceMotionEnabled(isReduceMotionEnabled);
},
);
const screenReaderChangedSubscription = AccessibilityInfo.addEventListener(
'screenReaderChanged',

setScreenReaderEnabled(isScreenReaderEnabled);
},
);

setReduceMotionEnabled(isReduceMotionEnabled);
});

setScreenReaderEnabled(isScreenReaderEnabled);
});

reduceMotionChangedSubscription.remove();
screenReaderChangedSubscription.remove();
};
}, []);

const styles = StyleSheet.create({
container: {
flex: 1,
alignItems: 'center',
justifyContent: 'center',
},
status: {
margin: 30,
},
});

### Download [Expo Go](https://expo.dev/client) and scan the QR code to get started.

exp://u.expo.dev/933fd9c0-1666-11e7-afca-d980795c5824?runtime-version=exposdk%3A53.0.0&channel-name=production&snack-channel=dpmfHTIyUG

### Connected devices

0

[Log in](https://expo.dev/login) to open this Snack from Expo Go on your device or simulator.

PreviewMy DeviceAndroidiOS

* * *

# Reference

## Methods [​](https://reactnative.dev/docs/next/accessibilityinfo\#methods "Direct link to Methods")

### `addEventListener()` [​](https://reactnative.dev/docs/next/accessibilityinfo\#addeventlistener "Direct link to addeventlistener")

tsx

```codeBlockLines_AclH
static addEventListener(
eventName: AccessibilityChangeEventName | AccessibilityAnnouncementEventName,
handler: (
event: AccessibilityChangeEvent | AccessibilityAnnouncementFinishedEvent,

): EmitterSubscription;

Add an event handler. Supported events:

| Event name | Description |
| --- | --- |

| `reduceMotionChanged` | Fires when the state of the reduce motion toggle changes. The argument to the event handler is a boolean. The boolean is `true` when a reduce motion is enabled (or when "Transition Animation Scale" in "Developer options" is "Animation off") and `false` otherwise. |

| `screenReaderChanged` | Fires when the state of the screen reader changes. The argument to the event handler is a boolean. The boolean is `true` when a screen reader is enabled and `false` otherwise. |

### `announceForAccessibility()` [​](https://reactnative.dev/docs/next/accessibilityinfo\#announceforaccessibility "Direct link to announceforaccessibility")

```codeBlockLines_AclH
static announceForAccessibility(announcement: string);

Post a string to be announced by the screen reader.

### `announceForAccessibilityWithOptions()` [​](https://reactnative.dev/docs/next/accessibilityinfo\#announceforaccessibilitywithoptions "Direct link to announceforaccessibilitywithoptions")

```codeBlockLines_AclH
static announceForAccessibilityWithOptions(
announcement: string,
options: {queue?: boolean},
);

Post a string to be announced by the screen reader with modification options. By default announcements will interrupt any existing speech, but on iOS they can be queued behind existing speech by setting `queue` to `true` in the options object.

**Parameters:**

| Name | Type | Description |
| --- | --- | --- |

### `getRecommendedTimeoutMillis()` Android [​](https://reactnative.dev/docs/next/accessibilityinfo\#getrecommendedtimeoutmillis-android "Direct link to getrecommendedtimeoutmillis-android")

```codeBlockLines_AclH

Gets the timeout in millisecond that the user needs.
This value is set in "Time to take action (Accessibility timeout)" of "Accessibility" settings.

### `isAccessibilityServiceEnabled()` Android [​](https://reactnative.dev/docs/next/accessibilityinfo\#isaccessibilityserviceenabled-android "Direct link to isaccessibilityserviceenabled-android")

Check whether any accessibility service is enabled. This includes TalkBack but also any third-party accessibility app that may be installed. To only check whether TalkBack is enabled, use [isScreenReaderEnabled](https://reactnative.dev/docs/next/accessibilityinfo#isscreenreaderenabled). Returns a promise which resolves to a boolean. The result is `true` when some accessibility services is enabled and `false` otherwise.

note

Please use [`isScreenReaderEnabled`](https://reactnative.dev/docs/next/accessibilityinfo#isscreenreaderenabled) if you only want to check the status of TalkBack.

### `isBoldTextEnabled()` iOS [​](https://reactnative.dev/docs/next/accessibilityinfo\#isboldtextenabled-ios "Direct link to isboldtextenabled-ios")

Query whether a bold text is currently enabled. Returns a promise which resolves to a boolean. The result is `true` when bold text is enabled and `false` otherwise.

### `isGrayscaleEnabled()` iOS [​](https://reactnative.dev/docs/next/accessibilityinfo\#isgrayscaleenabled-ios "Direct link to isgrayscaleenabled-ios")

Query whether grayscale is currently enabled. Returns a promise which resolves to a boolean. The result is `true` when grayscale is enabled and `false` otherwise.

### `isInvertColorsEnabled()` iOS [​](https://reactnative.dev/docs/next/accessibilityinfo\#isinvertcolorsenabled-ios "Direct link to isinvertcolorsenabled-ios")

Query whether invert colors is currently enabled. Returns a promise which resolves to a boolean. The result is `true` when invert colors is enabled and `false` otherwise.

### `isReduceMotionEnabled()` [​](https://reactnative.dev/docs/next/accessibilityinfo\#isreducemotionenabled "Direct link to isreducemotionenabled")

Query whether reduce motion is currently enabled. Returns a promise which resolves to a boolean. The result is `true` when reduce motion is enabled and `false` otherwise.

### `isReduceTransparencyEnabled()` iOS [​](https://reactnative.dev/docs/next/accessibilityinfo\#isreducetransparencyenabled-ios "Direct link to isreducetransparencyenabled-ios")

Query whether reduce transparency is currently enabled. Returns a promise which resolves to a boolean. The result is `true` when a reduce transparency is enabled and `false` otherwise.

### `isScreenReaderEnabled()` [​](https://reactnative.dev/docs/next/accessibilityinfo\#isscreenreaderenabled "Direct link to isscreenreaderenabled")

Query whether a screen reader is currently enabled. Returns a promise which resolves to a boolean. The result is `true` when a screen reader is enabled and `false` otherwise.

### `prefersCrossFadeTransitions()` iOS [​](https://reactnative.dev/docs/next/accessibilityinfo\#preferscrossfadetransitions-ios "Direct link to preferscrossfadetransitions-ios")

Query whether reduce motion and prefer cross-fade transitions settings are currently enabled. Returns a promise which resolves to a boolean. The result is `true` when prefer cross-fade transitions is enabled and `false` otherwise.

### `setAccessibilityFocus()` [​](https://reactnative.dev/docs/next/accessibilityinfo\#setaccessibilityfocus "Direct link to setaccessibilityfocus")

```codeBlockLines_AclH
static setAccessibilityFocus(reactTag: number);

Set accessibility focus to a React component.

On Android, this calls `UIManager.sendAccessibilityEvent` method with passed `reactTag` and `UIManager.AccessibilityEventTypes.typeViewFocused` arguments.

Make sure that any `View` you want to receive the accessibility focus has `accessible={true}`.

Is this page useful?

- [Example](https://reactnative.dev/docs/next/accessibilityinfo#example)
- [Methods](https://reactnative.dev/docs/next/accessibilityinfo#methods)
- [`addEventListener()`](https://reactnative.dev/docs/next/accessibilityinfo#addeventlistener)
- [`announceForAccessibility()`](https://reactnative.dev/docs/next/accessibilityinfo#announceforaccessibility)
- [`announceForAccessibilityWithOptions()`](https://reactnative.dev/docs/next/accessibilityinfo#announceforaccessibilitywithoptions)
- [`getRecommendedTimeoutMillis()` \\
Android](https://reactnative.dev/docs/next/accessibilityinfo#getrecommendedtimeoutmillis-android)
- [`isAccessibilityServiceEnabled()` \\
Android](https://reactnative.dev/docs/next/accessibilityinfo#isaccessibilityserviceenabled-android)
- [`isBoldTextEnabled()` \\
iOS](https://reactnative.dev/docs/next/accessibilityinfo#isboldtextenabled-ios)
- [`isGrayscaleEnabled()` \\
iOS](https://reactnative.dev/docs/next/accessibilityinfo#isgrayscaleenabled-ios)
- [`isInvertColorsEnabled()` \\
iOS](https://reactnative.dev/docs/next/accessibilityinfo#isinvertcolorsenabled-ios)
- [`isReduceMotionEnabled()`](https://reactnative.dev/docs/next/accessibilityinfo#isreducemotionenabled)
- [`isReduceTransparencyEnabled()` \\
iOS](https://reactnative.dev/docs/next/accessibilityinfo#isreducetransparencyenabled-ios)
- [`isScreenReaderEnabled()`](https://reactnative.dev/docs/next/accessibilityinfo#isscreenreaderenabled)
- [`prefersCrossFadeTransitions()` \\
iOS](https://reactnative.dev/docs/next/accessibilityinfo#preferscrossfadetransitions-ios)
- [`setAccessibilityFocus()`](https://reactnative.dev/docs/next/accessibilityinfo#setaccessibilityfocus)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/building-for-tv

[Skip to main content](https://reactnative.dev/docs/next/building-for-tv#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/building-for-tv)** (0.81).

Version: Next

TV devices support has been implemented with the intention of making existing React Native applications work on Apple TV and Android TV, with few or no changes needed in the JavaScript code for the applications.

Deprecated

TV support has moved to the [React Native for TV](https://github.com/react-native-tvos/react-native-tvos#readme) repository. Please see the **README** there for information on projects for Apple TV or Android TV.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/build-speed

[Skip to main content](https://reactnative.dev/docs/next/build-speed#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/build-speed)** (0.81).

Version: Next

On this page

Building your React Native app could be **expensive** and take several minutes of developers time.
This can be problematic as your project grows and generally in bigger organizations with multiple React Native developers.

To mitigate this performance hit, this page shares some suggestions on how to **improve your build time**.

info

Please note that those suggestions are advanced feature that requires some amount of understanding of how the native build tools work.

## Build only one ABI during development (Android-only) [​](https://reactnative.dev/docs/next/build-speed\#build-only-one-abi-during-development-android-only "Direct link to Build only one ABI during development (Android-only)")

When building your android app locally, by default you build all the 4 [Application Binary Interfaces (ABIs)](https://developer.android.com/ndk/guides/abis) : `armeabi-v7a`, `arm64-v8a`, `x86` & `x86_64`.

However, you probably don't need to build all of them if you're building locally and testing your emulator or on a physical device.

This should reduce your **native build time** by a ~75% factor.

If you're using the React Native CLI, you can add the `--active-arch-only` flag to the `run-android` command. This flag will make sure the correct ABI is picked up from either the running emulator or the plugged in phone. To confirm that this approach is working fine, you'll see a message like `info Detected architectures arm64-v8a` on console.

```codeBlockLines_AclH
$ yarn react-native run-android --active-arch-only

[ ... ]
info Running jetifier to migrate libraries to AndroidX. You can disable it using "--no-jetifier" flag.
Jetifier found 1037 file(s) to forward-jetify. Using 32 workers...
info JS server already running.
info Detected architectures arm64-v8a
info Installing the app...

This mechanism relies on the `reactNativeArchitectures` Gradle property.

Therefore, if you're building directly with Gradle from the command line and without the CLI, you can specify the ABI you want to build as follows:

```codeBlockLines_AclH
$ ./gradlew :app:assembleDebug -PreactNativeArchitectures=x86,x86_64

This can be useful if you wish to build your Android App on a CI and use a matrix to parallelize the build of the different architectures.

If you wish, you can also override this value locally, using the `gradle.properties` file you have in the [top-level folder](https://github.com/facebook/react-native/blob/19cf70266eb8ca151aa0cc46ac4c09cb987b2ceb/template/android/gradle.properties#L30-L33) of your project:

```codeBlockLines_AclH
# Use this property to specify which architecture you want to build.
# You can also override it from the CLI using

reactNativeArchitectures=armeabi-v7a,arm64-v8a,x86,x86_64

Once you build a **release version** of your app, don't forget to remove those flags as you want to build an apk/app bundle that works for all the ABIs and not only for the one you're using in your daily development workflow.

## Enable Configuration Caching (Android-only) [​](https://reactnative.dev/docs/next/build-speed\#enable-configuration-caching-android-only "Direct link to Enable Configuration Caching (Android-only)")

Since React Native 0.79, you can also enable Gradle Configuration Caching.

When you’re running an Android build with `yarn android`, you will be executing a Gradle build that is composed by two steps ( [source](https://docs.gradle.org/current/userguide/build_lifecycle.html)):

- Configuration phase, when all the `.gradle` files are evaluated.
- Execution phase, when the tasks are actually executed so the Java/Kotlin code is compiled and so on.

You will now be able to enable Configuration Caching, which will allow you to skip the Configuration phase on subsequent builds.

This is beneficial when making frequent changes to the native code as it improves build times.

For example here you can see how rebuilding faster it is to rebuild RN-Tester after a change in the native code:

You can enable Gradle Configuration Caching by adding the following line in your `android/gradle.properties` file:

```codeBlockLines_AclH
org.gradle.configuration-cache=true

Please refer to the [official Gradle documentation](https://docs.gradle.org/current/userguide/configuration_cache.html) for more resources on Configuration Caching.

## Using a Maven Mirror (Android-only) [​](https://reactnative.dev/docs/next/build-speed\#using-a-maven-mirror-android-only "Direct link to Using a Maven Mirror (Android-only)")

When building Android apps, your Gradle builds will need to download the necessary dependencies from Maven Central and other repositories from the internet.

If your organization is running a Maven repository mirror, you should consider using it as it will speed up your build, by downloading the artifacts from the mirror rather than from the internet.

You can configure a mirror by specifying the `exclusiveEnterpriseRepository` property in your `android/gradle.properties` file:

diff

# Use this property to enable or disable the Hermes JS engine.
# If set to false, you will be using JSC instead.
```codeBlockLines_AclH
hermesEnabled=true

# Use this property to configure a Maven enterprise repository
# that will be used exclusively to fetch all of your dependencies.
+exclusiveEnterpriseRepository=https://my.internal.proxy.net/

By setting this property, your build will fetch dependencies **exclusively** from your specified repository and not from others.

## Use a compiler cache [​](https://reactnative.dev/docs/next/build-speed\#use-a-compiler-cache "Direct link to Use a compiler cache")

If you're running frequent native builds (either C++ or Objective-C), you might benefit from using a **compiler cache**.

Specifically you can use two type of caches: local compiler caches and distributed compiler caches.

### Local caches [​](https://reactnative.dev/docs/next/build-speed\#local-caches "Direct link to Local caches")

The following instructions will work for **both Android & iOS**.
If you're building only Android apps, you should be good to go.
If you're building also iOS apps, please follow the instructions in the [Xcode Specific Setup](https://reactnative.dev/docs/next/build-speed#xcode-specific-setup) section below.

We suggest to use [**ccache**](https://ccache.dev/) to cache the compilation of your native builds.
Ccache works by wrapping the C++ compilers, storing the compilation results, and skipping the compilation
if an intermediate compilation result was originally stored.

Ccache is available in the package manager for most operating systems. On macOS, we can install ccache with `brew install ccache`.
Or you can follow the [official installation instructions](https://github.com/ccache/ccache/blob/master/doc/INSTALL.md) to install from source.

You can then do two clean builds (e.g. on Android you can first run `yarn react-native run-android`, delete the `android/app/build` folder and run the first command once more). You will notice that the second build was way faster than the first one (it should take seconds rather than minutes).
While building, you can verify that `ccache` works correctly and check the cache hits/miss rate `ccache -s`

```codeBlockLines_AclH
$ ccache -s
Summary:
Hits: 196 / 3068 (6.39 %)
Direct: 0 / 3068 (0.00 %)
Preprocessed: 196 / 3068 (6.39 %)
Misses: 2872
Direct: 3068
Preprocessed: 2872
Uncacheable: 1
Primary storage:
Hits: 196 / 6136 (3.19 %)
Misses: 5940
Cache size (GB): 0.60 / 20.00 (3.00 %)

Note that `ccache` aggregates the stats over all builds. You can use `ccache --zero-stats` to reset them before a build to verify the cache-hit ratio.

Should you need to wipe your cache, you can do so with `ccache --clear`

#### Xcode Specific Setup [​](https://reactnative.dev/docs/next/build-speed\#xcode-specific-setup "Direct link to Xcode Specific Setup")

To make sure `ccache` works correctly with iOS and Xcode, you need to enable React Native support for ccache in `ios/Podfile`.

Open `ios/Podfile` in your editor and uncomment the `ccache_enabled` line.

ruby

```codeBlockLines_AclH
post_install do |installer|
# https://github.com/facebook/react-native/blob/main/packages/react-native/scripts/react_native_pods.rb#L197-L202
react_native_post_install(
installer,
config[:reactNativePath],

# TODO: Uncomment the line below

)
end

#### Using this approach on a CI [​](https://reactnative.dev/docs/next/build-speed\#using-this-approach-on-a-ci "Direct link to Using this approach on a CI")

Ccache uses the `/Users/$USER/Library/Caches/ccache` folder on macOS to store the cache.
Therefore you could save & restore the corresponding folder also on CI to speedup your builds.

However, there are a couple of things to be aware:

1. On CI, we recommend to do a full clean build, to avoid poisoned cache problems. If you follow the approach mentioned in the previous paragraph, you should be able to parallelize the native build on 4 different ABIs and you will most likely not need `ccache` on CI.

2. `ccache` relies on timestamps to compute a cache hit. This doesn't work well on CI as files are re-downloaded at every CI run. To overcome this, you'll need to use the `compiler_check content` option which relies instead on [hashing the content of the file](https://ccache.dev/manual/4.3.html).

### Distributed caches [​](https://reactnative.dev/docs/next/build-speed\#distributed-caches "Direct link to Distributed caches")

Similar to local caches, you might want to consider using a distributed cache for your native builds.
This could be specifically useful in bigger organizations that are doing frequent native builds.

We recommend to use [sccache](https://github.com/mozilla/sccache) to achieve this.
We defer to the sccache [distributed compilation quickstart](https://github.com/mozilla/sccache/blob/main/docs/DistributedQuickstart.md) for instructions on how to setup and use this tool.

Is this page useful?

- [Build only one ABI during development (Android-only)](https://reactnative.dev/docs/next/build-speed#build-only-one-abi-during-development-android-only)
- [Enable Configuration Caching (Android-only)](https://reactnative.dev/docs/next/build-speed#enable-configuration-caching-android-only)
- [Using a Maven Mirror (Android-only)](https://reactnative.dev/docs/next/build-speed#using-a-maven-mirror-android-only)
- [Use a compiler cache](https://reactnative.dev/docs/next/build-speed#use-a-compiler-cache)
- [Local caches](https://reactnative.dev/docs/next/build-speed#local-caches)
- [Distributed caches](https://reactnative.dev/docs/next/build-speed#distributed-caches)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/app-extensions

[Skip to main content](https://reactnative.dev/docs/next/app-extensions#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/app-extensions)** (0.81).

Version: Next

On this page

App extensions let you provide custom functionality and content outside of your main app. There are different types of app extensions on iOS, and they are all covered in the [App Extension Programming Guide](https://developer.apple.com/library/content/documentation/General/Conceptual/ExtensibilityPG/index.html#//apple_ref/doc/uid/TP40014214-CH20-SW1). In this guide, we'll briefly cover how you may take advantage of app extensions on iOS.

## Memory use in extensions [​](https://reactnative.dev/docs/next/app-extensions\#memory-use-in-extensions "Direct link to Memory use in extensions")

As these extensions are loaded outside of the regular app sandbox, it's highly likely that several of these app extensions will be loaded simultaneously. As you might expect, these extensions have small memory usage limits. Keep these in mind when developing your app extensions. It's always highly recommended to test your application on an actual device, and more so when developing app extensions: too frequently, developers find that their extension works fine in the iOS Simulator, only to get user reports that their extension is not loading on actual devices.

### Today widget [​](https://reactnative.dev/docs/next/app-extensions\#today-widget "Direct link to Today widget")

The memory limit of a Today widget is 16 MB. As it happens, Today widget implementations using React Native may work unreliably because the memory usage tends to be too high. You can tell if your Today widget is exceeding the memory limit if it yields the message 'Unable to Load':

Always make sure to test your app extensions in a real device, but be aware that this may not be sufficient, especially when dealing with Today widgets. Debug-configured builds are more likely to exceed the memory limits, while release-configured builds don't fail right away. We highly recommend that you use [Xcode's Instruments](https://developer.apple.com/library/content/documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/index.html) to analyze your real world memory usage, as it's very likely that your release-configured build is very close to the 16 MB limit. In situations like these, you can quickly go over the 16 MB limit by performing common operations, such as fetching data from an API.

To experiment with the limits of React Native Today widget implementations, try extending the example project in [react-native-today-widget](https://github.com/matejkriz/react-native-today-widget/).

### Other app extensions [​](https://reactnative.dev/docs/next/app-extensions\#other-app-extensions "Direct link to Other app extensions")

Other types of app extensions have greater memory limits than the Today widget. For instance, Custom Keyboard extensions are limited to 48 MB, and Share extensions are limited to 120 MB. Implementing such app extensions with React Native is more viable. One proof of concept example is [react-native-ios-share-extension](https://github.com/andrewsardone/react-native-ios-share-extension).

Is this page useful?

- [Memory use in extensions](https://reactnative.dev/docs/next/app-extensions#memory-use-in-extensions)
- [Today widget](https://reactnative.dev/docs/next/app-extensions#today-widget)
- [Other app extensions](https://reactnative.dev/docs/next/app-extensions#other-app-extensions)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/accessibility

[Skip to main content](https://reactnative.dev/docs/next/accessibility#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/accessibility)** (0.81).

Version: Next

On this page

Both Android and iOS provide APIs for integrating apps with assistive technologies like the bundled screen readers VoiceOver (iOS) and TalkBack (Android). React Native has complementary APIs that let your app accommodate all users.

info

Android and iOS differ slightly in their approaches, and thus the React Native implementations may vary by platform.

## Accessibility properties [​](https://reactnative.dev/docs/next/accessibility\#accessibility-properties "Direct link to Accessibility properties")

### `accessible` [​](https://reactnative.dev/docs/next/accessibility\#accessible "Direct link to accessible")

When `true`, indicates that the view is discoverable by assistive technologies such as screen readers and hardware keyboards. Note that this does not necessarily mean that the view will be focused by VoiceOver or TalkBack. There are a number of reasons for this, such as VoiceOver disallowing nested accessibility elements, or TalkBack opting to focus some parent element instead.

By default, all touchable elements are accessible.

On Android, `accessible` will be translated into native [`focusable`](https://developer.android.com/reference/android/view/View#setFocusable(boolean)). On iOS, it translates into native [`isAccessibilityElement`](https://developer.apple.com/documentation/uikit/uiaccessibilityelement/isaccessibilityelement?language=objc).

tsx

```codeBlockLines_AclH

In the above example, accessibility focus is only available on the first child view with the `accessible` property, and not for the parent or sibling without `accessible`.

### `accessibilityLabel` [​](https://reactnative.dev/docs/next/accessibility\#accessibilitylabel "Direct link to accessibilitylabel")

When a view is marked as accessible, it is a good practice to set an `accessibilityLabel` on the view, so that people who use VoiceOver or TalkBack know what element they have selected. A screen reader will verbalize this string when the associated element is selected.

To use, set the `accessibilityLabel` property to a custom string on your View, Text, or Touchable:

```codeBlockLines_AclH
<TouchableOpacity
accessible={true}
accessibilityLabel="Tap me!"

In the above example, the `accessibilityLabel` on the TouchableOpacity element would default to "Press me!". The label is constructed by concatenating all Text node children separated by spaces.

### `accessibilityLabelledBy` Android [​](https://reactnative.dev/docs/next/accessibility\#accessibilitylabelledby-android "Direct link to accessibilitylabelledby-android")

A reference to another element [nativeID](https://reactnative.dev/docs/next/view#nativeid) used to build complex forms.
The value of `accessibilityLabelledBy` should match the `nativeID` of the related element:

accessibilityLabel="input"
accessibilityLabelledBy="formLabel"

In the above example, the screen reader announces `Input, Edit Box for Label for Input Field` when focusing on the TextInput.

### `accessibilityHint` [​](https://reactnative.dev/docs/next/accessibility\#accessibilityhint "Direct link to accessibilityhint")

An accessibility hint can be used to provide additional context to the user on the result of the action when it is not clear from the accessibility label alone.

Provide the `accessibilityHint` property a custom string on your View, Text, or Touchable:

```codeBlockLines_AclH
<TouchableOpacity
accessible={true}
accessibilityLabel="Go back"
accessibilityHint="Navigates to the previous screen"

iOS

In the above example, VoiceOver will read the hint after the label, if the user has hints enabled in the device's VoiceOver settings. Read more about guidelines for `accessibilityHint` in the [iOS Developer Docs](https://developer.apple.com/documentation/objectivec/nsobject/1615093-accessibilityhint)

Android

In the above example, TalkBack will read the hint after the label. At this time, hints cannot be turned off on Android.

### `accessibilityLanguage` iOS [​](https://reactnative.dev/docs/next/accessibility\#accessibilitylanguage-ios "Direct link to accessibilitylanguage-ios")

By using the `accessibilityLanguage` property, the screen reader will understand which language to use while reading the element's **label**, **value**, and **hint**. The provided string value must follow the [BCP 47 specification](https://www.rfc-editor.org/info/bcp47).

```codeBlockLines_AclH
<View
accessible={true}
accessibilityLabel="Pizza"

### `accessibilityIgnoresInvertColors` iOS [​](https://reactnative.dev/docs/next/accessibility\#accessibilityignoresinvertcolors-ios "Direct link to accessibilityignoresinvertcolors-ios")

Inverting screen colors is an accessibility feature available in iOS and iPadOS for people with color blindness, low vision, or vision impairment. If there's a view you don't want to invert when this setting is on, possibly a photo, set this property to `true`.

### `accessibilityLiveRegion` Android [​](https://reactnative.dev/docs/next/accessibility\#accessibilityliveregion-android "Direct link to accessibilityliveregion-android")

When components dynamically change, we want Talk

`accessibilityRole` communicates the purpose of a component to the user of assistive technology.

`accessibilityRole` can be one of the following:

- **adjustable** Used when an element can be "adjusted" (e.g. a slider).
- **alert** Used when an element contains important text to be presented to the user.
- **button** Used when the element should be treated as a button.
- **checkbox** Used when an element represents a checkbox that can be checked, unchecked, or have a mixed checked state.
- **combobox** Used when an element represents a combo box, which allows the user to select among several choices.
- **header** Used when an element acts as a header for a content section (e.g. the title of a navigation bar).
- **image** Used when the element should be treated as an image. Can be combined with a button or link.
- **imagebutton** Used when the element should be treated as a button and is also an image.
- **keyboardkey** Used when the element acts as a keyboard key.
- **link** Used when the element should be treated as a link.
- **menu** Used when the component is a menu of choices.
- **menubar** Used when a component is a container of multiple menus.
- **menuitem** Used to represent an item within a menu.
- **none** Used when the element has no role.
- **progressbar** Used to represent a component that indicates the progress of a task.
- **radio** Used to represent a radio button.
- **radiogroup** Used to represent a group of radio buttons.
- **scrollbar** Used to represent a scroll bar.
- **search** Used when a text field element should also be treated as a search field.
- **spinbutton** Used to represent a button that opens a list of choices.
- **summary** Used when an element can be used to provide a quick summary of current conditions in the app when the app first launches.
- **switch** Used to represent a switch that can be turned on and off.
- **tab** Used to represent a tab.
- **tablist** Used to represent a list of tabs.
- **text** Used when the element should be treated as static text that cannot change.
- **timer** Used to represent a timer.
- **togglebutton** Used to represent a toggle button. Should be used with accessibilityState checked to indicate if the button is toggled on or off.
- **toolbar** Used to represent a toolbar (a container of action buttons or components).
- **grid** Used with ScrollView, VirtualizedList, FlatList, or SectionList to represent a grid. Adds the in/out of grid announcements to Android's GridView.

### `accessibilityShowsLargeContentViewer` iOS [​](https://reactnative.dev/docs/next/accessibility\#accessibilityshowslargecontentviewer-ios "Direct link to accessibilityshowslargecontentviewer-ios")

A boolean value that determines whether the large content viewer is shown when the user performs a long press on the element.

Available in iOS 13.0 and later.

### `accessibilityLargeContentTitle` iOS [​](https://reactnative.dev/docs/next/accessibility\#accessibilitylargecontenttitle-ios "Direct link to accessibilitylargecontenttitle-ios")

A string that will be used as the title of the large content viewer when it is shown.

Requires `accessibilityShowsLargeContentViewer` to be set to `true`.

```codeBlockLines_AclH
<View
accessibilityShowsLargeContentViewer={true}

### `accessibilityState` [​](https://reactnative.dev/docs/next/accessibility\#accessibilitystate "Direct link to accessibilitystate")

Describes the current state of a component to the assistive technology user.

`accessibilityState` is an object. It contains the following fields:

| Name | Description | Type | Required |
| --- | --- | --- | --- |
| disabled | Indicates whether the element is disabled or not. | boolean | No |
| selected | Indicates whether a selectable element is currently selected or not. | boolean | No |
| checked | Indicates the state of a checkable element. This field can either take a boolean or the "mixed" string to represent mixed checkboxes. | boolean or 'mixed' | No |
| busy | Indicates whether an element is currently busy or not. | boolean | No |
| expanded | Indicates whether an expandable element is currently expanded or collapsed. | boolean | No |

To use, set the `accessibilityState` to an object with a specific definition.

### `accessibilityValue` [​](https://reactnative.dev/docs/next/accessibility\#accessibilityvalue "Direct link to accessibilityvalue")

Represents the current value of a component. It can be a textual description of a component's value, or for range-based components, such as sliders and progress bars, it contains range information (minimum, current, and maximum).

`accessibilityValue` is an object. It contains the following fields:

| Name | Description | Type | Required |
| --- | --- | --- | --- |
| min | The minimum value of this component's range. | integer | Required if `now` is set. |
| max | The maximum value of this component's range. | integer | Required if `now` is set. |
| now | The current value of this component's range. | integer | No |
| text | A textual description of this component's value. Will override `min`, `now`, and `max` if set. | string | No |

### `accessibilityViewIsModal` iOS [​](https://reactnative.dev/docs/next/accessibility\#accessibilityviewismodal-ios "Direct link to accessibilityviewismodal-ios")

A boolean value that indicates whether VoiceOver should ignore the elements within views that are siblings of the receiver.

For example, in a window that contains sibling views `A` and `B`, setting `accessibilityViewIsModal` to `true` on view `B` causes VoiceOver to ignore the elements in view `A`. On the other hand, if view `B` contains a child view `C` and you set `accessibilityViewIsModal` to `true` on view `C`, VoiceOver does not ignore the elements in view `A`.

### `accessibilityElementsHidden` iOS [​](https://reactnative.dev/docs/next/accessibility\#accessibilityelementshidden-ios "Direct link to accessibilityelementshidden-ios")

A boolean value indicating whether the given accessibility element, and any accessibility elements it contains, are hidden.

For example, in a window that contains sibling views `A` and `B`, setting `accessibilityElementsHidden` to `true` on view `B` causes VoiceOver to ignore the `B` view and any elements it contains. This is similar to the Android property `importantForAccessibility="no-hide-descendants"`.

### `aria-valuemax` [​](https://reactnative.dev/docs/next/accessibility\#aria-valuemax "Direct link to aria-valuemax")

Represents the maximum value for range-based components, such as sliders and progress bars.

### `aria-valuemin` [​](https://reactnative.dev/docs/next/accessibility\#aria-valuemin "Direct link to aria-valuemin")

Represents the minimum value for range-based components, such as sliders and progress bars.

### `aria-valuenow` [​](https://reactnative.dev/docs/next/accessibility\#aria-valuenow "Direct link to aria-valuenow")

Represents the current value for range-based components, such as sliders and progress bars.

### `aria-valuetext` [​](https://reactnative.dev/docs/next/accessibility\#aria-valuetext "Direct link to aria-valuetext")

Represents the textual description of the component.

### `aria-busy` [​](https://reactnative.dev/docs/next/accessibility\#aria-busy "Direct link to aria-busy")

Indicates an element is being modified and that assistive technologies may want to wait until the changes are complete before informing the user about the update.

| Type | Default |
| --- | --- |
| boolean | false |

### `aria-checked` [​](https://reactnative.dev/docs/next/accessibility\#aria-checked "Direct link to aria-checked")

Indicates the state of a checkable element. This field can either take a boolean or the "mixed" string to represent mixed checkboxes.

| Type | Default |
| --- | --- |
| boolean, 'mixed' | false |

### `aria-disabled` [​](https://reactnative.dev/docs/next/accessibility\#aria-disabled "Direct link to aria-disabled")

Indicates that the element is perceivable but disabled, so it is not editable or otherwise operable.

### `aria-expanded` [​](https://reactnative.dev/docs/next/accessibility\#aria-expanded "Direct link to aria-expanded")

Indicates whether an expandable element is currently expanded or collapsed.

### `aria-hidden` [​](https://reactnative.dev/docs/next/accessibility\#aria-hidden "Direct link to aria-hidden")

Indicates whether the element is hidden from assistive technologies.

For example, in a window that contains sibling views `A` and `B`, setting `aria-hidden` to `true` on view `B` causes VoiceOver to ignore the `B` element and its children.

### `aria-label` [​](https://reactnative.dev/docs/next/accessibility\#aria-label "Direct link to aria-label")

Defines a string value that can be used to name an element.

| Type |
| --- |
| string |

### `aria-labelledby` Android [​](https://reactnative.dev/docs/next/accessibility\#aria-labelledby-android "Direct link to aria-labelledby-android")

Identifies the element that labels the element it is applied to. The value of `aria-labelledby` should match the [`nativeID`](https://reactnative.dev/docs/next/view#nativeid) of the related element:

### `aria-live` Android [​](https://reactnative.dev/docs/next/accessibility\#aria-live-android "Direct link to aria-live-android")

Indicates that an element will be updated and describes the types of updates the user agents, assistive technologies, and user can expect from the live region.

- **off** Accessibility services should not announce changes to this view.
- **polite** Accessibility services should announce changes to this view.
- **assertive** Accessibility services should interrupt ongoing speech to immediately announce changes to this view.

| Type | Default |
| --- | --- |
| enum( `'assertive'`, `'off'`, `'polite'`) | `'off'` |

* * *

### `aria-modal` iOS [​](https://reactnative.dev/docs/next/accessibility\#aria-modal-ios "Direct link to aria-modal-ios")

Boolean value indicating whether VoiceOver should ignore the elements within views that are siblings of the receiver.

### `aria-selected` [​](https://reactnative.dev/docs/next/accessibility\#aria-selected "Direct link to aria-selected")

Indicates whether a selectable element is currently selected or not.

| Type |
| --- |
| boolean |

### `experimental_accessibilityOrder` [​](https://reactnative.dev/docs/next/accessibility\#experimental_accessibilityorder "Direct link to experimental_accessibilityorder")

Experimental 🧪

**This API is experimental.** Experimental APIs may contain bugs and are likely to change in a future version of React Native. Don't use them in production.

note

For the sake of brevity, layout is excluded in the following examples even though it dictates the default focus order. Assume the document order matches the layout order.

`experimental_accessibilityOrder` lets you define the order in which assistive technologies focus descendant components. It is an array of [`nativeIDs`](https://reactnative.dev/docs/next/view#nativeid) that are set on the components whose order you are controlling. For example:

Assistive technologies will focus the `View` with `nativeID` of `B`, then `C`, then `A`.

`experimental_accessibilityOrder` will not “turn on” accessibility for the components it references, that still needs to be done. So if we remove `accessible={true}` on `C` above like so

then the new order will be `B` then `A`, even though `C` is still in `experimental_accessibilityOrder`.

`experimental_accessibilityOrder` will “turn off” accessibility of components it doesn’t reference, however.

The order of the above example would be `B`, `C`, `A`. `D` will never get focused. In this sense `experimental_accessibilityOrder` is _exhaustive_.

There are still valid reasons to include an non-accessible component in `experimental_accessibilityOrder`. Consider

The focus order will be `B`, `D`, `E`, `F`, `A`. Even though `D`, `E`, and `F` are not directly referenced in `experimental_accessibilityOrder`, `C` is directly referenced. In this instance `C` in an _accessibility container_ \- it contains accessible elements, but is not accessible itself. If an accessibility container is referenced in `experimental_accessibilityOrder` then the default order of the elements it contains is applied. In this sense `experimental_accessibilityOrder` is _nestable_.

`experimental_accessibilityOrder` can also reference another component with `experimental_accessibilityOrder`

The focus order will be `B`, `F`, `E`, `D`, `A`.

A component cannot be both an accessibility container and an accessibility element ( `accessible={true}`). So if we have

The focus order would be `B`, `C`, `A`. `D`, `E`, and `F` are no longer in a container, so the exhaustive nature of `experimental_accessibilityOrder` means they will be excluded.

### `importantForAccessibility` Android [​](https://reactnative.dev/docs/next/accessibility\#importantforaccessibility-android "Direct link to importantforaccessibility-android")

In the case of two overlapping UI components with the same parent, default accessibility focus can have unpredictable behavior. The `importantForAccessibility` property will resolve this by controlling if a view fires accessibility events and if it is reported to accessibility services. It can be set to `auto`, `yes`, `no` and `no-hide-descendants` (the last value will force accessibility services to ignore the component and all of its children).

style={[styles.layout, {backgroundColor: 'green'}]}

style={[styles.layout, {backgroundColor: 'yellow'}]}

In the above example, the `yellow` layout and its descendants are completely invisible to TalkBack and all other accessibility services. So we can use overlapping views with the same parent without confusing TalkBack.

### `onAccessibilityEscape` iOS [​](https://reactnative.dev/docs/next/accessibility\#onaccessibilityescape-ios "Direct link to onaccessibilityescape-ios")

Assign this property to a custom function which will be called when someone performs the "escape" gesture, which is a two finger Z shaped gesture. An escape function should move back hierarchically in the user interface. This can mean moving up or back in a navigation hierarchy or dismissing a modal user interface. If the selected element does not have an `onAccessibilityEscape` function, the system will attempt to traverse up the view hierarchy until it finds a view that does or bonk to indicate it was unable to find one.

### `onAccessibilityTap` iOS [​](https://reactnative.dev/docs/next/accessibility\#onaccessibilitytap-ios "Direct link to onaccessibilitytap-ios")

Use this property to assign a custom function to be called when someone activates an accessible element by double tapping on it while it's selected.

### `onMagicTap` iOS [​](https://reactnative.dev/docs/next/accessibility\#onmagictap-ios "Direct link to onmagictap-ios")

Assign this property to a custom function which will be called when someone performs the "magic tap" gesture, which is a double-tap with two fingers. A magic tap function should perform the most relevant action a user could take on a component. In the Phone app on iPhone, a magic tap answers a phone call or ends the current one. If the selected element does not have an `onMagicTap` function, the system will traverse up the view hierarchy until it finds a view that does.

### `role` [​](https://reactnative.dev/docs/next/accessibility\#role "Direct link to role")

`role` communicates the purpose of a component and has precedence over the [`accessibilityRole`](https://reactnative.dev/docs/next/accessibility#accessibilityrole) prop.

`role` can be one of the following:

- **alert** Used when an element contains important text to be presented to the user.
- **button** Used when the element should be treated as a button.
- **checkbox** Used when an element represents a checkbox that can be checked, unchecked, or have a mixed checked state.
- **combobox** Used when an element represents a combo box, which allows the user to select among several choices.
- **grid** Used with ScrollView, VirtualizedList, FlatList, or SectionList to represent a grid. Adds the in/out of grid announcements to the android GridView.
- **heading** Used when an element acts as a header for a content section (e.g. the title of a navigation bar).
- **img** Used when the element should be treated as an image. Can be combined with a button or link, for example.
- **link** Used when the element should be treated as a link.
- **list** Used to identify a list of items.
- **listitem** Used to itentify an item in a list.
- **menu** Used when the component is a menu of choices.
- **menubar** Used when a component is a container of multiple menus.
- **menuitem** Used to represent an item within a menu.
- **none** Used when the element has no role.
- **presentation** Used when the element has no role.
- **progressbar** Used to represent a component that indicates the progress of a task.
- **radio** Used to represent a radio button.
- **radiogroup** Used to represent a group of radio buttons.
- **scrollbar** Used to represent a scroll bar.
- **searchbox** Used when the text field element should also be treated as a search field.
- **slider** Used when an element can be "adjusted" (e.g. a slider).
- **spinbutton** Used to represent a button that opens a list of choices.
- **summary** Used when an element can be used to provide a quick summary of current conditions in the app when the app first launches.
- **switch** Used to represent a switch that can be turned on and off.
- **tab** Used to represent a tab.
- **tablist** Used to represent a list of tabs.
- **timer** Used to represent a timer.
- **toolbar** Used to represent a toolbar (a container of action buttons or components).

## Accessibility Actions [​](https://reactnative.dev/docs/next/accessibility\#accessibility-actions "Direct link to Accessibility Actions")

Accessibility actions allow assistive technology to programmatically invoke the action(s) of a component. To support accessibility actions, a component must do two things:

- Define the list of actions it supports via the `accessibilityActions` property.
- Implement an `onAccessibilityAction` function to handle action requests.

The `accessibilityActions` property should contain a list of action objects. Each action object should contain the following fields:

| Name | Type | Required |
| --- | --- | --- |
| name | string | Yes |
| label | string | No |

Actions either represent standard actions, such as clicking a button or adjusting a slider, or custom actions specific to a given component such as deleting an email message. The `name` field is required for both standard and custom actions, but `label` is optional for standard actions.

When adding support for standard actions, `name` must be one of the following:

- `'magicTap'` \- iOS only - While VoiceOver focus is on or inside the component, the user double tapped with two fingers.
- `'escape'` \- iOS only - While VoiceOver focus is on or inside the component, the user performed a two-finger scrub gesture (left, right, left).
- `'activate'` \- Activate the component. This should perform the same action with, or without, assistive technology. Engaged when a screen reader user double taps the component.
- `'increment'` \- Increment an adjustable component. On iOS, VoiceOver generates this action when the component has a role of `'adjustable'` and the user places focus on it and swipes upward. On Android, TalkBack generates this action when the user places accessibility focus on the component and presses the volume-up button.
- `'decrement'` \- Decrement an adjustable component. On iOS, VoiceOver generates this action when the component has a role of `'adjustable'` and the user places focus on it and swipes downward. On Android, TalkBack generates this action when the user places accessibility focus on the component and presses the volume-down button.
- `'longpress'` \- Android only - This action is generated when the user places accessibility focus on the component, then double-taps and holds one finger on the screen. This should perform the same action with, or without, assistive technology.
- `'expand'` \- Android only - This action "expands" the component so that TalkBack will announce an "expanded" hint.
- `'collapse'` \- Android only - This action "collapses" the component so that TalkBack will announce a "collapsed" hint.

The `label` field is optional for standard actions and is often unused by assistive technologies. For custom actions, it is a localized string containing a description of the action to be presented to the user.

To handle action requests, a component must implement an `onAccessibilityAction` function. The only argument to this function is an event containing the name of the action to perform. The below example from RNTester shows how to create a component that defines and handles several custom actions.

```codeBlockLines_AclH
<View
accessible={true}
accessibilityActions={[\
{name: 'cut', label: 'cut'},\
{name: 'copy', label: 'copy'},\
{name: 'paste', label: 'paste'},\
]}

switch (event.nativeEvent.actionName) {
case 'cut':
Alert.alert('Alert', 'cut action success');
break;
case 'copy':
Alert.alert('Alert', 'copy action success');
break;
case 'paste':
Alert.alert('Alert', 'paste action success');
break;
}
}}

## Checking if a Screen Reader is Enabled [​](https://reactnative.dev/docs/next/accessibility\#checking-if-a-screen-reader-is-enabled "Direct link to Checking if a Screen Reader is Enabled")

The `AccessibilityInfo` API allows you to determine whether or not a screen reader is currently active. See the [AccessibilityInfo documentation](https://reactnative.dev/docs/next/accessibilityinfo) for details.

## Sending Accessibility Events Android [​](https://reactnative.dev/docs/next/accessibility\#sending-accessibility-events-android "Direct link to sending-accessibility-events-android")

Sometimes it is useful to trigger an accessibility event on a UI component (i.e. when a custom view appears on a screen or set accessibility focus to a view). Native UIManager module exposes a method ‘sendAccessibilityEvent’ for this purpose. It takes two arguments: a view tag and a type of event. The supported event types are `typeWindowStateChanged`, `typeViewFocused`, and `typeViewClicked`.

```codeBlockLines_AclH
import {Platform, UIManager, findNodeHandle} from 'react-native';

if (Platform.OS === 'android') {
UIManager.sendAccessibilityEvent(
findNodeHandle(this),
UIManager.AccessibilityEventTypes.typeViewFocused,
);
}

## Testing TalkBack Support Android [​](https://reactnative.dev/docs/next/accessibility\#testing-talkback-support-android "Direct link to testing-talkback-support-android")

To enable TalkBack, go to the Settings app on your Android device or emulator. Tap Accessibility, then TalkBack. Toggle the "Use service" switch to enable or disable it.

Android emulators don't have TalkBack installed by default. You can install TalkBack on your emulator via the Google Play Store. Make sure to choose an emulator with the Google Play store installed. These are available in Android Studio.

You can use the volume key shortcut to toggle TalkBack. To turn on the volume key shortcut, go to the Settings app, then Accessibility. At the top, turn on the volume key shortcut.

To use the volume key shortcut, press both volume keys for 3 seconds to start an accessibility tool.

Additionally, if you prefer, you can toggle TalkBack via the command line with:

shell

# disable
```codeBlockLines_AclH
adb shell settings put secure enabled_accessibility_services com.android.talkback/com.google.android.marvin.talkback.TalkBackService

# enable
adb shell settings put secure enabled_accessibility_services com.google.android.marvin.talkback/com.google.android.marvin.talkback.TalkBackService

## Testing VoiceOver Support iOS [​](https://reactnative.dev/docs/next/accessibility\#testing-voiceover-support-ios "Direct link to testing-voiceover-support-ios")

To enable VoiceOver on your iOS or iPadOS device, go to the Settings app, tap General, then Accessibility. There you will find many tools available for people to enable their devices to be more usable, including VoiceOver. To enable VoiceOver, tap on VoiceOver under "Vision" and toggle the switch that appears at the top.

At the very bottom of the Accessibility settings, there is an "Accessibility Shortcut". You can use this to toggle VoiceOver by triple-clicking the Home button.

VoiceOver isn't available via the simulator, but you can use Accessibility Inspector from Xcode to use the macOS VoiceOver through an application. Note it's always best to test with a device as macOS's VoiceOver may result in varied experiences.

## Additional Resources [​](https://reactnative.dev/docs/next/accessibility\#additional-resources "Direct link to Additional Resources")

- [Making React Native Apps Accessible](https://engineering.fb.com/ios/making-react-native-apps-accessible/)

Is this page useful?

- [Accessibility properties](https://reactnative.dev/docs/next/accessibility#accessibility-properties)
- [`accessible`](https://reactnative.dev/docs/next/accessibility#accessible)
- [`accessibilityLabel`](https://reactnative.dev/docs/next/accessibility#accessibilitylabel)
- [`accessibilityLabelledBy` \\
Android](https://reactnative.dev/docs/next/accessibility#accessibilitylabelledby-android)
- [`accessibilityHint`](https://reactnative.dev/docs/next/accessibility#accessibilityhint)
- [`accessibilityLanguage` \\
iOS](https://reactnative.dev/docs/next/accessibility#accessibilitylanguage-ios)
- [`accessibilityIgnoresInvertColors` \\
iOS](https://reactnative.dev/docs/next/accessibility#accessibilityignoresinvertcolors-ios)
- [`accessibilityLiveRegion` \\
Android](https://reactnative.dev/docs/next/accessibility#accessibilityliveregion-android)
- [`accessibilityRole`](https://reactnative.dev/docs/next/accessibility#accessibilityrole)
- [`accessibilityShowsLargeContentViewer` \\
iOS](https://reactnative.dev/docs/next/accessibility#accessibilityshowslargecontentviewer-ios)
- [`accessibilityLargeContentTitle` \\
iOS](https://reactnative.dev/docs/next/accessibility#accessibilitylargecontenttitle-ios)
- [`accessibilityState`](https://reactnative.dev/docs/next/accessibility#accessibilitystate)
- [`accessibilityValue`](https://reactnative.dev/docs/next/accessibility#accessibilityvalue)
- [`accessibilityViewIsModal` \\
iOS](https://reactnative.dev/docs/next/accessibility#accessibilityviewismodal-ios)
- [`accessibilityElementsHidden` \\
iOS](https://reactnative.dev/docs/next/accessibility#accessibilityelementshidden-ios)
- [`aria-valuemax`](https://reactnative.dev/docs/next/accessibility#aria-valuemax)
- [`aria-valuemin`](https://reactnative.dev/docs/next/accessibility#aria-valuemin)
- [`aria-valuenow`](https://reactnative.dev/docs/next/accessibility#aria-valuenow)
- [`aria-valuetext`](https://reactnative.dev/docs/next/accessibility#aria-valuetext)
- [`aria-busy`](https://reactnative.dev/docs/next/accessibility#aria-busy)
- [`aria-checked`](https://reactnative.dev/docs/next/accessibility#aria-checked)
- [`aria-disabled`](https://reactnative.dev/docs/next/accessibility#aria-disabled)
- [`aria-expanded`](https://reactnative.dev/docs/next/accessibility#aria-expanded)
- [`aria-hidden`](https://reactnative.dev/docs/next/accessibility#aria-hidden)
- [`aria-label`](https://reactnative.dev/docs/next/accessibility#aria-label)
- [`aria-labelledby` \\
Android](https://reactnative.dev/docs/next/accessibility#aria-labelledby-android)
- [`aria-live` \\
Android](https://reactnative.dev/docs/next/accessibility#aria-live-android)
- [`aria-modal` \\
iOS](https://reactnative.dev/docs/next/accessibility#aria-modal-ios)
- [`aria-selected`](https://reactnative.dev/docs/next/accessibility#aria-selected)
- [`experimental_accessibilityOrder`](https://reactnative.dev/docs/next/accessibility#experimental_accessibilityorder)
- [`importantForAccessibility` \\
Android](https://reactnative.dev/docs/next/accessibility#importantforaccessibility-android)
- [`onAccessibilityEscape` \\
iOS](https://reactnative.dev/docs/next/accessibility#onaccessibilityescape-ios)
- [`onAccessibilityTap` \\
iOS](https://reactnative.dev/docs/next/accessibility#onaccessibilitytap-ios)
- [`onMagicTap` \\
iOS](https://reactnative.dev/docs/next/accessibility#onmagictap-ios)
- [`role`](https://reactnative.dev/docs/next/accessibility#role)
- [Accessibility Actions](https://reactnative.dev/docs/next/accessibility#accessibility-actions)
- [Checking if a Screen Reader is Enabled](https://reactnative.dev/docs/next/accessibility#checking-if-a-screen-reader-is-enabled)
- [Sending Accessibility Events \\
Android](https://reactnative.dev/docs/next/accessibility#sending-accessibility-events-android)
- [Testing TalkBack Support \\
Android](https://reactnative.dev/docs/next/accessibility#testing-talkback-support-android)
- [Testing VoiceOver Support \\
iOS](https://reactnative.dev/docs/next/accessibility#testing-voiceover-support-ios)
- [Additional Resources](https://reactnative.dev/docs/next/accessibility#additional-resources)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/clipboard

[Skip to main content](https://reactnative.dev/docs/next/clipboard#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/clipboard)** (0.81).

Version: Next

Removed from React Native

Use one of the [community packages](https://reactnative.directory/?search=clipboard) instead.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/communication-android

[Skip to main content](https://reactnative.dev/docs/next/communication-android#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/communication-android)** (0.81).

Version: Next

On this page

In [Integrating with Existing Apps guide](https://reactnative.dev/docs/next/integration-with-existing-apps) and [Native UI Components guide](https://reactnative.dev/docs/next/legacy/native-components-android) we learn how to embed React Native in a native component and vice versa. When we mix native and React Native components, we'll eventually find a need to communicate between these two worlds. Some ways to achieve that have been already mentioned in other guides. This article summarizes available techniques.

## Introduction [​](https://reactnative.dev/docs/next/communication-android\#introduction "Direct link to Introduction")

React Native is inspired by React, so the basic idea of the information flow is similar. The flow in React is one-directional. We maintain a hierarchy of components, in which each component depends only on its parent and its own internal state. We do this with properties: data is passed from a parent to its children in a top-down manner. If an ancestor component relies on the state of its descendant, one should pass down a call

Properties are the most straightforward way of cross-component communication. So we need a way to pass properties both from native to React Native, and from React Native to native.

### Passing properties from native to React Native [​](https://reactnative.dev/docs/next/communication-android\#passing-properties-from-native-to-react-native "Direct link to Passing properties from native to React Native")

You can pass properties down to the React Native app by providing a custom implementation of `ReactActivityDelegate` in your main activity. This implementation should override `getLaunchOptions` to return a `Bundle` with the desired properties.

- Java
- Kotlin

java

```codeBlockLines_AclH
public class MainActivity extends ReactActivity {
@Override
protected ReactActivityDelegate createReactActivityDelegate() {
return new ReactActivityDelegate(this, getMainComponentName()) {
@Override
protected Bundle getLaunchOptions() {
Bundle initialProperties = new Bundle();

"https://dummyimage.com/600x400/ffffff/000000.png",
"https://dummyimage.com/600x400/000000/ffffff.png"
));
initialProperties.putStringArrayList("images", imageList);
return initialProperties;
}
};
}
}

kotlin

```codeBlockLines_AclH
class MainActivity : ReactActivity() {
override fun createReactActivityDelegate(): ReactActivityDelegate {
return object : ReactActivityDelegate(this, mainComponentName) {
override fun getLaunchOptions(): Bundle {
val imageList = arrayListOf("https://dummyimage.com/600x400/ffffff/000000.png", "https://dummyimage.com/600x400/000000/ffffff.png")
val initialProperties = Bundle().apply { putStringArrayList("images", imageList) }
return initialProperties
}
}
}
}

tsx

```codeBlockLines_AclH
import React from 'react';
import {View, Image} from 'react-native';

export default class ImageBrowserApp extends React.Component {
renderImage(imgURI) {

}
render() {

}
}

`ReactRootView` provides a read-write property `appProperties`. After `appProperties` is set, the React Native app is re-rendered with new properties. The update is only performed when the new updated properties differ from the previous ones.

```codeBlockLines_AclH
Bundle updatedProps = mReactRootView.getAppProperties();

"https://dummyimage.com/600x400/ff0000/000000.png",
"https://dummyimage.com/600x400/ffffff/ff0000.png"
));
updatedProps.putStringArrayList("images", imageList);

mReactRootView.setAppProperties(updatedProps);

```codeBlockLines_AclH
var updatedProps: Bundle = reactRootView.getAppProperties()
var imageList = arrayListOf("https://dummyimage.com/600x400/ff0000/000000.png", "https://dummyimage.com/600x400/ffffff/ff0000.png")

It is fine to update properties anytime. However, updates have to be performed on the main thread. You use the getter on any thread.

There is no way to update only a few properties at a time. We suggest that you build it into your own wrapper instead.

info

Currently, JS function `componentWillUpdateProps` of the top level RN component will not be called after a prop update. However, you can access the new props in `componentDidMount` function.

### Passing properties from React Native to native [​](https://reactnative.dev/docs/next/communication-android\#passing-properties-from-react-native-to-native "Direct link to Passing properties from React Native to native")

The problem exposing properties of native components is covered in detail in [this article](https://reactnative.dev/docs/next/legacy/native-components-android#3-expose-view-property-setters-using-reactprop-or-reactpropgroup-annotation). In short, properties that are to be reflected in JavaScript needs to be exposed as setter method annotated with `@ReactProp`, then use them in React Native as if the component was an ordinary React Native component.

### Limits of properties [​](https://reactnative.dev/docs/next/communication-android\#limits-of-properties "Direct link to Limits of properties")

The main drawback of cross-language properties is that they do not support callbacks, which would allow us to handle bottom-up data bindings. Imagine you have a small RN view that you want to be removed from the native parent view as a result of a JS action. There is no way to do that with props, as the information would need to go bottom-up.

Although we have a flavor of cross-language callbacks ( [described here](https://reactnative.dev/docs/next/legacy/native-modules-android#callbacks)), these callbacks are not always the thing we need. The main problem is that they are not intended to be passed as properties. Rather, this mechanism allows us to trigger a native action from JS, and handle the result of that action in JS.

## Other ways of cross-language interaction (events and native modules) [​](https://reactnative.dev/docs/next/communication-android\#other-ways-of-cross-language-interaction-events-and-native-modules "Direct link to Other ways of cross-language interaction (events and native modules)")

As stated in the previous chapter, using properties comes with some limitations. Sometimes properties are not enough to drive the logic of our app and we need a solution that gives more flexibility. This chapter covers other communication techniques available in React Native. They can be used for internal communication (between JS and native layers in RN) as well as for external communication (between RN and the 'pure native' part of your app).

React Native enables you to perform cross-language function calls. You can execute custom native code from JS and vice versa. Unfortunately, depending on the side we are working on, we achieve the same goal in different ways. For native - we use events mechanism to schedule an execution of a handler function in JS, while for React Native we directly call methods exported by native modules.

### Calling React Native functions from native (events) [​](https://reactnative.dev/docs/next/communication-android\#calling-react-native-functions-from-native-events "Direct link to Calling React Native functions from native (events)")

Events are described in detail in [this article](https://reactnative.dev/docs/next/legacy/native-components-android#events). Note that using events gives us no guarantees about execution time, as the event is handled on a separate thread.

Events are powerful, because they allow us to change React Native components without needing a reference to them. However, there are some pitfalls that you can fall into while using them:

- As events can be sent from anywhere, they can introduce spaghetti-style dependencies into your project.
- Events share namespace, which means that you may encounter some name collisions. Collisions will not be detected statically, which makes them hard to debug.
- If you use several instances of the same React Native component and you want to distinguish them from the perspective of your event, you'll likely need to introduce identifiers and pass them along with events (you can use the native view's `reactTag` as an identifier).

### Calling native functions from React Native (native modules) [​](https://reactnative.dev/docs/next/communication-android\#calling-native-functions-from-react-native-native-modules "Direct link to Calling native functions from React Native (native modules)")

Native modules are Java/Kotlin classes that are available in JS. Typically one instance of each module is created per JS bridge. They can export arbitrary functions and constants to React Native. They have been covered in detail in [this article](https://reactnative.dev/docs/next/legacy/native-modules-android).

warning

All native modules share the same namespace. Watch out for name collisions when creating new ones.

Is this page useful?

- [Introduction](https://reactnative.dev/docs/next/communication-android#introduction)
- [Properties](https://reactnative.dev/docs/next/communication-android#properties)
- [Passing properties from native to React Native](https://reactnative.dev/docs/next/communication-android#passing-properties-from-native-to-react-native)
- [Passing properties from React Native to native](https://reactnative.dev/docs/next/communication-android#passing-properties-from-react-native-to-native)
- [Limits of properties](https://reactnative.dev/docs/next/communication-android#limits-of-properties)
- [Other ways of cross-language interaction (events and native modules)](https://reactnative.dev/docs/next/communication-android#other-ways-of-cross-language-interaction-events-and-native-modules)
- [Calling React Native functions from native (events)](https://reactnative.dev/docs/next/communication-android#calling-react-native-functions-from-native-events)
- [Calling native functions from React Native (native modules)](https://reactnative.dev/docs/next/communication-android#calling-native-functions-from-react-native-native-modules)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/checkbox

[Skip to main content](https://reactnative.dev/docs/next/checkbox#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/checkbox)** (0.81).

Version: Next

Removed from React Native

Use one of the [community packages](https://reactnative.directory/?search=checkbox) instead.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/datepickerios

[Skip to main content](https://reactnative.dev/docs/next/datepickerios#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/datepickerios)** (0.81).

Version: Next

Removed from React Native

Use one of the [community packages](https://reactnative.directory/?search=datepicker) instead.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/animatedvaluexy

[Skip to main content](https://reactnative.dev/docs/next/animatedvaluexy#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/animatedvaluexy)** (0.81).

Version: Next

On this page

2D Value for driving 2D animations, such as pan gestures. Almost identical API to normal [`Animated.Value`](https://reactnative.dev/docs/next/animatedvalue), but multiplexed. Contains two regular `Animated.Value` s under the hood.

## Example [​](https://reactnative.dev/docs/next/animatedvaluexy\#example "Direct link to Example")

Animated.ValueXY Example - Snack

# Animated.ValueXY Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React, {useRef} from 'react';
import {Animated, PanResponder, StyleSheet} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const pan = useRef(new Animated.ValueXY()).current;

const panResponder = PanResponder.create({

onPanResponderMove: Animated.event(\[\
null,\
{\
dx: pan.x, // x,y are Animated.Value\
dy: pan.y,\
},\
\]),

Animated.spring(
pan, // Auto-multiplexed
{toValue: {x: 0, y: 0}, useNativeDriver: true}, // , styles.box\]}

};

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
alignItems: 'center',
},
box: {
backgroundColor: '#61dafb',
width: 80,
height: 80,
borderRadius: 4,
},
});

export default DraggableView;

onPanResponderMove: Animated.event([\
null,\
{\
dx: pan.x, // x,y are Animated.Value\
dy: pan.y,\
},\
]),

Animated.spring(
pan, // Auto-multiplexed
{toValue: {x: 0, y: 0}, useNativeDriver: true}, // , styles.box]}

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
alignItems: 'center',
},
box: {
backgroundColor: '#61dafb',
width: 80,
height: 80,
borderRadius: 4,
},
});

Snack

Updating…

PreviewMy DeviceAndroidiOSWeb

* * *

# Reference

## Methods [​](https://reactnative.dev/docs/next/animatedvaluexy\#methods "Direct link to Methods")

### `setValue()` [​](https://reactnative.dev/docs/next/animatedvaluexy\#setvalue "Direct link to setvalue")

tsx

```codeBlockLines_AclH
setValue(value: {x: number; y: number});

Directly set the value. This will stop any animations running on the value and update all the bound properties.

**Parameters:**

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| value | `{x: number; y: number}` | Yes | Value |

### `setOffset()` [​](https://reactnative.dev/docs/next/animatedvaluexy\#setoffset "Direct link to setoffset")

```codeBlockLines_AclH
setOffset(offset: {x: number; y: number});

Sets an offset that is applied on top of whatever value is set, whether via `setValue`, an animation, or `Animated.event`. Useful for compensating things like the start of a pan gesture.

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| offset | `{x: number; y: number}` | Yes | Offset value |

### `flattenOffset()` [​](https://reactnative.dev/docs/next/animatedvaluexy\#flattenoffset "Direct link to flattenoffset")

```codeBlockLines_AclH
flattenOffset();

Merges the offset value into the base value and resets the offset to zero. The final output of the value is unchanged.

### `extractOffset()` [​](https://reactnative.dev/docs/next/animatedvaluexy\#extractoffset "Direct link to extractoffset")

```codeBlockLines_AclH
extractOffset();

Sets the offset value to the base value, and resets the base value to zero. The final output of the value is unchanged.

### `addListener()` [​](https://reactnative.dev/docs/next/animatedvaluexy\#addlistener "Direct link to addlistener")

```codeBlockLines_AclH

Adds an asynchronous listener to the value so you can observe updates from animations. This is useful because there is no way to synchronously read the value because it might be driven natively.

Returns a string that serves as an identifier for the listener.

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| callback | function | Yes | The callback function which will receive an object with a `value` key set to the new value. |

### `removeListener()` [​](https://reactnative.dev/docs/next/animatedvaluexy\#removelistener "Direct link to removelistener")

```codeBlockLines_AclH
removeListener(id: string);

Unregister a listener. The `id` param shall match the identifier previously returned by `addListener()`.

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| id | string | Yes | Id for the listener being removed. |

### `removeAllListeners()` [​](https://reactnative.dev/docs/next/animatedvaluexy\#removealllisteners "Direct link to removealllisteners")

```codeBlockLines_AclH
removeAllListeners();

Remove all registered listeners.

### `stopAnimation()` [​](https://reactnative.dev/docs/next/animatedvaluexy\#stopanimation "Direct link to stopanimation")

Stops any running animation or tracking. `callback` is invoked with the final value after stopping the animation, which is useful for updating state to match the animation position with layout.

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| callback | function | No | A function that will receive the final value. |

### `resetAnimation()` [​](https://reactnative.dev/docs/next/animatedvaluexy\#resetanimation "Direct link to resetanimation")

Stops any animation and resets the value to its original.

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| callback | function | No | A function that will receive the original value. |

### `getLayout()` [​](https://reactnative.dev/docs/next/animatedvaluexy\#getlayout "Direct link to getlayout")

```codeBlockLines_AclH
getLayout(): {left: Animated.Value, top: Animated.Value};

Converts `{x, y}` into `{left, top}` for use in style, e.g.

```codeBlockLines_AclH
style={this.state.anim.getLayout()}

### `getTranslateTransform()` [​](https://reactnative.dev/docs/next/animatedvaluexy\#gettranslatetransform "Direct link to gettranslatetransform")

```codeBlockLines_AclH
getTranslateTransform(): [\
{translateX: Animated.Value},\
{translateY: Animated.Value},\
];

Converts `{x, y}` into a useable translation transform, e.g.

```codeBlockLines_AclH
style={{
transform: this.state.anim.getTranslateTransform()
}}

Is this page useful?

- [Example](https://reactnative.dev/docs/next/animatedvaluexy#example)
- [Methods](https://reactnative.dev/docs/next/animatedvaluexy#methods)
- [`setValue()`](https://reactnative.dev/docs/next/animatedvaluexy#setvalue)
- [`setOffset()`](https://reactnative.dev/docs/next/animatedvaluexy#setoffset)
- [`flattenOffset()`](https://reactnative.dev/docs/next/animatedvaluexy#flattenoffset)
- [`extractOffset()`](https://reactnative.dev/docs/next/animatedvaluexy#extractoffset)
- [`addListener()`](https://reactnative.dev/docs/next/animatedvaluexy#addlistener)
- [`removeListener()`](https://reactnative.dev/docs/next/animatedvaluexy#removelistener)
- [`removeAllListeners()`](https://reactnative.dev/docs/next/animatedvaluexy#removealllisteners)
- [`stopAnimation()`](https://reactnative.dev/docs/next/animatedvaluexy#stopanimation)
- [`resetAnimation()`](https://reactnative.dev/docs/next/animatedvaluexy#resetanimation)
- [`getLayout()`](https://reactnative.dev/docs/next/animatedvaluexy#getlayout)
- [`getTranslateTransform()`](https://reactnative.dev/docs/next/animatedvaluexy#gettranslatetransform)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/communication-ios

[Skip to main content](https://reactnative.dev/docs/next/communication-ios#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/communication-ios)** (0.81).

Version: Next

On this page

In [Integrating with Existing Apps guide](https://reactnative.dev/docs/next/integration-with-existing-apps) and [Native UI Components guide](https://reactnative.dev/docs/next/legacy/native-components-ios) we learn how to embed React Native in a native component and vice versa. When we mix native and React Native components, we'll eventually find a need to communicate between these two worlds. Some ways to achieve that have been already mentioned in other guides. This article summarizes available techniques.

## Introduction [​](https://reactnative.dev/docs/next/communication-ios\#introduction "Direct link to Introduction")

React Native is inspired by React, so the basic idea of the information flow is similar. The flow in React is one-directional. We maintain a hierarchy of components, in which each component depends only on its parent and its own internal state. We do this with properties: data is passed from a parent to its children in a top-down manner. If an ancestor component relies on the state of its descendant, one should pass down a call

Properties are the most straightforward way of cross-component communication. So we need a way to pass properties both from native to React Native, and from React Native to native.

### Passing properties from native to React Native [​](https://reactnative.dev/docs/next/communication-ios\#passing-properties-from-native-to-react-native "Direct link to Passing properties from native to React Native")

In order to embed a React Native view in a native component, we use `RCTRootView`. `RCTRootView` is a `UIView` that holds a React Native app. It also provides an interface between native side and the hosted app.

`RCTRootView` has an initializer that allows you to pass arbitrary properties down to the React Native app. The `initialProperties` parameter has to be an instance of `NSDictionary`. The dictionary is internally converted into a JSON object that the top-level JS component can reference.

objectivec

```codeBlockLines_AclH
NSArray *imageList = @[@"https://dummyimage.com/600x400/ffffff/000000.png",\
@"https://dummyimage.com/600x400/000000/ffffff.png"];

NSDictionary *props = @{@"images" : imageList};

RCTRootView *rootView = [[RCTRootView alloc] initWithBridge:bridge\
moduleName:@"ImageBrowserApp"\
initialProperties:props];

tsx

```codeBlockLines_AclH
import React from 'react';
import {View, Image} from 'react-native';

export default class ImageBrowserApp extends React.Component {
renderImage(imgURI) {

}
render() {

}
}

`RCTRootView` also provides a read-write property `appProperties`. After `appProperties` is set, the React Native app is re-rendered with new properties. The update is only performed when the new updated properties differ from the previous ones.

```codeBlockLines_AclH
NSArray *imageList = @[@"https://dummyimage.com/600x400/ff0000/000000.png",\
@"https://dummyimage.com/600x400/ffffff/ff0000.png"];

rootView.appProperties = @{@"images" : imageList};

It is fine to update properties anytime. However, updates have to be performed on the main thread. You use the getter on any thread.

note

Currently, there is a known issue where setting appProperties during the bridge startup, the change can be lost. See [https://github.com/facebook/react-native/issues/20115](https://github.com/facebook/react-native/issues/20115) for more information.

There is no way to update only a few properties at a time. We suggest that you build it into your own wrapper instead.

### Passing properties from React Native to native [​](https://reactnative.dev/docs/next/communication-ios\#passing-properties-from-react-native-to-native "Direct link to Passing properties from React Native to native")

The problem exposing properties of native components is covered in detail in [this article](https://reactnative.dev/docs/next/legacy/native-components-ios#properties). In short, export properties with `RCT_CUSTOM_VIEW_PROPERTY` macro in your custom native component, then use them in React Native as if the component was an ordinary React Native component.

### Limits of properties [​](https://reactnative.dev/docs/next/communication-ios\#limits-of-properties "Direct link to Limits of properties")

The main drawback of cross-language properties is that they do not support callbacks, which would allow us to handle bottom-up data bindings. Imagine you have a small RN view that you want to be removed from the native parent view as a result of a JS action. There is no way to do that with props, as the information would need to go bottom-up.

Although we have a flavor of cross-language callbacks ( [described here](https://reactnative.dev/docs/next/legacy/native-modules-ios#callbacks)), these callbacks are not always the thing we need. The main problem is that they are not intended to be passed as properties. Rather, this mechanism allows us to trigger a native action from JS, and handle the result of that action in JS.

## Other ways of cross-language interaction (events and native modules) [​](https://reactnative.dev/docs/next/communication-ios\#other-ways-of-cross-language-interaction-events-and-native-modules "Direct link to Other ways of cross-language interaction (events and native modules)")

As stated in the previous chapter, using properties comes with some limitations. Sometimes properties are not enough to drive the logic of our app and we need a solution that gives more flexibility. This chapter covers other communication techniques available in React Native. They can be used for internal communication (between JS and native layers in RN) as well as for external communication (between RN and the 'pure native' part of your app).

React Native enables you to perform cross-language function calls. You can execute custom native code from JS and vice versa. Unfortunately, depending on the side we are working on, we achieve the same goal in different ways. For native - we use events mechanism to schedule an execution of a handler function in JS, while for React Native we directly call methods exported by native modules.

### Calling React Native functions from native (events) [​](https://reactnative.dev/docs/next/communication-ios\#calling-react-native-functions-from-native-events "Direct link to Calling React Native functions from native (events)")

Events are described in detail in [this article](https://reactnative.dev/docs/next/legacy/native-components-ios#events). Note that using events gives us no guarantees about execution time, as the event is handled on a separate thread.

Events are powerful, because they allow us to change React Native components without needing a reference to them. However, there are some pitfalls that you can fall into while using them:

- As events can be sent from anywhere, they can introduce spaghetti-style dependencies into your project.
- Events share namespace, which means that you may encounter some name collisions. Collisions will not be detected statically, which makes them hard to debug.
- If you use several instances of the same React Native component and you want to distinguish them from the perspective of your event, you'll likely need to introduce identifiers and pass them along with events (you can use the native view's `reactTag` as an identifier).

The common pattern we use when embedding native in React Native is to make the native component's RCTViewManager a delegate for the views, sending events ")

Native modules are Objective-C classes that are available in JS. Typically one instance of each module is created per JS bridge. They can export arbitrary functions and constants to React Native. They have been covered in detail in [this article](https://reactnative.dev/docs/next/legacy/native-modules-ios#content).

The fact that native modules are singletons limits the mechanism in the context of embedding. Let's say we have a React Native component embedded in a native view and we want to update the native, parent view. Using the native module mechanism, we would export a function that not only takes expected arguments, but also an identifier of the parent native view. The identifier would be used to retrieve a reference to the parent view to update. That said, we would need to keep a mapping from identifiers to native views in the module.

Although this solution is complex, it is used in `RCTUIManager`, which is an internal React Native class that manages all React Native views.

Native modules can also be used to expose existing native libraries to JS. The [Geolocation library](https://github.com/michalchudziak/react-native-geolocation) is a living example of the idea.

caution

All native modules share the same namespace. Watch out for name collisions when creating new ones.

## Layout computation flow [​](https://reactnative.dev/docs/next/communication-ios\#layout-computation-flow "Direct link to Layout computation flow")

When integrating native and React Native, we also need a way to consolidate two different layout systems. This section covers common layout problems and provides a brief description of mechanisms to address them.

### Layout of a native component embedded in React Native [​](https://reactnative.dev/docs/next/communication-ios\#layout-of-a-native-component-embedded-in-react-native "Direct link to Layout of a native component embedded in React Native")

This case is covered in [this article](https://reactnative.dev/docs/next/legacy/native-components-ios#styles). To summarize, since all our native react views are subclasses of `UIView`, most style and size attributes will work like you would expect out of the box.

#### React Native content with fixed size [​](https://reactnative.dev/docs/next/communication-ios\#react-native-content-with-fixed-size "Direct link to React Native content with fixed size")

The general scenario is when we have a React Native app with a fixed size, which is known to the native side. In particular, a full-screen React Native view falls into this case. If we want a smaller root view, we can explicitly set RCTRootView's frame.

For instance, to make an RN app 200 (logical) pixels high, and the hosting view's width wide, we could do:

SomeViewController.m

```codeBlockLines_AclH
- (void)viewDidLoad
{
[...]
RCTRootView *rootView = [[RCTRootView alloc] initWithBridge:bridge\
moduleName:appName\
initialProperties:props];
rootView.frame = CGRectMake(0, 0, self.view.width, 200);
[self.view addSubview:rootView];
}

When we have a fixed size root view, we need to respect its bounds on the JS side. In other words, we need to ensure that the React Native content can be contained within the fixed-size root view. The easiest way to ensure this is to use Flexbox layout. If you use absolute positioning, and React components are visible outside the root view's bounds, you'll get overlap with native views, causing some features to behave unexpectedly. For instance, 'TouchableHighlight' will not highlight your touches outside the root view's bounds.

It's totally fine to update root view's size dynamically by re-setting its frame property. React Native will take care of the content's layout.

#### React Native content with flexible size [​](https://reactnative.dev/docs/next/communication-ios\#react-native-content-with-flexible-size "Direct link to React Native content with flexible size")

In some cases we'd like to render content of initially unknown size. Let's say the size will be defined dynamically in JS. We have two solutions to this problem.

1. You can wrap your React Native view in a `ScrollView` component. This guarantees that your content will always be available and it won't overlap with native views.
2. React Native allows you to determine, in JS, the size of the RN app and provide it to the owner of the hosting `RCTRootView`. The owner is then responsible for re-laying out the subviews and keeping the UI consistent. We achieve this with `RCTRootView`'s flexibility modes.

`RCTRootView` supports 4 different size flexibility modes:

RCTRootView.h

```codeBlockLines_AclH
typedef NS_ENUM(NSInteger, RCTRootViewSizeFlexibility) {
RCTRootViewSizeFlexibilityNone = 0,
RCTRootViewSizeFlexibilityWidth,
RCTRootViewSizeFlexibilityHeight,
RCTRootViewSizeFlexibilityWidthAndHeight,
};

`RCTRootViewSizeFlexibilityNone` is the default value, which makes a root view's size fixed (but it still can be updated with `setFrame:`). The other three modes allow us to track React Native content's size updates. For instance, setting mode to `RCTRootViewSizeFlexibilityHeight` will cause React Native to measure the content's height and pass that information frame
{
[...]

_rootView = [[RCTRootView alloc] initWithBridge:bridge\
moduleName:@"FlexibilityExampleApp"\
initialProperties:@{}];

_rootView.delegate = self;
_rootView.sizeFlexibility = RCTRootViewSizeFlexibilityHeight;
_rootView.frame = CGRectMake(0, 0, self.frame.size.width, 0);
}

#pragma mark - RCTRootViewDelegate
- (void)rootViewDidChangeIntrinsicSize:(RCTRootView *)rootView
{
CGRect newFrame = rootView.frame;
newFrame.size = rootView.intrinsicContentSize;

rootView.frame = newFrame;
}

In the example we have a `FlexibleSizeExampleView` view that holds a root view. We create the root view, initialize it and set the delegate. The delegate will handle size updates. Then, we set the root view's size flexibility to `RCTRootViewSizeFlexibilityHeight`, which means that `rootViewDidChangeIntrinsicSize:` method will be called every time the React Native content changes its height. Finally, we set the root view's width and position. Note that we set there height as well, but it has no effect as we made the height RN-dependent.

You can checkout full source code of the example [here](https://github.com/facebook/react-native/blob/main/packages/rn-tester/RNTester/NativeExampleViews/FlexibleSizeExampleView.mm).

It's fine to change root view's size flexibility mode dynamically. Changing flexibility mode of a root view will schedule a layout recalculation and the delegate `rootViewDidChangeIntrinsicSize:` method will be called once the content size is known.

React Native layout calculation is performed on a separate thread, while native UI view updates are done on the main thread.
This may cause temporary UI inconsistencies between native and React Native. This is a known problem and our team is working on synchronizing UI updates coming from different sources.

React Native does not perform any layout calculations until the root view becomes a subview of some other views.
If you want to hide React Native view until its dimensions are known, add the root view as a subview and make it initially hidden (use `UIView`'s `hidden` property). Then change its visibility in the delegate method.

Is this page useful?

- [Introduction](https://reactnative.dev/docs/next/communication-ios#introduction)
- [Properties](https://reactnative.dev/docs/next/communication-ios#properties)
- [Passing properties from native to React Native](https://reactnative.dev/docs/next/communication-ios#passing-properties-from-native-to-react-native)
- [Passing properties from React Native to native](https://reactnative.dev/docs/next/communication-ios#passing-properties-from-react-native-to-native)
- [Limits of properties](https://reactnative.dev/docs/next/communication-ios#limits-of-properties)
- [Other ways of cross-language interaction (events and native modules)](https://reactnative.dev/docs/next/communication-ios#other-ways-of-cross-language-interaction-events-and-native-modules)
- [Calling React Native functions from native (events)](https://reactnative.dev/docs/next/communication-ios#calling-react-native-functions-from-native-events)
- [Calling native functions from React Native (native modules)](https://reactnative.dev/docs/next/communication-ios#calling-native-functions-from-react-native-native-modules)
- [Layout computation flow](https://reactnative.dev/docs/next/communication-ios#layout-computation-flow)
- [Layout of a native component embedded in React Native](https://reactnative.dev/docs/next/communication-ios#layout-of-a-native-component-embedded-in-react-native)
- [Layout of a React Native component embedded in native](https://reactnative.dev/docs/next/communication-ios#layout-of-a-react-native-component-embedded-in-native)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/datepickerandroid

[Skip to main content](https://reactnative.dev/docs/next/datepickerandroid#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/datepickerandroid)** (0.81).

Version: Next

Removed from React Native

Use one of the [community packages](https://reactnative.directory/?search=datepicker) instead.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/document-nodes

[Skip to main content](https://reactnative.dev/docs/next/document-nodes#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

On this page

Document nodes represent a complete native view tree. Apps using native navigation would provide a separate document node for each screen. Apps not using native navigation would generally provide a single document for the whole app (similar to single-page apps on Web).

Document instance example - Snack

# Document instance example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import \* as React from 'react';
import {Text, TextInput, View} from 'react-native';

function MyComponent(props) {
return (

}

export default function AccessingDocument() {
const ref = React.useRef(null);

// Get the main text input in the screen and focus it after initial load.
const element = ref.current;
const doc = element.ownerDocument;
const textInput = doc.getElementById('main-text-input');
textInput?.focus();
}, \[\]);

return (

import * as React from 'react';
import {Text, TextInput, View} from 'react-native';

function MyComponent(props) {
return (

export default function AccessingDocument() {
const ref = React.useRef(null);

// Get the main text input in the screen and focus it after initial load.
const element = ref.current;
const doc = element.ownerDocument;
const textInput = doc.getElementById('main-text-input');
textInput?.focus();
}, []);

Snack

Start typing below

Updating…

PreviewMy DeviceAndroidiOSWeb

* * *

## Reference [​](https://reactnative.dev/docs/next/document-nodes\#reference "Direct link to Reference")

### Web-compatible API [​](https://reactnative.dev/docs/next/document-nodes\#web-compatible-api "Direct link to Web-compatible API")

From [`Document`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement):

- Properties
- [`childElementCount`](https://developer.mozilla.org/en-US/docs/Web/API/Document/childElementCount)
- [`children`](https://developer.mozilla.org/en-US/docs/Web/API/Document/children)
- [`documentElement`](https://developer.mozilla.org/en-US/docs/Web/API/Document/documentElement)
- [`firstElementChild`](https://developer.mozilla.org/en-US/docs/Web/API/Document/firstElementChild)
- [`lastElementChild`](https://developer.mozilla.org/en-US/docs/Web/API/Document/lastElementChild)
- Methods
- [`getElementById()`](https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementById)

From [`Node`](https://developer.mozilla.org/en-US/docs/Web/API/Node):

- Properties
- [`childNodes`](https://developer.mozilla.org/en-US/docs/Web/API/Node/childNodes)
- [`firstChild`](https://developer.mozilla.org/en-US/docs/Web/API/Node/firstChild)
- [`isConnected`](https://developer.mozilla.org/en-US/docs/Web/API/Node/isConnected)
- [`lastChild`](https://developer.mozilla.org/en-US/docs/Web/API/Node/lastChild)
- [`nextSibling`](https://developer.mozilla.org/en-US/docs/Web/API/Node/nextSibling)
- [`nodeName`](https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeName)
- [`nodeType`](https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType)
- [`nodeValue`](https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeValue)
- [`ownerDocument`](https://developer.mozilla.org/en-US/docs/Web/API/Node/ownerDocument)
- [`parentElement`](https://developer.mozilla.org/en-US/docs/Web/API/Node/parentElement)
- [`parentNode`](https://developer.mozilla.org/en-US/docs/Web/API/Node/parentNode)
- [`previousSibling`](https://developer.mozilla.org/en-US/docs/Web/API/Node/previousSibling)
- [`textContent`](https://developer.mozilla.org/en-US/docs/Web/API/Node/textContent)
- Methods
- [`compareDocumentPosition()`](https://developer.mozilla.org/en-US/docs/Web/API/Node/compareDocumentPosition)
- [`contains()`](https://developer.mozilla.org/en-US/docs/Web/API/Node/contains)
- [`getRootNode()`](https://developer.mozilla.org/en-US/docs/Web/API/Node/getRootNode)
- [`hasChildNodes()`](https://developer.mozilla.org/en-US/docs/Web/API/Node/hasChildNodes)

Is this page useful?

- [Reference](https://reactnative.dev/docs/next/document-nodes#reference)
- [Web-compatible API](https://reactnative.dev/docs/next/document-nodes#web-compatible-api)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/devsettings

[Skip to main content](https://reactnative.dev/docs/next/devsettings#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/devsettings)** (0.81).

Version: Next

On this page

The `DevSettings` module exposes methods for customizing settings for developers in development.

* * *

# Reference

## Methods [​](https://reactnative.dev/docs/next/devsettings\#methods "Direct link to Methods")

### `addMenuItem()` [​](https://reactnative.dev/docs/next/devsettings\#addmenuitem "Direct link to addmenuitem")

tsx

```codeBlockLines_AclH

Add a custom menu item to the Dev Menu.

**Parameters:**

| Name | Type |
| --- | --- |

**Example:**

Alert.alert('Showing secret dev screen!');
});

### `reload()` [​](https://reactnative.dev/docs/next/devsettings\#reload "Direct link to reload")

```codeBlockLines_AclH
static reload(reason?: string): void;

Reload the application. Can be invoked directly or on user interaction.

Is this page useful?

- [Methods](https://reactnative.dev/docs/next/devsettings#methods)
- [`addMenuItem()`](https://reactnative.dev/docs/next/devsettings#addmenuitem)
- [`reload()`](https://reactnative.dev/docs/next/devsettings#reload)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/fast-refresh

[Skip to main content](https://reactnative.dev/docs/next/fast-refresh#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/fast-refresh)** (0.81).

Version: Next

On this page

Fast Refresh is a React Native feature that allows you to get near-instant feedback for changes in your React components. Fast Refresh is enabled by default, and you can toggle "Enable Fast Refresh" in the [React Native Dev Menu](https://reactnative.dev/docs/debugging#accessing-the-in-app-developer-menu). With Fast Refresh enabled, most edits should be visible within a second or two.

## How It Works [​](https://reactnative.dev/docs/next/fast-refresh\#how-it-works "Direct link to How It Works")

- If you edit a module that **only exports React component(s)**, Fast Refresh will update the code only for that module, and re-render your component. You can edit anything in that file, including styles, rendering logic, event handlers, or effects.
- If you edit a module with exports that _aren't_ React components, Fast Refresh will re-run both that module, and the other modules importing it. So if both `Button.js` and `Modal.js` import `Theme.js`, editing `Theme.js` will update both components.
- Finally, if you **edit a file** that's **imported by modules outside of the React tree**, Fast Refresh **will fall

If you make a **syntax error** during a Fast Refresh session, you can fix it and save the file again. The redbox will disappear. Modules with syntax errors are prevented from running, so you won't need to reload the app.

If you make a **runtime error during the module initialization** (for example, typing `Style.create` instead of `StyleSheet.create`), the Fast Refresh session will continue once you fix the error. The redbox will disappear, and the module will be updated.

If you make a mistake that leads to a **runtime error inside your component**, the Fast Refresh session will _also_ continue after you fix the error. In that case, React will remount your application using the updated code.

If you have [error boundaries](https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary) in your app (which is a good idea for graceful failures in production), they will retry rendering on the next edit after a redbox. In that sense, having an error boundary can prevent you from always getting kicked out to the root app screen. However, keep in mind that error boundaries shouldn't be _too_ granular. They are used by React in production, and should always be designed intentionally.

## Limitations [​](https://reactnative.dev/docs/next/fast-refresh\#limitations "Direct link to Limitations")

Fast Refresh tries to preserve local React state in the component you're editing, but only if it's safe to do so. Here's a few reasons why you might see local state being reset on every edit to a file:

- Local state is not preserved for class components (only function components and Hooks preserve state).
- The module you're editing might have _other_ exports in addition to a React component.
- Sometimes, a module would export the result of calling higher-order component like `createNavigationContainer(MyScreen)`. If the returned component is a class, state will be reset.

In the longer term, as more of your codebase moves to function components and Hooks, you can expect state to be preserved in more cases.

## Tips [​](https://reactnative.dev/docs/next/fast-refresh\#tips "Direct link to Tips")

- Fast Refresh preserves React local state in function components (and Hooks) by default.
- Sometimes you might want to _force_ the state to be reset, and a component to be remounted. For example, this can be handy if you're tweaking an animation that only happens on mount. To do this, you can add `// @refresh reset` anywhere in the file you're editing. This directive is local to the file, and instructs Fast Refresh to remount components defined in that file on every edit.

## Fast Refresh and Hooks [​](https://reactnative.dev/docs/next/fast-refresh\#fast-refresh-and-hooks "Direct link to Fast Refresh and Hooks")

When possible, Fast Refresh attempts to preserve the state of your component between edits. In particular, `useState` and `useRef` preserve their previous values as long as you don't change their arguments or the order of the Hook calls.

Hooks with dependencies—such as `useEffect`, `useMemo`, and `useCallback`—will _always_ update during Fast Refresh. Their list of dependencies will be ignored while Fast Refresh is happening.

Sometimes, this can lead to unexpected results. For example, even a `useEffect` with an empty array of dependencies would still re-run once during Fast Refresh. However, writing code resilient to an occasional re-running of `useEffect` is a good practice even without Fast Refresh. This makes it easier for you to later introduce new dependencies to it.

Is this page useful?

- [How It Works](https://reactnative.dev/docs/next/fast-refresh#how-it-works)
- [Error Resilience](https://reactnative.dev/docs/next/fast-refresh#error-resilience)
- [Limitations](https://reactnative.dev/docs/next/fast-refresh#limitations)
- [Tips](https://reactnative.dev/docs/next/fast-refresh#tips)
- [Fast Refresh and Hooks](https://reactnative.dev/docs/next/fast-refresh#fast-refresh-and-hooks)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/colors

[Skip to main content](https://reactnative.dev/docs/next/colors#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/colors)** (0.81).

Version: Next

On this page

Components in React Native are [styled using JavaScript](https://reactnative.dev/docs/next/style). Color properties usually match how [CSS works on the web](https://developer.mozilla.org/en-US/docs/Web/CSS/color_value). General guides on the color usage on each platform could be found below:

- [Android](https://material.io/design/color/color-usage.html)
- [iOS](https://developer.apple.com/design/human-interface-guidelines/ios/visual-design/color/)

## Color APIs [​](https://reactnative.dev/docs/next/colors\#color-apis "Direct link to Color APIs")

React Native has several color APIs designed to allow you to take full advantage of your platform's design and user preferences.

- [PlatformColor](https://reactnative.dev/docs/next/platformcolor) lets you reference the platform's color system.
- [DynamicColorIOS](https://reactnative.dev/docs/next/dynamiccolorios) is iOS specific and allows you to specify which colors should be used in light or Dark Mode.

## Color representations [​](https://reactnative.dev/docs/next/colors\#color-representations "Direct link to Color representations")

### Red Green Blue (RGB) [​](https://reactnative.dev/docs/next/colors\#red-green-blue-rgb "Direct link to Red Green Blue (RGB)")

React Native supports `rgb()` and `rgba()` in both hexadecimal and functional notation:

- `'#f0f'` (#rgb)
- `'#ff00ff'` (#rrggbb)
- `'#f0ff'` (#rgba)
- `'#ff00ff00'` (#rrggbbaa)
- `'rgb(255, 0, 255)'`
- `'rgb(255 0 255)'`
- `'rgba(255, 0, 255, 1.0)'`
- `'rgba(255 0 255 / 1.0)'`

### Hue Saturation Lightness (HSL) [​](https://reactnative.dev/docs/next/colors\#hue-saturation-lightness-hsl "Direct link to Hue Saturation Lightness (HSL)")

React Native supports `hsl()` and `hsla()` in functional notation:

- `'hsl(360, 100%, 100%)'`
- `'hsl(360 100% 100%)'`
- `'hsla(360, 100%, 100%, 1.0)'`
- `'hsla(360 100% 100% / 1.0)'`

### Hue Whiteness Blackness (HWB) [​](https://reactnative.dev/docs/next/colors\#hue-whiteness-blackness-hwb "Direct link to Hue Whiteness Blackness (HWB)")

React Native supports `hwb()` in functional notation:

- `'hwb(0, 0%, 100%)'`
- `'hwb(360, 100%, 100%)'`
- `'hwb(0 0% 0%)'`
- `'hwb(70 50% 0%)'`

### Color ints [​](https://reactnative.dev/docs/next/colors\#color-ints "Direct link to Color ints")

React Native supports also colors as an `int` values (in RGB color mode):

- `0xff00ff00` (0xrrggbbaa)

caution

This might appear similar to the Android [Color](https://developer.android.com/reference/android/graphics/Color) ints representation but on Android values are stored in SRGB color mode (0xaarrggbb).

### Named colors [​](https://reactnative.dev/docs/next/colors\#named-colors "Direct link to Named colors")

In React Native you can also use color name strings as values.

info

React Native only supports lowercase color names. Uppercase color names are not supported.

#### `transparent` [​](https://reactnative.dev/docs/next/colors\#transparent "Direct link to transparent")

This is a shortcut for `rgba(0,0,0,0)`, same like in [CSS3](https://www.w3.org/TR/css-color-3/#transparent).

#### Color keywords [​](https://reactnative.dev/docs/next/colors\#color-keywords "Direct link to Color keywords")

Named colors implementation follows the [CSS3/SVG specification](https://www.w3.org/TR/css-color-3/#svg-color):

- aliceblue ( `#f0f8ff`)
- antiquewhite ( `#faebd7`)
- aqua ( `#00ffff`)
- aquamarine ( `#7fffd4`)
- azure ( `#f0ffff`)
- beige ( `#f5f5dc`)
- bisque ( `#ffe4c4`)
- black ( `#000000`)
- blanchedalmond ( `#ffebcd`)
- blue ( `#0000ff`)
- blueviolet ( `#8a2be2`)
- brown ( `#a52a2a`)
- burlywood ( `#deb887`)
- cadetblue ( `#5f9ea0`)
- chartreuse ( `#7fff00`)
- chocolate ( `#d2691e`)
- coral ( `#ff7f50`)
- cornflowerblue ( `#6495ed`)
- cornsilk ( `#fff8dc`)
- crimson ( `#dc143c`)
- cyan ( `#00ffff`)
- darkblue ( `#00008b`)
- darkcyan ( `#008b8b`)
- darkgoldenrod ( `#b8860b`)
- darkgray ( `#a9a9a9`)
- darkgreen ( `#006400`)
- darkgrey ( `#a9a9a9`)
- darkkhaki ( `#bdb76b`)
- darkmagenta ( `#8b008b`)
- darkolivegreen ( `#556b2f`)
- darkorange ( `#ff8c00`)
- darkorchid ( `#9932cc`)
- darkred ( `#8b0000`)
- darksalmon ( `#e9967a`)
- darkseagreen ( `#8fbc8f`)
- darkslateblue ( `#483d8b`)
- darkslategrey ( `#2f4f4f`)
- darkturquoise ( `#00ced1`)
- darkviolet ( `#9400d3`)
- deeppink ( `#ff1493`)
- deepskyblue ( `#00bfff`)
- dimgray ( `#696969`)
- dimgrey ( `#696969`)
- dodgerblue ( `#1e90ff`)
- firebrick ( `#b22222`)
- floralwhite ( `#fffaf0`)
- forestgreen ( `#228b22`)
- fuchsia ( `#ff00ff`)
- gainsboro ( `#dcdcdc`)
- ghostwhite ( `#f8f8ff`)
- gold ( `#ffd700`)
- goldenrod ( `#daa520`)
- gray ( `#808080`)
- green ( `#008000`)
- greenyellow ( `#adff2f`)
- grey ( `#808080`)
- honeydew ( `#f0fff0`)
- hotpink ( `#ff69b4`)
- indianred ( `#cd5c5c`)
- indigo ( `#4b0082`)
- ivory ( `#fffff0`)
- khaki ( `#f0e68c`)
- lavender ( `#e6e6fa`)
- lavenderblush ( `#fff0f5`)
- lawngreen ( `#7cfc00`)
- lemonchiffon ( `#fffacd`)
- lightblue ( `#add8e6`)
- lightcoral ( `#f08080`)
- lightcyan ( `#e0ffff`)
- lightgoldenrodyellow ( `#fafad2`)
- lightgray ( `#d3d3d3`)
- lightgreen ( `#90ee90`)
- lightgrey ( `#d3d3d3`)
- lightpink ( `#ffb6c1`)
- lightsalmon ( `#ffa07a`)
- lightseagreen ( `#20b2aa`)
- lightskyblue ( `#87cefa`)
- lightslategrey ( `#778899`)
- lightsteelblue ( `#b0c4de`)
- lightyellow ( `#ffffe0`)
- lime ( `#00ff00`)
- limegreen ( `#32cd32`)
- linen ( `#faf0e6`)
- magenta ( `#ff00ff`)
- maroon ( `#800000`)
- mediumaquamarine ( `#66cdaa`)
- mediumblue ( `#0000cd`)
- mediumorchid ( `#ba55d3`)
- mediumpurple ( `#9370db`)
- mediumseagreen ( `#3cb371`)
- mediumslateblue ( `#7b68ee`)
- mediumspringgreen ( `#00fa9a`)
- mediumturquoise ( `#48d1cc`)
- mediumvioletred ( `#c71585`)
- midnightblue ( `#191970`)
- mintcream ( `#f5fffa`)
- mistyrose ( `#ffe4e1`)
- moccasin ( `#ffe4b5`)
- navajowhite ( `#ffdead`)
- navy ( `#000080`)
- oldlace ( `#fdf5e6`)
- olive ( `#808000`)
- olivedrab ( `#6b8e23`)
- orange ( `#ffa500`)
- orangered ( `#ff4500`)
- orchid ( `#da70d6`)
- palegoldenrod ( `#eee8aa`)
- palegreen ( `#98fb98`)
- paleturquoise ( `#afeeee`)
- palevioletred ( `#db7093`)
- papayawhip ( `#ffefd5`)
- peachpuff ( `#ffdab9`)
- peru ( `#cd853f`)
- pink ( `#ffc0cb`)
- plum ( `#dda0dd`)
- powderblue ( `#b0e0e6`)
- purple ( `#800080`)
- rebeccapurple ( `#663399`)
- red ( `#ff0000`)
- rosybrown ( `#bc8f8f`)
- royalblue ( `#4169e1`)
- saddlebrown ( `#8b4513`)
- salmon ( `#fa8072`)
- sandybrown ( `#f4a460`)
- seagreen ( `#2e8b57`)
- seashell ( `#fff5ee`)
- sienna ( `#a0522d`)
- silver ( `#c0c0c0`)
- skyblue ( `#87ceeb`)
- slateblue ( `#6a5acd`)
- slategray ( `#708090`)
- snow ( `#fffafa`)
- springgreen ( `#00ff7f`)
- steelblue ( `#4682b4`)
- tan ( `#d2b48c`)
- teal ( `#008080`)
- thistle ( `#d8bfd8`)
- tomato ( `#ff6347`)
- turquoise ( `#40e0d0`)
- violet ( `#ee82ee`)
- wheat ( `#f5deb3`)
- white ( `#ffffff`)
- whitesmoke ( `#f5f5f5`)
- yellow ( `#ffff00`)
- yellowgreen ( `#9acd32`)

Is this page useful?

- [Color APIs](https://reactnative.dev/docs/next/colors#color-apis)
- [Color representations](https://reactnative.dev/docs/next/colors#color-representations)
- [Red Green Blue (RGB)](https://reactnative.dev/docs/next/colors#red-green-blue-rgb)
- [Hue Saturation Lightness (HSL)](https://reactnative.dev/docs/next/colors#hue-saturation-lightness-hsl)
- [Hue Whiteness Blackness (HWB)](https://reactnative.dev/docs/next/colors#hue-whiteness-blackness-hwb)
- [Color ints](https://reactnative.dev/docs/next/colors#color-ints)
- [Named colors](https://reactnative.dev/docs/next/colors#named-colors)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/animatedvalue

[Skip to main content](https://reactnative.dev/docs/next/animatedvalue#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/animatedvalue)** (0.81).

Version: Next

On this page

Standard value for driving animations. One `Animated.Value` can drive multiple properties in a synchronized fashion, but can only be driven by one mechanism at a time. Using a new mechanism (e.g. starting a new animation, or calling `setValue`) will stop any previous ones.

Typically initialized with `useAnimatedValue(0);` or `new Animated.Value(0);` in class components.

* * *

# Reference

## Methods [​](https://reactnative.dev/docs/next/animatedvalue\#methods "Direct link to Methods")

### `setValue()` [​](https://reactnative.dev/docs/next/animatedvalue\#setvalue "Direct link to setvalue")

tsx

```codeBlockLines_AclH
setValue(value: number);

Directly set the value. This will stop any animations running on the value and update all the bound properties.

**Parameters:**

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| value | number | Yes | Value |

### `setOffset()` [​](https://reactnative.dev/docs/next/animatedvalue\#setoffset "Direct link to setoffset")

```codeBlockLines_AclH
setOffset(offset: number);

Sets an offset that is applied on top of whatever value is set, whether via `setValue`, an animation, or `Animated.event`. Useful for compensating things like the start of a pan gesture.

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| offset | number | Yes | Offset value |

### `flattenOffset()` [​](https://reactnative.dev/docs/next/animatedvalue\#flattenoffset "Direct link to flattenoffset")

```codeBlockLines_AclH
flattenOffset();

Merges the offset value into the base value and resets the offset to zero. The final output of the value is unchanged.

### `extractOffset()` [​](https://reactnative.dev/docs/next/animatedvalue\#extractoffset "Direct link to extractoffset")

```codeBlockLines_AclH
extractOffset();

Sets the offset value to the base value, and resets the base value to zero. The final output of the value is unchanged.

### `addListener()` [​](https://reactnative.dev/docs/next/animatedvalue\#addlistener "Direct link to addlistener")

```codeBlockLines_AclH

Adds an asynchronous listener to the value so you can observe updates from animations. This is useful because there is no way to synchronously read the value because it might be driven natively.

Returns a string that serves as an identifier for the listener.

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| callback | function | Yes | The callback function which will receive an object with a `value` key set to the new value. |

### `removeListener()` [​](https://reactnative.dev/docs/next/animatedvalue\#removelistener "Direct link to removelistener")

```codeBlockLines_AclH
removeListener(id: string);

Unregister a listener. The `id` param shall match the identifier previously returned by `addListener()`.

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| id | string | Yes | Id for the listener being removed. |

### `removeAllListeners()` [​](https://reactnative.dev/docs/next/animatedvalue\#removealllisteners "Direct link to removealllisteners")

```codeBlockLines_AclH
removeAllListeners();

Remove all registered listeners.

### `stopAnimation()` [​](https://reactnative.dev/docs/next/animatedvalue\#stopanimation "Direct link to stopanimation")

Stops any running animation or tracking. `callback` is invoked with the final value after stopping the animation, which is useful for updating state to match the animation position with layout.

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| callback | function | No | A function that will receive the final value. |

### `resetAnimation()` [​](https://reactnative.dev/docs/next/animatedvalue\#resetanimation "Direct link to resetanimation")

Stops any animation and resets the value to its original.

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| callback | function | No | A function that will receive the original value. |

### `interpolate()` [​](https://reactnative.dev/docs/next/animatedvalue\#interpolate "Direct link to interpolate")

```codeBlockLines_AclH
interpolate(config: InterpolationConfigType);

Interpolates the value before updating the property, e.g. mapping 0-1 to 0-10.

See `AnimatedInterpolation.js`

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| config | object | Yes | See below. |

The `config` object is composed of the following keys:

- `inputRange`: an array of numbers
- `outputRange`: an array of numbers or strings
- `easing` (optional): a function that returns a number, given an input number
- `extrapolate` (optional): a string such as 'extend', 'identity', or 'clamp'
- `extrapolateLeft` (optional): a string such as 'extend', 'identity', or 'clamp'
- `extrapolateRight` (optional): a string such as 'extend', 'identity', or 'clamp'

### `animate()` [​](https://reactnative.dev/docs/next/animatedvalue\#animate "Direct link to animate")

```codeBlockLines_AclH
animate(animation, callback);

Typically only used internally, but could be used by a custom Animation class.

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| animation | Animation | Yes | See `Animation.js`. |
| callback | function | Yes | Callback function. |

Is this page useful?

- [Methods](https://reactnative.dev/docs/next/animatedvalue#methods)
- [`setValue()`](https://reactnative.dev/docs/next/animatedvalue#setvalue)
- [`setOffset()`](https://reactnative.dev/docs/next/animatedvalue#setoffset)
- [`flattenOffset()`](https://reactnative.dev/docs/next/animatedvalue#flattenoffset)
- [`extractOffset()`](https://reactnative.dev/docs/next/animatedvalue#extractoffset)
- [`addListener()`](https://reactnative.dev/docs/next/animatedvalue#addlistener)
- [`removeListener()`](https://reactnative.dev/docs/next/animatedvalue#removelistener)
- [`removeAllListeners()`](https://reactnative.dev/docs/next/animatedvalue#removealllisteners)
- [`stopAnimation()`](https://reactnative.dev/docs/next/animatedvalue#stopanimation)
- [`resetAnimation()`](https://reactnative.dev/docs/next/animatedvalue#resetanimation)
- [`interpolate()`](https://reactnative.dev/docs/next/animatedvalue#interpolate)
- [`animate()`](https://reactnative.dev/docs/next/animatedvalue#animate)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/gesture-responder-system

[Skip to main content](https://reactnative.dev/docs/next/gesture-responder-system#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/gesture-responder-system)** (0.81).

Version: Next

On this page

The gesture responder system manages the lifecycle of gestures in your app. A touch can go through several phases as the app determines what the user's intention is. For example, the app needs to determine if the touch is scrolling, sliding on a widget, or tapping. This can even change during the duration of a touch. There can also be multiple simultaneous touches.

The touch responder system is needed to allow components to negotiate these touch interactions without any additional knowledge about their parent or child components.

### Best Practices [​](https://reactnative.dev/docs/next/gesture-responder-system\#best-practices "Direct link to Best Practices")

To make your app feel great, every action should have the following attributes:

- Feedback/highlighting- show the user what is handling their touch, and what will happen when they release the gesture
- Cancel-ability- when making an action, the user should be able to abort it mid-touch by dragging their finger away

These features make users more comfortable while using an app, because it allows people to experiment and interact without fear of making mistakes.

### TouchableHighlight and Touchable\* [​](https://reactnative.dev/docs/next/gesture-responder-system\#touchablehighlight-and-touchable "Direct link to TouchableHighlight and Touchable*")

The responder system can be complicated to use. So we have provided an abstract `Touchable` implementation for things that should be "tappable". This uses the responder system and allows you to configure tap interactions declaratively. Use `TouchableHighlight` anywhere where you would use a button or link on web.

## Responder Lifecycle [​](https://reactnative.dev/docs/next/gesture-responder-system\#responder-lifecycle "Direct link to Responder Lifecycle")

A view can become the touch responder by implementing the correct negotiation methods. There are two methods to ask the view if it wants to become responder:

If the View returns true and attempts to become the responder, one of the following will happen:

If the view is responding, the following handlers can be called:

`evt` is a synthetic touch event with the following form:

- `nativeEvent`
- `changedTouches` \- Array of all touch events that have changed since the last event
- `identifier` \- The ID of the touch
- `locationX` \- The X position of the touch, relative to the element
- `locationY` \- The Y position of the touch, relative to the element
- `pageX` \- The X position of the touch, relative to the root element
- `pageY` \- The Y position of the touch, relative to the root element
- `target` \- The node id of the element receiving the touch event
- `timestamp` \- A time identifier for the touch, useful for velocity calculation
- `touches` \- Array of all current touches on the screen

### Capture ShouldSet Handlers [​](https://reactnative.dev/docs/next/gesture-responder-system\#capture-shouldset-handlers "Direct link to Capture ShouldSet Handlers")

`onStartShouldSetResponder` and `onMoveShouldSetResponder` are called with a bubbling pattern, where the deepest node is called first. That means that the deepest component will become responder when multiple Views return true for `*ShouldSetResponder` handlers. This is desirable in most cases, because it makes sure all controls and buttons are usable.

However, sometimes a parent will want to make sure that it becomes responder. This can be handled by using the capture phase. Before the responder system bubbles up from the deepest component, it will do a capture phase, firing `on*ShouldSetResponderCapture`. So if a parent View wants to prevent the child from becoming responder on a touch start, it should have a `onStartShouldSetResponderCapture` handler which returns true.

### PanResponder [​](https://reactnative.dev/docs/next/gesture-responder-system\#panresponder "Direct link to PanResponder")

For higher-level gesture interpretation, check out [PanResponder](https://reactnative.dev/docs/next/panresponder).

Is this page useful?

- [Best Practices](https://reactnative.dev/docs/next/gesture-responder-system#best-practices)
- [TouchableHighlight and Touchable\*](https://reactnative.dev/docs/next/gesture-responder-system#touchablehighlight-and-touchable)
- [Responder Lifecycle](https://reactnative.dev/docs/next/gesture-responder-system#responder-lifecycle)
- [Capture ShouldSet Handlers](https://reactnative.dev/docs/next/gesture-responder-system#capture-shouldset-handlers)
- [PanResponder](https://reactnative.dev/docs/next/gesture-responder-system#panresponder)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/global-Blob

[Skip to main content](https://reactnative.dev/docs/next/global-Blob#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

warning

🚧 This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/Blob) for more information.

The global `Blob` class, as defined in Web specifications.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/fabric-native-components-ios

[Skip to main content](https://reactnative.dev/docs/next/fabric-native-components-ios#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/fabric-native-components-ios)** (0.81).

Version: Next

On this page

Now it's time to write some iOS platform code to be able to render the web view. The steps you need to follow are:

- Run Codegen.
- Write the code for the `RCTWebView`
- Register the `RCTWebView` in the application

### 1\. Run Codegen [​](https://reactnative.dev/docs/next/fabric-native-components-ios\#1-run-codegen "Direct link to 1. Run Codegen")

You can [manually run](https://reactnative.dev/docs/next/the-new-architecture/codegen-cli) the Codegen, however it's simpler to use the application you're going to demo the component in to do this for you.

bash

```codeBlockLines_AclH
cd ios
bundle install
bundle exec pod install

Importantly you will see logging output from Codegen, which we're going to use in Xcode to build our WebView native component.

warning

You should be careful about committing generated code to your repository. Generated code is specific to each version of React Native. Use npm [peerDependencies](https://nodejs.org/en/blog/npm/peer-dependencies) to restrict compatibility with version of React Native.

### 3\. Write the `RCTWebView` [​](https://reactnative.dev/docs/next/fabric-native-components-ios\#3-write-the-rctwebview "Direct link to 3-write-the-rctwebview")

We need to prepare your iOS project using Xcode by completing these **5 steps**:

1. Open the CocoaPods generated Xcode Workspace:

```codeBlockLines_AclH
cd ios
open Demo.xcworkspace

2. Right click on app and select `New Group`, call the new group `WebView`.

3. In the `WebView` group, create `New` → `File from Template`.

4. Use the `Objective-C File` template, and name it `RCTWebView`.

5. Repeat step 4 and create a header file named `RCTWebView.h`.

6. Rename `RCTWebView.m` → `RCTWebView.mm` making it an Objective-C++ file.

Demo/ios

```codeBlockLines_AclH
Podfile
...
Demo
├── AppDelegate.swift
...
├── RCTWebView.h
└── RCTWebView.mm

After creating the header file and the implementation file, you can start implementing them.

This is the code for the `RCTWebView.h` file, which declares the component interface.

Demo/RCTWebView/RCTWebView.h

```codeBlockLines_AclH

@interface RCTWebView : RCTViewComponentView

// You would declare native methods you'd want to access from the view here

@end

NS_ASSUME_NONNULL_END

This class defines an `RCTWebView` which extends the `RCTViewComponentView` class. This is the base class for all the native components and it is provided by React Native.

The code for the implementation file ( `RCTWebView.mm`) is the following:

Demo/RCTWebView/RCTWebView.mm

#import "RCTWebView.h"

@implementation RCTWebView {
NSURL * _sourceURL;
WKWebView * _webView;
}

-(instancetype)init
{
if(self = [super init]) {
_webView = [WKWebView new];
_webView.navigationDelegate = self;
[self addSubview:_webView];
}
return self;
}

- (void)updateProps:(Props::Shared const &)props oldProps:(Props::Shared const &)oldProps
{

// Handle your props here
if (oldViewProps.sourceURL != newViewProps.sourceURL) {
NSString *urlString = [NSString stringWithCString:newViewProps.sourceURL.c_str() encoding:NSUTF8StringEncoding];
_sourceURL = [NSURL URLWithString:urlString];
if ([self urlIsValid:newViewProps.sourceURL]) {
[_webView loadRequest:[NSURLRequest requestWithURL:_sourceURL]];
}
}

[super updateProps:props oldProps:oldProps];
}

-(void)layoutSubviews
{
[super layoutSubviews];
_webView.frame = self.bounds;

}

#pragma mark - WKNavigationDelegate

-(void)webView:(WKWebView *)webView didFinishNavigation:(WKNavigation *)navigation
{
CustomWebViewEventEmitter::OnScriptLoaded result = CustomWebViewEventEmitter::OnScriptLoaded{CustomWebViewEventEmitter::OnScriptLoadedResult::Success};
self.eventEmitter.onScriptLoaded(result);
}

- (BOOL)urlIsValid:(std::string)propString
{

CustomWebViewEventEmitter::OnScriptLoaded result = CustomWebViewEventEmitter::OnScriptLoaded{CustomWebViewEventEmitter::OnScriptLoadedResult::Error};

self.eventEmitter.onScriptLoaded(result);
return NO;
}
return YES;
}

// Event emitter convenience method
- (const CustomWebViewEventEmitter &)eventEmitter
{

+ (ComponentDescriptorProvider)componentDescriptorProvider
{

This code is written in Objective-C++ and contains various details:

- the `@interface` implements two protocols:
- `RCTCustomWebViewViewProtocol`, generated by Codegen;
- `WKNavigationDelegate`, provided by the WebKit framework to handle the web view navigation events;
- the `init` method that instantiates the `WKWebView`, adds it to the subviews and that sets the `navigationDelegate`;
- the `updateProps` method that is called by React Native when the component's props change;
- the `layoutSubviews` method that describes how the custom view needs to be laid out;
- the `webView:didFinishNavigation:` method that lets you handle what to do when the `WKWebView` finishes loading the page;
- the `urlIsValid:(std::string)propString` method that checks whether the URL received as prop is valid;
- the `eventEmitter` method which is a utility to retrieve a strongly typed `eventEmitter` instance
- the `componentDescriptorProvider` which returns the `ComponentDescriptor` generated by Codegen;

#### Add WebKit framework [​](https://reactnative.dev/docs/next/fabric-native-components-ios\#add-webkit-framework "Direct link to Add WebKit framework")

note

This step is only required because we are creating a Web view. Web components on iOS needs to be linked against the WebKit framework provided by Apple. If your component doesn't need to access web-specific features, you can skip this step.

A web view requires access to some features that Apple provides through one of the frameworks shipped with Xcode and the devices: WebKit.

To link the WebKit framework in your app, follow these steps:

1. In Xcode, Click on your project
2. Select the app target
3. Select the General tab
4. Scroll down until you find the _"Frameworks, Libraries, and Embedded Contents"_ section, and press the `+` button

5. In the search bar, filter for WebKit
6. Select the WebKit framework
7. Click on Add.

Is this page useful?

- [1\. Run Codegen](https://reactnative.dev/docs/next/fabric-native-components-ios#1-run-codegen)
- [3\. Write the `RCTWebView`](https://reactnative.dev/docs/next/fabric-native-components-ios#3-write-the-rctwebview)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/button

[Skip to main content](https://reactnative.dev/docs/next/button#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/button)** (0.81).

Version: Next

On this page

A basic button component that should render nicely on any platform. Supports a minimal level of customization.

If this button doesn't look right for your app, you can build your own button using [Pressable](https://reactnative.dev/docs/next/pressable). For inspiration, look at the [source code for the Button component](https://github.com/facebook/react-native/blob/main/packages/react-native/Libraries/Components/Button.js).

tsx

```codeBlockLines_AclH
<Button
onPress={onPressLearnMore}
title="Learn More"
color="#841584"
accessibilityLabel="Learn more about this purple button"

## Example [​](https://reactnative.dev/docs/next/button\#example "Direct link to Example")

Button Example - Snack

# Button Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {StyleSheet, Button, View, Text, Alert} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

accessibilityLabel to help make your app usable by everyone.

title="Press me"

iOS, the color prop controls the color of the text. On Android, the
color adjusts the background color of the button.

title="Press me"
color="#f194ff"

title="Press me"
disabled

title="Left button"

title="Right button"

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
marginHorizontal: 16,
},
title: {
textAlign: 'center',
marginVertical: 8,
},
fixToText: {
flexDirection: 'row',
justifyContent: 'space-between',
},
separator: {
marginVertical: 8,
borderBottomColor: '#737373',
borderBottomWidth: StyleSheet.hairlineWidth,
},
});

export default App;

iOS, the color prop controls the color of the text. On Android, the
color adjusts the background color of the button.

title="Press me"
color="#f194ff"

title="Press me"
disabled

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
marginHorizontal: 16,
},
title: {
textAlign: 'center',
marginVertical: 8,
},
fixToText: {
flexDirection: 'row',
justifyContent: 'space-between',
},
separator: {
marginVertical: 8,
borderBottomColor: '#737373',
borderBottomWidth: StyleSheet.hairlineWidth,
},
});

Snack

The title and onPress handler are required. It is recommended to set accessibilityLabel to help make your app usable by everyone.

Press me

Adjust the color in a way that looks standard on each platform. On iOS, the color prop controls the color of the text. On Android, the color adjusts the background color of the button.

All interaction for the component are disabled.

This layout strategy lets the title define the width of the button.

Left button

Right button

Updating…

PreviewMy DeviceAndroidiOSWeb

* * *

# Reference

## Props [​](https://reactnative.dev/docs/next/button\#props "Direct link to Props")

### Required **`onPress`** [​](https://reactnative.dev/docs/next/button\#requiredonpress "Direct link to requiredonpress")

Handler to be called when the user taps the button.

| Type |
| --- |
| `({nativeEvent: [PressEvent](https://reactnative.dev/docs/next/pressevent)})` |

### Required **`title`** [​](https://reactnative.dev/docs/next/button\#requiredtitle "Direct link to requiredtitle")

Text to display inside the button. On Android the given title will be converted to the uppercased form.

| Type |
| --- |
| string |

### `accessibilityLabel` [​](https://reactnative.dev/docs/next/button\#accessibilitylabel "Direct link to accessibilitylabel")

Text to display for blindness accessibility features.

### `accessibilityLanguage` iOS [​](https://reactnative.dev/docs/next/button\#accessibilitylanguage-ios "Direct link to accessibilitylanguage-ios")

A value indicating which language should be used by the screen reader when the user interacts with the element. It should follow the [BCP 47 specification](https://www.rfc-editor.org/info/bcp47).

See the [iOS `accessibilityLanguage` doc](https://developer.apple.com/documentation/objectivec/nsobject/1615192-accessibilitylanguage) for more information.

### `accessibilityActions` [​](https://reactnative.dev/docs/next/button\#accessibilityactions "Direct link to accessibilityactions")

Accessibility actions allow an assistive technology to programmatically invoke the actions of a component. The `accessibilityActions` property should contain a list of action objects. Each action object should contain the field name and label.

See the [Accessibility guide](https://reactnative.dev/docs/next/accessibility#accessibility-actions) for more information.

| Type | Required |
| --- | --- |
| array | No |

### `onAccessibilityAction` [​](https://reactnative.dev/docs/next/button\#onaccessibilityaction "Direct link to onaccessibilityaction")

Invoked when the user performs the accessibility actions. The only argument to this function is an event containing the name of the action to perform.

| Type | Required |
| --- | --- |
| function | No |

### `color` [​](https://reactnative.dev/docs/next/button\#color "Direct link to color")

Color of the text (iOS), or background color of the button (Android).

| Type | Default |
| --- | --- |

### `disabled` [​](https://reactnative.dev/docs/next/button\#disabled "Direct link to disabled")

If `true`, disable all interactions for this component.

| Type | Default |
| --- | --- |
| bool | `false` |

### `hasTVPreferredFocus` TV [​](https://reactnative.dev/docs/next/button\#hastvpreferredfocus-tv "Direct link to hastvpreferredfocus-tv")

TV preferred focus.

### `nextFocusDown` Android TV [​](https://reactnative.dev/docs/next/button\#nextfocusdown-androidtv "Direct link to nextfocusdown-androidtv")

Designates the next view to receive focus when the user navigates down. See the [Android documentation](https://developer.android.com/reference/android/view/View.html#attr_android:nextFocusDown).

| Type |
| --- |
| number |

### `nextFocusForward` Android TV [​](https://reactnative.dev/docs/next/button\#nextfocusforward-androidtv "Direct link to nextfocusforward-androidtv")

Designates the next view to receive focus when the user navigates forward. See the [Android documentation](https://developer.android.com/reference/android/view/View.html#attr_android:nextFocusForward).

### `nextFocusLeft` Android TV [​](https://reactnative.dev/docs/next/button\#nextfocusleft-androidtv "Direct link to nextfocusleft-androidtv")

Designates the next view to receive focus when the user navigates left. See the [Android documentation](https://developer.android.com/reference/android/view/View.html#attr_android:nextFocusLeft).

### `nextFocusRight` Android TV [​](https://reactnative.dev/docs/next/button\#nextfocusright-androidtv "Direct link to nextfocusright-androidtv")

Designates the next view to receive focus when the user navigates right. See the [Android documentation](https://developer.android.com/reference/android/view/View.html#attr_android:nextFocusRight).

### `nextFocusUp` Android TV [​](https://reactnative.dev/docs/next/button\#nextfocusup-androidtv "Direct link to nextfocusup-androidtv")

Designates the next view to receive focus when the user navigates up. See the [Android documentation](https://developer.android.com/reference/android/view/View.html#attr_android:nextFocusUp).

### `testID` [​](https://reactnative.dev/docs/next/button\#testid "Direct link to testid")

Used to locate this view in end-to-end tests.

### `touchSoundDisabled` Android [​](https://reactnative.dev/docs/next/button\#touchsounddisabled-android "Direct link to touchsounddisabled-android")

If `true`, doesn't play system sound on touch.

| Type | Default |
| --- | --- |
| boolean | `false` |

Is this page useful?

- [Example](https://reactnative.dev/docs/next/button#example)
- [Props](https://reactnative.dev/docs/next/button#props)
- [Required\\
**`onPress`**](https://reactnative.dev/docs/next/button#requiredonpress)
- [Required\\
**`title`**](https://reactnative.dev/docs/next/button#requiredtitle)
- [`accessibilityLabel`](https://reactnative.dev/docs/next/button#accessibilitylabel)
- [`accessibilityLanguage` \\
iOS](https://reactnative.dev/docs/next/button#accessibilitylanguage-ios)
- [`accessibilityActions`](https://reactnative.dev/docs/next/button#accessibilityactions)
- [`onAccessibilityAction`](https://reactnative.dev/docs/next/button#onaccessibilityaction)
- [`color`](https://reactnative.dev/docs/next/button#color)
- [`disabled`](https://reactnative.dev/docs/next/button#disabled)
- [`hasTVPreferredFocus` \\
TV](https://reactnative.dev/docs/next/button#hastvpreferredfocus-tv)
- [`nextFocusDown` \\
Android\\
\\
TV](https://reactnative.dev/docs/next/button#nextfocusdown-androidtv)
- [`nextFocusForward` \\
Android\\
\\
TV](https://reactnative.dev/docs/next/button#nextfocusforward-androidtv)
- [`nextFocusLeft` \\
Android\\
\\
TV](https://reactnative.dev/docs/next/button#nextfocusleft-androidtv)
- [`nextFocusRight` \\
Android\\
\\
TV](https://reactnative.dev/docs/next/button#nextfocusright-androidtv)
- [`nextFocusUp` \\
Android\\
\\
TV](https://reactnative.dev/docs/next/button#nextfocusup-androidtv)
- [`testID`](https://reactnative.dev/docs/next/button#testid)
- [`touchSoundDisabled` \\
Android](https://reactnative.dev/docs/next/button#touchsounddisabled-android)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/animated

[Skip to main content](https://reactnative.dev/docs/next/animated#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/animated)** (0.81).

Version: Next

On this page

The `Animated` library is designed to make animations fluid, powerful, and painless to build and maintain. `Animated` focuses on declarative relationships between inputs and outputs, configurable transforms in between, and `start`/ `stop` methods to control time-based animation execution.

The core workflow for creating an animation is to create an `Animated.Value`, hook it up to one or more style attributes of an animated component, and then drive updates via animations using `Animated.timing()`.

note

Don't modify the animated value directly. You can use the [`useRef` Hook](https://react.dev/reference/react/useRef) to return a mutable ref object. This ref object's `current` property is initialized as the given argument and persists throughout the component lifecycle.

## Example [​](https://reactnative.dev/docs/next/animated\#example "Direct link to Example")

The following example contains a `View` which will fade in and fade out based on the animated value `fadeAnim`

Animated Example - Snack

# Animated Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React, {useRef} from 'react';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';
import {Animated, Text, View, StyleSheet, Button} from 'react-native';

// fadeAnim will be used as the value for opacity. Initial Value: 0
const fadeAnim = useRef(new Animated.Value(0)).current;

// Will change fadeAnim value to 1 in 5 seconds
Animated.timing(fadeAnim, {
toValue: 1,
duration: 5000,
useNativeDriver: true,
}).start();
};

// Will change fadeAnim value to 0 in 3 seconds
Animated.timing(fadeAnim, {
toValue: 0,
duration: 3000,
useNativeDriver: true,
}).start();
};

return (

style={\[\
styles.fadingContainer,\
{\
// Bind opacity to animated value\
opacity: fadeAnim,\
},\

};

const styles = StyleSheet.create({
container: {
flex: 1,
alignItems: 'center',
justifyContent: 'center',
},
fadingContainer: {
padding: 20,
backgroundColor: 'powderblue',
},
fadingText: {
fontSize: 28,
},
buttonRow: {
flexBasis: 100,
justifyContent: 'space-evenly',
marginVertical: 16,
},
});

export default App;

// fadeAnim will be used as the value for opacity. Initial Value: 0
const fadeAnim = useRef(new Animated.Value(0)).current;

// Will change fadeAnim value to 1 in 5 seconds
Animated.timing(fadeAnim, {
toValue: 1,
duration: 5000,
useNativeDriver: true,
}).start();
};

// Will change fadeAnim value to 0 in 3 seconds
Animated.timing(fadeAnim, {
toValue: 0,
duration: 3000,
useNativeDriver: true,
}).start();
};

style={[\
styles.fadingContainer,\
{\
// Bind opacity to animated value\
opacity: fadeAnim,\
},\

const styles = StyleSheet.create({
container: {
flex: 1,
alignItems: 'center',
justifyContent: 'center',
},
fadingContainer: {
padding: 20,
backgroundColor: 'powderblue',
},
fadingText: {
fontSize: 28,
},
buttonRow: {
flexBasis: 100,
justifyContent: 'space-evenly',
marginVertical: 16,
},
});

Snack

Fading View!

Fade In View

Fade Out View

Updating…

PreviewMy DeviceAndroidiOSWeb

Refer to the [Animations](https://reactnative.dev/docs/next/animations#animated-api) guide to see additional examples of `Animated` in action.

## Overview [​](https://reactnative.dev/docs/next/animated\#overview "Direct link to Overview")

There are two value types you can use with `Animated`:

- [`Animated.Value()`](https://reactnative.dev/docs/next/animated#value) for single values
- [`Animated.ValueXY()`](https://reactnative.dev/docs/next/animated#valuexy) for vectors

`Animated.Value` can bind to style properties or other props, and can be interpolated as well. A single `Animated.Value` can drive any number of properties.

### Configuring animations [​](https://reactnative.dev/docs/next/animated\#configuring-animations "Direct link to Configuring animations")

`Animated` provides three types of animation types. Each animation type provides a particular animation curve that controls how your values animate from their initial value to the final value:

- [`Animated.decay()`](https://reactnative.dev/docs/next/animated#decay) starts with an initial velocity and gradually slows to a stop.
- [`Animated.spring()`](https://reactnative.dev/docs/next/animated#spring) provides a basic spring physics model.
- [`Animated.timing()`](https://reactnative.dev/docs/next/animated#timing) animates a value over time using [easing functions](https://reactnative.dev/docs/next/easing).

In most cases, you will be using `timing()`. By default, it uses a symmetric easeInOut curve that conveys the gradual acceleration of an object to full speed and concludes by gradually decelerating to a stop.

### Working with animations [​](https://reactnative.dev/docs/next/animated\#working-with-animations "Direct link to Working with animations")

Animations are started by calling `start()` on your animation. `start()` takes a completion callback that will be called when the animation is done. If the animation finished running normally, the completion callback will be invoked with `{finished: true}`. If the animation is done because `stop()` was called on it before it could finish (e.g. because it was interrupted by a gesture or another animation), then it will receive `{finished: false}`.

tsx

```codeBlockLines_AclH

/* completion callback */
});

### Using the native driver [​](https://reactnative.dev/docs/next/animated\#using-the-native-driver "Direct link to Using the native driver")

By using the native driver, we send everything about the animation to native before starting the animation, allowing native code to perform the animation on the UI thread without having to go through the bridge on every frame. Once the animation has started, the JS thread can be blocked without affecting the animation.

You can use the native driver by specifying `useNativeDriver: true` in your animation configuration. See the [Animations](https://reactnative.dev/docs/next/animations#using-the-native-driver) guide to learn more.

### Animatable components [​](https://reactnative.dev/docs/next/animated\#animatable-components "Direct link to Animatable components")

Only animatable components can be animated. These unique components do the magic of binding the animated values to the properties, and do targeted native updates to avoid the cost of the React render and reconciliation process on every frame. They also handle cleanup on unmount so they are safe by default.

- [`createAnimatedComponent()`](https://reactnative.dev/docs/next/animated#createanimatedcomponent) can be used to make a component animatable.

`Animated` exports the following animatable components using the above wrapper:

- `Animated.Image`
- `Animated.ScrollView`
- `Animated.Text`
- `Animated.View`
- `Animated.FlatList`
- `Animated.SectionList`

### Composing animations [​](https://reactnative.dev/docs/next/animated\#composing-animations "Direct link to Composing animations")

Animations can also be combined in complex ways using composition functions:

- [`Animated.delay()`](https://reactnative.dev/docs/next/animated#delay) starts an animation after a given delay.
- [`Animated.parallel()`](https://reactnative.dev/docs/next/animated#parallel) starts a number of animations at the same time.
- [`Animated.sequence()`](https://reactnative.dev/docs/next/animated#sequence) starts the animations in order, waiting for each to complete before starting the next.
- [`Animated.stagger()`](https://reactnative.dev/docs/next/animated#stagger) starts animations in order and in parallel, but with successive delays.

Animations can also be chained together by setting the `toValue` of one animation to be another `Animated.Value`. See [Tracking dynamic values](https://reactnative.dev/docs/next/animations#tracking-dynamic-values) in the Animations guide.

By default, if one animation is stopped or interrupted, then all other animations in the group are also stopped.

### Combining animated values [​](https://reactnative.dev/docs/next/animated\#combining-animated-values "Direct link to Combining animated values")

You can combine two animated values via addition, subtraction, multiplication, division, or modulo to make a new animated value:

- [`Animated.add()`](https://reactnative.dev/docs/next/animated#add)
- [`Animated.subtract()`](https://reactnative.dev/docs/next/animated#subtract)
- [`Animated.divide()`](https://reactnative.dev/docs/next/animated#divide)
- [`Animated.modulo()`](https://reactnative.dev/docs/next/animated#modulo)
- [`Animated.multiply()`](https://reactnative.dev/docs/next/animated#multiply)

### Interpolation [​](https://reactnative.dev/docs/next/animated\#interpolation "Direct link to Interpolation")

The `interpolate()` function allows input ranges to map to different output ranges. By default, it will extrapolate the curve beyond the ranges given, but you can also have it clamp the output value. It uses linear interpolation by default but also supports easing functions.

- [`interpolate()`](https://reactnative.dev/docs/next/animatedvalue#interpolate)

Read more about interpolation in the [Animation](https://reactnative.dev/docs/next/animations#interpolation) guide.

### Handling gestures and other events [​](https://reactnative.dev/docs/next/animated\#handling-gestures-and-other-events "Direct link to Handling gestures and other events")

Gestures, like panning or scrolling, and other events can map directly to animated values using `Animated.event()`. This is done with a structured map syntax so that values can be extracted from complex event objects. The first level is an array to allow mapping across multiple args, and that array contains nested objects.

- [`Animated.event()`](https://reactnative.dev/docs/next/animated#event)

For example, when working with horizontal scrolling gestures, you would do the following in order to map `event.nativeEvent.contentOffset.x` to `scrollX` (an `Animated.Value`):

```codeBlockLines_AclH
onScroll={Animated.event(
// scrollX = e.nativeEvent.contentOffset.x
[{nativeEvent: {\
contentOffset: {\
x: scrollX\
}\
}\
}]
)}

* * *

# Reference

## Methods [​](https://reactnative.dev/docs/next/animated\#methods "Direct link to Methods")

When the given value is a ValueXY instead of a Value, each config option may be a vector of the form `{x: ..., y: ...}` instead of a scalar.

### `decay()` [​](https://reactnative.dev/docs/next/animated\#decay "Direct link to decay")

```codeBlockLines_AclH
static decay(value, config): CompositeAnimation;

Animates a value from an initial velocity to zero based on a decay coefficient.

Config is an object that may have the following options:

- `velocity`: Initial velocity. Required.
- `deceleration`: Rate of decay. Default 0.997.
- `isInteraction`: Whether or not this animation creates an "interaction handle" on the `InteractionManager`. Default true.
- `useNativeDriver`: Uses the native driver when true. Required.

### `timing()` [​](https://reactnative.dev/docs/next/animated\#timing "Direct link to timing")

```codeBlockLines_AclH
static timing(value, config): CompositeAnimation;

Animates a value along a timed easing curve. The [`Easing`](https://reactnative.dev/docs/next/easing) module has tons of predefined curves, or you can use your own function.

- `duration`: Length of animation (milliseconds). Default 500.
- `easing`: Easing function to define curve. Default is `Easing.inOut(Easing.ease)`.
- `delay`: Start the animation after delay (milliseconds). Default 0.
- `isInteraction`: Whether or not this animation creates an "interaction handle" on the `InteractionManager`. Default true.
- `useNativeDriver`: Uses the native driver when true. Required.

### `spring()` [​](https://reactnative.dev/docs/next/animated\#spring "Direct link to spring")

```codeBlockLines_AclH
static spring(value, config): CompositeAnimation;

Animates a value according to an analytical spring model based on [damped harmonic oscillation](https://en.wikipedia.org/wiki/Harmonic_oscillator#Damped_harmonic_oscillator). Tracks velocity state to create fluid motions as the `toValue` updates, and can be chained together.

Config is an object that may have the following options.

Note that you can only define one of bounciness/speed, tension/friction, or stiffness/damping/mass, but not more than one:

The friction/tension or bounciness/speed options match the spring model in [`Facebook Pop`](https://github.com/facebook/pop), [Rebound](https://github.com/facebookarchive/rebound), and [Origami](https://origami.design/).

- `friction`: Controls "bounciness"/overshoot. Default 7.
- `tension`: Controls speed. Default 40.
- `speed`: Controls speed of the animation. Default 12.
- `bounciness`: Controls bounciness. Default 8.

Specifying stiffness/damping/mass as parameters makes `Animated.spring` use an analytical spring model based on the motion equations of a [damped harmonic oscillator](https://en.wikipedia.org/wiki/Harmonic_oscillator#Damped_harmonic_oscillator). This behavior is slightly more precise and faithful to the physics behind spring dynamics, and closely mimics the implementation in iOS's CASpringAnimation.

- `stiffness`: The spring stiffness coefficient. Default 100.
- `damping`: Defines how the spring’s motion should be damped due to the forces of friction. Default 10.
- `mass`: The mass of the object attached to the end of the spring. Default 1.

Other configuration options are as follows:

- `velocity`: The initial velocity of the object attached to the spring. Default 0 (object is at rest).
- `overshootClamping`: Boolean indicating whether the spring should be clamped and not bounce. Default false.
- `restDisplacementThreshold`: The threshold of displacement from rest below which the spring should be considered at rest. Default 0.001.
- `restSpeedThreshold`: The speed at which the spring should be considered at rest in pixels per second. Default 0.001.
- `delay`: Start the animation after delay (milliseconds). Default 0.
- `isInteraction`: Whether or not this animation creates an "interaction handle" on the `InteractionManager`. Default true.
- `useNativeDriver`: Uses the native driver when true. Required.

### `add()` [​](https://reactnative.dev/docs/next/animated\#add "Direct link to add")

```codeBlockLines_AclH
static add(a: Animated, b: Animated): AnimatedAddition;

Creates a new Animated value composed from two Animated values added together.

### `subtract()` [​](https://reactnative.dev/docs/next/animated\#subtract "Direct link to subtract")

```codeBlockLines_AclH
static subtract(a: Animated, b: Animated): AnimatedSubtraction;

Creates a new Animated value composed by subtracting the second Animated value from the first Animated value.

### `divide()` [​](https://reactnative.dev/docs/next/animated\#divide "Direct link to divide")

```codeBlockLines_AclH
static divide(a: Animated, b: Animated): AnimatedDivision;

Creates a new Animated value composed by dividing the first Animated value by the second Animated value.

### `multiply()` [​](https://reactnative.dev/docs/next/animated\#multiply "Direct link to multiply")

```codeBlockLines_AclH
static multiply(a: Animated, b: Animated): AnimatedMultiplication;

Creates a new Animated value composed from two Animated values multiplied together.

### `modulo()` [​](https://reactnative.dev/docs/next/animated\#modulo "Direct link to modulo")

```codeBlockLines_AclH
static modulo(a: Animated, modulus: number): AnimatedModulo;

Creates a new Animated value that is the (non-negative) modulo of the provided Animated value

### `diffClamp()` [​](https://reactnative.dev/docs/next/animated\#diffclamp "Direct link to diffclamp")

```codeBlockLines_AclH
static diffClamp(a: Animated, min: number, max: number): AnimatedDiffClamp;

Create a new Animated value that is limited between 2 values. It uses the difference between the last value so even if the value is far from the bounds it will start changing when the value starts getting closer again. ( `value = clamp(value + diff, min, max)`).

This is useful with scroll events, for example, to show the navbar when scrolling up and to hide it when scrolling down.

### `delay()` [​](https://reactnative.dev/docs/next/animated\#delay "Direct link to delay")

```codeBlockLines_AclH
static delay(time: number): CompositeAnimation;

Starts an animation after the given delay.

### `sequence()` [​](https://reactnative.dev/docs/next/animated\#sequence "Direct link to sequence")

```codeBlockLines_AclH
static sequence(animations: CompositeAnimation[]): CompositeAnimation;

Starts an array of animations in order, waiting for each to complete before starting the next. If the current running animation is stopped, no following animations will be started.

### `parallel()` [​](https://reactnative.dev/docs/next/animated\#parallel "Direct link to parallel")

```codeBlockLines_AclH
static parallel(
animations: CompositeAnimation[],
config?: ParallelConfig
): CompositeAnimation;

Starts an array of animations all at the same time. By default, if one of the animations is stopped, they will all be stopped. You can override this with the `stopTogether` flag.

### `stagger()` [​](https://reactnative.dev/docs/next/animated\#stagger "Direct link to stagger")

```codeBlockLines_AclH
static stagger(
time: number,
animations: CompositeAnimation[]
): CompositeAnimation;

Array of animations may run in parallel (overlap), but are started in sequence with successive delays. Nice for doing trailing effects.

### `loop()` [​](https://reactnative.dev/docs/next/animated\#loop "Direct link to loop")

```codeBlockLines_AclH
static loop(
animation: CompositeAnimation[],
config?: LoopAnimationConfig
): CompositeAnimation;

Loops a given animation continuously, so that each time it reaches the end, it resets and begins again from the start. Will loop without blocking the JS thread if the child animation is set to `useNativeDriver: true`. In addition, loops can prevent `VirtualizedList`-based components from rendering more rows while the animation is running. You can pass `isInteraction: false` in the child animation config to fix this.

- `iterations`: Number of times the animation should loop. Default `-1` (infinite).

### `event()` [​](https://reactnative.dev/docs/next/animated\#event "Direct link to event")

```codeBlockLines_AclH
static event(
argMapping: Mapping[],
config?: EventConfig

Takes an array of mappings and extracts values from each arg accordingly, then calls `setValue` on the mapped outputs. e.g.

```codeBlockLines_AclH
onScroll={Animated.event(
[{nativeEvent: {contentOffset: {x: this._scrollX}}}],

)}
...
onPanResponderMove: Animated.event(
[\
null, // raw event arg ignored\
{dx: this._panX},\
], // gestureState arg
{
listener: (
event: GestureResponderEvent,
gestureState: PanResponderGestureState

} // Optional async listener
);

- `listener`: Optional async listener.
- `useNativeDriver`: Uses the native driver when true. Required.

### `forkEvent()` [​](https://reactnative.dev/docs/next/animated\#forkevent "Direct link to forkevent")

jsx

```codeBlockLines_AclH
static forkEvent(event: AnimatedEvent, listener: Function): AnimatedEvent;

Advanced imperative API for snooping on animated events that are passed in through props. It permits to add a new javascript listener to an existing `AnimatedEvent`. If `animatedEvent` is a javascript listener, it will merge the 2 listeners into a single one, and if `animatedEvent` is null/undefined, it will assign the javascript listener directly. Use values directly where possible.

### `unforkEvent()` [​](https://reactnative.dev/docs/next/animated\#unforkevent "Direct link to unforkevent")

```codeBlockLines_AclH
static unforkEvent(event: AnimatedEvent, listener: Function);

### `start()` [​](https://reactnative.dev/docs/next/animated\#start "Direct link to start")

Animations are started by calling start() on your animation. start() takes a completion callback that will be called when the animation is done or when the animation is done because stop() was called on it before it could finish.

**Parameters:**

| Name | Type | Required | Description |
| --- | --- | --- | --- |

Start example with callback:

### `stop()` [​](https://reactnative.dev/docs/next/animated\#stop "Direct link to stop")

```codeBlockLines_AclH
static stop();

Stops any running animation.

### `reset()` [​](https://reactnative.dev/docs/next/animated\#reset "Direct link to reset")

```codeBlockLines_AclH
static reset();

Stops any running animation and resets the value to its original.

## Properties [​](https://reactnative.dev/docs/next/animated\#properties "Direct link to Properties")

### `Value` [​](https://reactnative.dev/docs/next/animated\#value "Direct link to value")

Standard value class for driving animations. Typically initialized with `useAnimatedValue(0);` or `new Animated.Value(0);` in class components.

You can read more about `Animated.Value` API on the separate [page](https://reactnative.dev/docs/next/animatedvalue).

### `ValueXY` [​](https://reactnative.dev/docs/next/animated\#valuexy "Direct link to valuexy")

2D value class for driving 2D animations, such as pan gestures.

You can read more about `Animated.ValueXY` API on the separate [page](https://reactnative.dev/docs/next/animatedvaluexy).

### `Interpolation` [​](https://reactnative.dev/docs/next/animated\#interpolation-1 "Direct link to interpolation-1")

Exported to use the Interpolation type in flow.

### `Node` [​](https://reactnative.dev/docs/next/animated\#node "Direct link to node")

Exported for ease of type checking. All animated values derive from this class.

### `createAnimatedComponent` [​](https://reactnative.dev/docs/next/animated\#createanimatedcomponent "Direct link to createanimatedcomponent")

Make any React component Animatable. Used to create `Animated.View`, etc.

### `attachNativeEvent` [​](https://reactnative.dev/docs/next/animated\#attachnativeevent "Direct link to attachnativeevent")

Imperative API to attach an animated value to an event on a view. Prefer using `Animated.event` with `useNativeDriver: true` if possible.

Is this page useful?

- [Example](https://reactnative.dev/docs/next/animated#example)
- [Overview](https://reactnative.dev/docs/next/animated#overview)
- [Configuring animations](https://reactnative.dev/docs/next/animated#configuring-animations)
- [Working with animations](https://reactnative.dev/docs/next/animated#working-with-animations)
- [Using the native driver](https://reactnative.dev/docs/next/animated#using-the-native-driver)
- [Animatable components](https://reactnative.dev/docs/next/animated#animatable-components)
- [Composing animations](https://reactnative.dev/docs/next/animated#composing-animations)
- [Combining animated values](https://reactnative.dev/docs/next/animated#combining-animated-values)
- [Interpolation](https://reactnative.dev/docs/next/animated#interpolation)
- [Handling gestures and other events](https://reactnative.dev/docs/next/animated#handling-gestures-and-other-events)
- [Methods](https://reactnative.dev/docs/next/animated#methods)
- [`decay()`](https://reactnative.dev/docs/next/animated#decay)
- [`timing()`](https://reactnative.dev/docs/next/animated#timing)
- [`spring()`](https://reactnative.dev/docs/next/animated#spring)
- [`add()`](https://reactnative.dev/docs/next/animated#add)
- [`subtract()`](https://reactnative.dev/docs/next/animated#subtract)
- [`divide()`](https://reactnative.dev/docs/next/animated#divide)
- [`multiply()`](https://reactnative.dev/docs/next/animated#multiply)
- [`modulo()`](https://reactnative.dev/docs/next/animated#modulo)
- [`diffClamp()`](https://reactnative.dev/docs/next/animated#diffclamp)
- [`delay()`](https://reactnative.dev/docs/next/animated#delay)
- [`sequence()`](https://reactnative.dev/docs/next/animated#sequence)
- [`parallel()`](https://reactnative.dev/docs/next/animated#parallel)
- [`stagger()`](https://reactnative.dev/docs/next/animated#stagger)
- [`loop()`](https://reactnative.dev/docs/next/animated#loop)
- [`event()`](https://reactnative.dev/docs/next/animated#event)
- [`forkEvent()`](https://reactnative.dev/docs/next/animated#forkevent)
- [`unforkEvent()`](https://reactnative.dev/docs/next/animated#unforkevent)
- [`start()`](https://reactnative.dev/docs/next/animated#start)
- [`stop()`](https://reactnative.dev/docs/next/animated#stop)
- [`reset()`](https://reactnative.dev/docs/next/animated#reset)
- [Properties](https://reactnative.dev/docs/next/animated#properties)
- [`Value`](https://reactnative.dev/docs/next/animated#value)
- [`ValueXY`](https://reactnative.dev/docs/next/animated#valuexy)
- [`Interpolation`](https://reactnative.dev/docs/next/animated#interpolation-1)
- [`Node`](https://reactnative.dev/docs/next/animated#node)
- [`createAnimatedComponent`](https://reactnative.dev/docs/next/animated#createanimatedcomponent)
- [`attachNativeEvent`](https://reactnative.dev/docs/next/animated#attachnativeevent)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/global-alert

[Skip to main content](https://reactnative.dev/docs/next/global-alert#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

warning

🚧 This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/Window/alert) for more information.

The global `alert` function, as defined in Web specifications.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/components-and-apis

[Skip to main content](https://reactnative.dev/docs/next/components-and-apis#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/components-and-apis)** (0.81).

Version: Next

On this page

React Native provides a number of built-in [Core Components](https://reactnative.dev/docs/next/intro-react-native-components) ready for you to use in your app. You can find them all in the left sidebar (or menu above, if you are on a narrow screen). If you're not sure where to get started, take a look at the following categories:

- [Basic Components](https://reactnative.dev/docs/next/components-and-apis#basic-components)
- [User Interface](https://reactnative.dev/docs/next/components-and-apis#user-interface)
- [List Views](https://reactnative.dev/docs/next/components-and-apis#list-views)
- [Android-specific](https://reactnative.dev/docs/next/components-and-apis#android-components-and-apis)
- [iOS-specific](https://reactnative.dev/docs/next/components-and-apis#ios-components-and-apis)
- [Others](https://reactnative.dev/docs/next/components-and-apis#others)

You're not limited to the components and APIs bundled with React Native. React Native has a community of thousands of developers. If you're looking for a library that does something specific, please refer to [this guide about finding libraries](https://reactnative.dev/docs/next/libraries#finding-libraries).

## Basic Components [​](https://reactnative.dev/docs/next/components-and-apis\#basic-components "Direct link to Basic Components")

Most apps will end up using one or more of these basic components.

[**View** \\
The most fundamental component for building a UI.](https://reactnative.dev/docs/next/view)

[**Text** \\
A component for displaying text.](https://reactnative.dev/docs/next/text)

[**Image** \\
A component for displaying images.](https://reactnative.dev/docs/next/image)

[**TextInput** \\
A component for inputting text into the app via a keyboard.](https://reactnative.dev/docs/next/textinput)

[**Pressable** \\
A wrapper component that can detect various stages of press interactions on any of its children.](https://reactnative.dev/docs/next/pressable)

[**ScrollView** \\
Provides a scrolling container that can host multiple components and views.](https://reactnative.dev/docs/next/scrollview)

[**StyleSheet** \\
Provides an abstraction layer similar to CSS stylesheets.](https://reactnative.dev/docs/next/stylesheet)

## User Interface [​](https://reactnative.dev/docs/next/components-and-apis\#user-interface "Direct link to User Interface")

These common user interface controls will render on any platform.

[**Button** \\
A basic button component for handling touches that should render nicely on any platform.](https://reactnative.dev/docs/next/button)

[**Switch** \\
Renders a boolean input.](https://reactnative.dev/docs/next/switch)

## List Views [​](https://reactnative.dev/docs/next/components-and-apis\#list-views "Direct link to List Views")

Unlike the more generic [`ScrollView`](https://reactnative.dev/docs/next/scrollview), the following list view components only render elements that are currently showing on the screen. This makes them a performant choice for displaying long lists of data.

[**FlatList** \\
A component for rendering performant scrollable lists.](https://reactnative.dev/docs/next/flatlist)

[**SectionList** \\
Like `FlatList`, but for sectioned lists.](https://reactnative.dev/docs/next/sectionlist)

## Android Components and APIs [​](https://reactnative.dev/docs/next/components-and-apis\#android-components-and-apis "Direct link to Android Components and APIs")

Many of the following components provide wrappers for commonly used Android classes.

[**BackHandler** \\
Detect hardware button presses for back navigation.](https://reactnative.dev/docs/next/backhandler)

[**DrawerLayoutAndroid** \\
Renders a `DrawerLayout` on Android.](https://reactnative.dev/docs/next/drawerlayoutandroid)

[**PermissionsAndroid** \\
Provides access to the permissions model introduced in Android M.](https://reactnative.dev/docs/next/permissionsandroid)

[**ToastAndroid** \\
Create an Android Toast alert.](https://reactnative.dev/docs/next/toastandroid)

## iOS Components and APIs [​](https://reactnative.dev/docs/next/components-and-apis\#ios-components-and-apis "Direct link to iOS Components and APIs")

Many of the following components provide wrappers for commonly used UIKit classes.

[**ActionSheetIOS** \\
API to display an iOS action sheet or share sheet.](https://reactnative.dev/docs/next/actionsheetios)

## Others [​](https://reactnative.dev/docs/next/components-and-apis\#others "Direct link to Others")

These components may be useful for certain applications. For an exhaustive list of components and APIs, check out the sidebar to the left (or menu above, if you are on a narrow screen).

[**ActivityIndicator** \\
Displays a circular loading indicator.](https://reactnative.dev/docs/next/activityindicator)

[**Alert** \\
Launches an alert dialog with the specified title and message.](https://reactnative.dev/docs/next/alert)

[**Animated** \\
A library for creating fluid, powerful animations that are easy to build and maintain.](https://reactnative.dev/docs/next/animated)

[**Dimensions** \\
Provides an interface for getting device dimensions.](https://reactnative.dev/docs/next/dimensions)

[**KeyboardAvoidingView** \\
Provides a view that moves out of the way of the virtual keyboard automatically.](https://reactnative.dev/docs/next/keyboardavoidingview)

[**Linking** \\
Provides a general interface to interact with both incoming and outgoing app links.](https://reactnative.dev/docs/next/linking)

[**Modal** \\
Provides a simple way to present content above an enclosing view.](https://reactnative.dev/docs/next/modal)

[**PixelRatio** \\
Provides access to the device pixel density.](https://reactnative.dev/docs/next/pixelratio)

[**RefreshControl** \\
This component is used inside a `ScrollView` to add pull to refresh functionality.](https://reactnative.dev/docs/next/refreshcontrol)

[**StatusBar** \\
Component to control the app status bar.](https://reactnative.dev/docs/next/statusbar)

Is this page useful?

- [Basic Components](https://reactnative.dev/docs/next/components-and-apis#basic-components)
- [User Interface](https://reactnative.dev/docs/next/components-and-apis#user-interface)
- [List Views](https://reactnative.dev/docs/next/components-and-apis#list-views)
- [Android Components and APIs](https://reactnative.dev/docs/next/components-and-apis#android-components-and-apis)
- [iOS Components and APIs](https://reactnative.dev/docs/next/components-and-apis#ios-components-and-apis)
- [Others](https://reactnative.dev/docs/next/components-and-apis#others)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/global-console

[Skip to main content](https://reactnative.dev/docs/next/global-console#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

On this page

warning

🚧 This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/console) for more information.

The global `console` object, as defined in Web specifications.

* * *

## Methods [​](https://reactnative.dev/docs/next/global-console\#methods "Direct link to Methods")

### `timeStamp()` [​](https://reactnative.dev/docs/next/global-console\#timestamp "Direct link to timestamp")

tsx

```codeBlockLines_AclH
console.timeStamp(
label: string,
start?: string | number,
end?: string | number,
trackName?: string,
trackGroup?: string,
color?: DevToolsColor
): void;

The `console.timeStamp` API allows you to add custom timing entries in the Performance panel timeline.

**Parameters:**

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| label | `string` | Yes | The label for the timing entry. |

| trackName | `string` | No | The name of the custom track. |
| trackGroup | `string` | No | The name of the track group. |
| color | `DevToolsColor` | No | The color of the entry. |

```codeBlockLines_AclH
type DevToolsColor =
| 'primary'
| 'primary-light'
| 'primary-dark'
| 'secondary'
| 'secondary-light'
| 'secondary-dark'
| 'tertiary'
| 'tertiary-light'
| 'tertiary-dark'
| 'warning'
| 'error';

Is this page useful?

- [Methods](https://reactnative.dev/docs/next/global-console#methods)
- [`timeStamp()`](https://reactnative.dev/docs/next/global-console#timestamp)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/fabric-native-components-introduction

[Skip to main content](https://reactnative.dev/docs/next/fabric-native-components-introduction#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/fabric-native-components-introduction)** (0.81).

Version: Next

On this page

If you want to build _new_ React Native Components that wrap around a [Host Component](https://reactnative.dev/architecture/glossary#host-view-tree-and-host-view) like a unique kind of [CheckBox](https://developer.android.com/reference/androidx/appcompat/widget/AppCompatCheckBox) on Android, or a [UIButton](https://developer.apple.com/documentation/uikit/uibutton?language=objc) on iOS, you should use a Fabric Native Component.

This guide will show you how to build Fabric Native Components, by implementing a web view component. The steps to doing this are:

1. Define a JavaScript specification using Flow or TypeScript.
2. Configure the dependencies management system to generate code from the provided spec and to be auto-linked.
3. Implement the Native code.
4. Use the Component in an App.

You're going to need a plain template generated application to use the component:

bash

```codeBlockLines_AclH
npx @react-native-community/cli@latest init Demo --install-pods false

## Creating a WebView Component [​](https://reactnative.dev/docs/next/fabric-native-components-introduction\#creating-a-webview-component "Direct link to Creating a WebView Component")

This guide will show you how to create a Web View component. We will be creating the component by using the Android's [`WebView`](https://developer.android.com/reference/android/webkit/WebView) component, and the iOS [`WKWebView`](https://developer.apple.com/documentation/webkit/wkwebview?language=objc) component.

Let's start by creating the folders structure to hold our component's code:

```codeBlockLines_AclH
mkdir -p Demo/{specs,android/app/src/main/java/com/webview}

This gives you the following layout where you'll working:

```codeBlockLines_AclH
Demo
├── android/app/src/main/java/com/webview
└── ios
└── specs

- The `android/app/src/main/java/com/webview` folder is the folder that will contain our Android code.
- The `ios` folder is the folder that will contain our iOS code.
- The `specs` folder is the folder that will contain the Codegen's specification file.

## 1\. Define Specification for Codegen [​](https://reactnative.dev/docs/next/fabric-native-components-introduction\#1-define-specification-for-codegen "Direct link to 1. Define Specification for Codegen")

Your specification must be defined in either [TypeScript](https://www.typescriptlang.org/) or [Flow](https://flow.org/) (see [Codegen](https://reactnative.dev/docs/next/the-new-architecture/what-is-codegen) documentation for more details). This is used by Codegen to generate the C++, Objective-C++ and Java to connect your platform code to the JavaScript runtime that React runs in.

Use this specification for our WebView Component:

- TypeScript
- Flow

Demo/specs/WebViewNativeComponent.ts

```codeBlockLines_AclH
import type {
CodegenTypes,
HostComponent,
ViewProps,
} from 'react-native';
import {codegenNativeComponent} from 'react-native';

type WebViewScriptLoadedEvent = {
result: 'success' | 'error';
};

export interface NativeProps extends ViewProps {
sourceURL?: string;

}

'CustomWebView',

Demo/RCTWebView/js/RCTWebViewNativeComponent.js

```codeBlockLines_AclH
// @flow strict-local

import type {CodegenTypes, HostComponent, ViewProps} from 'react-native';
import {codegenNativeComponent} from 'react-native';

type WebViewScriptLoadedEvent = $ReadOnly<{|
result: "success" | "error",

type NativeProps = $ReadOnly<{|
...ViewProps,
sourceURL?: string;

This specification is composed of three main parts, excluding the imports:

- The `WebViewScriptLoadedEvent` is a supporting data type for the data the event needs to pass from native to JavaScript.
- The `NativeProps` is a definition of the props that we can set on the component.
- The `codegenNativeComponent` statement allows us to codegenerate the code for the custom component and that defines a name for the component used to match the native implementations.

As with Native Modules, you can have multiple specification files in the `specs/` directory. For more information about the types you can use, and the platform types these map to, see the [appendix](https://reactnative.dev/docs/next/appendix#codegen-typings).

## 2\. Configure Codegen to run [​](https://reactnative.dev/docs/next/fabric-native-components-introduction\#2-configure-codegen-to-run "Direct link to 2. Configure Codegen to run")

The specification is used by the React Native's Codegen tools to generate platform specific interfaces and boilerplate for us. To do this, Codegen needs to know where to find our specification and what to do with it. Update your `package.json` to include:

json

```codeBlockLines_AclH
"start": "react-native start",
"test": "jest"
},
"codegenConfig": {
"name": "AppSpec",
"type": "components",
"jsSrcsDir": "specs",
"android": {
"javaPackageName": "com.webview"
},
"ios": {
"componentProvider": {
"CustomWebView": "RCTWebView"
}
}
},
"dependencies": {

With everything wired up for Codegen, we need to prepare our native code to hook into our generated code.

Note that for iOS, we are declaratively mapping the name of the JS component that is exported by the spec ( `CustomWebView`) with the iOS class that will implement the component natively.

## 2\. Building your Native Code [​](https://reactnative.dev/docs/next/fabric-native-components-introduction\#2-building-your-native-code "Direct link to 2. Building your Native Code")

Now it's time to write the native platform code so that when React requires to render a view, the platform can create the right native view and can render it on screen.

You should work through both the Android and iOS platforms.

note

This guide shows you how to create a Native Component that only works with the New Architecture. If you need to support both the New Architecture and the Legacy Architecture, please refer to our [backwards compatibility guide](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/backwards-compat.md).

- Android
- iOS

Now it's time to write some Android platform code to be able to render the web view. The steps you need to follow are:

- Running Codegen
- Write the code for the `ReactWebView`
- Write the code for the `ReactWebViewManager`
- Write the code for the `ReactWebViewPackage`
- Register the `ReactWebViewPackage` in the application

### 1\. Run Codegen through Gradle [​](https://reactnative.dev/docs/next/fabric-native-components-introduction\#1-run-codegen-through-gradle "Direct link to 1. Run Codegen through Gradle")

Run this once to generate boilerplate that your IDE of choice can use.

Demo/

```codeBlockLines_AclH
cd android
./gradlew generateCodegenArtifactsFromSchema

Codegen will generate the `ViewManager` interface you need to implement and the `ViewManager` delegate for the web view.

### 2\. Write the `ReactWebView` [​](https://reactnative.dev/docs/next/fabric-native-components-introduction\#2-write-the-reactwebview "Direct link to 2-write-the-reactwebview")

The `ReactWebView` is the component that wraps the Android native view that React Native will render when using our custom Component.

Create a `ReactWebView.java` or a `ReactWebView.kt` file in the `android/src/main/java/com/webview` folder with this code:

- Java
- Kotlin

Demo/android/src/main/java/com/webview/ReactWebView.java

```codeBlockLines_AclH
package com.webview;

import android.content.Context;
import android.util.AttributeSet;
import android.webkit.WebView;
import android.webkit.WebViewClient;

import com.facebook.react.bridge.Arguments;
import com.facebook.react.bridge.WritableMap;
import com.facebook.react.bridge.ReactContext;
import com.facebook.react.uimanager.UIManagerHelper;
import com.facebook.react.uimanager.events.Event;

public class ReactWebView extends WebView {
public ReactWebView(Context context) {
super(context);
configureComponent();
}

public ReactWebView(Context context, AttributeSet attrs) {
super(context, attrs);
configureComponent();
}

public ReactWebView(Context context, AttributeSet attrs, int defStyleAttr) {
super(context, attrs, defStyleAttr);
configureComponent();
}

private void configureComponent() {
this.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
this.setWebViewClient(new WebViewClient() {
@Override
public void onPageFinished(WebView view, String url) {
emitOnScriptLoaded(OnScriptLoadedEventResult.success);
}
});
}

public void emitOnScriptLoaded(OnScriptLoadedEventResult result) {
ReactContext reactContext = (ReactContext) context;
int surfaceId = UIManagerHelper.getSurfaceId(reactContext);
EventDispatcher eventDispatcher = UIManagerHelper.getEventDispatcherForReactTag(reactContext, getId());
WritableMap payload = Arguments.createMap();
payload.putString("result", result.name());

OnScriptLoadedEvent event = new OnScriptLoadedEvent(surfaceId, getId(), payload);
if (eventDispatcher != null) {
eventDispatcher.dispatchEvent(event);
}
}

public enum OnScriptLoadedEventResult {
success,
error
}

private final WritableMap payload;

OnScriptLoadedEvent(int surfaceId, int viewId, WritableMap payload) {
super(surfaceId, viewId);
this.payload = payload;
}

@Override
public String getEventName() {
return "onScriptLoaded";
}

@Override
public WritableMap getEventData() {
return payload;
}
}
}

Demo/android/src/main/java/com/webview/ReactWebView.kt

```codeBlockLines_AclH
package com.webview

import android.content.Context
import android.util.AttributeSet
import android.webkit.WebView
import android.webkit.WebViewClient
import com.facebook.react.bridge.Arguments
import com.facebook.react.bridge.WritableMap
import com.facebook.react.bridge.ReactContext
import com.facebook.react.uimanager.UIManagerHelper
import com.facebook.react.uimanager.events.Event

class ReactWebView: WebView {
constructor(context: Context) : super(context) {
configureComponent()
}

constructor(context: Context, attrs: AttributeSet?) : super(context, attrs) {
configureComponent()
}

constructor(context: Context, attrs: AttributeSet?, defStyleAttr: Int) : super(context, attrs, defStyleAttr) {
configureComponent()
}

private fun configureComponent() {
this.layoutParams = LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT)
this.webViewClient = object : WebViewClient() {
override fun onPageFinished(view: WebView, url: String) {
emitOnScriptLoaded(OnScriptLoadedEventResult.success)
}
}
}

fun emitOnScriptLoaded(result: OnScriptLoadedEventResult) {
val reactContext = context as ReactContext
val surfaceId = UIManagerHelper.getSurfaceId(reactContext)
val eventDispatcher = UIManagerHelper.getEventDispatcherForReactTag(reactContext, id)
val payload =
Arguments.createMap().apply {
putString("result", result.name)
}
val event = OnScriptLoadedEvent(surfaceId, id, payload)

eventDispatcher?.dispatchEvent(event)
}

enum class OnScriptLoadedEventResult {
success,
error;
}

inner class OnScriptLoadedEvent(
surfaceId: Int,
viewId: Int,
private val payload: WritableMap

override fun getEventName() = "onScriptLoaded"

override fun getEventData() = payload
}
}

The `ReactWebView` extends the Android `WebView` so you can reuse all the properties already defined by the platform with ease.

The class defines the three Android constructors but defers their actual implementation to the private `configureComponent` function. This function takes care of initializing all the components specific properties: in this case you are setting the layout of the `WebView` and you are defining the `WebClient` that you use to customize the behavior of the `WebView`. In this code, the `ReactWebView` emits an event when the page finishes loading, by implementing the `WebClient`'s `onPageFinished` method.

The code then defines a helper function to actually emit an event. To emit an event, you have to:

- grab a reference to the `ReactContext`;
- retrieve the `surfaceId` of the view that you are presenting;
- grab a reference to the `eventDispatcher` associated with the view;
- build the payload for the event using a `WritableMap` object;
- create the event object that you need to send to JavaScript;
- call the `eventDispatcher.dispatchEvent` to send the event.

The last part of the file contains the definition of the data types you need to send the event:

- The `OnScriptLoadedEventResult`, with the possible outcomes of the `OnScriptLoaded` event.
- The actual `OnScriptLoadedEvent` that needs to extend the React Native's `Event` class.

### 3\. Write the `WebViewManager` [​](https://reactnative.dev/docs/next/fabric-native-components-introduction\#3-write-the-webviewmanager "Direct link to 3-write-the-webviewmanager")

The `WebViewManager` is the class that connects the React Native runtime with the native view.

When React receives the instruction from the app to render a specific component, React uses the registered view manager to create the view and to pass all the required properties.

This is the code of the `ReactWebViewManager`.

Demo/android/src/main/java/com/webview/ReactWebViewManager.java

import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.module.annotations.ReactModule;
import com.facebook.react.uimanager.SimpleViewManager;
import com.facebook.react.uimanager.ThemedReactContext;
import com.facebook.react.uimanager.ViewManagerDelegate;
import com.facebook.react.uimanager.annotations.ReactProp;
import com.facebook.react.viewmanagers.CustomWebViewManagerInterface;
import com.facebook.react.viewmanagers.CustomWebViewManagerDelegate;

import java.util.HashMap;
import java.util.Map;

@ReactModule(name = ReactWebViewManager.REACT_CLASS)

@Override

return delegate;
}

@Override
public String getName() {
return REACT_CLASS;
}

@Override
public ReactWebView createViewInstance(ThemedReactContext context) {
return new ReactWebView(context);
}

@ReactProp(name = "sourceUrl")
@Override
public void setSourceURL(ReactWebView view, String sourceURL) {
if (sourceURL == null) {
view.emitOnScriptLoaded(ReactWebView.OnScriptLoadedEventResult.error);
return;
}

public static final String REACT_CLASS = "CustomWebView";

put("bubbled", "onScriptLoaded");
put("captured", "onScriptLoadedCapture");
}});
map.put("onScriptLoaded", bubblingMap);
return map;
}
}

Demo/android/src/main/java/com/webview/ReactWebViewManager.kt

CustomWebViewManagerDelegate(this)

override fun getName(): String = REACT_CLASS

override fun createViewInstance(context: ThemedReactContext): ReactWebView = ReactWebView(context)

@ReactProp(name = "sourceUrl")
override fun setSourceURL(view: ReactWebView, sourceURL: String?) {
if (sourceURL == null) {
view.emitOnScriptLoaded(ReactWebView.OnScriptLoadedEventResult.error)
return;
}
view.loadUrl(sourceURL, emptyMap())
}

companion object {
const val REACT_CLASS = "CustomWebView"
}

mapOf(
"onScriptLoaded" to
mapOf(
"phasedRegistrationNames" to
mapOf(
"bubbled" to "onScriptLoaded",
"captured" to "onScriptLoadedCapture"
)))
}

The `ReactWebViewManager` extends the `SimpleViewManager` class from React and implements the `CustomWebViewManagerInterface`, generated by Codegen.

It holds a reference of the `CustomWebViewManagerDelegate`, another element generated by Codegen.

It then overrides the `getName` function, which must return the same name used in the spec's `codegenNativeComponent` function call.

The `createViewInstance` function is responsible to instantiate a new `ReactWebView`.

Then, the ViewManager needs to define how all the React's components props will update the native view. In the example, you need to decide how to handle the `sourceURL` property that React will set on the `WebView`.

Finally, if the component can emit an event, you need to map the event name by overriding the `getExportedCustomBubblingEventTypeConstants` for bubbling events, or the `getExportedCustomDirectEventTypeConstants` for direct events.

### 4\. Write the `ReactWebViewPackage` [​](https://reactnative.dev/docs/next/fabric-native-components-introduction\#4-write-the-reactwebviewpackage "Direct link to 4-write-the-reactwebviewpackage")

As you do with Native Modules, Native Components also need to implement the `ReactPackage` class. This is an object that you can use to register the component in the React Native runtime.

This is the code for the `ReactWebViewPackage`:

Demo/android/src/main/java/com/webview/ReactWebViewPackage.java

import com.facebook.react.BaseReactPackage;
import com.facebook.react.bridge.NativeModule;
import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.module.model.ReactModuleInfo;
import com.facebook.react.module.model.ReactModuleInfoProvider;
import com.facebook.react.uimanager.ViewManager;

import java.util.Collections;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class ReactWebViewPackage extends BaseReactPackage {
@Override
public List<ViewManager<?, ?>> createViewManagers(ReactApplicationContext reactContext) {
return Collections.singletonList(new ReactWebViewManager(reactContext));
}

@Override
public NativeModule getModule(String s, ReactApplicationContext reactApplicationContext) {
if (ReactWebViewManager.REACT_CLASS.equals(s)) {
return new ReactWebViewManager(reactApplicationContext);
}
return null;
}

@Override
public ReactModuleInfoProvider getReactModuleInfoProvider() {
return new ReactModuleInfoProvider() {
@Override

map.put(ReactWebViewManager.REACT_CLASS, new ReactModuleInfo(
ReactWebViewManager.REACT_CLASS, // name
ReactWebViewManager.REACT_CLASS, // className
false, // canOverrideExistingModule
false, // needsEagerInit
false, // isCxxModule
true // isTurboModule
));
return map;
}
};
}
}

Demo/android/src/main/java/com/webview/ReactWebViewPackage.kt

import com.facebook.react.BaseReactPackage
import com.facebook.react.bridge.NativeModule
import com.facebook.react.bridge.ReactApplicationContext
import com.facebook.react.module.model.ReactModuleInfo
import com.facebook.react.module.model.ReactModuleInfoProvider
import com.facebook.react.uimanager.ViewManager

class ReactWebViewPackage : BaseReactPackage() {
override fun createViewManagers(reactContext: ReactApplicationContext): List<ViewManager<*, *>> {
return listOf(ReactWebViewManager(reactContext))
}

override fun getModule(s: String, reactApplicationContext: ReactApplicationContext): NativeModule? {
when (s) {

}
return null
}

override fun getReactModuleInfoProvider(): ReactModuleInfoProvider = ReactModuleInfoProvider {
mapOf(ReactWebViewManager.REACT_CLASS to ReactModuleInfo(
name = ReactWebViewManager.REACT_CLASS,
className = ReactWebViewManager.REACT_CLASS,
canOverrideExistingModule = false,
needsEagerInit = false,
isCxxModule = false,
isTurboModule = true,
)
)
}
}

The `ReactWebViewPackage` extends the `BaseReactPackage` and implements all the methods required to properly register our component.

- the `createViewManagers` method is the factory method that creates the `ViewManager` that manage the custom views.
- the `getModule` method returns the proper ViewManager depending on the View that React Native needs to render.
- the `getReactModuleInfoProvider` provides all the information required when registering the module in the runtime,

### 5\. Register the `ReactWebViewPackage` in the application [​](https://reactnative.dev/docs/next/fabric-native-components-introduction\#5-register-the-reactwebviewpackage-in-the-application "Direct link to 5-register-the-reactwebviewpackage-in-the-application")

Finally, you need to register the `ReactWebViewPackage` in the application. We do that by modifying the `MainApplication` file by adding the `ReactWebViewPackage` to the list of packages returned by the `getPackages` function.

Demo/app/src/main/java/com/demo/MainApplication.kt

```codeBlockLines_AclH
package com.demo

import android.app.Application
import com.facebook.react.PackageList
import com.facebook.react.ReactApplication
import com.facebook.react.ReactHost
import com.facebook.react.ReactNativeHost
import com.facebook.react.ReactPackage
import com.facebook.react.defaults.DefaultNewArchitectureEntryPoint.load
import com.facebook.react.defaults.DefaultReactHost.getDefaultReactHost
import com.facebook.react.defaults.DefaultReactNativeHost
import com.facebook.react.soloader.OpenSourceMergedSoMapping
import com.facebook.soloader.SoLoader
import com.webview.ReactWebViewPackage

class MainApplication : Application(), ReactApplication {

override val reactNativeHost: ReactNativeHost =
object : DefaultReactNativeHost(this) {

PackageList(this).packages.apply {
add(ReactWebViewPackage())
}

override fun getJSMainModuleName(): String = "index"

override fun getUseDeveloperSupport(): Boolean = BuildConfig.DEBUG

override val isNewArchEnabled: Boolean = BuildConfig.IS_NEW_ARCHITECTURE_ENABLED
override val isHermesEnabled: Boolean = BuildConfig.IS_HERMES_ENABLED
}

override val reactHost: ReactHost
get() = getDefaultReactHost(applicationContext, reactNativeHost)

override fun onCreate() {
super.onCreate()
SoLoader.init(this, OpenSourceMergedSoMapping)
if (BuildConfig.IS_NEW_ARCHITECTURE_ENABLED) {
load()
}
}
}

Now it's time to write some iOS platform code to be able to render the web view. The steps you need to follow are:

- Run Codegen.
- Write the code for the `RCTWebView`
- Register the `RCTWebView` in the application

### 1\. Run Codegen [​](https://reactnative.dev/docs/next/fabric-native-components-introduction\#1-run-codegen "Direct link to 1. Run Codegen")

You can [manually run](https://reactnative.dev/docs/next/the-new-architecture/codegen-cli) the Codegen, however it's simpler to use the application you're going to demo the component in to do this for you.

```codeBlockLines_AclH
cd ios
bundle install
bundle exec pod install

Importantly you will see logging output from Codegen, which we're going to use in Xcode to build our WebView native component.

warning

You should be careful about committing generated code to your repository. Generated code is specific to each version of React Native. Use npm [peerDependencies](https://nodejs.org/en/blog/npm/peer-dependencies) to restrict compatibility with version of React Native.

### 3\. Write the `RCTWebView` [​](https://reactnative.dev/docs/next/fabric-native-components-introduction\#3-write-the-rctwebview "Direct link to 3-write-the-rctwebview")

We need to prepare your iOS project using Xcode by completing these **5 steps**:

1. Open the CocoaPods generated Xcode Workspace:

```codeBlockLines_AclH
cd ios
open Demo.xcworkspace

2. Right click on app and select `New Group`, call the new group `WebView`.

3. In the `WebView` group, create `New` → `File from Template`.

4. Use the `Objective-C File` template, and name it `RCTWebView`.

5. Repeat step 4 and create a header file named `RCTWebView.h`.

6. Rename `RCTWebView.m` → `RCTWebView.mm` making it an Objective-C++ file.

Demo/ios

```codeBlockLines_AclH
Podfile
...
Demo
├── AppDelegate.swift
...
├── RCTWebView.h
└── RCTWebView.mm

After creating the header file and the implementation file, you can start implementing them.

This is the code for the `RCTWebView.h` file, which declares the component interface.

Demo/RCTWebView/RCTWebView.h

```codeBlockLines_AclH

@interface RCTWebView : RCTViewComponentView

// You would declare native methods you'd want to access from the view here

@end

NS_ASSUME_NONNULL_END

This class defines an `RCTWebView` which extends the `RCTViewComponentView` class. This is the base class for all the native components and it is provided by React Native.

The code for the implementation file ( `RCTWebView.mm`) is the following:

Demo/RCTWebView/RCTWebView.mm

#import "RCTWebView.h"

@implementation RCTWebView {
NSURL * _sourceURL;
WKWebView * _webView;
}

-(instancetype)init
{
if(self = [super init]) {
_webView = [WKWebView new];
_webView.navigationDelegate = self;
[self addSubview:_webView];
}
return self;
}

- (void)updateProps:(Props::Shared const &)props oldProps:(Props::Shared const &)oldProps
{

// Handle your props here
if (oldViewProps.sourceURL != newViewProps.sourceURL) {
NSString *urlString = [NSString stringWithCString:newViewProps.sourceURL.c_str() encoding:NSUTF8StringEncoding];
_sourceURL = [NSURL URLWithString:urlString];
if ([self urlIsValid:newViewProps.sourceURL]) {
[_webView loadRequest:[NSURLRequest requestWithURL:_sourceURL]];
}
}

[super updateProps:props oldProps:oldProps];
}

-(void)layoutSubviews
{
[super layoutSubviews];
_webView.frame = self.bounds;

#pragma mark - WKNavigationDelegate

-(void)webView:(WKWebView *)webView didFinishNavigation:(WKNavigation *)navigation
{
CustomWebViewEventEmitter::OnScriptLoaded result = CustomWebViewEventEmitter::OnScriptLoaded{CustomWebViewEventEmitter::OnScriptLoadedResult::Success};
self.eventEmitter.onScriptLoaded(result);
}

- (BOOL)urlIsValid:(std::string)propString
{

CustomWebViewEventEmitter::OnScriptLoaded result = CustomWebViewEventEmitter::OnScriptLoaded{CustomWebViewEventEmitter::OnScriptLoadedResult::Error};

self.eventEmitter.onScriptLoaded(result);
return NO;
}
return YES;
}

// Event emitter convenience method
- (const CustomWebViewEventEmitter &)eventEmitter
{

+ (ComponentDescriptorProvider)componentDescriptorProvider
{

This code is written in Objective-C++ and contains various details:

- the `@interface` implements two protocols:

- `RCTCustomWebViewViewProtocol`, generated by Codegen;
- `WKNavigationDelegate`, provided by the WebKit framework to handle the web view navigation events;
- the `init` method that instantiates the `WKWebView`, adds it to the subviews and that sets the `navigationDelegate`;
- the `updateProps` method that is called by React Native when the component's props change;
- the `layoutSubviews` method that describes how the custom view needs to be laid out;
- the `webView:didFinishNavigation:` method that lets you handle what to do when the `WKWebView` finishes loading the page;
- the `urlIsValid:(std::string)propString` method that checks whether the URL received as prop is valid;
- the `eventEmitter` method which is a utility to retrieve a strongly typed `eventEmitter` instance
- the `componentDescriptorProvider` which returns the `ComponentDescriptor` generated by Codegen;

#### Add WebKit framework [​](https://reactnative.dev/docs/next/fabric-native-components-introduction\#add-webkit-framework "Direct link to Add WebKit framework")

This step is only required because we are creating a Web view. Web components on iOS needs to be linked against the WebKit framework provided by Apple. If your component doesn't need to access web-specific features, you can skip this step.

A web view requires access to some features that Apple provides through one of the frameworks shipped with Xcode and the devices: WebKit.

To link the WebKit framework in your app, follow these steps:

1. In Xcode, Click on your project
2. Select the app target
3. Select the General tab
4. Scroll down until you find the _"Frameworks, Libraries, and Embedded Contents"_ section, and press the `+` button

5. In the search bar, filter for WebKit
6. Select the WebKit framework
7. Click on Add.

## 3\. Use your Native Component [​](https://reactnative.dev/docs/next/fabric-native-components-introduction\#3-use-your-native-component "Direct link to 3. Use your Native Component")

Finally, you can use the new component in your app. Update your generated `App.tsx` to:

Demo/App.tsx

```codeBlockLines_AclH
import React from 'react';
import {Alert, StyleSheet, View} from 'react-native';
import WebView from './specs/WebViewNativeComponent';

function App(): React.JSX.Element {
return (

sourceURL="https://react.dev/"
style={styles.webview}

Alert.alert('Page Loaded');
}}

const styles = StyleSheet.create({
container: {
flex: 1,
alignItems: 'center',
alignContent: 'center',
},
webview: {
width: '100%',
height: '100%',
},
});

export default App;

This code creates an app that uses the new `WebView` component we created to load the `react.dev` website.

The app also shows an alert when the web page is loaded.

## 4\. Run your App using the WebView Component [​](https://reactnative.dev/docs/next/fabric-native-components-introduction\#4-run-your-app-using-the-webview-component "Direct link to 4. Run your App using the WebView Component")

```codeBlockLines_AclH
yarn run android

```codeBlockLines_AclH
yarn run ios

| Android | iOS |
| --- | --- |
| ![](https://reactnative.dev/docs/assets/webview-android.webp) | ![](https://reactnative.dev/docs/assets/webview-ios.webp) |

Is this page useful?

- [Creating a WebView Component](https://reactnative.dev/docs/next/fabric-native-components-introduction#creating-a-webview-component)
- [1\. Define Specification for Codegen](https://reactnative.dev/docs/next/fabric-native-components-introduction#1-define-specification-for-codegen)
- [2\. Configure Codegen to run](https://reactnative.dev/docs/next/fabric-native-components-introduction#2-configure-codegen-to-run)
- [2\. Building your Native Code](https://reactnative.dev/docs/next/fabric-native-components-introduction#2-building-your-native-code)
- [3\. Use your Native Component](https://reactnative.dev/docs/next/fabric-native-components-introduction#3-use-your-native-component)
- [4\. Run your App using the WebView Component](https://reactnative.dev/docs/next/fabric-native-components-introduction#4-run-your-app-using-the-webview-component)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/dimensions

[Skip to main content](https://reactnative.dev/docs/next/dimensions#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/dimensions)** (0.81).

Version: Next

On this page

info

[`useWindowDimensions`](https://reactnative.dev/docs/next/usewindowdimensions) is the preferred API for React components. Unlike `Dimensions`, it updates as the window's dimensions update. This works nicely with the React paradigm.

tsx

```codeBlockLines_AclH
import {Dimensions} from 'react-native';

You can get the application window's width and height using the following code:

```codeBlockLines_AclH
const windowWidth = Dimensions.get('window').width;
const windowHeight = Dimensions.get('window').height;

note

Although dimensions are available immediately, they may change (e.g due to device rotation, foldable devices etc) so any rendering logic or styles that depend on these constants should try to call this function on every render, rather than caching the value (for example, using inline styles rather than setting a value in a `StyleSheet`).

If you are targeting foldable devices or devices which can change the screen size or app window size, you can use the event listener available in the Dimensions module as shown in the below example.

## Example [​](https://reactnative.dev/docs/next/dimensions\#example "Direct link to Example")

Dimensions Example - Snack

# Dimensions Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React, {useState, useEffect} from 'react';
import {StyleSheet, Text, Dimensions} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const windowDimensions = Dimensions.get('window');
const screenDimensions = Dimensions.get('screen');

const \[dimensions, setDimensions\] = useState({
window: windowDimensions,
screen: screenDimensions,
});

const subscription = Dimensions.addEventListener(
'change',

setDimensions({window, screen});
},
);

});

return (

};

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
alignItems: 'center',
},
header: {
fontSize: 16,
marginVertical: 10,
},
});

export default App;

const [dimensions, setDimensions] = useState({
window: windowDimensions,
screen: screenDimensions,
});

const subscription = Dimensions.addEventListener(
'change',

setDimensions({window, screen});
},
);

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
alignItems: 'center',
},
header: {
fontSize: 16,
marginVertical: 10,
},
});

Snack

Window Dimensions

fontScale - 1

height - 66

scale - 1

width - 285

Screen Dimensions

height - 1080

width - 1920

Updating…

PreviewMy DeviceAndroidiOSWeb

# Reference

## Methods [​](https://reactnative.dev/docs/next/dimensions\#methods "Direct link to Methods")

### `addEventListener()` [​](https://reactnative.dev/docs/next/dimensions\#addeventlistener "Direct link to addeventlistener")

```codeBlockLines_AclH
static addEventListener(
type: 'change',
handler: ({
window,
screen,

): EmitterSubscription;

Add an event handler. Supported events:

- `change`: Fires when a property within the `Dimensions` object changes. The argument to the event handler is a [`DimensionsValue`](https://reactnative.dev/docs/next/dimensions#dimensionsvalue) type object.

* * *

### `get()` [​](https://reactnative.dev/docs/next/dimensions\#get "Direct link to get")

```codeBlockLines_AclH
static get(dim: 'window' | 'screen'): ScaledSize;

Initial dimensions are set before `runApplication` is called so they should be available before any other require's are run, but may be updated later.

Example: `const {height, width} = Dimensions.get('window');`

**Parameters:**

| Name | Type | Description |
| --- | --- | --- |

For Android the `window` dimension will be reduced by the size of status bar (if not translucent) and bottom navigation bar.

## Type Definitions [​](https://reactnative.dev/docs/next/dimensions\#type-definitions "Direct link to Type Definitions")

### DimensionsValue [​](https://reactnative.dev/docs/next/dimensions\#dimensionsvalue "Direct link to DimensionsValue")

**Properties:**

| Name | Type | Description |
| --- | --- | --- |
| window | [ScaledSize](https://reactnative.dev/docs/next/dimensions#scaledsize) | Size of the visible Application window. |
| screen | [ScaledSize](https://reactnative.dev/docs/next/dimensions#scaledsize) | Size of the device's screen. |

### ScaledSize [​](https://reactnative.dev/docs/next/dimensions\#scaledsize "Direct link to ScaledSize")

| Type |
| --- |
| object |

| Name | Type |
| --- | --- |
| width | number |
| height | number |
| scale | number |
| fontScale | number |

Is this page useful?

- [Example](https://reactnative.dev/docs/next/dimensions#example)
- [Methods](https://reactnative.dev/docs/next/dimensions#methods)
- [`addEventListener()`](https://reactnative.dev/docs/next/dimensions#addeventlistener)
- [`get()`](https://reactnative.dev/docs/next/dimensions#get)
- [Type Definitions](https://reactnative.dev/docs/next/dimensions#type-definitions)
- [DimensionsValue](https://reactnative.dev/docs/next/dimensions#dimensionsvalue)
- [ScaledSize](https://reactnative.dev/docs/next/dimensions#scaledsize)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/dropshadowvalue

[Skip to main content](https://reactnative.dev/docs/next/dropshadowvalue#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/dropshadowvalue)** (0.81).

Version: Next

On this page

The `DropShadowValue` object is taken by the [`filter`](https://reactnative.dev/docs/next/view-style-props#filter) style prop for the `dropShadow` function. It is comprised of 2 or 3 lengths and an optional color. These values collectively define the drop shadow's color, position, and blurriness.

## Example [​](https://reactnative.dev/docs/next/dropshadowvalue\#example "Direct link to Example")

js

```codeBlockLines_AclH
{
offsetX: 10,
offsetY: -3,
standardDeviation: '15px',
color: 'blue',
}

## Keys and values [​](https://reactnative.dev/docs/next/dropshadowvalue\#keys-and-values "Direct link to Keys and values")

### `offsetX` [​](https://reactnative.dev/docs/next/dropshadowvalue\#offsetx "Direct link to offsetx")

The offset on the x-axis. This can be positive or negative. A positive value indicates right and negative indicates left.

| Type | Optional |
| --- | --- |
| number \| string | No |

### `offsetY` [​](https://reactnative.dev/docs/next/dropshadowvalue\#offsety "Direct link to offsety")

The offset on the y-axis. This can be positive or negative. A positive value indicates up and negative indicates down.

### `standardDeviation` [​](https://reactnative.dev/docs/next/dropshadowvalue\#standarddeviation "Direct link to standarddeviation")

Represents the standard deviation used in the [Guassian blur](https://en.wikipedia.org/wiki/Gaussian_blur) algorithm. The larger the value the blurrier the shadow is. Only non-negative values are valid. The default is 0.

| Type | Optional |
| --- | --- |
| numer \| string | Yes |

### `color` [​](https://reactnative.dev/docs/next/dropshadowvalue\#color "Direct link to color")

The color of the shadow. The default is `black`.

| Type | Optional |
| --- | --- |
| [color](https://reactnative.dev/docs/next/colors) | Yes |

## Used by [​](https://reactnative.dev/docs/next/dropshadowvalue\#used-by "Direct link to Used by")

- [`filter`](https://reactnative.dev/docs/next/view-style-props#filter)

Is this page useful?

- [Example](https://reactnative.dev/docs/next/dropshadowvalue#example)
- [Keys and values](https://reactnative.dev/docs/next/dropshadowvalue#keys-and-values)
- [`offsetX`](https://reactnative.dev/docs/next/dropshadowvalue#offsetx)
- [`offsetY`](https://reactnative.dev/docs/next/dropshadowvalue#offsety)
- [`standardDeviation`](https://reactnative.dev/docs/next/dropshadowvalue#standarddeviation)
- [`color`](https://reactnative.dev/docs/next/dropshadowvalue#color)
- [Used by](https://reactnative.dev/docs/next/dropshadowvalue#used-by)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/global-clearInterval

[Skip to main content](https://reactnative.dev/docs/next/global-clearInterval#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

warning

🚧 This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/Window/clearInterval) for more information.

The global `clearInterval` function, as defined in Web specifications.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/fabric-native-components-android

[Skip to main content](https://reactnative.dev/docs/next/fabric-native-components-android#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/fabric-native-components-android)** (0.81).

Version: Next

On this page

Now it's time to write some Android platform code to be able to render the web view. The steps you need to follow are:

- Running Codegen
- Write the code for the `ReactWebView`
- Write the code for the `ReactWebViewManager`
- Write the code for the `ReactWebViewPackage`
- Register the `ReactWebViewPackage` in the application

### 1\. Run Codegen through Gradle [​](https://reactnative.dev/docs/next/fabric-native-components-android\#1-run-codegen-through-gradle "Direct link to 1. Run Codegen through Gradle")

Run this once to generate boilerplate that your IDE of choice can use.

Demo/

```codeBlockLines_AclH
cd android
./gradlew generateCodegenArtifactsFromSchema

Codegen will generate the `ViewManager` interface you need to implement and the `ViewManager` delegate for the web view.

### 2\. Write the `ReactWebView` [​](https://reactnative.dev/docs/next/fabric-native-components-android\#2-write-the-reactwebview "Direct link to 2-write-the-reactwebview")

The `ReactWebView` is the component that wraps the Android native view that React Native will render when using our custom Component.

Create a `ReactWebView.java` or a `ReactWebView.kt` file in the `android/src/main/java/com/webview` folder with this code:

- Java
- Kotlin

Demo/android/src/main/java/com/webview/ReactWebView.java

```codeBlockLines_AclH
package com.webview;

import android.content.Context;
import android.util.AttributeSet;
import android.webkit.WebView;
import android.webkit.WebViewClient;

import com.facebook.react.bridge.Arguments;
import com.facebook.react.bridge.WritableMap;
import com.facebook.react.bridge.ReactContext;
import com.facebook.react.uimanager.UIManagerHelper;
import com.facebook.react.uimanager.events.Event;

public class ReactWebView extends WebView {
public ReactWebView(Context context) {
super(context);
configureComponent();
}

public ReactWebView(Context context, AttributeSet attrs) {
super(context, attrs);
configureComponent();
}

public ReactWebView(Context context, AttributeSet attrs, int defStyleAttr) {
super(context, attrs, defStyleAttr);
configureComponent();
}

private void configureComponent() {
this.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
this.setWebViewClient(new WebViewClient() {
@Override
public void onPageFinished(WebView view, String url) {
emitOnScriptLoaded(OnScriptLoadedEventResult.success);
}
});
}

public void emitOnScriptLoaded(OnScriptLoadedEventResult result) {
ReactContext reactContext = (ReactContext) context;
int surfaceId = UIManagerHelper.getSurfaceId(reactContext);
EventDispatcher eventDispatcher = UIManagerHelper.getEventDispatcherForReactTag(reactContext, getId());
WritableMap payload = Arguments.createMap();
payload.putString("result", result.name());

OnScriptLoadedEvent event = new OnScriptLoadedEvent(surfaceId, getId(), payload);
if (eventDispatcher != null) {
eventDispatcher.dispatchEvent(event);
}
}

public enum OnScriptLoadedEventResult {
success,
error
}

private final WritableMap payload;

OnScriptLoadedEvent(int surfaceId, int viewId, WritableMap payload) {
super(surfaceId, viewId);
this.payload = payload;
}

@Override
public String getEventName() {
return "onScriptLoaded";
}

@Override
public WritableMap getEventData() {
return payload;
}
}
}

Demo/android/src/main/java/com/webview/ReactWebView.kt

```codeBlockLines_AclH
package com.webview

import android.content.Context
import android.util.AttributeSet
import android.webkit.WebView
import android.webkit.WebViewClient
import com.facebook.react.bridge.Arguments
import com.facebook.react.bridge.WritableMap
import com.facebook.react.bridge.ReactContext
import com.facebook.react.uimanager.UIManagerHelper
import com.facebook.react.uimanager.events.Event

class ReactWebView: WebView {
constructor(context: Context) : super(context) {
configureComponent()
}

constructor(context: Context, attrs: AttributeSet?) : super(context, attrs) {
configureComponent()
}

constructor(context: Context, attrs: AttributeSet?, defStyleAttr: Int) : super(context, attrs, defStyleAttr) {
configureComponent()
}

private fun configureComponent() {
this.layoutParams = LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT)
this.webViewClient = object : WebViewClient() {
override fun onPageFinished(view: WebView, url: String) {
emitOnScriptLoaded(OnScriptLoadedEventResult.success)
}
}
}

fun emitOnScriptLoaded(result: OnScriptLoadedEventResult) {
val reactContext = context as ReactContext
val surfaceId = UIManagerHelper.getSurfaceId(reactContext)
val eventDispatcher = UIManagerHelper.getEventDispatcherForReactTag(reactContext, id)
val payload =
Arguments.createMap().apply {
putString("result", result.name)
}
val event = OnScriptLoadedEvent(surfaceId, id, payload)

eventDispatcher?.dispatchEvent(event)
}

enum class OnScriptLoadedEventResult {
success,
error;
}

inner class OnScriptLoadedEvent(
surfaceId: Int,
viewId: Int,
private val payload: WritableMap

override fun getEventName() = "onScriptLoaded"

override fun getEventData() = payload
}
}

The `ReactWebView` extends the Android `WebView` so you can reuse all the properties already defined by the platform with ease.

The class defines the three Android constructors but defers their actual implementation to the private `configureComponent` function. This function takes care of initializing all the components specific properties: in this case you are setting the layout of the `WebView` and you are defining the `WebClient` that you use to customize the behavior of the `WebView`. In this code, the `ReactWebView` emits an event when the page finishes loading, by implementing the `WebClient`'s `onPageFinished` method.

The code then defines a helper function to actually emit an event. To emit an event, you have to:

- grab a reference to the `ReactContext`;
- retrieve the `surfaceId` of the view that you are presenting;
- grab a reference to the `eventDispatcher` associated with the view;
- build the payload for the event using a `WritableMap` object;
- create the event object that you need to send to JavaScript;
- call the `eventDispatcher.dispatchEvent` to send the event.

The last part of the file contains the definition of the data types you need to send the event:

- The `OnScriptLoadedEventResult`, with the possible outcomes of the `OnScriptLoaded` event.
- The actual `OnScriptLoadedEvent` that needs to extend the React Native's `Event` class.

### 3\. Write the `WebViewManager` [​](https://reactnative.dev/docs/next/fabric-native-components-android\#3-write-the-webviewmanager "Direct link to 3-write-the-webviewmanager")

The `WebViewManager` is the class that connects the React Native runtime with the native view.

When React receives the instruction from the app to render a specific component, React uses the registered view manager to create the view and to pass all the required properties.

This is the code of the `ReactWebViewManager`.

Demo/android/src/main/java/com/webview/ReactWebViewManager.java

import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.module.annotations.ReactModule;
import com.facebook.react.uimanager.SimpleViewManager;
import com.facebook.react.uimanager.ThemedReactContext;
import com.facebook.react.uimanager.ViewManagerDelegate;
import com.facebook.react.uimanager.annotations.ReactProp;
import com.facebook.react.viewmanagers.CustomWebViewManagerInterface;
import com.facebook.react.viewmanagers.CustomWebViewManagerDelegate;

import java.util.HashMap;
import java.util.Map;

@ReactModule(name = ReactWebViewManager.REACT_CLASS)

@Override

return delegate;
}

@Override
public String getName() {
return REACT_CLASS;
}

@Override
public ReactWebView createViewInstance(ThemedReactContext context) {
return new ReactWebView(context);
}

@ReactProp(name = "sourceUrl")
@Override
public void setSourceURL(ReactWebView view, String sourceURL) {
if (sourceURL == null) {
view.emitOnScriptLoaded(ReactWebView.OnScriptLoadedEventResult.error);
return;
}

}

public static final String REACT_CLASS = "CustomWebView";

put("bubbled", "onScriptLoaded");
put("captured", "onScriptLoadedCapture");
}});
map.put("onScriptLoaded", bubblingMap);
return map;
}
}

Demo/android/src/main/java/com/webview/ReactWebViewManager.kt

CustomWebViewManagerDelegate(this)

override fun getName(): String = REACT_CLASS

override fun createViewInstance(context: ThemedReactContext): ReactWebView = ReactWebView(context)

@ReactProp(name = "sourceUrl")
override fun setSourceURL(view: ReactWebView, sourceURL: String?) {
if (sourceURL == null) {
view.emitOnScriptLoaded(ReactWebView.OnScriptLoadedEventResult.error)
return;
}
view.loadUrl(sourceURL, emptyMap())
}

companion object {
const val REACT_CLASS = "CustomWebView"
}

mapOf(
"onScriptLoaded" to
mapOf(
"phasedRegistrationNames" to
mapOf(
"bubbled" to "onScriptLoaded",
"captured" to "onScriptLoadedCapture"
)))
}

The `ReactWebViewManager` extends the `SimpleViewManager` class from React and implements the `CustomWebViewManagerInterface`, generated by Codegen.

It holds a reference of the `CustomWebViewManagerDelegate`, another element generated by Codegen.

It then overrides the `getName` function, which must return the same name used in the spec's `codegenNativeComponent` function call.

The `createViewInstance` function is responsible to instantiate a new `ReactWebView`.

Then, the ViewManager needs to define how all the React's components props will update the native view. In the example, you need to decide how to handle the `sourceURL` property that React will set on the `WebView`.

Finally, if the component can emit an event, you need to map the event name by overriding the `getExportedCustomBubblingEventTypeConstants` for bubbling events, or the `getExportedCustomDirectEventTypeConstants` for direct events.

### 4\. Write the `ReactWebViewPackage` [​](https://reactnative.dev/docs/next/fabric-native-components-android\#4-write-the-reactwebviewpackage "Direct link to 4-write-the-reactwebviewpackage")

As you do with Native Modules, Native Components also need to implement the `ReactPackage` class. This is an object that you can use to register the component in the React Native runtime.

This is the code for the `ReactWebViewPackage`:

Demo/android/src/main/java/com/webview/ReactWebViewPackage.java

import com.facebook.react.BaseReactPackage;
import com.facebook.react.bridge.NativeModule;
import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.module.model.ReactModuleInfo;
import com.facebook.react.module.model.ReactModuleInfoProvider;
import com.facebook.react.uimanager.ViewManager;

import java.util.Collections;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class ReactWebViewPackage extends BaseReactPackage {
@Override
public List<ViewManager<?, ?>> createViewManagers(ReactApplicationContext reactContext) {
return Collections.singletonList(new ReactWebViewManager(reactContext));
}

@Override
public NativeModule getModule(String s, ReactApplicationContext reactApplicationContext) {
if (ReactWebViewManager.REACT_CLASS.equals(s)) {
return new ReactWebViewManager(reactApplicationContext);
}
return null;
}

@Override
public ReactModuleInfoProvider getReactModuleInfoProvider() {
return new ReactModuleInfoProvider() {
@Override

map.put(ReactWebViewManager.REACT_CLASS, new ReactModuleInfo(
ReactWebViewManager.REACT_CLASS, // name
ReactWebViewManager.REACT_CLASS, // className
false, // canOverrideExistingModule
false, // needsEagerInit
false, // isCxxModule
true // isTurboModule
));
return map;
}
};
}
}

Demo/android/src/main/java/com/webview/ReactWebViewPackage.kt

import com.facebook.react.BaseReactPackage
import com.facebook.react.bridge.NativeModule
import com.facebook.react.bridge.ReactApplicationContext
import com.facebook.react.module.model.ReactModuleInfo
import com.facebook.react.module.model.ReactModuleInfoProvider
import com.facebook.react.uimanager.ViewManager

class ReactWebViewPackage : BaseReactPackage() {
override fun createViewManagers(reactContext: ReactApplicationContext): List<ViewManager<*, *>> {
return listOf(ReactWebViewManager(reactContext))
}

override fun getModule(s: String, reactApplicationContext: ReactApplicationContext): NativeModule? {
when (s) {

}
return null
}

override fun getReactModuleInfoProvider(): ReactModuleInfoProvider = ReactModuleInfoProvider {
mapOf(ReactWebViewManager.REACT_CLASS to ReactModuleInfo(
name = ReactWebViewManager.REACT_CLASS,
className = ReactWebViewManager.REACT_CLASS,
canOverrideExistingModule = false,
needsEagerInit = false,
isCxxModule = false,
isTurboModule = true,
)
)
}
}

The `ReactWebViewPackage` extends the `BaseReactPackage` and implements all the methods required to properly register our component.

- the `createViewManagers` method is the factory method that creates the `ViewManager` that manage the custom views.
- the `getModule` method returns the proper ViewManager depending on the View that React Native needs to render.
- the `getReactModuleInfoProvider` provides all the information required when registering the module in the runtime,

### 5\. Register the `ReactWebViewPackage` in the application [​](https://reactnative.dev/docs/next/fabric-native-components-android\#5-register-the-reactwebviewpackage-in-the-application "Direct link to 5-register-the-reactwebviewpackage-in-the-application")

Finally, you need to register the `ReactWebViewPackage` in the application. We do that by modifying the `MainApplication` file by adding the `ReactWebViewPackage` to the list of packages returned by the `getPackages` function.

Demo/app/src/main/java/com/demo/MainApplication.kt

```codeBlockLines_AclH
package com.demo

import android.app.Application
import com.facebook.react.PackageList
import com.facebook.react.ReactApplication
import com.facebook.react.ReactHost
import com.facebook.react.ReactNativeHost
import com.facebook.react.ReactPackage
import com.facebook.react.defaults.DefaultNewArchitectureEntryPoint.load
import com.facebook.react.defaults.DefaultReactHost.getDefaultReactHost
import com.facebook.react.defaults.DefaultReactNativeHost
import com.facebook.react.soloader.OpenSourceMergedSoMapping
import com.facebook.soloader.SoLoader
import com.webview.ReactWebViewPackage

class MainApplication : Application(), ReactApplication {

override val reactNativeHost: ReactNativeHost =
object : DefaultReactNativeHost(this) {

PackageList(this).packages.apply {
add(ReactWebViewPackage())
}

override fun getJSMainModuleName(): String = "index"

override fun getUseDeveloperSupport(): Boolean = BuildConfig.DEBUG

override val isNewArchEnabled: Boolean = BuildConfig.IS_NEW_ARCHITECTURE_ENABLED
override val isHermesEnabled: Boolean = BuildConfig.IS_HERMES_ENABLED
}

override val reactHost: ReactHost
get() = getDefaultReactHost(applicationContext, reactNativeHost)

override fun onCreate() {
super.onCreate()
SoLoader.init(this, OpenSourceMergedSoMapping)
if (BuildConfig.IS_NEW_ARCHITECTURE_ENABLED) {
load()
}
}
}

Is this page useful?

- [1\. Run Codegen through Gradle](https://reactnative.dev/docs/next/fabric-native-components-android#1-run-codegen-through-gradle)
- [2\. Write the `ReactWebView`](https://reactnative.dev/docs/next/fabric-native-components-android#2-write-the-reactwebview)
- [3\. Write the `WebViewManager`](https://reactnative.dev/docs/next/fabric-native-components-android#3-write-the-webviewmanager)
- [4\. Write the `ReactWebViewPackage`](https://reactnative.dev/docs/next/fabric-native-components-android#4-write-the-reactwebviewpackage)
- [5\. Register the `ReactWebViewPackage` in the application](https://reactnative.dev/docs/next/fabric-native-components-android#5-register-the-reactwebviewpackage-in-the-application)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/environment-setup

[Skip to main content](https://reactnative.dev/docs/next/environment-setup#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/environment-setup)** (0.81).

Version: Next

**React Native allows developers who know React to create native apps.** At the same time, native developers can use React Native to gain parity between native platforms by writing common features once.

We believe that the best way to experience React Native is through a **Framework**, a toolbox with all the necessary APIs to let you build production ready apps.

You can also use React Native without a Framework, however we’ve found that most developers benefit from using a React Native Framework like [Expo](https://expo.dev/). Expo provides features like file-based routing, high-quality universal libraries, and the ability to write plugins that modify native code without having to manage native files.

Can I use React Native without a Framework?

Yes. You can use React Native without a Framework. **However, if you’re building a new app with React Native, we recommend using a Framework.**

In short, you’ll be able to spend time writing your app instead of writing an entire Framework yourself in addition to your app.

The React Native community has spent years refining approaches to navigation, accessing native APIs, dealing with native dependencies, and more. Most apps need these core features. A React Native Framework provides them from the start of your app.

Without a Framework, you’ll either have to write your own solutions to implement core features, or you’ll have to piece together a collection of pre-existing libraries to create a skeleton of a Framework. This takes real work, both when starting your app, then later when maintaining it.

If your app has unusual constraints that are not served well by a Framework, or you prefer to solve these problems yourself, you can make a React Native app without a Framework using Android Studio, Xcode. If you’re interested in this path, learn how to [set up your environment](https://reactnative.dev/docs/next/set-up-your-environment) and how to [get started without a framework](https://reactnative.dev/docs/next/getting-started-without-a-framework).

## Start a new React Native project with Expo [​](https://reactnative.dev/docs/next/environment-setup\#start-a-new-react-native-project-with-expo "Direct link to Start a new React Native project with Expo")

**Platform support**

Android

iOS

TV

Web

Expo is a production-grade React Native Framework. Expo provides developer tooling that makes developing apps easier, such as file-based routing, a standard library of native modules, and much more.

Expo's Framework is free and open source, with an active community on [GitHub](https://github.com/expo) and [Discord](https://chat.expo.dev/). The Expo team works in close collaboration with the React Native team at Meta to bring the latest React Native features to the Expo SDK.

The team at Expo also provides Expo Application Services (EAS), an optional set of services that complements Expo, the Framework, in each step of the development process.

To create a new Expo project, run the following in your terminal:

shell

```codeBlockLines_AclH
npx create-expo-app@latest

Once you’ve created your app, check out the rest of Expo’s getting started guide to start developing your app.

[Continue with Expo](https://docs.expo.dev/get-started/set-up-your-environment)

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/global-File

[Skip to main content](https://reactnative.dev/docs/next/global-File#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

warning

🚧 This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/File) for more information.

The global `File` class, as defined in Web specifications.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/debugging

[Skip to main content](https://reactnative.dev/docs/next/debugging#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/debugging)** (0.81).

Version: Next

On this page

note

Debugging features, such as the Dev Menu, LogBox, and React Native DevTools are disabled in release (production) builds.

## Opening the Dev Menu [​](https://reactnative.dev/docs/next/debugging\#opening-the-dev-menu "Direct link to Opening the Dev Menu")

React Native provides an in-app developer menu providing access to debugging features. You can access the Dev Menu by shaking your device or via keyboard shortcuts:

- Android emulators: `Cmd ⌘` \+ `M` (macOS) or `Ctrl` \+ `M` (Windows and Linux)

Alternative (Android): `adb shell input keyevent 82`.

## Opening DevTools [​](https://reactnative.dev/docs/next/debugging\#opening-devtools "Direct link to Opening DevTools")

[React Native DevTools](https://reactnative.dev/docs/next/react-native-devtools) is our built-in debugger for React Native. It allows you to inspect and understand how your JavaScript code is running, similar to a web browser.

To open DevTools, either:

- Select "Open DevTools" in the Dev Menu.
- Press `j` from the CLI ( `npx react-native start`).

On first launch, DevTools will open to a welcome panel, along with an open console drawer where you can view logs and interact with the JavaScript runtime. From the top of the window, you can navigate to other panels, including the integrated React Components Inspector and Profiler.

React Native DevTools is powered by a dedicated debugging architecture built into React Native and uses a customized build of the [Chrome DevTools](https://developer.chrome.com/docs/devtools) frontend. This enables us to offer familiar, browser-aligned debugging features that are deeply integrated and built for end-to-end reliability.

Learn more in our [React Native DevTools guide](https://reactnative.dev/docs/next/react-native-devtools).

React Native DevTools is only available with the Hermes engine, and requires either Google Chrome or Microsoft Edge installed.

info

#### Flipper and alternative debugging tools [​](https://reactnative.dev/docs/next/debugging\#flipper-and-alternative-debugging-tools "Direct link to Flipper and alternative debugging tools")

React Native DevTools replaces the previous Flipper, Experimental Debugger, and Hermes debugger (Chrome) frontends. If you are on an older version of React Native, please go to the docs [for your version](https://reactnative.dev/versions).

For apps using JavaScriptCore instead of Hermes, Direct JSC Debugging is still available (see [Other Debugging Methods](https://reactnative.dev/docs/next/other-debugging-methods)).

React Native DevTools is designed for debugging React app concerns, and not to replace native tools. If you want to inspect React Native’s underlying platform layers (for example, while developing a Native Module), please use the debugging tools available in Xcode and Android Studio (see [Debugging Native Code](https://reactnative.dev/docs/next/debugging-native-code)).

Other useful links:

- [Why you don’t need Flipper in your React Native app … and how to get by without it ↗](https://shift.infinite.red/why-you-dont-need-flipper-in-your-react-native-app-and-how-to-get-by-without-it-3af461955109)

## LogBox [​](https://reactnative.dev/docs/next/debugging\#logbox "Direct link to LogBox")

LogBox is an in-app tool that displays when warnings or errors are logged by your app.

### Fatal Errors [​](https://reactnative.dev/docs/next/debugging\#fatal-errors "Direct link to Fatal Errors")

When an unrecoverable error occurs, such as a JavaScript syntax error, LogBox will open with the location of the error. In this state, LogBox is not dismissable since your code cannot be executed. LogBox will automatically dismiss once the syntax error is fixed — either via Fast Refresh or after a manual reload.

### Console Errors and Warnings [​](https://reactnative.dev/docs/next/debugging\#console-errors-and-warnings "Direct link to Console Errors and Warnings")

Console errors and warnings are displayed as on-screen notifications with a red or yellow badge.

- **Errors** will display with a notification count. Tap the notification to see an expanded view and to paginate through other logs.
- **Warnings** will display a notification banner without details, prompting you to open React Native DevTools.

When React Native DevTools is open, all errors except fatal errors will be hidden to LogBox. We recommend using the Console panel within React Native DevTools as a source of truth, due to various LogBox options which can hide or adjust the level of certain logs.

**💡 Ignoring logs**

LogBox can be configured via the `LogBox` API.

js

```codeBlockLines_AclH
import {LogBox} from 'react-native';

#### Ignore all logs [​](https://reactnative.dev/docs/next/debugging\#ignore-all-logs "Direct link to Ignore all logs")

LogBox notifications can be disabled using `LogBox.ignoreAllLogs()`. This can be useful in situations such as giving product demos.

```codeBlockLines_AclH
LogBox.ignoreAllLogs();

#### Ignore specific logs [​](https://reactnative.dev/docs/next/debugging\#ignore-specific-logs "Direct link to Ignore specific logs")

Notifications can be disabled on a per-log basis via `LogBox.ignoreLogs()`. This can be useful for noisy warnings or those that cannot be fixed, e.g. in a third-party dependency.

```codeBlockLines_AclH
LogBox.ignoreLogs([\
// Exact message\
'Warning: componentWillReceiveProps has been renamed',\
\
// Substring or regex match\
/GraphQL error: .*/,\
]);

LogBox will treat certain errors from React as warnings, which will mean they don't display as an in-app error notification. Advanced users can change this behaviour by customising LogBox's warning filter using [`LogBoxData.setWarningFilter()`](https://github.com/facebook/react-native/blob/d334f4d77eea538dff87fdcf2ebc090246cfdbb0/packages/react-native/Libraries/LogBox/Data/LogBoxData.js#L338).

## Performance Monitor [​](https://reactnative.dev/docs/next/debugging\#performance-monitor "Direct link to Performance Monitor")

On Android and iOS, an in-app performance overlay can be toggled during development by selecting **"Perf Monitor"** in the Dev Menu. Learn more about this feature [here](https://reactnative.dev/docs/performance).

The Performance Monitor runs in-app and is a guide. We recommend investigating the native tooling under Android Studio and Xcode for accurate performance measurements.

Is this page useful?

- [Opening the Dev Menu](https://reactnative.dev/docs/next/debugging#opening-the-dev-menu)
- [Opening DevTools](https://reactnative.dev/docs/next/debugging#opening-devtools)
- [LogBox](https://reactnative.dev/docs/next/debugging#logbox)
- [Fatal Errors](https://reactnative.dev/docs/next/debugging#fatal-errors)
- [Console Errors and Warnings](https://reactnative.dev/docs/next/debugging#console-errors-and-warnings)
- [Performance Monitor](https://reactnative.dev/docs/next/debugging#performance-monitor)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/flatlist

[Skip to main content](https://reactnative.dev/docs/next/flatlist#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/flatlist)** (0.81).

Version: Next

On this page

A performant interface for rendering basic, flat lists, supporting the most handy features:

- Fully cross-platform.
- Optional horizontal mode.
- Configurable viewability callbacks.
- Header support.
- Footer support.
- Separator support.
- Pull to Refresh.
- Scroll loading.
- ScrollToIndex support.
- Multiple column support.

## Example [​](https://reactnative.dev/docs/next/flatlist\#example "Direct link to Example")

- TypeScript
- JavaScript

To render multiple columns, use the [`numColumns`](https://reactnative.dev/docs/next/flatlist#numcolumns) prop. Using this approach instead of a `flexWrap` layout can prevent conflicts with the item height logic.

More complex, selectable example below.

- By passing `extraData={selectedId}` to `FlatList` we make sure `FlatList` itself will re-render when the state changes. Without setting this prop, `FlatList` would not know it needs to re-render any items because it is a `PureComponent` and the prop comparison will not show any changes.
- `keyExtractor` tells the list to use the `id` s for the react keys instead of the default `key` property.

- Internal state is not preserved when content scrolls out of the render window. Make sure all your data is captured in the item data or external stores like Flux, Redux, or Relay.
- This is a `PureComponent` which means that it will not re-render if `props` remain shallow-equal. Make sure that everything your `renderItem` function depends on is passed as a prop (e.g. `extraData`) that is not `===` after updates, otherwise your UI may not update on changes. This includes the `data` prop and parent component state.
- In order to constrain memory and enable smooth scrolling, content is rendered asynchronously offscreen. This means it's possible to scroll faster than the fill rate and momentarily see blank content. This is a tradeoff that can be adjusted to suit the needs of each application, and we are working on improving it behind the scenes.
- By default, the list looks for a `key` prop on each item and uses that for the React key. Alternatively, you can provide a custom `keyExtractor` prop.

* * *

# Reference

## Props [​](https://reactnative.dev/docs/next/flatlist\#props "Direct link to Props")

### [VirtualizedList Props](https://reactnative.dev/docs/next/virtualizedlist\#props) [​](https://reactnative.dev/docs/next/flatlist\#virtualizedlist-props "Direct link to virtualizedlist-props")

Inherits [VirtualizedList Props](https://reactnative.dev/docs/next/virtualizedlist#props).

### Required **`renderItem`** [​](https://reactnative.dev/docs/next/flatlist\#required-renderitem "Direct link to required-renderitem")

tsx

```codeBlockLines_AclH
renderItem({
item: ItemT,
index: number,
separators: {

}
}): JSX.Element;

Takes an item from `data` and renders it into the list.

Provides additional metadata like `index` if you need it, as well as a more generic `separators.updateProps` function which let you set whatever props you want to change the rendering of either the leading separator or trailing separator in case the more common `highlight` and `unhighlight` (which set the `highlighted: boolean` prop) are insufficient for your use case.

| Type |
| --- |
| function |

- `item` (Object): The item from `data` being rendered.
- `index` (number): The index corresponding to this item in the `data` array.
- `separators` (Object)

- `highlight` (Function)
- `unhighlight` (Function)
- `updateProps` (Function)

- `select` (enum('leading', 'trailing'))
- `newProps` (Object)

Example usage:

```codeBlockLines_AclH
<FlatList
ItemSeparatorComponent={
Platform.OS !== 'android' &&

<View
style={[style.separator, highlighted && {marginLeft: 0}]}

}
data={[{title: 'Title Text', key: 'item1'}]}

<TouchableHighlight
key={item.key}

onShowUnderlay={separators.highlight}

### Required **`data`** [​](https://reactnative.dev/docs/next/flatlist\#required-data "Direct link to required-data")

An array (or array-like list) of items to render. Other data types can be used by targeting [`VirtualizedList`](https://reactnative.dev/docs/next/virtualizedlist) directly.

| Type |
| --- |
| ArrayLike |

### `ItemSeparatorComponent` [​](https://reactnative.dev/docs/next/flatlist\#itemseparatorcomponent "Direct link to itemseparatorcomponent")

| Type |
| --- |
| component, function, element |

### `ListEmptyComponent` [​](https://reactnative.dev/docs/next/flatlist\#listemptycomponent "Direct link to listemptycomponent")

| Type |
| --- |
| component, element |

### `ListFooterComponent` [​](https://reactnative.dev/docs/next/flatlist\#listfootercomponent "Direct link to listfootercomponent")

### `ListFooterComponentStyle` [​](https://reactnative.dev/docs/next/flatlist\#listfootercomponentstyle "Direct link to listfootercomponentstyle")

Styling for internal View for `ListFooterComponent`.

| Type |
| --- |
| [View Style](https://reactnative.dev/docs/next/view-style-props) |

### `ListHeaderComponent` [​](https://reactnative.dev/docs/next/flatlist\#listheadercomponent "Direct link to listheadercomponent")

### `ListHeaderComponentStyle` [​](https://reactnative.dev/docs/next/flatlist\#listheadercomponentstyle "Direct link to listheadercomponentstyle")

Styling for internal View for `ListHeaderComponent`.

### `columnWrapperStyle` [​](https://reactnative.dev/docs/next/flatlist\#columnwrapperstyle "Direct link to columnwrapperstyle")

### `extraData` [​](https://reactnative.dev/docs/next/flatlist\#extradata "Direct link to extradata")

A marker property for telling the list to re-render (since it implements `PureComponent`). If any of your `renderItem`, Header, Footer, etc. functions depend on anything outside of the `data` prop, stick it here and treat it immutably.

| Type |
| --- |
| any |

### `getItemLayout` [​](https://reactnative.dev/docs/next/flatlist\#getitemlayout "Direct link to getitemlayout")

```codeBlockLines_AclH

`getItemLayout` is an optional optimization that allows skipping the measurement of dynamic content if you know the size (height or width) of items ahead of time. `getItemLayout` is efficient if you have fixed size items, for example:

{length: ITEM_HEIGHT, offset: ITEM_HEIGHT * index, index}
)}

Adding `getItemLayout` can be a great performance boost for lists of several hundred items. Remember to include separator length (height or width) in your offset calculation if you specify `ItemSeparatorComponent`.

### `horizontal` [​](https://reactnative.dev/docs/next/flatlist\#horizontal "Direct link to horizontal")

If `true`, renders items next to each other horizontally instead of stacked vertically.

| Type |
| --- |
| boolean |

### `initialNumToRender` [​](https://reactnative.dev/docs/next/flatlist\#initialnumtorender "Direct link to initialnumtorender")

How many items to render in the initial batch. This should be enough to fill the screen but not much more. Note these items will never be unmounted as part of the windowed rendering in order to improve perceived performance of scroll-to-top actions.

| Type | Default |
| --- | --- |
| number | `10` |

### `initialScrollIndex` [​](https://reactnative.dev/docs/next/flatlist\#initialscrollindex "Direct link to initialscrollindex")

Instead of starting at the top with the first item, start at `initialScrollIndex`. This disables the "scroll to top" optimization that keeps the first `initialNumToRender` items always rendered and immediately renders the items starting at this initial index. Requires `getItemLayout` to be implemented.

| Type |
| --- |
| number |

### `inverted` [​](https://reactnative.dev/docs/next/flatlist\#inverted "Direct link to inverted")

Reverses the direction of scroll. Uses scale transforms of `-1`.

### `keyExtractor` [​](https://reactnative.dev/docs/next/flatlist\#keyextractor "Direct link to keyextractor")

Used to extract a unique key for a given item at the specified index. Key is used for caching and as the react key to track item re-ordering. The default extractor checks `item.key`, then `item.id`, and then falls

Multiple columns can only be rendered with `horizontal={false}` and will zig-zag like a `flexWrap` layout. Items should all be the same height - masonry layouts are not supported.

### `onRefresh` [​](https://reactnative.dev/docs/next/flatlist\#onrefresh "Direct link to onrefresh")

If provided, a standard RefreshControl will be added for "Pull to Refresh" functionality. Make sure to also set the `refreshing` prop correctly.

### `onViewableItemsChanged` [​](https://reactnative.dev/docs/next/flatlist\#onviewableitemschanged "Direct link to onviewableitemschanged")

Called when the viewability of rows changes, as defined by the `viewabilityConfig` prop.

| Type |
| --- |

### `progressViewOffset` [​](https://reactnative.dev/docs/next/flatlist\#progressviewoffset "Direct link to progressviewoffset")

Set this when offset is needed for the loading indicator to show correctly.

### `refreshing` [​](https://reactnative.dev/docs/next/flatlist\#refreshing "Direct link to refreshing")

Set this true while waiting for new data from a refresh.

### `removeClippedSubviews` [​](https://reactnative.dev/docs/next/flatlist\#removeclippedsubviews "Direct link to removeclippedsubviews")

warning

Using this property may lead to bugs (missing content) in some circumstances - use at your own risk.

When `true`, offscreen child views are removed from their native backing superview when offscreen. This may improve scroll performance for large lists. On Android the default value is `true`.

### `viewabilityConfig` [​](https://reactnative.dev/docs/next/flatlist\#viewabilityconfig "Direct link to viewabilityconfig")

See [`ViewabilityHelper.js`](https://github.com/facebook/react-native/blob/main/packages/react-native/Libraries/Lists/ViewabilityHelper.js) for flow type and further documentation.

| Type |
| --- |
| ViewabilityConfig |

`viewabilityConfig` takes a type `ViewabilityConfig` an object with following properties

| Property | Type |
| --- | --- |
| minimumViewTime | number |
| viewAreaCoveragePercentThreshold | number |
| itemVisiblePercentThreshold | number |
| waitForInteraction | boolean |

At least one of the `viewAreaCoveragePercentThreshold` or `itemVisiblePercentThreshold` is required. This needs to be done in the `constructor` to avoid following error ( [ref](https://github.com/facebook/react-native/issues/17408)):

```codeBlockLines_AclH
Error: Changing viewabilityConfig on the fly is not supported

```codeBlockLines_AclH
constructor (props) {
super(props)

this.viewabilityConfig = {
waitForInteraction: true,
viewAreaCoveragePercentThreshold: 95
}
}

```codeBlockLines_AclH
<FlatList
viewabilityConfig={this.viewabilityConfig}
...

#### minimumViewTime [​](https://reactnative.dev/docs/next/flatlist\#minimumviewtime "Direct link to minimumViewTime")

Minimum amount of time (in milliseconds) that an item must be physically viewable before the viewability callback will be fired. A high number means that scrolling through content without stopping will not mark the content as viewable.

#### viewAreaCoveragePercentThreshold [​](https://reactnative.dev/docs/next/flatlist\#viewareacoveragepercentthreshold "Direct link to viewAreaCoveragePercentThreshold")

Percent of viewport that must be covered for a partially occluded item to count as "viewable", 0-100. Fully visible items are always considered viewable. A value of 0 means that a single pixel in the viewport makes the item viewable, and a value of 100 means that an item must be either entirely visible or cover the entire viewport to count as viewable.

#### itemVisiblePercentThreshold [​](https://reactnative.dev/docs/next/flatlist\#itemvisiblepercentthreshold "Direct link to itemVisiblePercentThreshold")

Similar to `viewAreaCoveragePercentThreshold`, but considers the percent of the item that is visible, rather than the fraction of the viewable area it covers.

#### waitForInteraction [​](https://reactnative.dev/docs/next/flatlist\#waitforinteraction "Direct link to waitForInteraction")

Nothing is considered viewable until the user scrolls or `recordInteraction` is called after render.

### `viewabilityConfigCallbackPairs` [​](https://reactnative.dev/docs/next/flatlist\#viewabilityconfigcallbackpairs "Direct link to viewabilityconfigcallbackpairs")

List of `ViewabilityConfig`/ `onViewableItemsChanged` pairs. A specific `onViewableItemsChanged` will be called when its corresponding `ViewabilityConfig`'s conditions are met. See `ViewabilityHelper.js` for flow type and further documentation.

| Type |
| --- |
| array of ViewabilityConfigCallbackPair |

## Methods [​](https://reactnative.dev/docs/next/flatlist\#methods "Direct link to Methods")

### `flashScrollIndicators()` [​](https://reactnative.dev/docs/next/flatlist\#flashscrollindicators "Direct link to flashscrollindicators")

```codeBlockLines_AclH
flashScrollIndicators();

Displays the scroll indicators momentarily.

### `getNativeScrollRef()` [​](https://reactnative.dev/docs/next/flatlist\#getnativescrollref "Direct link to getnativescrollref")

Provides a reference to the underlying scroll component

### `getScrollResponder()` [​](https://reactnative.dev/docs/next/flatlist\#getscrollresponder "Direct link to getscrollresponder")

```codeBlockLines_AclH
getScrollResponder(): ScrollResponderMixin;

Provides a handle to the underlying scroll responder.

### `getScrollableNode()` [​](https://reactnative.dev/docs/next/flatlist\#getscrollablenode "Direct link to getscrollablenode")

```codeBlockLines_AclH
getScrollableNode(): any;

Provides a handle to the underlying scroll node.

### `scrollToEnd()` [​](https://reactnative.dev/docs/next/flatlist\#scrolltoend "Direct link to scrolltoend")

```codeBlockLines_AclH
scrollToEnd(params?: {animated?: boolean});

Scrolls to the end of the content. May be janky without `getItemLayout` prop.

**Parameters:**

| Name | Type |
| --- | --- |
| params | object |

Valid `params` keys are:

- 'animated' (boolean) - Whether the list should do an animation while scrolling. Defaults to `true`.

### `scrollToIndex()` [​](https://reactnative.dev/docs/next/flatlist\#scrolltoindex "Direct link to scrolltoindex")

```codeBlockLines_AclH
scrollToIndex: (params: {
index: number;
animated?: boolean;
viewOffset?: number;
viewPosition?: number;
});

Scrolls to the item at the specified index such that it is positioned in the viewable area such that `viewPosition` 0 places it at the top, 1 at the bottom, and 0.5 centered in the middle.

note

Cannot scroll to locations outside the render window without specifying the `getItemLayout` prop.

| Name | Type |
| --- | --- |

- 'animated' (boolean) - Whether the list should do an animation while scrolling. Defaults to `true`.
- 'index' (number) - The index to scroll to. Required.
- 'viewOffset' (number) - A fixed number of pixels to offset the final target position.
- 'viewPosition' (number) - A value of `0` places the item specified by index at the top, `1` at the bottom, and `0.5` centered in the middle.

### `scrollToItem()` [​](https://reactnative.dev/docs/next/flatlist\#scrolltoitem "Direct link to scrolltoitem")

```codeBlockLines_AclH
scrollToItem(params: {
animated?: ?boolean,
item: Item,
viewPosition?: number,
});

Requires linear scan through data - use `scrollToIndex` instead if possible.

- 'animated' (boolean) - Whether the list should do an animation while scrolling. Defaults to `true`.
- 'item' (object) - The item to scroll to. Required.
- 'viewPosition' (number)

### `scrollToOffset()` [​](https://reactnative.dev/docs/next/flatlist\#scrolltooffset "Direct link to scrolltooffset")

```codeBlockLines_AclH
scrollToOffset(params: {
offset: number;
animated?: boolean;
});

Scroll to a specific content pixel offset in the list.

- 'offset' (number) - The offset to scroll to. In case of `horizontal` being true, the offset is the x-value, in any other case the offset is the y-value. Required.
- 'animated' (boolean) - Whether the list should do an animation while scrolling. Defaults to `true`.

Is this page useful?

- [Example](https://reactnative.dev/docs/next/flatlist#example)
- [Props](https://reactnative.dev/docs/next/flatlist#props)
- [VirtualizedList Props](https://reactnative.dev/docs/next/flatlist#virtualizedlist-props)
- [Required\\
**`renderItem`**](https://reactnative.dev/docs/next/flatlist#required-renderitem)
- [Required\\
**`data`**](https://reactnative.dev/docs/next/flatlist#required-data)
- [`ItemSeparatorComponent`](https://reactnative.dev/docs/next/flatlist#itemseparatorcomponent)
- [`ListEmptyComponent`](https://reactnative.dev/docs/next/flatlist#listemptycomponent)
- [`ListFooterComponent`](https://reactnative.dev/docs/next/flatlist#listfootercomponent)
- [`ListFooterComponentStyle`](https://reactnative.dev/docs/next/flatlist#listfootercomponentstyle)
- [`ListHeaderComponent`](https://reactnative.dev/docs/next/flatlist#listheadercomponent)
- [`ListHeaderComponentStyle`](https://reactnative.dev/docs/next/flatlist#listheadercomponentstyle)
- [`columnWrapperStyle`](https://reactnative.dev/docs/next/flatlist#columnwrapperstyle)
- [`extraData`](https://reactnative.dev/docs/next/flatlist#extradata)
- [`getItemLayout`](https://reactnative.dev/docs/next/flatlist#getitemlayout)
- [`horizontal`](https://reactnative.dev/docs/next/flatlist#horizontal)
- [`initialNumToRender`](https://reactnative.dev/docs/next/flatlist#initialnumtorender)
- [`initialScrollIndex`](https://reactnative.dev/docs/next/flatlist#initialscrollindex)
- [`inverted`](https://reactnative.dev/docs/next/flatlist#inverted)
- [`keyExtractor`](https://reactnative.dev/docs/next/flatlist#keyextractor)
- [`numColumns`](https://reactnative.dev/docs/next/flatlist#numcolumns)
- [`onRefresh`](https://reactnative.dev/docs/next/flatlist#onrefresh)
- [`onViewableItemsChanged`](https://reactnative.dev/docs/next/flatlist#onviewableitemschanged)
- [`progressViewOffset`](https://reactnative.dev/docs/next/flatlist#progressviewoffset)
- [`refreshing`](https://reactnative.dev/docs/next/flatlist#refreshing)
- [`removeClippedSubviews`](https://reactnative.dev/docs/next/flatlist#removeclippedsubviews)
- [`viewabilityConfig`](https://reactnative.dev/docs/next/flatlist#viewabilityconfig)
- [`viewabilityConfigCallbackPairs`](https://reactnative.dev/docs/next/flatlist#viewabilityconfigcallbackpairs)
- [Methods](https://reactnative.dev/docs/next/flatlist#methods)
- [`flashScrollIndicators()`](https://reactnative.dev/docs/next/flatlist#flashscrollindicators)
- [`getNativeScrollRef()`](https://reactnative.dev/docs/next/flatlist#getnativescrollref)
- [`getScrollResponder()`](https://reactnative.dev/docs/next/flatlist#getscrollresponder)
- [`getScrollableNode()`](https://reactnative.dev/docs/next/flatlist#getscrollablenode)
- [`scrollToEnd()`](https://reactnative.dev/docs/next/flatlist#scrolltoend)
- [`scrollToIndex()`](https://reactnative.dev/docs/next/flatlist#scrolltoindex)
- [`scrollToItem()`](https://reactnative.dev/docs/next/flatlist#scrolltoitem)
- [`scrollToOffset()`](https://reactnative.dev/docs/next/flatlist#scrolltooffset)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/animations

[Skip to main content](https://reactnative.dev/docs/next/animations#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/animations)** (0.81).

Version: Next

On this page

Animations are very important to create a great user experience. Stationary objects must overcome inertia as they start moving. Objects in motion have momentum and rarely come to a stop immediately. Animations allow you to convey physically believable motion in your interface.

React Native provides two complementary animation systems: [`Animated`](https://reactnative.dev/docs/next/animations#animated-api) for granular and interactive control of specific values, and [`LayoutAnimation`](https://reactnative.dev/docs/next/animations#layoutanimation-api) for animated global layout transactions.

## `Animated` API [​](https://reactnative.dev/docs/next/animations\#animated-api "Direct link to animated-api")

The [`Animated`](https://reactnative.dev/docs/next/animated) API is designed to concisely express a wide variety of interesting animation and interaction patterns in a very performant way. `Animated` focuses on declarative relationships between inputs and outputs, with configurable transforms in between, and `start`/ `stop` methods to control time-based animation execution.

`Animated` exports six animatable component types: `View`, `Text`, `Image`, `ScrollView`, `FlatList` and `SectionList`, but you can also create your own using `Animated.createAnimatedComponent()`.

For example, a container view that fades in when it is mounted may look like this:

- TypeScript
- JavaScript

Example - Snack

# Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React, {useEffect, useRef} from 'react';
import {Animated, Text, View} from 'react-native';

const fadeAnim = useRef(new Animated.Value(0)).current; // Initial value for opacity: 0

Animated.timing(fadeAnim, {
toValue: 1,
duration: 10000,
useNativeDriver: true,
}).start();
}, \[fadeAnim\]);

return (
<Animated.View // Special animatable View
style={{
...props.style,
opacity: fadeAnim, // Bind opacity to animated value

};

// You can then use your \`FadeInView\` in place of a \`View\` in your components:

return (
<View
style={{
flex: 1,
alignItems: 'center',
justifyContent: 'center',

style={{
width: 250,
height: 50,
backgroundColor: 'powderblue',

Animated.timing(fadeAnim, {
toValue: 1,
duration: 10000,
useNativeDriver: true,
}).start();
}, [fadeAnim]);

return (
<Animated.View // Special animatable View
style={{
...props.style,
opacity: fadeAnim, // Bind opacity to animated value

// You can then use your `FadeInView` in place of a `View` in your components:

return (
<View
style={{
flex: 1,
alignItems: 'center',
justifyContent: 'center',

style={{
width: 250,
height: 50,
backgroundColor: 'powderblue',

Snack

Fading in

Updating…

PreviewMy DeviceAndroidiOSWeb

import React, {useEffect, useRef, type PropsWithChildren} from 'react';
import {Animated, Text, View, type ViewStyle} from 'react-native';

Let's break down what's happening here. In the `FadeInView` render method, a new `Animated.Value` called `fadeAnim` is initialized with `useRef`. The opacity property on the `View` is mapped to this animated value. Behind the scenes, the numeric value is extracted and used to set opacity.

When the component mounts, the opacity is set to 0. Then, an easing animation is started on the `fadeAnim` animated value, which will update all of its dependent mappings (in this case, only the opacity) on each frame as the value animates to the final value of 1.

This is done in an optimized way that is faster than calling `setState` and re-rendering. Because the entire configuration is declarative, we will be able to implement further optimizations that serialize the configuration and runs the animation on a high-priority thread.

### Configuring animations [​](https://reactnative.dev/docs/next/animations\#configuring-animations "Direct link to Configuring animations")

Animations are heavily configurable. Custom and predefined easing functions, delays, durations, decay factors, spring constants, and more can all be tweaked depending on the type of animation.

`Animated` provides several animation types, the most commonly used one being [`Animated.timing()`](https://reactnative.dev/docs/next/animated#timing). It supports animating a value over time using one of various predefined easing functions, or you can use your own. Easing functions are typically used in animation to convey gradual acceleration and deceleration of objects.

By default, `timing` will use an easeInOut curve that conveys gradual acceleration to full speed and concludes by gradually decelerating to a stop. You can specify a different easing function by passing an `easing` parameter. Custom `duration` or even a `delay` before the animation starts is also supported.

For example, if we want to create a 2-second long animation of an object that slightly backs up before moving to its final position:

tsx

```codeBlockLines_AclH
Animated.timing(this.state.xPosition, {
toValue: 100,
easing: Easing.back(),
duration: 2000,
useNativeDriver: true,
}).start();

Take a look at the [Configuring animations](https://reactnative.dev/docs/next/animated#configuring-animations) section of the `Animated` API reference to learn more about all the config parameters supported by the built-in animations.

### Composing animations [​](https://reactnative.dev/docs/next/animations\#composing-animations "Direct link to Composing animations")

Animations can be combined and played in sequence or in parallel. Sequential animations can play immediately after the previous animation has finished, or they can start after a specified delay. The `Animated` API provides several methods, such as `sequence()` and `delay()`, each of which take an array of animations to execute and automatically calls `start()`/ `stop()` as needed.

For example, the following animation coasts to a stop, then it springs back while twirling in parallel:

```codeBlockLines_AclH
Animated.sequence([\
// decay, then spring to start and twirl\
Animated.decay(position, {\
// coast to a stop\
velocity: {x: gestureState.vx, y: gestureState.vy}, // velocity from gesture release\
deceleration: 0.997,\
useNativeDriver: true,\
}),\
Animated.parallel([\
// after decay, in parallel:\
Animated.spring(position, {\
toValue: {x: 0, y: 0}, // ,\
]),\
]).start(); // start the sequence group

If one animation is stopped or interrupted, then all other animations in the group are also stopped. `Animated.parallel` has a `stopTogether` option that can be set to `false` to disable this.

You can find a full list of composition methods in the [Composing animations](https://reactnative.dev/docs/next/animated#composing-animations) section of the `Animated` API reference.

### Combining animated values [​](https://reactnative.dev/docs/next/animations\#combining-animated-values "Direct link to Combining animated values")

You can [combine two animated values](https://reactnative.dev/docs/next/animated#combining-animated-values) via addition, multiplication, division, or modulo to make a new animated value.

```codeBlockLines_AclH
const a = new Animated.Value(1);
const b = Animated.divide(1, a);

Animated.spring(a, {
toValue: 2,
useNativeDriver: true,
}).start();

### Interpolation [​](https://reactnative.dev/docs/next/animations\#interpolation "Direct link to Interpolation")

Each property can be run through an interpolation first. An interpolation maps input ranges to output ranges, typically using a linear interpolation but also supports easing functions. By default, it will extrapolate the curve beyond the ranges given, but you can also have it clamp the output value.

A basic mapping to convert a 0-1 range to a 0-100 range would be:

```codeBlockLines_AclH
value.interpolate({
inputRange: [0, 1],
outputRange: [0, 100],
});

For example, you may want to think about your `Animated.Value` as going from 0 to 1, but animate the position from 150px to 0px and the opacity from 0 to 1. This can be done by modifying `style` from the example above like so:

```codeBlockLines_AclH
style={{
opacity: this.state.fadeAnim, // Binds directly
transform: [{\
translateY: this.state.fadeAnim.interpolate({\
inputRange: [0, 1],\
outputRange: [150, 0] // 0 : 150, 0.5 : 75, 1 : 0\
}),\
}],
}}

[`interpolate()`](https://reactnative.dev/docs/next/animated#interpolate) supports multiple range segments as well, which is handy for defining dead zones and other handy tricks. For example, to get a negation relationship at -300 that goes to 0 at -100, then back up to 1 at 0, and then back down to zero at 100 followed by a dead-zone that remains at 0 for everything beyond that, you could do:

```codeBlockLines_AclH
value.interpolate({
inputRange: [-300, -100, 0, 100, 101],
outputRange: [300, 0, 1, 0, 0],
});

Which would map like so:

```codeBlockLines_AclH
Input | Output
------|-------
-400| 450
-300| 300
-200| 150
-100| 0
-50| 0.5
0| 1
50| 0.5
100| 0
101| 0
200| 0

`interpolate()` also supports mapping to strings, allowing you to animate colors as well as values with units. For example, if you wanted to animate a rotation you could do:

```codeBlockLines_AclH
value.interpolate({
inputRange: [0, 360],
outputRange: ['0deg', '360deg'],
});

`interpolate()` also supports arbitrary easing functions, many of which are already implemented in the [`Easing`](https://reactnative.dev/docs/next/easing) module. `interpolate()` also has configurable behavior for extrapolating the `outputRange`. You can set the extrapolation by setting the `extrapolate`, `extrapolateLeft`, or `extrapolateRight` options. The default value is `extend` but you can use `clamp` to prevent the output value from exceeding `outputRange`.

### Tracking dynamic values [​](https://reactnative.dev/docs/next/animations\#tracking-dynamic-values "Direct link to Tracking dynamic values")

Animated values can also track other values by setting the `toValue` of an animation to another animated value instead of a plain number. For example, a "Chat Heads" animation like the one used by Messenger on Android could be implemented with a `spring()` pinned on another animated value, or with `timing()` and a `duration` of 0 for rigid tracking. They can also be composed with interpolations:

```codeBlockLines_AclH
Animated.spring(follower, {toValue: leader}).start();
Animated.timing(opacity, {
toValue: pan.x.interpolate({
inputRange: [0, 300],
outputRange: [1, 0],
}),
useNativeDriver: true,
}).start();

The `leader` and `follower` animated values would be implemented using `Animated.ValueXY()`. `ValueXY` is a handy way to deal with 2D interactions, such as panning or dragging. It is a basic wrapper that contains two `Animated.Value` instances and some helper functions that call through to them, making `ValueXY` a drop-in replacement for `Value` in many cases. It allows us to track both x and y values in the example above.

### Tracking gestures [​](https://reactnative.dev/docs/next/animations\#tracking-gestures "Direct link to Tracking gestures")

Gestures, like panning or scrolling, and other events can map directly to animated values using [`Animated.event`](https://reactnative.dev/docs/next/animated#event). This is done with a structured map syntax so that values can be extracted from complex event objects. The first level is an array to allow mapping across multiple args, and that array contains nested objects.

For example, when working with horizontal scrolling gestures, you would do the following in order to map `event.nativeEvent.contentOffset.x` to `scrollX` (an `Animated.Value`):

```codeBlockLines_AclH
onScroll={Animated.event(
// scrollX = e.nativeEvent.contentOffset.x
[{nativeEvent: {\
contentOffset: {\
x: scrollX\
}\
}\
}]
)}

The following example implements a horizontal scrolling carousel where the scroll position indicators are animated using the `Animated.event` used in the `ScrollView`

#### ScrollView with Animated Event Example [​](https://reactnative.dev/docs/next/animations\#scrollview-with-animated-event-example "Direct link to ScrollView with Animated Event Example")

Animated - Snack

# Animated

import React from 'react';
import {
ScrollView,
Text,
StyleSheet,
View,
ImageBackground,
Animated,
useWindowDimensions,
useAnimatedValue,
} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const images = new Array(6).fill(
'https://images.unsplash.com/photo-1556740749-887f6717d7e4',
);

const scrollX = useAnimatedValue(0);

const {width: windowWidth} = useWindowDimensions();

return (

horizontal={true}
pagingEnabled
showsHorizontalScrollIndicator={false}
onScroll={Animated.event(\[\
{\
nativeEvent: {\
contentOffset: {\
x: scrollX,\
},\
},\
},\
\])}

return (
<View
style={{width: windowWidth, height: 250}}

})}

const width = scrollX.interpolate({
inputRange: \[\
windowWidth \* (imageIndex - 1),\
windowWidth \* imageIndex,\
windowWidth \* (imageIndex + 1),\
\],
outputRange: \[8, 16, 8\],
extrapolate: 'clamp',
});
return (
<Animated.View
key={imageIndex}
style={\[styles.normalDot, {width}\]}

const styles = StyleSheet.create({
container: {
flex: 1,
alignItems: 'center',
justifyContent: 'center',
},
scrollContainer: {
height: 300,
alignItems: 'center',
justifyContent: 'center',
},
card: {
flex: 1,
marginVertical: 4,
marginHorizontal: 16,
borderRadius: 5,
overflow: 'hidden',
alignItems: 'center',
justifyContent: 'center',
},
textContainer: {
backgroundColor: 'rgba(0,0,0, 0.7)',
paddingHorizontal: 24,
paddingVertical: 8,
borderRadius: 5,
},
infoText: {
color: 'white',
fontSize: 16,
fontWeight: 'bold',
},
normalDot: {
height: 8,
width: 8,
borderRadius: 4,
backgroundColor: 'silver',
marginHorizontal: 4,
},
indicatorContainer: {
flexDirection: 'row',
alignItems: 'center',
justifyContent: 'center',
},
});

export default App;

import React from 'react';
import {
ScrollView,
Text,
StyleSheet,
View,
ImageBackground,
Animated,
useWindowDimensions,
useAnimatedValue,
} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const images = new Array(6).fill(
'https://images.unsplash.com/photo-1556740749-887f6717d7e4',
);

horizontal={true}
pagingEnabled
showsHorizontalScrollIndicator={false}
onScroll={Animated.event([\
{\
nativeEvent: {\
contentOffset: {\
x: scrollX,\
},\
},\
},\
])}

return (
<View
style={{width: windowWidth, height: 250}}

const width = scrollX.interpolate({
inputRange: [\
windowWidth * (imageIndex - 1),\
windowWidth * imageIndex,\
windowWidth * (imageIndex + 1),\
],
outputRange: [8, 16, 8],
extrapolate: 'clamp',
});
return (
<Animated.View
key={imageIndex}
style={[styles.normalDot, {width}]}

const styles = StyleSheet.create({
container: {
flex: 1,
alignItems: 'center',
justifyContent: 'center',
},
scrollContainer: {
height: 300,
alignItems: 'center',
justifyContent: 'center',
},
card: {
flex: 1,
marginVertical: 4,
marginHorizontal: 16,
borderRadius: 5,
overflow: 'hidden',
alignItems: 'center',
justifyContent: 'center',
},
textContainer: {
backgroundColor: 'rgba(0,0,0, 0.7)',
paddingHorizontal: 24,
paddingVertical: 8,
borderRadius: 5,
},
infoText: {
color: 'white',
fontSize: 16,
fontWeight: 'bold',
},
normalDot: {
height: 8,
width: 8,
borderRadius: 4,
backgroundColor: 'silver',
marginHorizontal: 4,
},
indicatorContainer: {
flexDirection: 'row',
alignItems: 'center',
justifyContent: 'center',
},
});

### Download [Expo Go](https://expo.dev/client) and scan the QR code to get started.

exp://u.expo.dev/933fd9c0-1666-11e7-afca-d980795c5824?runtime-version=exposdk%3A53.0.0&channel-name=production&snack-channel=buJ6jCIPdG

### Connected devices

0

[Log in](https://expo.dev/login) to open this Snack from Expo Go on your device or simulator.

PreviewMy DeviceAndroidiOS

When using `PanResponder`, you could use the following code to extract the x and y positions from `gestureState.dx` and `gestureState.dy`. We use a `null` in the first position of the array, as we are only interested in the second argument passed to the `PanResponder` handler, which is the `gestureState`.

```codeBlockLines_AclH
onPanResponderMove={Animated.event(
[null, // ignore the native event\
// extract dx and dy from gestureState\
// like 'pan.x = gestureState.dx, pan.y = gestureState.dy'\
{dx: pan.x, dy: pan.y}\
])}

#### PanResponder with Animated Event Example [​](https://reactnative.dev/docs/next/animations\#panresponder-with-animated-event-example "Direct link to PanResponder with Animated Event Example")

import React, {useRef} from 'react';
import {Animated, View, StyleSheet, PanResponder, Text} from 'react-native';

const pan = useRef(new Animated.ValueXY()).current;
const panResponder = useRef(
PanResponder.create({

onPanResponderMove: Animated.event(\[null, {dx: pan.x, dy: pan.y}\]),

Animated.spring(pan, {
toValue: {x: 0, y: 0},
useNativeDriver: true,
}).start();
},
}),
).current;

style={{
transform: \[{translateX: pan.x}, {translateY: pan.y}\],
}}

const styles = StyleSheet.create({
container: {
flex: 1,
alignItems: 'center',
justifyContent: 'center',
},
titleText: {
fontSize: 14,
lineHeight: 24,
fontWeight: 'bold',
},
box: {
height: 150,
width: 150,
backgroundColor: 'blue',
borderRadius: 5,
},
});

const pan = useRef(new Animated.ValueXY()).current;
const panResponder = useRef(
PanResponder.create({

onPanResponderMove: Animated.event([null, {dx: pan.x, dy: pan.y}]),

Animated.spring(pan, {
toValue: {x: 0, y: 0},
useNativeDriver: true,
}).start();
},
}),
).current;

style={{
transform: [{translateX: pan.x}, {translateY: pan.y}],
}}

const styles = StyleSheet.create({
container: {
flex: 1,
alignItems: 'center',
justifyContent: 'center',
},
titleText: {
fontSize: 14,
lineHeight: 24,
fontWeight: 'bold',
},
box: {
height: 150,
width: 150,
backgroundColor: 'blue',
borderRadius: 5,
},
});

Drag & Release this box!

### Responding to the current animation value [​](https://reactnative.dev/docs/next/animations\#responding-to-the-current-animation-value "Direct link to Responding to the current animation value")

You may notice that there is no clear way to read the current value while animating. This is because the value may only be known in the native runtime due to optimizations. If you need to run JavaScript in response to the current value, there are two approaches:

- `spring.stopAnimation(callback)` will stop the animation and invoke `callback` with the final value. This is useful when making gesture transitions.
- `spring.addListener(callback)` will invoke `callback` asynchronously while the animation is running, providing a recent value. This is useful for triggering state changes, for example snapping a bobble to a new option as the user drags it closer, because these larger state changes are less sensitive to a few frames of lag compared to continuous gestures like panning which need to run at 60 fps.

`Animated` is designed to be fully serializable so that animations can be run in a high performance way, independent of the normal JavaScript event loop. This does influence the API, so keep that in mind when it seems a little trickier to do something compared to a fully synchronous system. Check out `Animated.Value.addListener` as a way to work around some of these limitations, but use it sparingly since it might have performance implications in the future.

### Using the native driver [​](https://reactnative.dev/docs/next/animations\#using-the-native-driver "Direct link to Using the native driver")

The `Animated` API is designed to be serializable. By using the [native driver](https://reactnative.dev/blog/2017/02/14/using-native-driver-for-animated), we send everything about the animation to native before starting the animation, allowing native code to perform the animation on the UI thread without having to go through the bridge on every frame. Once the animation has started, the JS thread can be blocked without affecting the animation.

Using the native driver for normal animations can be accomplished by setting `useNativeDriver: true` in animation config when starting it. Animations without a `useNativeDriver` property will default to false for legacy reasons, but emit a warning (and typechecking error in TypeScript).

```codeBlockLines_AclH
Animated.timing(this.state.animatedValue, {
toValue: 1,
duration: 500,
useNativeDriver: true, // <-- Set this to true
}).start();

Animated values are only compatible with one driver so if you use native driver when starting an animation on a value, make sure every animation on that value also uses the native driver.

The native driver also works with `Animated.event`. This is especially useful for animations that follow the scroll position as without the native driver, the animation will always run a frame behind the gesture due to the async nature of React Native.

```codeBlockLines_AclH
<Animated.ScrollView // <-- Use the Animated ScrollView wrapper
onScroll={Animated.event(
[\
{\
nativeEvent: {\
contentOffset: {y: this.state.animatedValue},\
},\
},\
],
{useNativeDriver: true}, // <-- Set this to true

You can see the native driver in action by running the [RNTester app](https://github.com/facebook/react-native/blob/main/packages/rn-tester/), then loading the Native Animated Example. You can also take a look at the [source code](https://github.com/facebook/react-native/blob/master/packages/rn-tester/js/examples/NativeAnimation/NativeAnimationsExample.js) to learn how these examples were produced.

#### Caveats [​](https://reactnative.dev/docs/next/animations\#caveats "Direct link to Caveats")

Not everything you can do with `Animated` is currently supported by the native driver. The main limitation is that you can only animate non-layout properties: things like `transform` and `opacity` will work, but Flexbox and position properties will not. When using `Animated.event`, it will only work with direct events and not bubbling events. This means it does not work with `PanResponder` but does work with things like `ScrollView#onScroll`.

When an animation is running, it can prevent `VirtualizedList` components from rendering more rows. If you need to run a long or looping animation while the user is scrolling through a list, you can use `isInteraction: false` in your animation's config to prevent this issue.

### Bear in mind [​](https://reactnative.dev/docs/next/animations\#bear-in-mind "Direct link to Bear in mind")

While using transform styles such as `rotateY`, `rotateX`, and others ensure the transform style `perspective` is in place. At this time some animations may not render on Android without it. Example below.

```codeBlockLines_AclH
<Animated.View
style={{
transform: [\
{scale: this.state.scale},\
{rotateY: this.state.rotateY},\
{perspective: 1000}, // without this line this Animation will not render on Android while working fine on iOS\
],
}}

### Additional examples [​](https://reactnative.dev/docs/next/animations\#additional-examples "Direct link to Additional examples")

The RNTester app has various examples of `Animated` in use:

- [AnimatedGratuitousApp](https://github.com/facebook/react-native/tree/main/packages/rn-tester/js/examples/AnimatedGratuitousApp)
- [NativeAnimationsExample](https://github.com/facebook/react-native/blob/main/packages/rn-tester/js/examples/NativeAnimation/NativeAnimationsExample.js)

## `LayoutAnimation` API [​](https://reactnative.dev/docs/next/animations\#layoutanimation-api "Direct link to layoutanimation-api")

`LayoutAnimation` allows you to globally configure `create` and `update` animations that will be used for all views in the next render/layout cycle. This is useful for doing Flexbox layout updates without bothering to measure or calculate specific properties in order to animate them directly, and is especially useful when layout changes may affect ancestors, for example a "see more" expansion that also increases the size of the parent and pushes down the row below which would otherwise require explicit coordination between the components in order to animate them all in sync.

Note that although `LayoutAnimation` is very powerful and can be quite useful, it provides much less control than `Animated` and other animation libraries, so you may need to use another approach if you can't get `LayoutAnimation` to do what you want.

Note that in order to get this to work on **Android** you need to set the following flags via `UIManager`:

```codeBlockLines_AclH
UIManager.setLayoutAnimationEnabledExperimental(true);

LayoutAnimations - Snack

# LayoutAnimations

import React, {useState} from 'react';
import {
NativeModules,
LayoutAnimation,
Text,
TouchableOpacity,
StyleSheet,
View,
} from 'react-native';

const {UIManager} = NativeModules;

UIManager.setLayoutAnimationEnabledExperimental &&
UIManager.setLayoutAnimationEnabledExperimental(true);

export default function App() {
const \[state, setState\] = useState({
w: 100,
h: 100,
});

// Animate the update
LayoutAnimation.spring();
setState({w: state.w + 15, h: state.h + 15});
};

}

const styles = StyleSheet.create({
container: {
flex: 1,
alignItems: 'center',
justifyContent: 'center',
},
box: {
width: 200,
height: 200,
backgroundColor: 'red',
},
button: {
backgroundColor: 'black',
paddingHorizontal: 20,
paddingVertical: 15,
marginTop: 15,
},
buttonText: {
color: '#fff',
fontWeight: 'bold',
},
});

import React, {useState} from 'react';
import {
NativeModules,
LayoutAnimation,
Text,
TouchableOpacity,
StyleSheet,
View,
} from 'react-native';

UIManager.setLayoutAnimationEnabledExperimental &&
UIManager.setLayoutAnimationEnabledExperimental(true);

export default function App() {
const [state, setState] = useState({
w: 100,
h: 100,
});

// Animate the update
LayoutAnimation.spring();
setState({w: state.w + 15, h: state.h + 15});
};

const styles = StyleSheet.create({
container: {
flex: 1,
alignItems: 'center',
justifyContent: 'center',
},
box: {
width: 200,
height: 200,
backgroundColor: 'red',
},
button: {
backgroundColor: 'black',
paddingHorizontal: 20,
paddingVertical: 15,
marginTop: 15,
},
buttonText: {
color: '#fff',
fontWeight: 'bold',
},
});

Press me!

This example uses a preset value, you can customize the animations as you need, see [LayoutAnimation.js](https://github.com/facebook/react-native/blob/main/packages/react-native/Libraries/LayoutAnimation/LayoutAnimation.js) for more information.

## Additional notes [​](https://reactnative.dev/docs/next/animations\#additional-notes "Direct link to Additional notes")

### `requestAnimationFrame` [​](https://reactnative.dev/docs/next/animations\#requestanimationframe "Direct link to requestanimationframe")

`requestAnimationFrame` is a polyfill from the browser that you might be familiar with. It accepts a function as its only argument and calls that function before the next repaint. It is an essential building block for animations that underlies all of the JavaScript-based animation APIs. In general, you shouldn't need to call this yourself - the animation APIs will manage frame updates for you.

### `setNativeProps` [​](https://reactnative.dev/docs/next/animations\#setnativeprops "Direct link to setnativeprops")

As mentioned [in the Direct Manipulation section](https://reactnative.dev/docs/next/legacy/direct-manipulation), `setNativeProps` allows us to modify properties of native-backed components (components that are actually backed by native views, unlike composite components) directly, without having to `setState` and re-render the component hierarchy.

We could use this in the Rebound example to update the scale - this might be helpful if the component that we are updating is deeply nested and hasn't been optimized with `shouldComponentUpdate`.

If you find your animations with dropping frames (performing below 60 frames per second), look into using `setNativeProps` or `shouldComponentUpdate` to optimize them. Or you could run the animations on the UI thread rather than the JavaScript thread [with the useNativeDriver option](https://reactnative.dev/blog/2017/02/14/using-native-driver-for-animated). You may also want to defer any computationally intensive work until after animations are complete, using the [InteractionManager](https://reactnative.dev/docs/next/interactionmanager). You can monitor the frame rate by using the In-App Dev Menu "FPS Monitor" tool.

Is this page useful?

- [`Animated` API](https://reactnative.dev/docs/next/animations#animated-api)
- [Configuring animations](https://reactnative.dev/docs/next/animations#configuring-animations)
- [Composing animations](https://reactnative.dev/docs/next/animations#composing-animations)
- [Combining animated values](https://reactnative.dev/docs/next/animations#combining-animated-values)
- [Interpolation](https://reactnative.dev/docs/next/animations#interpolation)
- [Tracking dynamic values](https://reactnative.dev/docs/next/animations#tracking-dynamic-values)
- [Tracking gestures](https://reactnative.dev/docs/next/animations#tracking-gestures)
- [Responding to the current animation value](https://reactnative.dev/docs/next/animations#responding-to-the-current-animation-value)
- [Using the native driver](https://reactnative.dev/docs/next/animations#using-the-native-driver)
- [Bear in mind](https://reactnative.dev/docs/next/animations#bear-in-mind)
- [Additional examples](https://reactnative.dev/docs/next/animations#additional-examples)
- [`LayoutAnimation` API](https://reactnative.dev/docs/next/animations#layoutanimation-api)
- [Additional notes](https://reactnative.dev/docs/next/animations#additional-notes)
- [`requestAnimationFrame`](https://reactnative.dev/docs/next/animations#requestanimationframe)
- [`setNativeProps`](https://reactnative.dev/docs/next/animations#setnativeprops)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/global-AbortSignal

[Skip to main content](https://reactnative.dev/docs/next/global-AbortSignal#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

warning

🚧 This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/AbortSignal) for more information.

The global `AbortSignal` class, as defined in Web specifications.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/global-AbortController

[Skip to main content](https://reactnative.dev/docs/next/global-AbortController#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

warning

🚧 This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/AbortController) for more information.

The global `AbortController` class, as defined in Web specifications.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/global-URL

[Skip to main content](https://reactnative.dev/docs/next/global-URL#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

warning

🚧 This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/URL) for more information.

The global `URL` class, as defined in Web specifications.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/global-Response

[Skip to main content](https://reactnative.dev/docs/next/global-Response#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

warning

🚧 This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/Response) for more information.

The global `Response` class, as defined in Web specifications.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/global-requestIdleCallback

[Skip to main content](https://reactnative.dev/docs/next/global-requestIdleCallback#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

warning

🚧 This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/Window/requestIdleCallback) for more information.

The global `requestIdleCallback` function, as defined in Web specifications.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/getting-started-without-a-framework

[Skip to main content](https://reactnative.dev/docs/next/getting-started-without-a-framework#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started-without-a-framework)** (0.81).

Version: Next

**Platform support**

Android

iOS

macOS

TV

watchOS

Web

Windows

visionOS

If you have constraints that are not served well by a [Framework](https://reactnative.dev/architecture/glossary#react-native-framework), or you prefer to write your own Framework, you can create a React Native app without using a Framework.

To do so, you'll first need to [set up your environment](https://reactnative.dev/docs/next/set-up-your-environment). Once you're set up, continue with the steps below to create an application and start developing.

### Step 1: Creating a new application [​](https://reactnative.dev/docs/next/getting-started-without-a-framework\#step-1-creating-a-new-application "Direct link to Step 1: Creating a new application")

warning

If you previously installed a global `react-native-cli` package, please remove it as it may cause unexpected issues:

shell

```codeBlockLines_AclH
npm uninstall -g react-native-cli @react-native-community/cli

You can use [React Native Community CLI](https://github.com/react-native-community/cli) to generate a new project. Let's create a new React Native project called "AwesomeProject":

```codeBlockLines_AclH
npx @react-native-community/cli@latest init AwesomeProject

This is not necessary if you are integrating React Native into an existing application, or if you've installed [Expo](https://docs.expo.dev/bare/installing-expo-modules/) in your project, or if you're adding Android support to an existing React Native project (see [Integration with Existing Apps](https://reactnative.dev/docs/next/integration-with-existing-apps)). You can also use a third-party CLI to set up your React Native app, such as [Ignite CLI](https://github.com/infinitered/ignite).

info

If you are having trouble with iOS, try to reinstall the dependencies by running:

1. `cd ios` to navigate to the `ios` folder.
2. `bundle install` to install [Bundler](https://bundler.io/)
3. `bundle exec pod install` to install the iOS dependencies managed by CocoaPods.

#### \[Optional\] Using a specific version or template [​](https://reactnative.dev/docs/next/getting-started-without-a-framework\#optional-using-a-specific-version-or-template "Direct link to [Optional] Using a specific version or template")

If you want to start a new project with a specific React Native version, you can use the `--version` argument:

```codeBlockLines_AclH
npx @react-native-community/cli@X.XX.X init AwesomeProject --version X.XX.X

You can also start a project with a custom React Native template with the `--template` argument, read more [here](https://github.com/react-native-community/cli/blob/main/docs/init.md#initializing-project-with-custom-template).

### Step 2: Start Metro [​](https://reactnative.dev/docs/next/getting-started-without-a-framework\#step-2-start-metro "Direct link to Step 2: Start Metro")

[**Metro**](https://metrobundler.dev/) is the JavaScript build tool for React Native. To start the Metro development server, run the following from your project folder:

- npm
- Yarn

```codeBlockLines_AclH
npm start

```codeBlockLines_AclH
yarn start

note

If you're familiar with web development, Metro is similar to bundlers such as Vite and webpack, but is designed end-to-end for React Native. For instance, Metro uses [Babel](https://babel.dev/) to transform syntax such as JSX into executable JavaScript.

### Step 3: Start your application [​](https://reactnative.dev/docs/next/getting-started-without-a-framework\#step-3-start-your-application "Direct link to Step 3: Start your application")

Let Metro Bundler run in its own terminal. Open a new terminal inside your React Native project folder. Run the following:

```codeBlockLines_AclH
npm run android

```codeBlockLines_AclH
yarn android

If everything is set up correctly, you should see your new app running in your Android emulator shortly.

This is one way to run your app - you can also run it directly from within Android Studio.

tip

If you can't get this to work, see the [Troubleshooting](https://reactnative.dev/docs/next/troubleshooting) page.

### Step 4: Modifying your app [​](https://reactnative.dev/docs/next/getting-started-without-a-framework\#step-4-modifying-your-app "Direct link to Step 4: Modifying your app")

Now that you have successfully run the app, let's modify it.

- Open `App.tsx` in your text editor of choice and edit some lines.
- Press the `R` key twice or select `Reload` from the Dev Menu ( `Ctrl` \+ `M`) to see your changes!

### That's it! [​](https://reactnative.dev/docs/next/getting-started-without-a-framework\#thats-it "Direct link to That's it!")

Congratulations! You've successfully run and modified your first barebone React Native app.

### Now what? [​](https://reactnative.dev/docs/next/getting-started-without-a-framework\#now-what "Direct link to Now what?")

- If you want to add this new React Native code to an existing application, check out the [Integration guide](https://reactnative.dev/docs/next/integration-with-existing-apps).
- If you're curious to learn more about React Native, check out the [Introduction to React Native](https://reactnative.dev/docs/next/getting-started).

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/global-FileReader

[Skip to main content](https://reactnative.dev/docs/next/global-FileReader#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

warning

🚧 This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/FileReader) for more information.

The global `FileReader` class, as defined in Web specifications.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/global-process

[Skip to main content](https://reactnative.dev/docs/next/global-process#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

warning

🚧 This page is work in progress.

The global `process` object, as defined in Node.js.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/global-requestAnimationFrame

[Skip to main content](https://reactnative.dev/docs/next/global-requestAnimationFrame#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

warning

🚧 This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/Window/requestAnimationFrame) for more information.

The global `requestAnimationFrame` function, as defined in Web specifications.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/global-URLSearchParams

[Skip to main content](https://reactnative.dev/docs/next/global-URLSearchParams#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

warning

🚧 This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams) for more information.\

The global `URLSearchParams` class, as defined in Web specifications.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/global-setInterval

[Skip to main content](https://reactnative.dev/docs/next/global-setInterval#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

warning

🚧 This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/Window/setInterval) for more information.

The global `setInterval` function, as defined in Web specifications.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/global-queueMicrotask

[Skip to main content](https://reactnative.dev/docs/next/global-queueMicrotask#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

warning

🚧 This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/Window/queueMicrotask) for more information.

The global `queueMicrotask` function, as defined in Web specifications.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/global-__DEV__

[Skip to main content](https://reactnative.dev/docs/next/global-__DEV__#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

You can use the `__DEV__` pseudo-global variable in the codebase to guard development-only blocks of code.

It is inlined during compilation and gets completely stripped out with the `if` blocks it guards in the minified build.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/global-setTimeout

[Skip to main content](https://reactnative.dev/docs/next/global-setTimeout#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

warning

🚧 This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/Window/setTimeout) for more information.

The global `setTimeout` function, as defined in Web specifications.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/global-WebSocket

[Skip to main content](https://reactnative.dev/docs/next/global-WebSocket#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

warning

🚧 This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket) for more information.

The global `WebSocket` class, as defined in Web specifications.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/drawerlayoutandroid

[Skip to main content](https://reactnative.dev/docs/next/drawerlayoutandroid#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/drawerlayoutandroid)** (0.81).

Version: Next

On this page

React component that wraps the platform `DrawerLayout` (Android only). The Drawer (typically used for navigation) is rendered with `renderNavigationView` and direct children are the main view (where your content goes). The navigation view is initially not visible on the screen, but can be pulled in from the side of the window specified by the `drawerPosition` prop and its width can be set by the `drawerWidth` prop.

## Example [​](https://reactnative.dev/docs/next/drawerlayoutandroid\#example "Direct link to Example")

- TypeScript
- JavaScript

* * *

# Reference

## Props [​](https://reactnative.dev/docs/next/drawerlayoutandroid\#props "Direct link to Props")

### [View Props](https://reactnative.dev/docs/next/view\#props) [​](https://reactnative.dev/docs/next/drawerlayoutandroid\#view-props "Direct link to view-props")

Inherits [View Props](https://reactnative.dev/docs/next/view#props).

### `drawerBackgroundColor` [​](https://reactnative.dev/docs/next/drawerlayoutandroid\#drawerbackgroundcolor "Direct link to drawerbackgroundcolor")

Specifies the background color of the drawer. The default value is `white`. If you want to set the opacity of the drawer, use rgba. Example:

tsx

```codeBlockLines_AclH
return (

| Type | Required |
| --- | --- |
| [color](https://reactnative.dev/docs/next/colors) | No |

### `drawerLockMode` [​](https://reactnative.dev/docs/next/drawerlayoutandroid\#drawerlockmode "Direct link to drawerlockmode")

Specifies the lock mode of the drawer. The drawer can be locked in 3 states:

- unlocked (default), meaning that the drawer will respond (open/close) to touch gestures.
- locked-closed, meaning that the drawer will stay closed and not respond to gestures.
- locked-open, meaning that the drawer will stay opened and not respond to gestures. The drawer may still be opened and closed programmatically ( `openDrawer`/ `closeDrawer`).

| Type | Required |
| --- | --- |
| enum('unlocked', 'locked-closed', 'locked-open') | No |

### `drawerPosition` [​](https://reactnative.dev/docs/next/drawerlayoutandroid\#drawerposition "Direct link to drawerposition")

Specifies the side of the screen from which the drawer will slide in. By default it is set to `left`.

| Type | Required |
| --- | --- |
| enum('left', 'right') | No |

### `drawerWidth` [​](https://reactnative.dev/docs/next/drawerlayoutandroid\#drawerwidth "Direct link to drawerwidth")

Specifies the width of the drawer, more precisely the width of the view that be pulled in from the edge of the window.

| Type | Required |
| --- | --- |
| number | No |

### `keyboardDismissMode` [​](https://reactnative.dev/docs/next/drawerlayoutandroid\#keyboarddismissmode "Direct link to keyboarddismissmode")

Determines whether the keyboard gets dismissed in response to a drag.

- 'none' (the default), drags do not dismiss the keyboard.
- 'on-drag', the keyboard is dismissed when a drag begins.

| Type | Required |
| --- | --- |
| enum('none', 'on-drag') | No |

### `onDrawerClose` [​](https://reactnative.dev/docs/next/drawerlayoutandroid\#ondrawerclose "Direct link to ondrawerclose")

Function called whenever the navigation view has been closed.

| Type | Required |
| --- | --- |
| function | No |

### `onDrawerOpen` [​](https://reactnative.dev/docs/next/drawerlayoutandroid\#ondraweropen "Direct link to ondraweropen")

Function called whenever the navigation view has been opened.

### `onDrawerSlide` [​](https://reactnative.dev/docs/next/drawerlayoutandroid\#ondrawerslide "Direct link to ondrawerslide")

Function called whenever there is an interaction with the navigation view.

### `onDrawerStateChanged` [​](https://reactnative.dev/docs/next/drawerlayoutandroid\#ondrawerstatechanged "Direct link to ondrawerstatechanged")

Function called when the drawer state has changed. The drawer can be in 3 states:

- idle, meaning there is no interaction with the navigation view happening at the time
- dragging, meaning there is currently an interaction with the navigation view
- settling, meaning that there was an interaction with the navigation view, and the navigation view is now finishing its closing or opening animation

### `renderNavigationView` [​](https://reactnative.dev/docs/next/drawerlayoutandroid\#rendernavigationview "Direct link to rendernavigationview")

The navigation view that will be rendered to the side of the screen and can be pulled in.

| Type | Required |
| --- | --- |
| function | Yes |

### `statusBarBackgroundColor` [​](https://reactnative.dev/docs/next/drawerlayoutandroid\#statusbarbackgroundcolor "Direct link to statusbarbackgroundcolor")

Make the drawer take the entire screen and draw the background of the status bar to allow it to open over the status bar. It will only have an effect on API 21+.

## Methods [​](https://reactnative.dev/docs/next/drawerlayoutandroid\#methods "Direct link to Methods")

### `closeDrawer()` [​](https://reactnative.dev/docs/next/drawerlayoutandroid\#closedrawer "Direct link to closedrawer")

```codeBlockLines_AclH
closeDrawer();

Closes the drawer.

### `openDrawer()` [​](https://reactnative.dev/docs/next/drawerlayoutandroid\#opendrawer "Direct link to opendrawer")

```codeBlockLines_AclH
openDrawer();

Opens the drawer.

Is this page useful?

- [Example](https://reactnative.dev/docs/next/drawerlayoutandroid#example)
- [Props](https://reactnative.dev/docs/next/drawerlayoutandroid#props)
- [View Props](https://reactnative.dev/docs/next/drawerlayoutandroid#view-props)
- [`drawerBackgroundColor`](https://reactnative.dev/docs/next/drawerlayoutandroid#drawerbackgroundcolor)
- [`drawerLockMode`](https://reactnative.dev/docs/next/drawerlayoutandroid#drawerlockmode)
- [`drawerPosition`](https://reactnative.dev/docs/next/drawerlayoutandroid#drawerposition)
- [`drawerWidth`](https://reactnative.dev/docs/next/drawerlayoutandroid#drawerwidth)
- [`keyboardDismissMode`](https://reactnative.dev/docs/next/drawerlayoutandroid#keyboarddismissmode)
- [`onDrawerClose`](https://reactnative.dev/docs/next/drawerlayoutandroid#ondrawerclose)
- [`onDrawerOpen`](https://reactnative.dev/docs/next/drawerlayoutandroid#ondraweropen)
- [`onDrawerSlide`](https://reactnative.dev/docs/next/drawerlayoutandroid#ondrawerslide)
- [`onDrawerStateChanged`](https://reactnative.dev/docs/next/drawerlayoutandroid#ondrawerstatechanged)
- [`renderNavigationView`](https://reactnative.dev/docs/next/drawerlayoutandroid#rendernavigationview)
- [`statusBarBackgroundColor`](https://reactnative.dev/docs/next/drawerlayoutandroid#statusbarbackgroundcolor)
- [Methods](https://reactnative.dev/docs/next/drawerlayoutandroid#methods)
- [`closeDrawer()`](https://reactnative.dev/docs/next/drawerlayoutandroid#closedrawer)
- [`openDrawer()`](https://reactnative.dev/docs/next/drawerlayoutandroid#opendrawer)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/headless-js-android

[Skip to main content](https://reactnative.dev/docs/next/headless-js-android#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/headless-js-android)** (0.81).

Version: Next

On this page

Headless JS is a way to run tasks in JavaScript while your app is in the background. It can be used, for example, to sync fresh data, handle push notifications, or play music.

## The JS API [​](https://reactnative.dev/docs/next/headless-js-android\#the-js-api "Direct link to The JS API")

A task is an async function that you register on `AppRegistry`, similar to registering React applications:

tsx

```codeBlockLines_AclH
import {AppRegistry} from 'react-native';

);

Then, in `SomeTaskName.js`:

```codeBlockLines_AclH

// do stuff
};

You can do anything in your task such as network requests, timers and so on, as long as it doesn't touch UI. Once your task completes (i.e. the promise is resolved), React Native will go into "paused" mode (unless there are other tasks running, or there is a foreground app).

## The Platform API [​](https://reactnative.dev/docs/next/headless-js-android\#the-platform-api "Direct link to The Platform API")

Yes, this does still require some native code, but it's pretty thin. You need to extend `HeadlessJsTaskService` and override `getTaskConfig`, e.g.:

- Java
- Kotlin

java

```codeBlockLines_AclH
package com.your_application_name;

import android.content.Intent;
import android.os.Bundle;
import com.facebook.react.HeadlessJsTaskService;
import com.facebook.react.bridge.Arguments;
import com.facebook.react.jstasks.HeadlessJsTaskConfig;
import javax.annotation.Nullable;

public class MyTaskService extends HeadlessJsTaskService {

@Override
protected @Nullable HeadlessJsTaskConfig getTaskConfig(Intent intent) {
Bundle extras = intent.getExtras();
if (extras != null) {
return new HeadlessJsTaskConfig(
"SomeTaskName",
Arguments.fromBundle(extras),
5000, // timeout in milliseconds for the task
false // optional: defines whether or not the task is allowed in foreground. Default is false
);
}
return null;
}
}

kotlin

import android.content.Intent
import com.facebook.react.HeadlessJsTaskService
import com.facebook.react.bridge.Arguments
import com.facebook.react.jstasks.HeadlessJsTaskConfig

class MyTaskService : HeadlessJsTaskService() {
override fun getTaskConfig(intent: Intent?): HeadlessJsTaskConfig? {
return intent.extras?.let {
HeadlessJsTaskConfig(
"SomeTaskName",
Arguments.fromBundle(it),
5000, // timeout for the task
false // optional: defines whether or not the task is allowed in foreground.
// Default is false
)
}
}
}

Then add the service to your `AndroidManifest.xml` file inside the `application` tag:

xml

Now, whenever you [start your service](https://developer.android.com/reference/android/content/Context.html#startService(android.content.Intent)), e.g. as a periodic task or in response to some system event / broadcast, JS will spin up, run your task, then spin down.

Example:

```codeBlockLines_AclH
Intent service = new Intent(getApplicationContext(), MyTaskService.class);
Bundle bundle = new Bundle();

bundle.putString("foo", "bar");
service.putExtras(bundle);

getApplicationContext().startForegroundService(service);

```codeBlockLines_AclH
val service = Intent(applicationContext, MyTaskService::class.java)
val bundle = Bundle()

bundle.putString("foo", "bar")

service.putExtras(bundle)

applicationContext.startForegroundService(service)

## Retries [​](https://reactnative.dev/docs/next/headless-js-android\#retries "Direct link to Retries")

By default, the headless JS task will not perform any retries. In order to do so, you need to create a `HeadlessJsRetryPolicy` and throw a specific `Error`.

`LinearCountingRetryPolicy` is an implementation of `HeadlessJsRetryPolicy` that allows you to specify a maximum number of retries with a fixed delay between each attempt. If that does not suit your needs then you can implement your own `HeadlessJsRetryPolicy`. These policies can be passed as an extra argument to the `HeadlessJsTaskConfig` constructor, e.g.

```codeBlockLines_AclH
HeadlessJsRetryPolicy retryPolicy = new LinearCountingRetryPolicy(
3, // Max number of retry attempts
1000 // Delay between each retry attempt
);

return new HeadlessJsTaskConfig(
'SomeTaskName',
Arguments.fromBundle(extras),
5000,
false,
retryPolicy
);

```codeBlockLines_AclH
val retryPolicy: HeadlessJsTaskRetryPolicy =
LinearCountingRetryPolicy(
3, // Max number of retry attempts
1000 // Delay between each retry attempt
)

return HeadlessJsTaskConfig("SomeTaskName", Arguments.fromBundle(extras), 5000, false, retryPolicy)

A retry attempt will only be made when a specific `Error` is thrown. Inside a headless JS task, you can import the error and throw it when a retry attempt is required.

```codeBlockLines_AclH
import {HeadlessJsTaskError} from 'HeadlessJsTask';

const condition = ...;
if (!condition) {
throw new HeadlessJsTaskError();
}
};

If you wish all errors to cause a retry attempt, you will need to catch them and throw the above error.

## Caveats [​](https://reactnative.dev/docs/next/headless-js-android\#caveats "Direct link to Caveats")

- By default, your app will crash if you try to run a task while the app is in the foreground. This is to prevent developers from shooting themselves in the foot by doing a lot of work in a task and slowing the UI. You can pass a fourth `boolean` argument to control this behaviour.
- If you start your service from a `BroadcastReceiver`, make sure to call `HeadlessJsTaskService.acquireWakeLockNow()` before returning from `onReceive()`.

## Example Usage [​](https://reactnative.dev/docs/next/headless-js-android\#example-usage "Direct link to Example Usage")

Service can be started from Java API. First you need to decide when the service should be started and implement your solution accordingly. Here is an example that reacts to network connection change.

Following lines shows part of Android manifest file for registering broadcast receiver.

Broadcast receiver then handles intent that was broadcasted in onReceive function. This is a great place to check whether your app is on foreground or not. If app is not on foreground we can prepare our intent to be started, with no information or additional information bundled using `putExtra` (keep in mind bundle can handle only parcelable values). In the end service is started and wakelock is acquired.

```codeBlockLines_AclH
import android.app.ActivityManager;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.net.ConnectivityManager;
import android.net.Network;
import android.net.NetworkCapabilities;
import android.net.NetworkInfo;
import android.os.Build;

import com.facebook.react.HeadlessJsTaskService;

public class NetworkChangeReceiver extends BroadcastReceiver {

@Override
public void onReceive(final Context context, final Intent intent) {
/**
This part will be called every time network connection is changed

**/
if (!isAppOnForeground((context))) {
/**
We will start our service and send extra info about
network connections
**/
boolean hasInternet = isNetworkAvailable(context);
Intent serviceIntent = new Intent(context, MyTaskService.class);
serviceIntent.putExtra("hasInternet", hasInternet);
context.startForegroundService(serviceIntent);
HeadlessJsTaskService.acquireWakeLockNow(context);
}
}

private boolean isAppOnForeground(Context context) {
/**
We need to check if app is in foreground otherwise the app will crash.
https://stackoverflow.com/questions/8489993/check-android-application-is-in-foreground-or-not
**/
ActivityManager activityManager = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);

activityManager.getRunningAppProcesses();
if (appProcesses == null) {
return false;
}
final String packageName = context.getPackageName();
for (ActivityManager.RunningAppProcessInfo appProcess : appProcesses) {
if (appProcess.importance ==
ActivityManager.RunningAppProcessInfo.IMPORTANCE_FOREGROUND &&
appProcess.processName.equals(packageName)) {
return true;
}
}
return false;
}

public static boolean isNetworkAvailable(Context context) {
ConnectivityManager cm = (ConnectivityManager)
context.getSystemService(Context.CONNECTIVITY_SERVICE);

Network networkCapabilities = cm.getActiveNetwork();

if(networkCapabilities == null) {
return false;
}

NetworkCapabilities actNw = cm.getNetworkCapabilities(networkCapabilities);

if(actNw == null) {
return false;
}

if(actNw.hasTransport(NetworkCapabilities.TRANSPORT_WIFI) || actNw.hasTransport(NetworkCapabilities.TRANSPORT_CELLULAR) || actNw.hasTransport(NetworkCapabilities.TRANSPORT_ETHERNET)) {
return true;
}

return false;
}

// deprecated in API level 29
NetworkInfo netInfo = cm.getActiveNetworkInfo();
return (netInfo != null && netInfo.isConnected());
}
}

```codeBlockLines_AclH
import android.app.ActivityManager
import android.app.ActivityManager.RunningAppProcessInfo
import android.content.BroadcastReceiver
import android.content.Context
import android.content.Intent
import android.net.ConnectivityManager
import android.net.NetworkCapabilities
import android.os.Build
import com.facebook.react.HeadlessJsTaskService

class NetworkChangeReceiver : BroadcastReceiver() {
override fun onReceive(context: Context, intent: Intent?) {
/**

* Connected
*/
if (!isAppOnForeground(context)) {
/** We will start our service and send extra info about network connections */
val hasInternet = isNetworkAvailable(context)
val serviceIntent = Intent(context, MyTaskService::class.java)
serviceIntent.putExtra("hasInternet", hasInternet)
context.startForegroundService(serviceIntent)
HeadlessJsTaskService.acquireWakeLockNow(context)
}
}

private fun isAppOnForeground(context: Context): Boolean {
/**
* We need to check if app is in foreground otherwise the app will crash.
* https://stackoverflow.com/questions/8489993/check-android-application-is-in-foreground-or-not
*/
val activityManager = context.getSystemService(Context.ACTIVITY_SERVICE) as ActivityManager
val appProcesses = activityManager.runningAppProcesses ?: return false
val packageName: String = context.getPackageName()
for (appProcess in appProcesses) {
if (appProcess.importance == RunningAppProcessInfo.IMPORTANCE_FOREGROUND &&
appProcess.processName == packageName
) {
return true
}
}
return false
}

companion object {
fun isNetworkAvailable(context: Context): Boolean {
val cm = context.getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager
var result = false

val networkCapabilities = cm.activeNetwork ?: return false

val actNw = cm.getNetworkCapabilities(networkCapabilities) ?: return false

result =
when {

}

return result
} else {
cm.run {
// deprecated in API level 29
cm.activeNetworkInfo?.run {
result =
when (type) {

}
}
}
}
return result
}
}
}

Is this page useful?

- [The JS API](https://reactnative.dev/docs/next/headless-js-android#the-js-api)
- [The Platform API](https://reactnative.dev/docs/next/headless-js-android#the-platform-api)
- [Retries](https://reactnative.dev/docs/next/headless-js-android#retries)
- [Caveats](https://reactnative.dev/docs/next/headless-js-android#caveats)
- [Example Usage](https://reactnative.dev/docs/next/headless-js-android#example-usage)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/global-FormData

[Skip to main content](https://reactnative.dev/docs/next/global-FormData#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

warning

🚧 This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/FormData) for more information.

The global `FormData` class, as defined in Web specifications.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/global-Headers

[Skip to main content](https://reactnative.dev/docs/next/global-Headers#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

warning

🚧 This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/Headers) for more information.

The global `Headers` class, as defined in Web specifications.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/global-fetch

[Skip to main content](https://reactnative.dev/docs/next/global-fetch#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

warning

🚧 This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/Window/fetch) for more information.

The global `fetch` function, as defined in Web specifications.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/element-nodes

[Skip to main content](https://reactnative.dev/docs/next/element-nodes#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

On this page

Element nodes represent native components in the native view tree (similar to [Element](https://developer.mozilla.org/en-US/docs/Web/API/Element) nodes on Web).

They are provided by all native components, and by many built-in components, via refs:

Element instances example - Snack

# Element instances example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import \* as React from 'react';
import { View, SafeAreaView, StyleSheet, Text } from 'react-native';

const ref = React.useRef(null);
const \[viewInfo, setViewInfo\] = React.useState('');

// \`element\` is an object implementing the interface described here.
const element = ref.current;
const rect = JSON.stringify(element.getBoundingClientRect());
setViewInfo(
\`Bounding rect is: ${rect}.\\nText content is: ${element.textContent}\`,
);
}, \[\]);

return (

};

const styles = StyleSheet.create({
container: {
flex: 1,
},
content: {
padding: 10,
backgroundColor: 'gray',
},
});

export default ViewWithRefs;

import * as React from 'react';
import { View, SafeAreaView, StyleSheet, Text } from 'react-native';

const ref = React.useRef(null);
const [viewInfo, setViewInfo] = React.useState('');

// `element` is an object implementing the interface described here.
const element = ref.current;
const rect = JSON.stringify(element.getBoundingClientRect());
setViewInfo(
`Bounding rect is: ${rect}.\nText content is: ${element.textContent}`,
);
}, []);

const styles = StyleSheet.create({
container: {
flex: 1,
},
content: {
padding: 10,
backgroundColor: 'gray',
},
});

Snack

Hello world!

Bounding rect is: {"x":0,"y":0,"width":285,"height":36,"top":0,"right":285,"bottom":36,"left":0}.
Text content is: Hello world!

Updating…

PreviewMy DeviceAndroidiOSWeb

info

Note that some built-in components are only a container for other components (including native components). For example, `ScrollView` internally renders a native scroll view and a native view, which are accessible through the ref it provides using methods like `getNativeScrollRef()` and `getInnerViewRef()`.

* * *

## Reference [​](https://reactnative.dev/docs/next/element-nodes\#reference "Direct link to Reference")

### Web-compatible API [​](https://reactnative.dev/docs/next/element-nodes\#web-compatible-api "Direct link to Web-compatible API")

From [`HTMLElement`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement):

- Properties
- [`offsetHeight`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetHeight)
- [`offsetLeft`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetLeft)
- [`offsetParent`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetParent)
- [`offsetTop`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetTop)
- [`offsetWidth`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetWidth)
- Methods
- [`blur()`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/blur).
- [`focus()`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/focus).

- ⚠️ The `options` parameter is not supported.

From [`Element`](https://developer.mozilla.org/en-US/docs/Web/API/Element):

- Properties
- [`childElementCount`](https://developer.mozilla.org/en-US/docs/Web/API/Element/childElementCount)
- [`children`](https://developer.mozilla.org/en-US/docs/Web/API/Element/children)
- [`clientHeight`](https://developer.mozilla.org/en-US/docs/Web/API/Element/clientHeight)
- [`clientLeft`](https://developer.mozilla.org/en-US/docs/Web/API/Element/clientLeft)
- [`clientTop`](https://developer.mozilla.org/en-US/docs/Web/API/Element/clientTop)
- [`clientWidth`](https://developer.mozilla.org/en-US/docs/Web/API/Element/clientWidth)
- [`firstElementChild`](https://developer.mozilla.org/en-US/docs/Web/API/Element/firstElementChild)
- [`id`](https://developer.mozilla.org/en-US/docs/Web/API/Element/id)
- ℹ️ Returns the value of the `id` or `nativeID` props.
- [`lastElementChild`](https://developer.mozilla.org/en-US/docs/Web/API/Element/lastElementChild)
- [`nextElementSibling`](https://developer.mozilla.org/en-US/docs/Web/API/Element/nextElementSibling)
- [`nodeName`](https://developer.mozilla.org/en-US/docs/Web/API/Element/nodeName)
- [`nodeType`](https://developer.mozilla.org/en-US/docs/Web/API/Element/nodeType)
- [`nodeValue`](https://developer.mozilla.org/en-US/docs/Web/API/Element/nodeValue)
- [`previousElementSibling`](https://developer.mozilla.org/en-US/docs/Web/API/Element/previousElementSibling)
- [`scrollHeight`](https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollHeight)
- [`scrollLeft`](https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollLeft)
- ⚠️ For built-in components, only `ScrollView` instances can return a value other than zero.
- [`scrollTop`](https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollTop)
- ⚠️ For built-in components, only `ScrollView` instances can return a value other than zero.
- [`scrollWidth`](https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollWidth)
- [`tagName`](https://developer.mozilla.org/en-US/docs/Web/API/Element/tagName)
- ℹ️ Returns a normalized native component name prefixed with `RN:`, like `RN:View`.
- [`textContent`](https://developer.mozilla.org/en-US/docs/Web/API/Element/textContent)
- Methods
- [`getBoundingClientRect()`](https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect)
- [`hasPointerCapture()`](https://developer.mozilla.org/en-US/docs/Web/API/Element/hasPointerCapture)
- [`setPointerCapture()`](https://developer.mozilla.org/en-US/docs/Web/API/Element/setPointerCapture)
- [`releasePointerCapture()`](https://developer.mozilla.org/en-US/docs/Web/API/Element/releasePointerCapture)

From [`Node`](https://developer.mozilla.org/en-US/docs/Web/API/Node):

- Properties
- [`childNodes`](https://developer.mozilla.org/en-US/docs/Web/API/Node/childNodes)
- [`firstChild`](https://developer.mozilla.org/en-US/docs/Web/API/Node/firstChild)
- [`isConnected`](https://developer.mozilla.org/en-US/docs/Web/API/Node/isConnected)
- [`lastChild`](https://developer.mozilla.org/en-US/docs/Web/API/Node/lastChild)
- [`nextSibling`](https://developer.mozilla.org/en-US/docs/Web/API/Node/nextSibling)
- [`nodeName`](https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeName)
- [`nodeType`](https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType)
- [`nodeValue`](https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeValue)
- [`ownerDocument`](https://developer.mozilla.org/en-US/docs/Web/API/Node/ownerDocument)
- ℹ️ Will return the [document instance](https://reactnative.dev/docs/next/document-instances) where this component was rendered.
- [`parentElement`](https://developer.mozilla.org/en-US/docs/Web/API/Node/parentElement)
- [`parentNode`](https://developer.mozilla.org/en-US/docs/Web/API/Node/parentNode)
- [`previousSibling`](https://developer.mozilla.org/en-US/docs/Web/API/Node/previousSibling)
- [`textContent`](https://developer.mozilla.org/en-US/docs/Web/API/Node/textContent)
- Methods
- [`compareDocumentPosition()`](https://developer.mozilla.org/en-US/docs/Web/API/Node/compareDocumentPosition)
- [`contains()`](https://developer.mozilla.org/en-US/docs/Web/API/Node/contains)
- [`getRootNode()`](https://developer.mozilla.org/en-US/docs/Web/API/Node/getRootNode)
- ℹ️ Will return a reference to itself if the component is not mounted.
- [`hasChildNodes()`](https://developer.mozilla.org/en-US/docs/Web/API/Node/hasChildNodes)

### Legacy API [​](https://reactnative.dev/docs/next/element-nodes\#legacy-api "Direct link to Legacy API")

- [`measure()`](https://reactnative.dev/docs/next/legacy/direct-manipulation#measurecallback)
- [`measureInWindow()`](https://reactnative.dev/docs/next/legacy/direct-manipulation#measureinwindowcallback)
- [`measureLayout()`](https://reactnative.dev/docs/next/legacy/direct-manipulation#measurelayoutrelativetonativecomponentref-onsuccess-onfail)
- [`setNativeProps()`](https://reactnative.dev/docs/next/legacy/direct-manipulation#setnativeprops-with-touchableopacity)

Is this page useful?

- [Reference](https://reactnative.dev/docs/next/element-nodes#reference)
- [Web-compatible API](https://reactnative.dev/docs/next/element-nodes#web-compatible-api)
- [Legacy API](https://reactnative.dev/docs/next/element-nodes#legacy-api)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/global-XMLHttpRequest

[Skip to main content](https://reactnative.dev/docs/next/global-XMLHttpRequest#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

warning

🚧 This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest) for more information.

The global `XMLHttpRequest` class, as defined in Web specifications.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/global-self

[Skip to main content](https://reactnative.dev/docs/next/global-self#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

[`self`](https://developer.mozilla.org/en-US/docs/Web/API/Window/self) is an alias for [`globalThis`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis), as defined in Web specifications.

The use of `globalThis` is recommended over `self`.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/getting-started

[Skip to main content](https://reactnative.dev/docs/next/getting-started#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

On this page

Welcome to the very start of your React Native journey! If you're looking for getting started instructions, they've moved to [their own section](https://reactnative.dev/docs/next/environment-setup). Continue reading for an introduction to the documentation, Native Components, React, and more!

Many different kinds of people use React Native: from advanced iOS developers to React beginners, to people getting started programming for the first time in their career. These docs were written for all learners, no matter their experience level or background.

## How to use these docs [​](https://reactnative.dev/docs/next/getting-started\#how-to-use-these-docs "Direct link to How to use these docs")

You can start here and read through these docs linearly like a book; or you can read the specific sections you need. Already familiar with React? You can skip [that section](https://reactnative.dev/docs/next/intro-react)—or read it for a light refresher.

## Prerequisites [​](https://reactnative.dev/docs/next/getting-started\#prerequisites "Direct link to Prerequisites")

To work with React Native, you will need to have an understanding of JavaScript fundamentals. If you’re new to JavaScript or need a refresher, you can [dive in](https://developer.mozilla.org/en-US/docs/Web/JavaScript) or [brush up](https://developer.mozilla.org/en-US/docs/Web/JavaScript/A_re-introduction_to_JavaScript) at Mozilla Developer Network.

info

While we do our best to assume no prior knowledge of React, Android, or iOS development, these are valuable topics of study for the aspiring React Native developer. Where sensible, we have linked to resources and articles that go more in depth.

## Interactive examples [​](https://reactnative.dev/docs/next/getting-started\#interactive-examples "Direct link to Interactive examples")

This introduction lets you get started immediately in your browser with interactive examples like this one:

Hello World - Snack

# Hello World

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {Text, View} from 'react-native';

return (
<View
style={{
flex: 1,
justifyContent: 'center',
alignItems: 'center',

};

export default YourApp;

return (
<View
style={{
flex: 1,
justifyContent: 'center',
alignItems: 'center',

Snack

Try editing me! 🎉

Updating…

PreviewMy DeviceAndroidiOSWeb

The above is a Snack Player. It’s a handy tool created by Expo to embed and run React Native projects and share how they render in platforms like Android and iOS. The code is live and editable, so you can play directly with it in your browser. Go ahead and try changing the "Try editing me!" text above to "Hello, world!"

tip

Optionally, if you want to set up a local development environment, [you can follow our guide to setting up your environment on your local machine](https://reactnative.dev/docs/next/set-up-your-environment) and paste the code examples into your project. (If you are a web developer, you may already have a local environment set up for mobile browser testing!)

## Developer Notes [​](https://reactnative.dev/docs/next/getting-started\#developer-notes "Direct link to Developer Notes")

People from many different development backgrounds are learning React Native. You may have experience with a range of technologies, from web to Android to iOS and more. We try to write for developers from all backgrounds. Sometimes we provide explanations specific to one platform or another like so:

- Android
- iOS
- Web

Android developers may be familiar with this concept.

iOS developers may be familiar with this concept.

Web developers may be familiar with this concept.

## Formatting [​](https://reactnative.dev/docs/next/getting-started\#formatting "Direct link to Formatting")

* * *

Now that you know how this guide works, it's time to get to know the foundation of React Native: [Native Components](https://reactnative.dev/docs/next/intro-react-native-components).

Is this page useful?

- [How to use these docs](https://reactnative.dev/docs/next/getting-started#how-to-use-these-docs)
- [Prerequisites](https://reactnative.dev/docs/next/getting-started#prerequisites)
- [Interactive examples](https://reactnative.dev/docs/next/getting-started#interactive-examples)
- [Developer Notes](https://reactnative.dev/docs/next/getting-started#developer-notes)
- [Formatting](https://reactnative.dev/docs/next/getting-started#formatting)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/height-and-width

[Skip to main content](https://reactnative.dev/docs/next/height-and-width#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/height-and-width)** (0.81).

Version: Next

On this page

A component's height and width determine its size on the screen.

## Fixed Dimensions [​](https://reactnative.dev/docs/next/height-and-width\#fixed-dimensions "Direct link to Fixed Dimensions")

The general way to set the dimensions of a component is by adding a fixed `width` and `height` to style. All dimensions in React Native are unitless, and represent density-independent pixels.

Height and Width - Snack

# Height and Width

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {View} from 'react-native';

return (

style={{
width: 50,
height: 50,
backgroundColor: 'powderblue',
}}

style={{
width: 100,
height: 100,
backgroundColor: 'skyblue',
}}

style={{
width: 150,
height: 150,
backgroundColor: 'steelblue',
}}

};

export default FixedDimensionsBasics;

style={{
width: 50,
height: 50,
backgroundColor: 'powderblue',
}}

style={{
width: 100,
height: 100,
backgroundColor: 'skyblue',
}}

style={{
width: 150,
height: 150,
backgroundColor: 'steelblue',
}}

Snack

Updating…

PreviewMy DeviceAndroidiOSWeb

Setting dimensions this way is common for components whose size should always be fixed to a number of points and not calculated based on screen size.

caution

There is no universal mapping from points to physical units of measurement. This means that a component with fixed dimensions might not have the same physical size, across different devices and screen sizes. However, this difference is unnoticeable for most use cases.

## Flex Dimensions [​](https://reactnative.dev/docs/next/height-and-width\#flex-dimensions "Direct link to Flex Dimensions")

Use `flex` in a component's style to have the component expand and shrink dynamically based on available space. Normally you will use `flex: 1`, which tells a component to fill all available space, shared evenly amongst other components with the same parent. The larger the `flex` given, the higher the ratio of space a component will take compared to its siblings.

info

A component can only expand to fill available space if its parent has dimensions greater than `0`. If a parent does not have either a fixed `width` and `height` or `flex`, the parent will have dimensions of `0` and the `flex` children will not be visible.

Flex Dimensions - Snack

# Flex Dimensions

return (
// Try removing the \`flex: 1\` on the parent View.
// The parent will not have dimensions, so the children can't expand.
// What if you add \`height: 300\` instead of \`flex: 1\`?

export default FlexDimensionsBasics;

return (
// Try removing the `flex: 1` on the parent View.
// The parent will not have dimensions, so the children can't expand.
// What if you add `height: 300` instead of `flex: 1`?

After you can control a component's size, the next step is to [learn how to lay it out on the screen](https://reactnative.dev/docs/next/flexbox).

## Percentage Dimensions [​](https://reactnative.dev/docs/next/height-and-width\#percentage-dimensions "Direct link to Percentage Dimensions")

If you want to fill a certain portion of the screen, but you _don't_ want to use the `flex` layout, you _can_ use **percentage values** in the component's style. Similar to flex dimensions, percentage dimensions require parent with a defined size.

Percentage Dimensions - Snack

# Percentage Dimensions

// Try removing the \`height: '100%'\` on the parent View.
// The parent will not have dimensions, so the children can't expand.
return (

style={{
height: '15%',
backgroundColor: 'powderblue',
}}

style={{
width: '66%',
height: '35%',
backgroundColor: 'skyblue',
}}

style={{
width: '33%',
height: '50%',
backgroundColor: 'steelblue',
}}

export default PercentageDimensionsBasics;

// Try removing the `height: '100%'` on the parent View.
// The parent will not have dimensions, so the children can't expand.
return (

style={{
height: '15%',
backgroundColor: 'powderblue',
}}

style={{
width: '66%',
height: '35%',
backgroundColor: 'skyblue',
}}

style={{
width: '33%',
height: '50%',
backgroundColor: 'steelblue',
}}

Is this page useful?

- [Fixed Dimensions](https://reactnative.dev/docs/next/height-and-width#fixed-dimensions)
- [Flex Dimensions](https://reactnative.dev/docs/next/height-and-width#flex-dimensions)
- [Percentage Dimensions](https://reactnative.dev/docs/next/height-and-width#percentage-dimensions)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/i18nmanager

[Skip to main content](https://reactnative.dev/docs/next/i18nmanager#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/i18nmanager)** (0.81).

Version: Next

On this page

The `I18nManager` module provides utilities for managing Right-to-Left (RTL) layout support for languages like Arabic, Hebrew, and others. It provides methods to control RTL behavior and check the current layout direction.

## Examples [​](https://reactnative.dev/docs/next/i18nmanager\#examples "Direct link to Examples")

### Change positions and animations based on RTL [​](https://reactnative.dev/docs/next/i18nmanager\#change-positions-and-animations-based-on-rtl "Direct link to Change positions and animations based on RTL")

If you absolutely position elements to align with other flexbox elements, they may not align in RTL languages. Using `isRTL` can be used to adjust alignment or animations.

I18nManager Change Absolute Positions And Animations - Snack

# I18nManager Change Absolute Positions And Animations

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {I18nManager, Text, View} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

// Change to \`true\` to see the effect in a non-RTL language
const isRTL = I18nManager.isRTL;
return (

style={{
position: 'absolute',
left: isRTL ? undefined : 0,
right: isRTL ? 0 : undefined,

};

export default App;

// Change to `true` to see the effect in a non-RTL language
const isRTL = I18nManager.isRTL;
return (

style={{
position: 'absolute',
left: isRTL ? undefined : 0,
right: isRTL ? 0 : undefined,

Snack

< Back

Updating…

PreviewMy DeviceAndroidiOSWeb

### During Development [​](https://reactnative.dev/docs/next/i18nmanager\#during-development "Direct link to During Development")

I18nManager During Development - Snack

# I18nManager During Development

import React, {useState} from 'react';
import {Alert, I18nManager, StyleSheet, Switch, Text, View} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const \[rtl, setRTL\] = useState(I18nManager.isRTL);
return (

value={rtl}

setRTL(value);
I18nManager.forceRTL(value);
Alert.alert(
'Reload this page',
'Please reload this page to change the UI direction! ' +
'All examples in this app will be affected. ' +
'Check them out to see what they look like in RTL layout.',
);
}}

const styles = StyleSheet.create({
container: {
padding: 20,
},
forceRtl: {
flexDirection: 'row',
justifyContent: 'space-between',
alignItems: 'center',
},
});

const [rtl, setRTL] = useState(I18nManager.isRTL);
return (

setRTL(value);
I18nManager.forceRTL(value);
Alert.alert(
'Reload this page',
'Please reload this page to change the UI direction! ' +
'All examples in this app will be affected. ' +
'Check them out to see what they look like in RTL layout.',
);
}}

const styles = StyleSheet.create({
container: {
padding: 20,
},
forceRtl: {
flexDirection: 'row',
justifyContent: 'space-between',
alignItems: 'center',
},
});

Force RTL in Development:

# Reference

## Properties [​](https://reactnative.dev/docs/next/i18nmanager\#properties "Direct link to Properties")

### `isRTL` [​](https://reactnative.dev/docs/next/i18nmanager\#isrtl "Direct link to isrtl")

typescript

```codeBlockLines_AclH
static isRTL: boolean;

A boolean value indicating whether the app is currently in RTL layout mode.

The value of `isRTL` is determined by the following logic:

- If `forceRTL` is `true`, `isRTL` returns `true`
- If `allowRTL` is `false`, `isRTL` returns `false`
- Otherwise, `isRTL` will be `true` given the following:
- **iOS:**
- The user-preferred language on the device is an RTL language
- The application-defined localizations include the user-chosen language (as defined in the Xcode project file ( `knownRegions = (...)`)
- **Android:**
- The user-preferred language on the device is an RTL language

### `doLeftAndRightSwapInRTL` [​](https://reactnative.dev/docs/next/i18nmanager\#doleftandrightswapinrtl "Direct link to doleftandrightswapinrtl")

```codeBlockLines_AclH
static doLeftAndRightSwapInRTL: boolean;

A boolean value indicating whether left and right style properties should be automatically swapped when in RTL mode. When enabled, left becomes right and right becomes left in RTL layouts.

## Methods [​](https://reactnative.dev/docs/next/i18nmanager\#methods "Direct link to Methods")

### `allowRTL()` [​](https://reactnative.dev/docs/next/i18nmanager\#allowrtl "Direct link to allowrtl")

```codeBlockLines_AclH

Enables or disables RTL layout support for the application.

**Parameters:**

- `allowRTL` (boolean): Whether to allow RTL layout

**Important Notes:**

- Changes take effect on the next application start, not immediately
- This setting is persisted across app restarts

### `forceRTL()` [​](https://reactnative.dev/docs/next/i18nmanager\#forcertl "Direct link to forcertl")

Forces the app to use RTL layout regardless of the device language settings. This is primarily useful for testing RTL layouts during development.

Avoid forcing RTL in production apps as it requires a full app restart to take effect, which makes for a poor user-experience.

- `forced` (boolean): Whether to force RTL layout

- Changes take full effect on the next application start, not immediately
- The setting is persisted across app restarts
- Only meant for development and testing. In production, you should either disallow RTL fully or handle it appropriately (see `isRTL`)

### `swapLeftAndRightInRTL()` [​](https://reactnative.dev/docs/next/i18nmanager\#swapleftandrightinrtl "Direct link to swapleftandrightinrtl")

Swap left and right style properties in RTL mode. When enabled, left becomes right and right becomes left in RTL layouts. Does not affect the value of `isRTL`.

Is this page useful?

- [Examples](https://reactnative.dev/docs/next/i18nmanager#examples)
- [Change positions and animations based on RTL](https://reactnative.dev/docs/next/i18nmanager#change-positions-and-animations-based-on-rtl)
- [During Development](https://reactnative.dev/docs/next/i18nmanager#during-development)
- [Properties](https://reactnative.dev/docs/next/i18nmanager#properties)
- [`isRTL`](https://reactnative.dev/docs/next/i18nmanager#isrtl)
- [`doLeftAndRightSwapInRTL`](https://reactnative.dev/docs/next/i18nmanager#doleftandrightswapinrtl)
- [Methods](https://reactnative.dev/docs/next/i18nmanager#methods)
- [`allowRTL()`](https://reactnative.dev/docs/next/i18nmanager#allowrtl)
- [`forceRTL()`](https://reactnative.dev/docs/next/i18nmanager#forcertl)
- [`swapLeftAndRightInRTL()`](https://reactnative.dev/docs/next/i18nmanager#swapleftandrightinrtl)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/global-navigator

[Skip to main content](https://reactnative.dev/docs/next/global-navigator#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

warning

🚧 This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/Window/navigator) for more information.

The global `navigator` object, as defined in Web specifications.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/global-performance

[Skip to main content](https://reactnative.dev/docs/next/global-performance#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

warning

🚧 This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/performance) for more information.

The global `performance` object, as defined in Web specifications.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/handling-text-input

[Skip to main content](https://reactnative.dev/docs/next/handling-text-input#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/handling-text-input)** (0.81).

Version: Next

[`TextInput`](https://reactnative.dev/docs/next/textinput#content) is a [Core Component](https://reactnative.dev/docs/next/intro-react-native-components) that allows the user to enter text. It has an `onChangeText` prop that takes a function to be called every time the text changed, and an `onSubmitEditing` prop that takes a function to be called when the text is submitted.

For example, let's say that as the user types, you're translating their words into a different language. In this new language, every single word is written the same way: 🍕. So the sentence "Hello there Bob" would be translated as "🍕 🍕 🍕".

Handling Text Input - Snack

# Handling Text Input

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React, {useState} from 'react';
import {Text, TextInput, View} from 'react-native';

const \[text, setText\] = useState('');
return (

style={{height: 40, padding: 5}}
placeholder="Type here to translate!"

defaultValue={text}

.split(' ')

.join(' ')}

};

export default PizzaTranslator;

const [text, setText] = useState('');
return (

style={{height: 40, padding: 5}}
placeholder="Type here to translate!"

Snack

Updating…

PreviewMy DeviceAndroidiOSWeb

In this example, we store `text` in the state, because it changes over time.

There are a lot more things you might want to do with a text input. For example, you could validate the text inside while the user types. For more detailed examples, see the [React docs on controlled components](https://react.dev/reference/react-dom/components/input#controlling-an-input-with-a-state-variable), or the [reference docs for TextInput](https://reactnative.dev/docs/next/textinput).

Text input is one of the ways the user interacts with the app. Next, let's look at another type of input and [learn how to handle touches](https://reactnative.dev/docs/next/handling-touches).

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/hermes

[Skip to main content](https://reactnative.dev/docs/next/hermes#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/hermes)** (0.81).

Version: Next

On this page

[![](https://reactnative.dev/docs/assets/HermesLogo.svg)](https://hermesengine.dev/)

[Hermes](https://hermesengine.dev/) is an open-source JavaScript engine optimized for React Native. For many apps, using Hermes will result in improved start-up time, decreased memory usage, and smaller app size when compared to JavaScriptCore.
Hermes is used by default by React Native and no additional configuration is required to enable it.

## Bundled Hermes [​](https://reactnative.dev/docs/next/hermes\#bundled-hermes "Direct link to Bundled Hermes")

React Native comes with a **bundled version** of Hermes.
We are building a version of Hermes for you whenever we release a new version of React Native. This will make sure you're consuming a version of Hermes which is fully compatible with the version of React Native you're using.

This change is fully transparent to users of React Native. You can still disable Hermes using the command described in this page.
You can [read more about the technical implementation on this page](https://reactnative.dev/architecture/bundled-hermes).

## Confirming Hermes is in use [​](https://reactnative.dev/docs/next/hermes\#confirming-hermes-is-in-use "Direct link to Confirming Hermes is in use")

If you've recently created a new app from scratch, you should see if Hermes is enabled in the welcome view:

A `HermesInternal` global variable will be available in JavaScript that can be used to verify that Hermes is in use:

jsx

```codeBlockLines_AclH

caution

If you are using a non-standard way of loading the JS bundle, it is possible that the `HermesInternal` variable is available but you aren't using the highly optimised pre-compiled bytecode.
Confirm that you are using the `.hbc` file and also benchmark the before/after as detailed below.

To see the benefits of Hermes, try making a release build/deployment of your app to compare. For example; from the root of your project:

- Android
- iOS

- npm
- Yarn

shell

```codeBlockLines_AclH
npm run android -- --mode="release"

```codeBlockLines_AclH
yarn android --mode release

```codeBlockLines_AclH
npm run ios -- --mode="Release"

```codeBlockLines_AclH
yarn ios --mode Release

This will compile JavaScript to Hermes Bytecode during build time which will improve your app's startup speed on device.

## Switching

React Native also supports using JavaScriptCore as the [JavaScript engine](https://reactnative.dev/docs/next/javascript-environment). Follow these instructions to opt-out of Hermes.

### Android [​](https://reactnative.dev/docs/next/hermes\#android "Direct link to Android")

Edit your `android/gradle.properties` file and flip `hermesEnabled`

Edit your `ios/Podfile` file and make the change illustrated below:

diff

```codeBlockLines_AclH
use_react_native!(

# An absolute path to your application root.

)

Is this page useful?

- [Bundled Hermes](https://reactnative.dev/docs/next/hermes#bundled-hermes)
- [Confirming Hermes is in use](https://reactnative.dev/docs/next/hermes#confirming-hermes-is-in-use)
- [Switching
- [Android](https://reactnative.dev/docs/next/hermes#android)
- [iOS](https://reactnative.dev/docs/next/hermes#ios)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/image-style-props

[Skip to main content](https://reactnative.dev/docs/next/image-style-props#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/image-style-props)** (0.81).

Version: Next

On this page

## Examples [​](https://reactnative.dev/docs/next/image-style-props\#examples "Direct link to Examples")

### Image Resize Mode [​](https://reactnative.dev/docs/next/image-style-props\#image-resize-mode "Direct link to Image Resize Mode")

Image Resize Modes Example - Snack

# Image Resize Modes Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {View, Image, Text, StyleSheet, ScrollView} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const asset = require('@expo/snack-static/react-native-logo.png');

style={\[styles.image, {resizeMode: 'contain'}\]}
source={asset}

style={\[styles.image, {resizeMode: 'stretch'}\]}
source={asset}

style={\[styles.image, {resizeMode: 'repeat'}\]}
source={asset}

style={\[styles.image, {resizeMode: 'center'}\]}
source={asset}

const styles = StyleSheet.create({
container: {
flex: 1,
},
scrollView: {
padding: 12,
alignItems: 'center',
gap: 16,
},
image: {
borderWidth: 1,
borderColor: 'red',
height: 100,
width: 200,
},
text: {
textAlign: 'center',
marginBottom: 12,
},
});

export default DisplayAnImageWithStyle;

style={[styles.image, {resizeMode: 'contain'}]}
source={asset}

style={[styles.image, {resizeMode: 'stretch'}]}
source={asset}

style={[styles.image, {resizeMode: 'repeat'}]}
source={asset}

style={[styles.image, {resizeMode: 'center'}]}
source={asset}

const styles = StyleSheet.create({
container: {
flex: 1,
},
scrollView: {
padding: 12,
alignItems: 'center',
gap: 16,
},
image: {
borderWidth: 1,
borderColor: 'red',
height: 100,
width: 200,
},
text: {
textAlign: 'center',
marginBottom: 12,
},
});

Snack

resizeMode : cover

resizeMode : contain

resizeMode : stretch

resizeMode : repeat

resizeMode : center

Updating…

PreviewMy DeviceAndroidiOSWeb

### Image Border [​](https://reactnative.dev/docs/next/image-style-props\#image-border "Direct link to Image Border")

Style BorderWidth and BorderColor Example - Snack

# Style BorderWidth and BorderColor Example

import React from 'react';
import {Image, StyleSheet, Text} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

style={{
borderColor: 'red',
borderWidth: 5,
height: 100,
width: 200,
}}
source={require('@expo/snack-static/react-native-logo.png')}

const styles = StyleSheet.create({
container: {
flex: 1,
flexDirection: 'column',
justifyContent: 'center',
alignItems: 'center',
},
});

style={{
borderColor: 'red',
borderWidth: 5,
height: 100,
width: 200,
}}
source={require('@expo/snack-static/react-native-logo.png')}

const styles = StyleSheet.create({
container: {
flex: 1,
flexDirection: 'column',
justifyContent: 'center',
alignItems: 'center',
},
});

borderColor & borderWidth

### Image Border Radius [​](https://reactnative.dev/docs/next/image-style-props\#image-border-radius "Direct link to Image Border Radius")

Style Border Radius Example - Snack

# Style Border Radius Example

import React from 'react';
import {View, Image, StyleSheet, Text, ScrollView} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

style={\[styles.image, {borderTopRightRadius: 20}\]}
source={asset}

style={\[styles.image, {borderBottomRightRadius: 20}\]}
source={asset}

style={\[styles.image, {borderBottomLeftRadius: 20}\]}
source={asset}

style={\[styles.image, {borderTopLeftRadius: 20}\]}
source={asset}

const styles = StyleSheet.create({
container: {
flex: 1,
},
scrollView: {
flex: 1,
justifyContent: 'center',
alignItems: 'center',
},
image: {
borderWidth: 1,
borderColor: 'red',
height: 100,
width: 200,
},
});

style={[styles.image, {borderTopRightRadius: 20}]}
source={asset}

style={[styles.image, {borderBottomRightRadius: 20}]}
source={asset}

style={[styles.image, {borderBottomLeftRadius: 20}]}
source={asset}

style={[styles.image, {borderTopLeftRadius: 20}]}
source={asset}

const styles = StyleSheet.create({
container: {
flex: 1,
},
scrollView: {
flex: 1,
justifyContent: 'center',
alignItems: 'center',
},
image: {
borderWidth: 1,
borderColor: 'red',
height: 100,
width: 200,
},
});

borderTopRightRadius

borderBottomRightRadius

borderBottomLeftRadius

borderTopLeftRadius

### Image Tint [​](https://reactnative.dev/docs/next/image-style-props\#image-tint "Direct link to Image Tint")

Style tintColor Function Component - Snack

# Style tintColor Function Component

style={{
tintColor: '#000000',
resizeMode: 'contain',
height: 100,
width: 200,
}}
source={require('@expo/snack-static/react-native-logo.png')}

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
alignItems: 'center',
},
});

style={{
tintColor: '#000000',
resizeMode: 'contain',
height: 100,
width: 200,
}}
source={require('@expo/snack-static/react-native-logo.png')}

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
alignItems: 'center',
},
});

tintColor

# Reference

## Props [​](https://reactnative.dev/docs/next/image-style-props\#props "Direct link to Props")

### `backfaceVisibility` [​](https://reactnative.dev/docs/next/image-style-props\#backfacevisibility "Direct link to backfacevisibility")

The property defines whether or not the back face of a rotated image should be visible.

| Type | Default |
| --- | --- |
| enum( `'visible'`, `'hidden'`) | `'visible'` |

* * *

### `backgroundColor` [​](https://reactnative.dev/docs/next/image-style-props\#backgroundcolor "Direct link to backgroundcolor")

| Type |
| --- |
| [color](https://reactnative.dev/docs/next/colors) |

### `borderBottomLeftRadius` [​](https://reactnative.dev/docs/next/image-style-props\#borderbottomleftradius "Direct link to borderbottomleftradius")

| Type |
| --- |
| number |

### `borderBottomRightRadius` [​](https://reactnative.dev/docs/next/image-style-props\#borderbottomrightradius "Direct link to borderbottomrightradius")

### `borderColor` [​](https://reactnative.dev/docs/next/image-style-props\#bordercolor "Direct link to bordercolor")

### `borderRadius` [​](https://reactnative.dev/docs/next/image-style-props\#borderradius "Direct link to borderradius")

### `borderTopLeftRadius` [​](https://reactnative.dev/docs/next/image-style-props\#bordertopleftradius "Direct link to bordertopleftradius")

### `borderTopRightRadius` [​](https://reactnative.dev/docs/next/image-style-props\#bordertoprightradius "Direct link to bordertoprightradius")

### `borderWidth` [​](https://reactnative.dev/docs/next/image-style-props\#borderwidth "Direct link to borderwidth")

### `opacity` [​](https://reactnative.dev/docs/next/image-style-props\#opacity "Direct link to opacity")

Set an opacity value for the image. The number should be in the range from `0.0` to `1.0`.

| Type | Default |
| --- | --- |
| number | `1.0` |

### `overflow` [​](https://reactnative.dev/docs/next/image-style-props\#overflow "Direct link to overflow")

### `overlayColor` Android [​](https://reactnative.dev/docs/next/image-style-props\#overlaycolor-android "Direct link to overlaycolor-android")

When the image has rounded corners, specifying an overlayColor will cause the remaining space in the corners to be filled with a solid color. This is useful in cases which are not supported by the Android implementation of rounded corners:

- Certain resize modes, such as `'contain'`
- Animated GIFs

A typical way to use this prop is with images displayed on a solid background and setting the `overlayColor` to the same color as the background.

For details of how this works under the hood, see [Fresco documentation](https://frescolib.org/docs/rounded-corners-and-circles.html).

| Type |
| --- |
| string |

### `resizeMode` [​](https://reactnative.dev/docs/next/image-style-props\#resizemode "Direct link to resizemode")

Determines how to resize the image when the frame doesn't match the raw image dimensions. Defaults to `cover`.

- `cover`: Scale the image uniformly (maintain the image's aspect ratio) so that:
- Both dimensions (width and height) of the image will be equal to or larger than the corresponding dimension of the view (minus padding)
- At least one dimension of the scaled image will be equal to the corresponding dimension of the view (minus padding)
- `contain`: Scale the image uniformly (maintain the image's aspect ratio) so that both dimensions (width and height) of the image will be equal to or less than the corresponding dimension of the view (minus padding).

- `stretch`: Scale width and height independently, This may change the aspect ratio of the src.

- `repeat`: Repeat the image to cover the frame of the view. The image will keep its size and aspect ratio, unless it is larger than the view, in which case it will be scaled down uniformly so that it is contained in the view.

- `center`: Center the image in the view along both dimensions. If the image is larger than the view, scale it down uniformly so that it is contained in the view.

| Type | Default |
| --- | --- |
| enum( `'cover'`, `'contain'`, `'stretch'`, `'repeat'`, `'center'`) | `'cover'` |

### `objectFit` [​](https://reactnative.dev/docs/next/image-style-props\#objectfit "Direct link to objectfit")

Determines how to resize the image when the frame doesn't match the raw image dimensions.

| Type | Default |
| --- | --- |
| enum( `'cover'`, `'contain'`, `'fill'`, `'scale-down'`) | `'cover'` |

### `tintColor` [​](https://reactnative.dev/docs/next/image-style-props\#tintcolor "Direct link to tintcolor")

Changes the color of all the non-transparent pixels to the tintColor.

Is this page useful?

- [Examples](https://reactnative.dev/docs/next/image-style-props#examples)
- [Image Resize Mode](https://reactnative.dev/docs/next/image-style-props#image-resize-mode)
- [Image Border](https://reactnative.dev/docs/next/image-style-props#image-border)
- [Image Border Radius](https://reactnative.dev/docs/next/image-style-props#image-border-radius)
- [Image Tint](https://reactnative.dev/docs/next/image-style-props#image-tint)
- [Props](https://reactnative.dev/docs/next/image-style-props#props)
- [`backfaceVisibility`](https://reactnative.dev/docs/next/image-style-props#backfacevisibility)
- [`backgroundColor`](https://reactnative.dev/docs/next/image-style-props#backgroundcolor)
- [`borderBottomLeftRadius`](https://reactnative.dev/docs/next/image-style-props#borderbottomleftradius)
- [`borderBottomRightRadius`](https://reactnative.dev/docs/next/image-style-props#borderbottomrightradius)
- [`borderColor`](https://reactnative.dev/docs/next/image-style-props#bordercolor)
- [`borderRadius`](https://reactnative.dev/docs/next/image-style-props#borderradius)
- [`borderTopLeftRadius`](https://reactnative.dev/docs/next/image-style-props#bordertopleftradius)
- [`borderTopRightRadius`](https://reactnative.dev/docs/next/image-style-props#bordertoprightradius)
- [`borderWidth`](https://reactnative.dev/docs/next/image-style-props#borderwidth)
- [`opacity`](https://reactnative.dev/docs/next/image-style-props#opacity)
- [`overflow`](https://reactnative.dev/docs/next/image-style-props#overflow)
- [`overlayColor` \\
Android](https://reactnative.dev/docs/next/image-style-props#overlaycolor-android)
- [`resizeMode`](https://reactnative.dev/docs/next/image-style-props#resizemode)
- [`objectFit`](https://reactnative.dev/docs/next/image-style-props#objectfit)
- [`tintColor`](https://reactnative.dev/docs/next/image-style-props#tintcolor)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/flexbox

[Skip to main content](https://reactnative.dev/docs/next/flexbox#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/flexbox)** (0.81).

Version: Next

On this page

A component can specify the layout of its children using the Flexbox algorithm. Flexbox is designed to provide a consistent layout on different screen sizes.

You will normally use a combination of `flexDirection`, `alignItems`, and `justifyContent` to achieve the right layout.

caution

Flexbox works the same way in React Native as it does in CSS on the web, with a few exceptions.
The defaults are different, with `flexDirection` defaulting to `column` instead of `row`, `alignContent` defaulting to `flex-start` instead of `stretch`, `flexShrink` defaulting to `0` instead of `1`, the `flex` parameter only supporting a single number.

## Flex [​](https://reactnative.dev/docs/next/flexbox\#flex "Direct link to Flex")

[`flex`](https://reactnative.dev/docs/next/layout-props#flex) will define how your items are going to **“fill”** over the available space along your main axis. Space will be divided according to each element's flex property.

In the following example, the red, orange, and green views are all children in the container view that has `flex: 1` set. The red view uses `flex: 1` , the orange view uses `flex: 2`, and the green view uses `flex: 3` . **1+2+3 = 6**, which means that the red view will get `1/6` of the space, the orange `2/6` of the space, and the green `3/6` of the space.

Flex Example - Snack

# Flex Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {StyleSheet, View} from 'react-native';

return (
<View
style={\[\
styles.container,\
{\
// Try setting \`flexDirection\` to \`"row"\`.\
flexDirection: 'column',\
},\

};

const styles = StyleSheet.create({
container: {
flex: 1,
padding: 20,
},
});

export default Flex;

return (
<View
style={[\
styles.container,\
{\
// Try setting `flexDirection` to `"row"`.\
flexDirection: 'column',\
},\

const styles = StyleSheet.create({
container: {
flex: 1,
padding: 20,
},
});

Snack

Updating…

PreviewMy DeviceAndroidiOSWeb

## Flex Direction [​](https://reactnative.dev/docs/next/flexbox\#flex-direction "Direct link to Flex Direction")

[`flexDirection`](https://reactnative.dev/docs/next/layout-props#flexdirection) controls the direction in which the children of a node are laid out. This is also referred to as the main axis. The cross axis is the axis perpendicular to the main axis, or the axis which the wrapping lines are laid out in.

- `column` ( **default value**) Align children from top to bottom. If wrapping is enabled, then the next line will start to the right of the first item on the top of the container.

- `row` Align children from left to right. If wrapping is enabled, then the next line will start under the first item on the left of the container.

- `column-reverse` Align children from bottom to top. If wrapping is enabled, then the next line will start to the right of the first item on the bottom of the container.

- `row-reverse` Align children from right to left. If wrapping is enabled, then the next line will start under the first item on the right of the container.

You can learn more [here](https://www.yogalayout.dev/docs/styling/flex-direction).

- TypeScript
- JavaScript

## Layout Direction [​](https://reactnative.dev/docs/next/flexbox\#layout-direction "Direct link to Layout Direction")

Layout [`direction`](https://reactnative.dev/docs/next/layout-props#direction) specifies the direction in which children and text in a hierarchy should be laid out. Layout direction also affects what edge `start` and `end` refer to. By default, React Native lays out with LTR layout direction. In this mode `start` refers to left and `end` refers to right.

- `LTR` ( **default value**) Text and children are laid out from left to right. Margin and padding applied to the start of an element are applied on the left side.

- `RTL` Text and children are laid out from right to left. Margin and padding applied to the start of an element are applied on the right side.

## Justify Content [​](https://reactnative.dev/docs/next/flexbox\#justify-content "Direct link to Justify Content")

[`justifyContent`](https://reactnative.dev/docs/next/layout-props#justifycontent) describes how to align children within the main axis of their container. For example, you can use this property to center a child horizontally within a container with `flexDirection` set to `row` or vertically within a container with `flexDirection` set to `column`.

- `flex-start`( **default value**) Align children of a container to the start of the container's main axis.

- `flex-end` Align children of a container to the end of the container's main axis.

- `center` Align children of a container in the center of the container's main axis.

- `space-between` Evenly space off children across the container's main axis, distributing the remaining space between the children.

- `space-around` Evenly space off children across the container's main axis, distributing the remaining space around the children. Compared to `space-between`, using `space-around` will result in space being distributed to the beginning of the first child and end of the last child.

- `space-evenly` Evenly distribute children within the alignment container along the main axis. The spacing between each pair of adjacent items, the main-start edge and the first item, and the main-end edge and the last item, are all exactly the same.

You can learn more [here](https://www.yogalayout.dev/docs/styling/justify-content).

## Align Items [​](https://reactnative.dev/docs/next/flexbox\#align-items "Direct link to Align Items")

[`alignItems`](https://reactnative.dev/docs/next/layout-props#alignitems) describes how to align children along the cross axis of their container. It is very similar to `justifyContent` but instead of applying to the main axis, `alignItems` applies to the cross axis.

- `stretch` ( **default value**) Stretch children of a container to match the `height` of the container's cross axis.

- `flex-start` Align children of a container to the start of the container's cross axis.

- `flex-end` Align children of a container to the end of the container's cross axis.

- `center` Align children of a container in the center of the container's cross axis.

- `baseline` Align children of a container along a common baseline. Individual children can be set to be the reference baseline for their parents.

info

For `stretch` to have an effect, children must not have a fixed dimension along the secondary axis. In the following example, setting `alignItems: stretch` does nothing until the `width: 50` is removed from the children.

You can learn more [here](https://www.yogalayout.dev/docs/styling/align-items-self).

## Align Self [​](https://reactnative.dev/docs/next/flexbox\#align-self "Direct link to Align Self")

[`alignSelf`](https://reactnative.dev/docs/next/layout-props#alignself) has the same options and effect as `alignItems` but instead of affecting the children within a container, you can apply this property to a single child to change its alignment within its parent. `alignSelf` overrides any option set by the parent with `alignItems`.

## Align Content [​](https://reactnative.dev/docs/next/flexbox\#align-content "Direct link to Align Content")

[alignContent](https://reactnative.dev/docs/next/layout-props#aligncontent) defines the distribution of lines along the cross-axis. This only has effect when items are wrapped to multiple lines using `flexWrap`.

- `flex-start` ( **default value**) Align wrapped lines to the start of the container's cross axis.

- `flex-end` Align wrapped lines to the end of the container's cross axis.

- `stretch` ( _default value when using Yoga on the web_) Stretch wrapped lines to match the height of the container's cross axis.

- `center` Align wrapped lines in the center of the container's cross axis.

- `space-between` Evenly space wrapped lines across the container's cross axis, distributing the remaining space between the lines.

- `space-around` Evenly space wrapped lines across the container's cross axis, distributing the remaining space around the lines. Each end of the container has a half-sized space compared to the space between items.

- `space-evenly` Evenly space wrapped lines across the container's cross axis, distributing the remaining space around the lines. Each space is the same size.

You can learn more [here](https://www.yogalayout.dev/docs/styling/align-content).

## Flex Wrap [​](https://reactnative.dev/docs/next/flexbox\#flex-wrap "Direct link to Flex Wrap")

The [`flexWrap`](https://reactnative.dev/docs/next/layout-props#flexwrap) property is set on containers and it controls what happens when children overflow the size of the container along the main axis. By default, children are forced into a single line (which can shrink elements). If wrapping is allowed, items are wrapped into multiple lines along the main axis if needed.

When wrapping lines, `alignContent` can be used to specify how the lines are placed in the container. Learn more [here](https://www.yogalayout.dev/docs/styling/flex-wrap).

## Flex Basis, Grow, and Shrink [​](https://reactnative.dev/docs/next/flexbox\#flex-basis-grow-and-shrink "Direct link to Flex Basis, Grow, and Shrink")

- [`flexBasis`](https://reactnative.dev/docs/next/layout-props#flexbasis) is an axis-independent way of providing the default size of an item along the main axis. Setting the `flexBasis` of a child is similar to setting the `width` of that child if its parent is a container with `flexDirection: row` or setting the `height` of a child if its parent is a container with `flexDirection: column`. The `flexBasis` of an item is the default size of that item, the size of the item before any `flexGrow` and `flexShrink` calculations are performed.

- [`flexGrow`](https://reactnative.dev/docs/next/layout-props#flexgrow) describes how much space within a container should be distributed among its children along the main axis. After laying out its children, a container will distribute any remaining space according to the flex grow values specified by its children.

- [`flexShrink`](https://reactnative.dev/docs/next/layout-props#flexshrink) describes how to shrink children along the main axis in the case in which the total size of the children overflows the size of the container on the main axis. `flexShrink` is very similar to `flexGrow` and can be thought of in the same way if any overflowing size is considered to be negative remaining space. These two properties also work well together by allowing children to grow and shrink as needed.

You can learn more [here](https://www.yogalayout.dev/docs/styling/flex-basis-grow-shrink).

## Row Gap, Column Gap and Gap [​](https://reactnative.dev/docs/next/flexbox\#row-gap-column-gap-and-gap "Direct link to Row Gap, Column Gap and Gap")

- [`rowGap`](https://reactnative.dev/docs/next/layout-props#rowgap) sets the size of the gap (gutter) between an element's rows.

- [`columnGap`](https://reactnative.dev/docs/next/layout-props#columngap) sets the size of the gap (gutter) between an element's columns.

- [`gap`](https://reactnative.dev/docs/next/layout-props#gap) sets the size of the gap (gutter) between rows and columns. It is a shorthand for `rowGap` and `columnGap`.

You can use `flexWrap` and `alignContent` along with `gap` to add consistent spacing between items.

## Width and Height [​](https://reactnative.dev/docs/next/flexbox\#width-and-height "Direct link to Width and Height")

The `width` property specifies the width of an element's content area. Similarly, the `height` property specifies the height of an element's content area.

Both `width` and `height` can take the following values:

- `auto` ( **default value**) React Native calculates the width/height for the element based on its content, whether that is other children, text, or an image.

- `pixels` Defines the width/height in absolute pixels. Depending on other styles set on the component, this may or may not be the final dimension of the node.

- `percentage` Defines the width or height in percentage of its parent's width or height, respectively.

## Position [​](https://reactnative.dev/docs/next/flexbox\#position "Direct link to Position")

The `position` type of an element defines how it is positioned relative to either itself, its parent, or its [containing block](https://reactnative.dev/docs/next/flexbox#the-containing-block).

- `relative` ( **default value**) By default, an element is positioned relatively. This means an element is positioned according to the normal flow of the layout, and then offset relative to that position based on the values of `top`, `right`, `bottom`, and `left`. The offset does not affect the position of any sibling or parent elements.

- `absolute` When positioned absolutely, an element doesn't take part in the normal layout flow. It is instead laid out independent of its siblings. The position is determined based on the `top`, `right`, `bottom`, and `left` values. These values will position the element relative to its containing block.

- `static` When positioned statically, an element is positioned according to the normal flow of layout, and will ignore the `top`, `right`, `bottom`, and `left` values. This `position` will also cause the element to not form a containing block for absolute descendants, unless some other superceding style prop is present (e.g. `transform`). This allows `absolute` elements to be positioned to something that is not their parent. Note that **`static` is only available on the New Architecture**.

## The Containing Block [​](https://reactnative.dev/docs/next/flexbox\#the-containing-block "Direct link to The Containing Block")

The containing block of an element is an ancestor element which controls its position and size.
The way containing blocks work in React Native is very similar to [how they work on the web](https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block), with some simplifications due to the lack of some web features.

The `top`, `right`, `bottom`, and `left` values of an absolutely positioned element will be
relative to its containing block.

Percentage lengths (e.g.: `width: '50%'` or `padding: '10%'`) applied to absolutely positioned elements will be calculated relatively to the size of its containing block. For example, if the containing block is 100 points wide, then `width: 50%` on an absolutely positioned element will cause it to be 50 points wide.

The following list will help you determine the containing block of any given element:

- If that element has a `position` type of `relative` or `static`, then its containing block is its parent.
- If that element has a `position` type of `absolute`, then its containing block is the nearest ancestor in which one of the following is true:

- It has a `position` type other than `static`
- It has a `transform`

## Going Deeper [​](https://reactnative.dev/docs/next/flexbox\#going-deeper "Direct link to Going Deeper")

Check out the interactive [yoga playground](https://www.yogalayout.dev/playground) that you can use to get a better understanding of flexbox.

We've covered the basics, but there are many other styles you may need for layouts. The full list of props that control layout is documented [here](https://reactnative.dev/docs/next/layout-props).

Additionally, you can see some examples from [Wix Engineers](https://medium.com/wix-engineering/the-full-react-native-layout-cheat-sheet-a4147802405c).

Is this page useful?

- [Flex](https://reactnative.dev/docs/next/flexbox#flex)
- [Flex Direction](https://reactnative.dev/docs/next/flexbox#flex-direction)
- [Layout Direction](https://reactnative.dev/docs/next/flexbox#layout-direction)
- [Justify Content](https://reactnative.dev/docs/next/flexbox#justify-content)
- [Align Items](https://reactnative.dev/docs/next/flexbox#align-items)
- [Align Self](https://reactnative.dev/docs/next/flexbox#align-self)
- [Align Content](https://reactnative.dev/docs/next/flexbox#align-content)
- [Flex Wrap](https://reactnative.dev/docs/next/flexbox#flex-wrap)
- [Flex Basis, Grow, and Shrink](https://reactnative.dev/docs/next/flexbox#flex-basis-grow-and-shrink)
- [Row Gap, Column Gap and Gap](https://reactnative.dev/docs/next/flexbox#row-gap-column-gap-and-gap)
- [Width and Height](https://reactnative.dev/docs/next/flexbox#width-and-height)
- [Position](https://reactnative.dev/docs/next/flexbox#position)
- [The Containing Block](https://reactnative.dev/docs/next/flexbox#the-containing-block)
- [Going Deeper](https://reactnative.dev/docs/next/flexbox#going-deeper)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/global-cancelIdleCallback

[Skip to main content](https://reactnative.dev/docs/next/global-cancelIdleCallback#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

warning

🚧 This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/Window/cancelIdleCallback) for more information.

The global `cancelIdleCallback` function, as defined in Web specifications.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/image

[Skip to main content](https://reactnative.dev/docs/next/image#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/image)** (0.81).

Version: Next

On this page

A React component for displaying different types of images, including network images, static resources, temporary local images, and images from local disk, such as the camera roll.

This example shows fetching and displaying an image from local storage as well as one from network and even from data provided in the `'data:'` uri scheme.

note

For network and data images, you will need to manually specify the dimensions of your image!

## Examples [​](https://reactnative.dev/docs/next/image\#examples "Direct link to Examples")

Image Example - Snack

# Image Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {Image, StyleSheet} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const styles = StyleSheet.create({
container: {
flex: 1,
},
tinyLogo: {
width: 50,
height: 50,
},
logo: {
width: 66,
height: 58,
},
});

style={styles.tinyLogo}
source={require('@expo/snack-static/react-native-logo.png')}

style={styles.tinyLogo}
source={{
uri: 'https://reactnative.dev/img/tiny\_logo.png',
}}

style={styles.logo}
source={{
uri: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAzCAYAAAA6oTAqAAAAEXRFWHRTb2Z0d2FyZQBwbmdjcnVzaEB1SfMAAABQSURBVGje7dSxCQBACARB+2/ab8BEeQNhFi6WSYzYLYudDQYGBgYGBgYGBgYGBgYGBgZmcvDqYGBgmhivGQYGBgYGBgYGBgYGBgYGBgbmQw+P/eMrC5UTVAAAAABJRU5ErkJggg==',
}}

export default DisplayAnImage;

const styles = StyleSheet.create({
container: {
flex: 1,
},
tinyLogo: {
width: 50,
height: 50,
},
logo: {
width: 66,
height: 58,
},
});

style={styles.tinyLogo}
source={require('@expo/snack-static/react-native-logo.png')}

style={styles.tinyLogo}
source={{
uri: 'https://reactnative.dev/img/tiny_logo.png',
}}

style={styles.logo}
source={{
uri: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAzCAYAAAA6oTAqAAAAEXRFWHRTb2Z0d2FyZQBwbmdjcnVzaEB1SfMAAABQSURBVGje7dSxCQBACARB+2/ab8BEeQNhFi6WSYzYLYudDQYGBgYGBgYGBgYGBgYGBgZmcvDqYGBgmhivGQYGBgYGBgYGBgYGBgYGBgbmQw+P/eMrC5UTVAAAAABJRU5ErkJggg==',
}}

Snack

Updating…

PreviewMy DeviceAndroidiOSWeb

You can also add `style` to an image:

Styled Image Example - Snack

# Styled Image Example

const styles = StyleSheet.create({
container: {
flex: 1,
},
stretch: {
width: 50,
height: 200,
resizeMode: 'stretch',
},
});

style={styles.stretch}
source={require('@expo/snack-static/react-native-logo.png')}

export default DisplayAnImageWithStyle;

const styles = StyleSheet.create({
container: {
flex: 1,
},
stretch: {
width: 50,
height: 200,
resizeMode: 'stretch',
},
});

style={styles.stretch}
source={require('@expo/snack-static/react-native-logo.png')}

## GIF and WebP support on Android [​](https://reactnative.dev/docs/next/image\#gif-and-webp-support-on-android "Direct link to GIF and WebP support on Android")

When building your own native code, GIF and WebP are not supported by default on Android.

You will need to add some optional modules in `android/app/build.gradle`, depending on the needs of your app.

groovy

```codeBlockLines_AclH
dependencies {
// If your app supports Android versions before Ice Cream Sandwich (API level 14)
implementation 'com.facebook.fresco:animated-base-support:1.3.0'

// For animated GIF support
implementation 'com.facebook.fresco:animated-gif:3.6.0'

// For WebP support, including animated WebP
implementation 'com.facebook.fresco:animated-webp:3.6.0'
implementation 'com.facebook.fresco:webpsupport:3.6.0'

// For WebP support, without animations
implementation 'com.facebook.fresco:webpsupport:3.6.0'
}

The version listed above may not be updated in time. Please check [`packages/react-native/gradle/libs.versions.toml`](https://github.com/facebook/react-native/blob/main/packages/react-native/gradle/libs.versions.toml) in the main repo to see which fresco version is being used in a specific tagged version.

* * *

# Reference

## Props [​](https://reactnative.dev/docs/next/image\#props "Direct link to Props")

### [View Props](https://reactnative.dev/docs/next/view\#props) [​](https://reactnative.dev/docs/next/image\#view-props "Direct link to view-props")

Inherits [View Props](https://reactnative.dev/docs/next/view#props).

### `accessible` [​](https://reactnative.dev/docs/next/image\#accessible "Direct link to accessible")

When true, indicates the image is an accessibility element.

| Type | Default |
| --- | --- |
| bool | `false` |

### `accessibilityLabel` [​](https://reactnative.dev/docs/next/image\#accessibilitylabel "Direct link to accessibilitylabel")

The text that's read by the screen reader when the user interacts with the image.

| Type |
| --- |
| string |

### `alt` [​](https://reactnative.dev/docs/next/image\#alt "Direct link to alt")

A string that defines an alternative text description of the image, which will be read by the screen reader when the user interacts with it. Using this will automatically mark this element as accessible.

### `blurRadius` [​](https://reactnative.dev/docs/next/image\#blurradius "Direct link to blurradius")

blurRadius: the blur radius of the blur filter added to the image.

| Type |
| --- |
| number |

tip

On IOS, you will need to increase `blurRadius` by more than `5`.

### `capInsets` iOS [​](https://reactnative.dev/docs/next/image\#capinsets-ios "Direct link to capinsets-ios")

When the image is resized, the corners of the size specified by `capInsets` will stay a fixed size, but the center content and borders of the image will be stretched. This is useful for creating resizable rounded buttons, shadows, and other resizable assets. More info in the [official Apple documentation](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIImage_Class/index.html#//apple_ref/occ/instm/UIImage/resizableImageWithCapInsets).

| Type |
| --- |
| [Rect](https://reactnative.dev/docs/next/rect) |

### `crossOrigin` [​](https://reactnative.dev/docs/next/image\#crossorigin "Direct link to crossorigin")

A string of a keyword specifying the CORS mode to use when fetching the image resource. It works similar to crossorigin attribute in HTML.

- `anonymous`: No exchange of user credentials in the image request.
- `use-credentials`: Sets `Access-Control-Allow-Credentials` header value to `true` in the image request.

| Type | Default |
| --- | --- |
| enum( `'anonymous'`, `'use-credentials'`) | `'anonymous'` |

### `defaultSource` [​](https://reactnative.dev/docs/next/image\#defaultsource "Direct link to defaultsource")

A static image to display while loading the image source.

| Type |
| --- |
| [ImageSource](https://reactnative.dev/docs/next/image#imagesource) |

On Android, the default source prop is ignored on debug builds.

### `fadeDuration` Android [​](https://reactnative.dev/docs/next/image\#fadeduration-android "Direct link to fadeduration-android")

Fade animation duration in milliseconds.

| Type | Default |
| --- | --- |
| number | `300` |

### `height` [​](https://reactnative.dev/docs/next/image\#height "Direct link to height")

Height of the image component.

### `loadingIndicatorSource` [​](https://reactnative.dev/docs/next/image\#loadingindicatorsource "Direct link to loadingindicatorsource")

Similarly to `source`, this property represents the resource used to render the loading indicator for the image. The loading indicator is displayed until image is ready to be displayed, typically after the image is downloaded.

| Type |
| --- |
| [ImageSource](https://reactnative.dev/docs/next/image#imagesource) ( `uri` only), number |

### `onError` [​](https://reactnative.dev/docs/next/image\#onerror "Direct link to onerror")

Invoked on load error.

| Type |
| --- |

### `onLayout` [​](https://reactnative.dev/docs/next/image\#onlayout "Direct link to onlayout")

Invoked on mount and on layout changes.

### `onLoad` [​](https://reactnative.dev/docs/next/image\#onload "Direct link to onload")

Invoked when load completes successfully.

### `onLoadEnd` [​](https://reactnative.dev/docs/next/image\#onloadend "Direct link to onloadend")

Invoked when load either succeeds or fails.

### `onLoadStart` [​](https://reactnative.dev/docs/next/image\#onloadstart "Direct link to onloadstart")

Invoked on load start.

### `onPartialLoad` iOS [​](https://reactnative.dev/docs/next/image\#onpartialload-ios "Direct link to onpartialload-ios")

Invoked when a partial load of the image is complete. The definition of what constitutes a "partial load" is loader specific though this is meant for progressive JPEG loads.

### `onProgress` [​](https://reactnative.dev/docs/next/image\#onprogress "Direct link to onprogress")

Invoked on download progress.

### `progressiveRenderingEnabled` Android [​](https://reactnative.dev/docs/next/image\#progressiverenderingenabled-android "Direct link to progressiverenderingenabled-android")

When `true`, enables progressive jpeg streaming - [https://frescolib.org/docs/progressive-jpegs](https://frescolib.org/docs/progressive-jpegs).

### `referrerPolicy` [​](https://reactnative.dev/docs/next/image\#referrerpolicy "Direct link to referrerpolicy")

A string indicating which referrer to use when fetching the resource. Sets the value for `Referrer-Policy` header in the image request. Works similar to `referrerpolicy` attribute in HTML.

| Type | Default |
| --- | --- |
| enum( `'no-referrer'`, `'no-referrer-when-downgrade'`, `'origin'`, `'origin-when-cross-origin'`, `'same-origin'`, `'strict-origin'`, `'strict-origin-when-cross-origin'`, `'unsafe-url'`) | `'strict-origin-when-cross-origin'` |

### `ref` [​](https://reactnative.dev/docs/next/image\#ref "Direct link to ref")

A ref setter that will be assigned an [element node](https://reactnative.dev/docs/next/element-nodes) when mounted.

### `resizeMethod` Android [​](https://reactnative.dev/docs/next/image\#resizemethod-android "Direct link to resizemethod-android")

The mechanism that should be used to resize the image when the image's dimensions differ from the image view's dimensions. Defaults to `auto`.

- `auto`: Use heuristics to pick between `resize` and `scale`.

- `resize`: A software operation which changes the encoded image in memory before it gets decoded. This should be used instead of `scale` when the image is much larger than the view.

- `scale`: The image gets drawn downscaled or upscaled. Compared to `resize`, `scale` is faster (usually hardware accelerated) and produces higher quality images. This should be used if the image is smaller than the view. It should also be used if the image is slightly bigger than the view.

- `none`: No sampling is performed and the image is displayed in its full resolution. This should only be used in rare circumstances because it is considered unsafe as Android will throw a runtime exception when trying to render images that consume too much memory.

More details about `resize` and `scale` can be found at [https://frescolib.org/docs/resizing](https://frescolib.org/docs/resizing).

| Type | Default |
| --- | --- |
| enum( `'auto'`, `'resize'`, `'scale'`, `'none'`) | `'auto'` |

### `resizeMode` [​](https://reactnative.dev/docs/next/image\#resizemode "Direct link to resizemode")

Determines how to resize the image when the frame doesn't match the raw image dimensions. Defaults to `cover`.

- `cover`: Scale the image uniformly (maintain the image's aspect ratio) so that
- both dimensions (width and height) of the image will be equal to or larger than the corresponding dimension of the view (minus padding)
- at least one dimension of the scaled image will be equal to the corresponding dimension of the view (minus padding)
- `contain`: Scale the image uniformly (maintain the image's aspect ratio) so that both dimensions (width and height) of the image will be equal to or less than the corresponding dimension of the view (minus padding).

- `stretch`: Scale width and height independently, This may change the aspect ratio of the src.

- `repeat`: Repeat the image to cover the frame of the view. The image will keep its size and aspect ratio, unless it is larger than the view, in which case it will be scaled down uniformly so that it is contained in the view.

- `center`: Center the image in the view along both dimensions. If the image is larger than the view, scale it down uniformly so that it is contained in the view.

| Type | Default |
| --- | --- |
| enum( `'cover'`, `'contain'`, `'stretch'`, `'repeat'`, `'center'`) | `'cover'` |

### `resizeMultiplier` Android [​](https://reactnative.dev/docs/next/image\#resizemultiplier-android "Direct link to resizemultiplier-android")

When the `resizeMethod` is set to `resize`, the destination dimensions are multiplied by this value. The `scale` method is used to perform the remainder of the resize. A default of `1.0` means the bitmap size is designed to fit the destination dimensions. A multiplier greater than `1.0` will set the resize options larger than that of the destination dimensions, and the resulting bitmap will be scaled down from the hardware size. Defaults to `1.0`.

This prop is most useful in cases where the destination dimensions are quite small and the source image is significantly larger. The `resize` resize method performs downsampling and significant image quality is lost between the source and destination image sizes, often resulting in a blurry image. By using a multiplier, the decoded image is slightly larger than the target size but smaller than the source image (if the source image is large enough). This allows aliasing artifacts to produce faux quality through scaling operations on the multiplied image.

If you have a source image with dimensions 200x200 and destination dimensions of 24x24, a resizeMultiplier of `2.0` will tell Fresco to downsample the image to 48x48. Fresco picks the closest power of 2 (so, 50x50) and decodes the image into a bitmap of that size. Without the multiplier, the closest power of 2 would be 25x25. The resultant image is scaled down by the system.

| Type | Default |
| --- | --- |
| number | `1.0` |

### `source` [​](https://reactnative.dev/docs/next/image\#source "Direct link to source")

The image source (either a remote URL or a local file resource).

This prop can also contain several remote URLs, specified together with their width and height and potentially with scale/other URI arguments. The native side will then choose the best `uri` to display based on the measured size of the image container. A `cache` property can be added to control how networked request interacts with the local cache. (For more information see [Cache Control for Images](https://reactnative.dev/docs/next/images#cache-control)).

The currently supported formats are `png`, `jpg`, `jpeg`, `bmp`, `gif`, `webp`, `psd` (iOS only). In addition, iOS supports several RAW image formats. Refer to Apple's documentation for the current list of supported camera models (for iOS 12, see [https://support.apple.com/en-ca/HT208967](https://support.apple.com/en-ca/HT208967)).

Please note that the `webp` format is supported on iOS **only** when bundled with the JavaScript code.

### `src` [​](https://reactnative.dev/docs/next/image\#src "Direct link to src")

A string representing the remote URL of the image. This prop has precedence over `source` prop.

**Example:** `src={'https://reactnative.dev/img/tiny_logo.png'}`

### `srcSet` [​](https://reactnative.dev/docs/next/image\#srcset "Direct link to srcset")

A string representing comma separated list of possible candidate image source. Each image source contains a URL of an image and a pixel density descriptor. If no descriptor is specified, it defaults to descriptor of `1x`.

If `srcSet` does not contain a `1x` descriptor, the value in `src` is used as image source with `1x` descriptor (if provided).

This prop has precedence over both the `src` and `source` props.

**Example:** `srcSet={'https://reactnative.dev/img/tiny_logo.png 1x, https://reactnative.dev/img/header_logo.svg 2x'}`

### `style` [​](https://reactnative.dev/docs/next/image\#style "Direct link to style")

| Type |
| --- |
| [Image Style Props](https://reactnative.dev/docs/next/image-style-props#props), [Layout Props](https://reactnative.dev/docs/next/layout-props#props), [Shadow Props](https://reactnative.dev/docs/next/shadow-props#props), [Transforms](https://reactnative.dev/docs/next/transforms#props) |

### `testID` [​](https://reactnative.dev/docs/next/image\#testid "Direct link to testid")

A unique identifier for this element to be used in UI Automation testing scripts.

### `tintColor` [​](https://reactnative.dev/docs/next/image\#tintcolor "Direct link to tintcolor")

Changes the color of all non-transparent pixels to the `tintColor`.

| Type |
| --- |
| [color](https://reactnative.dev/docs/next/colors) |

### `width` [​](https://reactnative.dev/docs/next/image\#width "Direct link to width")

Width of the image component.

## Methods [​](https://reactnative.dev/docs/next/image\#methods "Direct link to Methods")

### `abortPrefetch()` Android [​](https://reactnative.dev/docs/next/image\#abortprefetch-android "Direct link to abortprefetch-android")

tsx

```codeBlockLines_AclH
static abortPrefetch(requestId: number);

Abort prefetch request.

**Parameters:**

| Name | Type | Description |
| --- | --- | --- |

### `getSize()` [​](https://reactnative.dev/docs/next/image\#getsize "Direct link to getsize")

```codeBlockLines_AclH

Retrieve the width and height (in pixels) of an image prior to displaying it. This method can fail if the image cannot be found, or fails to download.

In order to retrieve the image dimensions, the image may first need to be loaded or downloaded, after which it will be cached. This means that in principle you could use this method to preload images, however it is not optimized for that purpose, and may in future be implemented in a way that does not fully load/download the image data. A proper, supported way to preload images will be provided as a separate API.

### `getSizeWithHeaders()` [​](https://reactnative.dev/docs/next/image\#getsizewithheaders "Direct link to getsizewithheaders")

```codeBlockLines_AclH
static getSizeWithHeaders(
uri: string,
headers: {[index: string]: string}

Retrieve the width and height (in pixels) of an image prior to displaying it with the ability to provide the headers for the request. This method can fail if the image cannot be found, or fails to download. It also does not work for static image resources.

### `prefetch()` [​](https://reactnative.dev/docs/next/image\#prefetch "Direct link to prefetch")

```codeBlockLines_AclH
await Image.prefetch(url);

Prefetches a remote image for later use by downloading it to the disk cache. Returns a promise which resolves to a boolean.

### `queryCache()` [​](https://reactnative.dev/docs/next/image\#querycache "Direct link to querycache")

```codeBlockLines_AclH
static queryCache(
urls: string[],
): Promise<Record<string, 'memory' | 'disk' | 'disk/memory'>>;

Perform cache interrogation. Returns a promise which resolves to a mapping from URL to cache status, such as "disk", "memory" or "disk/memory". If a requested URL is not in the mapping, it means it's not in the cache.

### `resolveAssetSource()` [​](https://reactnative.dev/docs/next/image\#resolveassetsource "Direct link to resolveassetsource")

```codeBlockLines_AclH
static resolveAssetSource(source: ImageSourcePropType): {
height: number;
width: number;
scale: number;
uri: string;
};

Resolves an asset reference into an object which has the properties `uri`, `scale`, `width`, and `height`.

## Type Definitions [​](https://reactnative.dev/docs/next/image\#type-definitions "Direct link to Type Definitions")

### ImageCacheEnum iOS [​](https://reactnative.dev/docs/next/image\#imagecacheenum-ios "Direct link to imagecacheenum-ios")

Enum which can be used to set the cache handling or strategy for the potentially cached responses.

| Type | Default |
| --- | --- |
| enum( `'default'`, `'reload'`, `'force-cache'`, `'only-if-cached'`) | `'default'` |

- `default`: Use the native platforms default strategy.
- `reload`: The data for the URL will be loaded from the originating source. No existing cache data should be used to satisfy a URL load request.
- `force-cache`: The existing cached data will be used to satisfy the request, regardless of its age or expiration date. If there is no existing data in the cache corresponding the request, the data is loaded from the originating source.
- `only-if-cached`: The existing cache data will be used to satisfy a request, regardless of its age or expiration date. If there is no existing data in the cache corresponding to a URL load request, no attempt is made to load the data from the originating source, and the load is considered to have failed.

### ImageLoadEvent [​](https://reactnative.dev/docs/next/image\#imageloadevent "Direct link to ImageLoadEvent")

Object returned in the `onLoad` callback.

| Type |
| --- |
| object |

**Properties:**

| Name | Type | Description |
| --- | --- | --- |
| source | object | The [source object](https://reactnative.dev/docs/next/image#source-object) |

#### Source Object [​](https://reactnative.dev/docs/next/image\#source-object "Direct link to Source Object")

| Name | Type | Description |
| --- | --- | --- |
| width | number | The width of loaded image. |
| height | number | The height of loaded image. |
| uri | string | A string representing the resource identifier for the image. |

### ImageSource [​](https://reactnative.dev/docs/next/image\#imagesource "Direct link to ImageSource")

| Type |
| --- |
| object, array of objects, number |

**Properties (if passing as object or array of objects):**

| Name | Type | Description |
| --- | --- | --- |
| uri | string | A string representing the resource identifier for the image, which could be an http address, a local file path, or the name of a static image resource. |

| scale | number | Used to indicate the scale factor of the image. Defaults to `1.0` if unspecified, meaning that one image pixel equates to one display point / DIP. |

| method | string | The HTTP Method to use. Defaults to `'GET'` if not specified. |
| headers | object | An object representing the HTTP headers to send along with the request for a remote image. |
| body | string | The HTTP body to send with the request. This must be a valid UTF-8 string, and will be sent exactly as specified, with no additional encoding (e.g. URL-escaping or base64) applied. |

**If passing a number:**

- `number` \- opaque type returned by something like `require('./image.jpg')`.

Is this page useful?

- [Examples](https://reactnative.dev/docs/next/image#examples)
- [GIF and WebP support on Android](https://reactnative.dev/docs/next/image#gif-and-webp-support-on-android)
- [Props](https://reactnative.dev/docs/next/image#props)
- [View Props](https://reactnative.dev/docs/next/image#view-props)
- [`accessible`](https://reactnative.dev/docs/next/image#accessible)
- [`accessibilityLabel`](https://reactnative.dev/docs/next/image#accessibilitylabel)
- [`alt`](https://reactnative.dev/docs/next/image#alt)
- [`blurRadius`](https://reactnative.dev/docs/next/image#blurradius)
- [`capInsets` \\
iOS](https://reactnative.dev/docs/next/image#capinsets-ios)
- [`crossOrigin`](https://reactnative.dev/docs/next/image#crossorigin)
- [`defaultSource`](https://reactnative.dev/docs/next/image#defaultsource)
- [`fadeDuration` \\
Android](https://reactnative.dev/docs/next/image#fadeduration-android)
- [`height`](https://reactnative.dev/docs/next/image#height)
- [`loadingIndicatorSource`](https://reactnative.dev/docs/next/image#loadingindicatorsource)
- [`onError`](https://reactnative.dev/docs/next/image#onerror)
- [`onLayout`](https://reactnative.dev/docs/next/image#onlayout)
- [`onLoad`](https://reactnative.dev/docs/next/image#onload)
- [`onLoadEnd`](https://reactnative.dev/docs/next/image#onloadend)
- [`onLoadStart`](https://reactnative.dev/docs/next/image#onloadstart)
- [`onPartialLoad` \\
iOS](https://reactnative.dev/docs/next/image#onpartialload-ios)
- [`onProgress`](https://reactnative.dev/docs/next/image#onprogress)
- [`progressiveRenderingEnabled` \\
Android](https://reactnative.dev/docs/next/image#progressiverenderingenabled-android)
- [`referrerPolicy`](https://reactnative.dev/docs/next/image#referrerpolicy)
- [`ref`](https://reactnative.dev/docs/next/image#ref)
- [`resizeMethod` \\
Android](https://reactnative.dev/docs/next/image#resizemethod-android)
- [`resizeMode`](https://reactnative.dev/docs/next/image#resizemode)
- [`resizeMultiplier` \\
Android](https://reactnative.dev/docs/next/image#resizemultiplier-android)
- [`source`](https://reactnative.dev/docs/next/image#source)
- [`src`](https://reactnative.dev/docs/next/image#src)
- [`srcSet`](https://reactnative.dev/docs/next/image#srcset)
- [`style`](https://reactnative.dev/docs/next/image#style)
- [`testID`](https://reactnative.dev/docs/next/image#testid)
- [`tintColor`](https://reactnative.dev/docs/next/image#tintcolor)
- [`width`](https://reactnative.dev/docs/next/image#width)
- [Methods](https://reactnative.dev/docs/next/image#methods)
- [`abortPrefetch()` \\
Android](https://reactnative.dev/docs/next/image#abortprefetch-android)
- [`getSize()`](https://reactnative.dev/docs/next/image#getsize)
- [`getSizeWithHeaders()`](https://reactnative.dev/docs/next/image#getsizewithheaders)
- [`prefetch()`](https://reactnative.dev/docs/next/image#prefetch)
- [`queryCache()`](https://reactnative.dev/docs/next/image#querycache)
- [`resolveAssetSource()`](https://reactnative.dev/docs/next/image#resolveassetsource)
- [Type Definitions](https://reactnative.dev/docs/next/image#type-definitions)
- [ImageCacheEnum \\
iOS](https://reactnative.dev/docs/next/image#imagecacheenum-ios)
- [ImageLoadEvent](https://reactnative.dev/docs/next/image#imageloadevent)
- [ImageSource](https://reactnative.dev/docs/next/image#imagesource)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/global-window

[Skip to main content](https://reactnative.dev/docs/next/global-window#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

[`window`](https://developer.mozilla.org/en-US/docs/Web/API/Window/window) is an alias for [`globalThis`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis), as defined in Web specifications.

The use of `globalThis` is recommended over `window`.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/imagepickerios

[Skip to main content](https://reactnative.dev/docs/next/imagepickerios#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/imagepickerios)** (0.81).

Version: Next

Removed from React Native

Use one of the [community packages](https://reactnative.directory/?search=image+picker) instead.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/global-clearTimeout

[Skip to main content](https://reactnative.dev/docs/next/global-clearTimeout#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

warning

🚧 This page is work in progress, so please refer to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/API/Window/clearTimeout) for more information.

The global `clearTimeout` function, as defined in Web specifications.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/images

[Skip to main content](https://reactnative.dev/docs/next/images#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/images)** (0.81).

Version: Next

On this page

## Static Image Resources [​](https://reactnative.dev/docs/next/images\#static-image-resources "Direct link to Static Image Resources")

React Native provides a unified way of managing images and other media assets in your Android and iOS apps. To add a static image to your app, place it somewhere in your source code tree and reference it like this:

tsx

```codeBlockLines_AclH

The image name is resolved the same way JS modules are resolved. In the example above, the bundler will look for `my-icon.png` in the same folder as the component that requires it.

You can use the `@2x` and `@3x` suffixes to provide images for different screen densities. If you have the following file structure:

```codeBlockLines_AclH
.
├── button.js
└── img
├── check.png
├── check@2x.png
└── check@3x.png

...and `button.js` code contains:

...the bundler will bundle and serve the image corresponding to device's screen density. For example, `check@2x.png`, will be used on an iPhone 7, while `check@3x.png` will be used on an iPhone 7 Plus or a Nexus 5. If there is no image matching the screen density, the closest best option will be selected.

On Windows, you might need to restart the bundler if you add new images to your project.

Here are some benefits that you get:

1. Same system on Android and iOS.
2. Images live in the same folder as your JavaScript code. Components are self-contained.
3. No global namespace, i.e. you don't have to worry about name collisions.
4. Only the images that are actually used will be packaged into your app.
5. Adding and changing images doesn't require app recompilation, you can refresh the simulator as you normally do.
6. The bundler knows the image dimensions, no need to duplicate it in the code.
7. Images can be distributed via [npm](https://www.npmjs.com/) packages.

In order for this to work, the image name in `require` has to be known statically.

```codeBlockLines_AclH
// GOOD

// BAD
const icon = this.props.active
? 'my-icon-active'
: 'my-icon-inactive';

// GOOD
const icon = this.props.active
? require('./my-icon-active.png')
: require('./my-icon-inactive.png');

Note that image sources required this way include size (width, height) info for the Image. If you need to scale the image dynamically (i.e. via flex), you may need to manually set `{width: undefined, height: undefined}` on the style attribute.

## Static Non-Image Resources [​](https://reactnative.dev/docs/next/images\#static-non-image-resources "Direct link to Static Non-Image Resources")

The `require` syntax described above can be used to statically include audio, video or document files in your project as well. Most common file types are supported including `.mp3`, `.wav`, `.mp4`, `.mov`, `.html` and `.pdf`. See [bundler defaults](https://github.com/facebook/metro/blob/master/packages/metro-config/src/defaults/defaults.js#L14-L44) for the full list.

You can add support for other types by adding an [`assetExts` resolver option](https://metrobundler.dev/docs/configuration#resolver-options) in your [Metro configuration](https://metrobundler.dev/docs/configuration).

A caveat is that videos must use absolute positioning instead of `flexGrow`, since size info is not currently passed for non-image assets. This limitation doesn't occur for videos that are linked directly into Xcode or the Assets folder for Android.

## Images From Hybrid App's Resources [​](https://reactnative.dev/docs/next/images\#images-from-hybrid-apps-resources "Direct link to Images From Hybrid App's Resources")

If you are building a hybrid app (some UIs in React Native, some UIs in platform code) you can still use images that are already bundled into the app.

For images included via Xcode asset catalogs or in the Android drawable folder, use the image name without the extension:

```codeBlockLines_AclH
<Image
source={{uri: 'app_icon'}}
style={{width: 40, height: 40}}

For images in the Android assets folder, use the `asset:/` scheme:

```codeBlockLines_AclH
<Image
source={{uri: 'asset:/app_icon.png'}}
style={{width: 40, height: 40}}

These approaches provide no safety checks. It's up to you to guarantee that those images are available in the application. Also you have to specify image dimensions manually.

## Network Images [​](https://reactnative.dev/docs/next/images\#network-images "Direct link to Network Images")

Many of the images you will display in your app will not be available at compile time, or you will want to load some dynamically to keep the binary size down. Unlike with static resources, _you will need to manually specify the dimensions of your image_. It's highly recommended that you use https as well in order to satisfy [App Transport Security](https://reactnative.dev/docs/next/publishing-to-app-store#1-enable-app-transport-security) requirements on iOS.

```codeBlockLines_AclH
// GOOD
<Image source={{uri: 'https://reactjs.org/logo-og.png'}}

### Network Requests for Images [​](https://reactnative.dev/docs/next/images\#network-requests-for-images "Direct link to Network Requests for Images")

If you would like to set such things as the HTTP-Verb, Headers or a Body along with the image request, you may do this by defining these properties on the source object:

```codeBlockLines_AclH
<Image
source={{
uri: 'https://reactjs.org/logo-og.png',
method: 'POST',
headers: {
Pragma: 'no-cache',
},
body: 'Your Body goes here',
}}
style={{width: 400, height: 400}}

## URI Data Images [​](https://reactnative.dev/docs/next/images\#uri-data-images "Direct link to URI Data Images")

Sometimes, you might be getting encoded image data from a REST API call. You can use the `'data:'` URI scheme to use these images. Same as for network resources, _you will need to manually specify the dimensions of your image_.

info

This is recommended for very small and dynamic images only, like icons in a list from a DB.

```codeBlockLines_AclH
// include at least width and height!
<Image
style={{
width: 51,
height: 51,
resizeMode: 'contain',
}}
source={{
uri: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAzCAYAAAA6oTAqAAAAEXRFWHRTb2Z0d2FyZQBwbmdjcnVzaEB1SfMAAABQSURBVGje7dSxCQBACARB+2/ab8BEeQNhFi6WSYzYLYudDQYGBgYGBgYGBgYGBgYGBgZmcvDqYGBgmhivGQYGBgYGBgYGBgYGBgYGBgbmQw+P/eMrC5UTVAAAAABJRU5ErkJggg==',
}}

### Cache Control [​](https://reactnative.dev/docs/next/images\#cache-control "Direct link to Cache Control")

In some cases you might only want to display an image if it is already in the local cache, i.e. a low resolution placeholder until a higher resolution is available. In other cases you do not care if the image is outdated and are willing to display an outdated image to save bandwidth. The `cache` source property gives you control over how the network layer interacts with the cache.

- `default`: Use the native platforms default strategy.
- `reload`: The data for the URL will be loaded from the originating source. No existing cache data should be used to satisfy a URL load request.
- `force-cache`: The existing cached data will be used to satisfy the request, regardless of its age or expiration date. If there is no existing data in the cache corresponding the request, the data is loaded from the originating source.
- `only-if-cached`: The existing cache data will be used to satisfy a request, regardless of its age or expiration date. If there is no existing data in the cache corresponding to a URL load request, no attempt is made to load the data from the originating source, and the load is considered to have failed.

```codeBlockLines_AclH
<Image
source={{
uri: 'https://reactjs.org/logo-og.png',
cache: 'only-if-cached',
}}
style={{width: 400, height: 400}}

## Local Filesystem Images [​](https://reactnative.dev/docs/next/images\#local-filesystem-images "Direct link to Local Filesystem Images")

See [CameraRoll](https://github.com/react-native-community/react-native-cameraroll) for an example of using local resources that are outside of `Images.xcassets`.

### Drawable resources [​](https://reactnative.dev/docs/next/images\#drawable-resources "Direct link to Drawable resources")

Android supports loading [drawable resources](https://developer.android.com/guide/topics/resources/drawable-resource) via the `xml` file type. This means you can use [vector drawables](https://developer.android.com/develop/ui/views/graphics/vector-drawable-resources) for rendering icons or [shape drawables](https://developer.android.com/guide/topics/resources/drawable-resource#Shape) for, well, drawing shapes! You can import and use these resource types the same as any other [static resource](https://reactnative.dev/docs/next/images#static-image-resources) or [hybrid resource](https://reactnative.dev/docs/next/images#images-from-hybrid-apps-resources). You have to specify image dimensions manually.

For static drawables that live alongside your JS code, use the `require` or `import` syntax (both work the same):

```codeBlockLines_AclH
<Image
source={require('./img/my_icon.xml')}
style={{width: 40, height: 40}}

For drawables included in the Android drawable folder (i.e. `res/drawable`), use the resource name without the extension:

```codeBlockLines_AclH
<Image
source={{uri: 'my_icon'}}
style={{width: 40, height: 40}}

The one key difference between drawable resources and other image types is that the asset must be referenced at compile-time of the Android application as Android needs to run the [Android Asset Packaging Tool (AAPT)](https://developer.android.com/tools/aapt2) to package the asset. Binary XML, the file format AAPT creates, cannot be loaded over the network by Metro. If you change the directory or name of an asset, you will need to rebuild the Android application each time.

#### Creating XML drawable resources [​](https://reactnative.dev/docs/next/images\#creating-xml-drawable-resources "Direct link to Creating XML drawable resources")

Android provides comprehensive documentation on each of the supported drawable resource types in its [Drawable resources](https://developer.android.com/guide/topics/resources/drawable-resource) guide, along with examples of raw XML files. You can utilize tools from Android Studio like the [Vector Asset Studio](https://developer.android.com/studio/write/vector-asset-studio) to create vector drawables from Scalable Vector Graphic (SVG) and Adobe Photoshop Document (PSD) files.

You should try to avoid referencing other resources in the XML file you create if you want to treat your XML file as a static image resource (i.e. with an `import` or `require` statement). If you wish to utilize references to other drawables or attributes, like [color state lists](https://developer.android.com/guide/topics/resources/color-list-resource) or [dimension resources](https://developer.android.com/guide/topics/resources/more-resources#Dimension), you should include your drawable as a [hybrid resource](https://reactnative.dev/docs/next/images#images-from-hybrid-apps-resources) and import it by name.

### Best Camera Roll Image [​](https://reactnative.dev/docs/next/images\#best-camera-roll-image "Direct link to Best Camera Roll Image")

iOS saves multiple sizes for the same image in your Camera Roll, it is very important to pick the one that's as close as possible for performance reasons. You wouldn't want to use the full quality 3264x2448 image as source when displaying a 200x200 thumbnail. If there's an exact match, React Native will pick it, otherwise it's going to use the first one that's at least 50% bigger in order to avoid blur when resizing from a close size. All of this is done by default so you don't have to worry about writing the tedious (and error prone) code to do it yourself.

## Why Not Automatically Size Everything? [​](https://reactnative.dev/docs/next/images\#why-not-automatically-size-everything "Direct link to Why Not Automatically Size Everything?")

_In the browser_ if you don't give a size to an image, the browser is going to render a 0x0 element, download the image, and then render the image based with the correct size. The big issue with this behavior is that your UI is going to jump all around as images load, this makes for a very bad user experience. This is called [Cumulative Layout Shift](https://web.dev/cls/).

_In React Native_ this behavior is intentionally not implemented. It is more work for the developer to know the dimensions (or aspect ratio) of the remote image in advance, but we believe that it leads to a better user experience. Static images loaded from the app bundle via the `require('./my-icon.png')` syntax _can be automatically sized_ because their dimensions are available immediately at the time of mounting.

For example, the result of `require('./my-icon.png')` might be:

```codeBlockLines_AclH
{"__packager_asset":true,"uri":"my-icon.png","width":591,"height":573}

## Source as an object [​](https://reactnative.dev/docs/next/images\#source-as-an-object "Direct link to Source as an object")

In React Native, one interesting decision is that the `src` attribute is named `source` and doesn't take a string but an object with a `uri` attribute.

On the infrastructure side, the reason is that it allows us to attach metadata to this object. For example if you are using `require('./my-icon.png')`, then we add information about its actual location and size (don't rely on this fact, it might change in the future!). This is also future proofing, for example we may want to support sprites at some point, instead of outputting `{uri: ...}`, we can output `{uri: ..., crop: {left: 10, top: 50, width: 20, height: 40}}` and transparently support spriting on all the existing call sites.

On the user side, this lets you annotate the object with useful attributes such as the dimension of the image in order to compute the size it's going to be displayed in. Feel free to use it as your data structure to store more information about your image.

## Background Image via Nesting [​](https://reactnative.dev/docs/next/images\#background-image-via-nesting "Direct link to Background Image via Nesting")

```codeBlockLines_AclH
return (

Note that you must specify some width and height style attributes.

## iOS Border Radius Styles [​](https://reactnative.dev/docs/next/images\#ios-border-radius-styles "Direct link to iOS Border Radius Styles")

Please note that the following corner specific, border radius style properties might be ignored by iOS's image component:

- `borderTopLeftRadius`
- `borderTopRightRadius`
- `borderBottomLeftRadius`
- `borderBottomRightRadius`

## Off-thread Decoding [​](https://reactnative.dev/docs/next/images\#off-thread-decoding "Direct link to Off-thread Decoding")

Image decoding can take more than a frame-worth of time. This is one of the major sources of frame drops on the web because decoding is done in the main thread. In React Native, image decoding is done in a different thread. In practice, you already need to handle the case when the image is not downloaded yet, so displaying the placeholder for a few more frames while it is decoding does not require any code change.

## Configuring iOS Image Cache Limits [​](https://reactnative.dev/docs/next/images\#configuring-ios-image-cache-limits "Direct link to Configuring iOS Image Cache Limits")

On iOS, we expose an API to override React Native's default image cache limits. This should be called from within your native AppDelegate code (e.g. within `didFinishLaunchingWithOptions`).

objectivec

```codeBlockLines_AclH
RCTSetImageCacheLimits(4*1024*1024, 200*1024*1024);

**Parameters:**

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| imageSizeLimit | number | Yes | Image cache size limit. |
| totalCostLimit | number | Yes | Total cache cost limit. |

In the above code example the image size limit is set to 4 MB and the total cost limit is set to 200 MB.

Is this page useful?

- [Static Image Resources](https://reactnative.dev/docs/next/images#static-image-resources)
- [Static Non-Image Resources](https://reactnative.dev/docs/next/images#static-non-image-resources)
- [Images From Hybrid App's Resources](https://reactnative.dev/docs/next/images#images-from-hybrid-apps-resources)
- [Network Images](https://reactnative.dev/docs/next/images#network-images)
- [Network Requests for Images](https://reactnative.dev/docs/next/images#network-requests-for-images)
- [URI Data Images](https://reactnative.dev/docs/next/images#uri-data-images)
- [Cache Control](https://reactnative.dev/docs/next/images#cache-control)
- [Local Filesystem Images](https://reactnative.dev/docs/next/images#local-filesystem-images)
- [Drawable resources](https://reactnative.dev/docs/next/images#drawable-resources)
- [Best Camera Roll Image](https://reactnative.dev/docs/next/images#best-camera-roll-image)
- [Why Not Automatically Size Everything?](https://reactnative.dev/docs/next/images#why-not-automatically-size-everything)
- [Source as an object](https://reactnative.dev/docs/next/images#source-as-an-object)
- [Background Image via Nesting](https://reactnative.dev/docs/next/images#background-image-via-nesting)
- [iOS Border Radius Styles](https://reactnative.dev/docs/next/images#ios-border-radius-styles)
- [Off-thread Decoding](https://reactnative.dev/docs/next/images#off-thread-decoding)
- [Configuring iOS Image Cache Limits](https://reactnative.dev/docs/next/images#configuring-ios-image-cache-limits)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/interactionmanager

[Skip to main content](https://reactnative.dev/docs/next/interactionmanager#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/interactionmanager)** (0.81).

Version: Next

On this page

Deprecated

Avoid long-running work and use [`requestIdleCallback`](https://reactnative.dev/docs/next/global-requestIdleCallback) instead.

InteractionManager allows long-running work to be scheduled after any interactions/animations have completed. In particular, this allows JavaScript animations to run smoothly.

Applications can schedule tasks to run after interactions with the following:

tsx

```codeBlockLines_AclH

// ...long-running synchronous task...
});

Compare this to other scheduling alternatives:

- `requestAnimationFrame()` for code that animates a view over time.
- `setImmediate/setTimeout()` run code later, note this may delay animations.
- `runAfterInteractions()` run code later, without delaying active animations.

The touch handling system considers one or more active touches to be an 'interaction' and will delay `runAfterInteractions()` callbacks until all touches have ended or been cancelled.

InteractionManager also allows applications to register animations by creating an interaction 'handle' on animation start, and clearing it upon completion:

```codeBlockLines_AclH
const handle = InteractionManager.createInteractionHandle();
// run animation... (`runAfterInteractions` tasks are queued)
// later, on animation completion:
InteractionManager.clearInteractionHandle(handle);
// queued tasks run if all handles were cleared

`runAfterInteractions` takes either a plain callback function, or a `PromiseTask` object with a `gen` method that returns a `Promise`. If a `PromiseTask` is supplied, then it is fully resolved (including asynchronous dependencies that also schedule more tasks via `runAfterInteractions`) before starting on the next task that might have been queued up synchronously earlier.

By default, queued tasks are executed together in a loop in one `setImmediate` batch. If `setDeadline` is called with a positive number, then tasks will only be executed until the deadline (in terms of js event loop run time) approaches, at which point execution will yield via setTimeout, allowing events such as touches to start interactions and block queued tasks from executing, making apps more responsive.

* * *

## Example [​](https://reactnative.dev/docs/next/interactionmanager\#example "Direct link to Example")

### Basic [​](https://reactnative.dev/docs/next/interactionmanager\#basic "Direct link to Basic")

- TypeScript
- JavaScript

### Advanced [​](https://reactnative.dev/docs/next/interactionmanager\#advanced "Direct link to Advanced")

# Reference

## Methods [​](https://reactnative.dev/docs/next/interactionmanager\#methods "Direct link to Methods")

### `runAfterInteractions()` [​](https://reactnative.dev/docs/next/interactionmanager\#runafterinteractions "Direct link to runafterinteractions")

Schedule a function to run after all interactions have completed. Returns a cancellable "promise".

### `createInteractionHandle()` [​](https://reactnative.dev/docs/next/interactionmanager\#createinteractionhandle "Direct link to createinteractionhandle")

```codeBlockLines_AclH
static createInteractionHandle(): Handle;

Notify manager that an interaction has started.

### `clearInteractionHandle()` [​](https://reactnative.dev/docs/next/interactionmanager\#clearinteractionhandle "Direct link to clearinteractionhandle")

```codeBlockLines_AclH
static clearInteractionHandle(handle: Handle);

Notify manager that an interaction has completed.

### `setDeadline()` [​](https://reactnative.dev/docs/next/interactionmanager\#setdeadline "Direct link to setdeadline")

```codeBlockLines_AclH
static setDeadline(deadline: number);

A positive number will use setTimeout to schedule any tasks after the eventLoopRunningTime hits the deadline value, otherwise all tasks will be executed in one setImmediate batch (default).

Is this page useful?

- [Example](https://reactnative.dev/docs/next/interactionmanager#example)
- [Basic](https://reactnative.dev/docs/next/interactionmanager#basic)
- [Advanced](https://reactnative.dev/docs/next/interactionmanager#advanced)
- [Methods](https://reactnative.dev/docs/next/interactionmanager#methods)
- [`runAfterInteractions()`](https://reactnative.dev/docs/next/interactionmanager#runafterinteractions)
- [`createInteractionHandle()`](https://reactnative.dev/docs/next/interactionmanager#createinteractionhandle)
- [`clearInteractionHandle()`](https://reactnative.dev/docs/next/interactionmanager#clearinteractionhandle)
- [`setDeadline()`](https://reactnative.dev/docs/next/interactionmanager#setdeadline)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/navigation

[Skip to main content](https://reactnative.dev/docs/next/navigation#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/navigation)** (0.81).

Version: Next

On this page

Mobile apps are rarely made up of a single screen. Managing the presentation of, and transition between, multiple screens is typically handled by what is known as a navigator.

This guide covers the various navigation components available in React Native. If you are getting started with navigation, you will probably want to use [React Navigation](https://reactnative.dev/docs/next/navigation#react-navigation). React Navigation provides a straightforward navigation solution, with the ability to present common stack navigation and tabbed navigation patterns on both Android and iOS.

If you're integrating React Native into an app that already manages navigation natively, or looking for an alternative to React Navigation, the following library provides native navigation on both platforms: [react-native-navigation](https://github.com/wix/react-native-navigation).

## React Navigation [​](https://reactnative.dev/docs/next/navigation\#react-navigation "Direct link to React Navigation")

The community solution to navigation is a standalone library that allows developers to set up the screens of an app with a few lines of code.

### Starter template [​](https://reactnative.dev/docs/next/navigation\#starter-template "Direct link to Starter template")

If you're starting a new project, you can use the React Navigation template to quickly set up a new project with [Expo](https://expo.dev/):

shell

```codeBlockLines_AclH
npx create-expo-app@latest --template react-navigation/template

See the project's `README.md` for more information on how to get started.

### Installation and setup [​](https://reactnative.dev/docs/next/navigation\#installation-and-setup "Direct link to Installation and setup")

First, you need to install them in your project:

```codeBlockLines_AclH
npm install @react-navigation/native @react-navigation/native-stack

Next, install the required peer dependencies. You need to run different commands depending on whether your project is an Expo managed project or a bare React Native project.

- If you have an Expo managed project, install the dependencies with `expo`:

```codeBlockLines_AclH
npx expo install react-native-screens react-native-safe-area-context

- If you have a bare React Native project, install the dependencies with `npm`:

```codeBlockLines_AclH
npm install react-native-screens react-native-safe-area-context

For iOS with bare React Native project, make sure you have [CocoaPods](https://cocoapods.org/) installed. Then install the pods to complete the installation:

```codeBlockLines_AclH
cd ios
pod install
cd ..

Once you've installed and configured the dependencies, you can move on to setting up your project to use React Navigation.

When using React Navigation, you configure [navigators](https://reactnavigation.org/docs/glossary-of-terms#navigator) in your app. Navigators handle the transition between screens in your app and provide UI such as header, tab bar etc.

Now you are ready to build and run your app on the device/simulator.

### Usage [​](https://reactnative.dev/docs/next/navigation\#usage "Direct link to Usage")

Now you can create an app with a home screen and a profile screen:

tsx

```codeBlockLines_AclH
import * as React from 'react';
import {createStaticNavigation} from '@react-navigation/native';
import {createNativeStackNavigator} from '@react-navigation/native-stack';

const RootStack = createNativeStackNavigator({
screens: {
Home: {
screen: HomeScreen,
options: {title: 'Welcome'},
},
Profile: {
screen: ProfileScreen,
},
},
});

const Navigation = createStaticNavigation(RootStack);

export default function App() {

}

In this example, `RootStack` is a navigator with 2 screens ( `Home` and `Profile`), defined in the `screens` property in `createNativeStackNavigator`. Similarly, you can define as many screens as you like.

You can specify options such as the screen title for each screen in the `options` property of each screen. Each screen definition also needs a `screen` property that is a React component or another navigator.

Inside each screen component, you can use the `useNavigation` hook to get the `navigation` object, which has various methods to link to other screens. For example, you can use `navigation.navigate` to go to the `Profile` screen:

```codeBlockLines_AclH
import {useNavigation} from '@react-navigation/native';

function HomeScreen() {
const navigation = useNavigation();

return (
<Button
title="Go to Jane's profile"

function ProfileScreen({route}) {

This `native-stack` navigator uses the native APIs: `UINavigationController` on iOS and `Fragment` on Android so that navigation built with `createNativeStackNavigator` will behave the same and have the similar performance characteristics as apps built natively on top of those APIs.

React Navigation also has packages for different kind of navigators such as tabs and drawer. You can use them to implement various patterns in your app.

For a complete intro to React Navigation, follow the [React Navigation Getting Started Guide](https://reactnavigation.org/docs/getting-started).

Is this page useful?

- [React Navigation](https://reactnative.dev/docs/next/navigation#react-navigation)
- [Starter template](https://reactnative.dev/docs/next/navigation#starter-template)
- [Installation and setup](https://reactnative.dev/docs/next/navigation#installation-and-setup)
- [Usage](https://reactnative.dev/docs/next/navigation#usage)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/improvingux

[Skip to main content](https://reactnative.dev/docs/next/improvingux#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/improvingux)** (0.81).

Version: Next

On this page

## Configure text inputs [​](https://reactnative.dev/docs/next/improvingux\#configure-text-inputs "Direct link to Configure text inputs")

Entering text on touch phone is a challenge - small screen, software keyboard. But based on what kind of data you need, you can make it easier by properly configuring the text inputs:

- Focus the first field automatically
- Use placeholder text as an example of expected data format
- Enable or disable autocapitalization and autocorrect
- Choose keyboard type (e.g. email, numeric)
- Make sure the return button focuses the next field or submits the form

Check out [`TextInput` docs](https://reactnative.dev/docs/next/textinput) for more configuration options.

- TypeScript
- JavaScript

TextInput form example - Snack

# TextInput form example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React, {useState, useRef} from 'react';
import {
Alert,
Text,
StatusBar,
TextInput,
View,
StyleSheet,
} from 'react-native';

const emailInput = useRef(null);
const \[name, setName\] = useState('');
const \[email, setEmail\] = useState('');

Alert.alert(
\`Welcome, ${name}! Confirmation email has been sent to ${email}\`,
);
};

return (

forms much easier to use. Try completing the form and notice that
different fields have specific optimizations and the return key
changes from focusing next input to submitting the form.

style={styles.input}
value={name}

placeholder="Full Name"
autoFocus={true}
autoCapitalize="words"
autoCorrect={true}
keyboardType="default"
returnKeyType="next"

blurOnSubmit={false}

style={styles.input}
value={email}

ref={emailInput}
placeholder="email@example.com"
autoCapitalize="none"
autoCorrect={false}
keyboardType="email-address"
returnKeyType="send"
onSubmitEditing={submit}
blurOnSubmit={true}

};

const styles = StyleSheet.create({
container: {
flex: 1,
},
header: {
paddingTop: 64,
padding: 20,
backgroundColor: '#282c34',
},
description: {
fontSize: 14,
color: 'white',
},
input: {
margin: 20,
marginBottom: 0,
height: 34,
paddingHorizontal: 10,
borderRadius: 4,
borderColor: '#ccc',
borderWidth: 1,
fontSize: 16,
},
});

export default App;

import React, {useState, useRef} from 'react';
import {
Alert,
Text,
StatusBar,
TextInput,
View,
StyleSheet,
} from 'react-native';

const emailInput = useRef(null);
const [name, setName] = useState('');
const [email, setEmail] = useState('');

Alert.alert(
`Welcome, ${name}! Confirmation email has been sent to ${email}`,
);
};

forms much easier to use. Try completing the form and notice that
different fields have specific optimizations and the return key
changes from focusing next input to submitting the form.

style={styles.input}
value={name}

placeholder="Full Name"
autoFocus={true}
autoCapitalize="words"
autoCorrect={true}
keyboardType="default"
returnKeyType="next"

style={styles.input}
value={email}

ref={emailInput}
placeholder="email@example.com"
autoCapitalize="none"
autoCorrect={false}
keyboardType="email-address"
returnKeyType="send"
onSubmitEditing={submit}
blurOnSubmit={true}

const styles = StyleSheet.create({
container: {
flex: 1,
},
header: {
paddingTop: 64,
padding: 20,
backgroundColor: '#282c34',
},
description: {
fontSize: 14,
color: 'white',
},
input: {
margin: 20,
marginBottom: 0,
height: 34,
paddingHorizontal: 10,
borderRadius: 4,
borderColor: '#ccc',
borderWidth: 1,
fontSize: 16,
},
});

Snack

This demo shows how using available TextInput customizations can make forms much easier to use. Try completing the form and notice that different fields have specific optimizations and the return key changes from focusing next input to submitting the form.

Updating…

PreviewMy DeviceAndroidiOSWeb

const \[name, setName\] = useState('');
const \[email, setEmail\] = useState('');

const [name, setName] = useState('');
const [email, setEmail] = useState('');

## Manage layout when keyboard is visible [​](https://reactnative.dev/docs/next/improvingux\#manage-layout-when-keyboard-is-visible "Direct link to Manage layout when keyboard is visible")

Software keyboard takes almost half of the screen. If you have interactive elements that can get covered by the keyboard, make sure they are still accessible by using the [`KeyboardAvoidingView` component](https://reactnative.dev/docs/next/keyboardavoidingview).

KeyboardAvoidingView example - Snack

# KeyboardAvoidingView example

import React, {useState, useRef} from 'react';
import {
Alert,
Text,
Button,
StatusBar,
TextInput,
KeyboardAvoidingView,
View,
StyleSheet,
} from 'react-native';

const emailInput = useRef(null);
const \[email, setEmail\] = useState('');

emailInput.current.blur();
Alert.alert(\`Confirmation email has been sent to ${email}\`);
};

software keyboard. Focus the email input below and notice that the
Sign Up button and the text adjusted positions to make sure they are
not hidden under the keyboard.

const styles = StyleSheet.create({
container: {
flex: 1,
},
header: {
paddingTop: 64,
padding: 20,
backgroundColor: '#282c34',
},
description: {
fontSize: 14,
color: 'white',
},
input: {
margin: 20,
marginBottom: 0,
height: 34,
paddingHorizontal: 10,
borderRadius: 4,
borderColor: '#ccc',
borderWidth: 1,
fontSize: 16,
},
legal: {
margin: 10,
color: '#333',
fontSize: 12,
textAlign: 'center',
},
form: {
flex: 1,
justifyContent: 'space-between',
},
});

import React, {useState, useRef} from 'react';
import {
Alert,
Text,
Button,
StatusBar,
TextInput,
KeyboardAvoidingView,
View,
StyleSheet,
} from 'react-native';

const emailInput = useRef(null);
const [email, setEmail] = useState('');

emailInput.current.blur();
Alert.alert(`Confirmation email has been sent to ${email}`);
};

software keyboard. Focus the email input below and notice that the
Sign Up button and the text adjusted positions to make sure they are
not hidden under the keyboard.

style={styles.input}
value={email}

ref={emailInput}
placeholder="email@example.com"
autoCapitalize="none"
autoCorrect={false}
keyboardType="email-address"
returnKeyType="send"
onSubmitEditing={submit}
blurOnSubmit={true}

const styles = StyleSheet.create({
container: {
flex: 1,
},
header: {
paddingTop: 64,
padding: 20,
backgroundColor: '#282c34',
},
description: {
fontSize: 14,
color: 'white',
},
input: {
margin: 20,
marginBottom: 0,
height: 34,
paddingHorizontal: 10,
borderRadius: 4,
borderColor: '#ccc',
borderWidth: 1,
fontSize: 16,
},
legal: {
margin: 10,
color: '#333',
fontSize: 12,
textAlign: 'center',
},
form: {
flex: 1,
justifyContent: 'space-between',
},
});

This demo shows how to avoid covering important UI elements with the software keyboard. Focus the email input below and notice that the Sign Up button and the text adjusted positions to make sure they are not hidden under the keyboard.

Sign Up

Some important legal fine print here

const \[email, setEmail\] = useState('');

emailInput.current?.blur();
Alert.alert(\`Confirmation email has been sent to ${email}\`);
};

const [email, setEmail] = useState('');

emailInput.current?.blur();
Alert.alert(`Confirmation email has been sent to ${email}`);
};

## Make tappable areas larger [​](https://reactnative.dev/docs/next/improvingux\#make-tappable-areas-larger "Direct link to Make tappable areas larger")

On mobile phones it's hard to be very precise when pressing buttons. Make sure all interactive elements are 44x44 or larger. One way to do this is to leave enough space for the element, `padding`, `minWidth` and `minHeight` style values can be useful for that. Alternatively, you can use [`hitSlop` prop](https://reactnative.dev/docs/next/touchablewithoutfeedback#hitslop) to increase interactive area without affecting the layout. Here's a demo:

HitSlop example - Snack

# HitSlop example

import React from 'react';
import {
Text,
StatusBar,
TouchableOpacity,
View,
StyleSheet,
} from 'react-native';

easier to tap without changing their layout and size. Try pressing
each button quickly multiple times and notice which one is easier to
hit.

const styles = StyleSheet.create({
container: {
flex: 1,
},
header: {
paddingTop: 64,
padding: 20,
backgroundColor: '#282c34',
},
description: {
fontSize: 14,
color: 'white',
},
content: {
flex: 1,
alignItems: 'center',
justifyContent: 'center',
},
label: {
fontSize: 18,
color: '#336699',
textAlign: 'center',
borderColor: '#ddd',
borderWidth: 1,
},
separator: {
height: 50,
},
preview: {
padding: 20,
backgroundColor: '#f6f6f6',
},
});

import React from 'react';
import {
Text,
StatusBar,
TouchableOpacity,
View,
StyleSheet,
} from 'react-native';

easier to tap without changing their layout and size. Try pressing
each button quickly multiple times and notice which one is easier to
hit.

const styles = StyleSheet.create({
container: {
flex: 1,
},
header: {
paddingTop: 64,
padding: 20,
backgroundColor: '#282c34',
},
description: {
fontSize: 14,
color: 'white',
},
content: {
flex: 1,
alignItems: 'center',
justifyContent: 'center',
},
label: {
fontSize: 18,
color: '#336699',
textAlign: 'center',
borderColor: '#ddd',
borderWidth: 1,
},
separator: {
height: 50,
},
preview: {
padding: 20,
backgroundColor: '#f6f6f6',
},
});

This demo shows how using hitSlop can make interactive elements much easier to tap without changing their layout and size. Try pressing each button quickly multiple times and notice which one is easier to hit.

Without hitSlop

With hitSlop

## Use Android Ripple [​](https://reactnative.dev/docs/next/improvingux\#use-android-ripple "Direct link to Use Android Ripple")

Android API 21+ uses the material design ripple to provide user with feedback when they touch an interactable area on the screen. React Native exposes this through the [`TouchableNativeFeedback` component](https://reactnative.dev/docs/next/touchablenativefeedback). Using this touchable effect instead of opacity or highlight will often make your app feel much more fitting on the platform. That said, you need to be careful when using it because it doesn't work on iOS or on Android API < 21, so you will need to fall to handle the platform differences for you.

Android Ripple example - Snack

# Android Ripple example

import React from 'react';
import {
TouchableNativeFeedback,
TouchableOpacity,
TouchableHighlight,
Platform,
Text,
View,
StyleSheet,
} from 'react-native';

const SUPPORTS\_NATIVE\_FEEDBACK =

const defaultHitSlop = {top: 15, bottom: 15, right: 15, left: 15};

onPress={noop}
background={TouchableNativeFeedback.Ripple('#06bcee', false)}

onPress={noop}
background={TouchableNativeFeedback.Ripple('#06bcee', true)}

tab bar

style={styles.button}
onPress={noop}

style={styles.button}
onPress={noop}
hitSlop={defaultHitSlop}

const styles = StyleSheet.create({
container: {
flex: 1,
alignItems: 'center',
justifyContent: 'center',
paddingTop: 64,
backgroundColor: '#fff',
},
buttonContainer: {
margin: 24,
},
text: {
fontSize: 20,
color: '#fff',
fontWeight: 'bold',
},
button: {
padding: 25,
borderRadius: 5,
backgroundColor: '#000',
marginBottom: 30,
},
});

import React from 'react';
import {
TouchableNativeFeedback,
TouchableOpacity,
TouchableHighlight,
Platform,
Text,
View,
StyleSheet,
} from 'react-native';

const SUPPORTS_NATIVE_FEEDBACK =

onPress={noop}
background={TouchableNativeFeedback.Ripple('#06bcee', false)}

onPress={noop}
background={TouchableNativeFeedback.Ripple('#06bcee', true)}

style={styles.button}
onPress={noop}

style={styles.button}
onPress={noop}
hitSlop={defaultHitSlop}

const styles = StyleSheet.create({
container: {
flex: 1,
alignItems: 'center',
justifyContent: 'center',
paddingTop: 64,
backgroundColor: '#fff',
},
buttonContainer: {
margin: 24,
},
text: {
fontSize: 20,
color: '#fff',
fontWeight: 'bold',
},
button: {
padding: 25,
borderRadius: 5,
backgroundColor: '#000',
marginBottom: 30,
},
});

### Download [Expo Go](https://expo.dev/client) and scan the QR code to get started.

exp://u.expo.dev/933fd9c0-1666-11e7-afca-d980795c5824?runtime-version=exposdk%3A53.0.0&channel-name=production&snack-channel=SNUFAwGELo

### Connected devices

0

[Log in](https://expo.dev/login) to open this Snack from Expo Go on your device or simulator.

PreviewMy DeviceAndroid

## Screen orientation lock [​](https://reactnative.dev/docs/next/improvingux\#screen-orientation-lock "Direct link to Screen orientation lock")

Multiple screen orientations should work fine by default unless you're using `Dimensions` API and don't handle orientation changes. If you don't want to support multiple screen orientations, you can lock the screen orientation to either portrait or landscape.

On iOS, in the General tab and Deployment Info section of Xcode enable the Device Orientation you want to support (ensure you have selected iPhone from the Devices menu when making the changes). For Android, open the AndroidManifest.xml file and within the activity element add `'android:screenOrientation="portrait"'` to lock to portrait or `'android:screenOrientation="landscape"'` to lock to landscape.

# Learn more

[Material Design](https://material.io/) and [Human Interface Guidelines](https://developer.apple.com/design/human-interface-guidelines) are great resources for learning more about designing for mobile platforms.

Is this page useful?

- [Configure text inputs](https://reactnative.dev/docs/next/improvingux#configure-text-inputs)
- [Manage layout when keyboard is visible](https://reactnative.dev/docs/next/improvingux#manage-layout-when-keyboard-is-visible)
- [Make tappable areas larger](https://reactnative.dev/docs/next/improvingux#make-tappable-areas-larger)
- [Use Android Ripple](https://reactnative.dev/docs/next/improvingux#use-android-ripple)
- [Screen orientation lock](https://reactnative.dev/docs/next/improvingux#screen-orientation-lock)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/imagebackground

[Skip to main content](https://reactnative.dev/docs/next/imagebackground#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/imagebackground)** (0.81).

Version: Next

On this page

Note that you must specify some width and height style attributes.

## Example [​](https://reactnative.dev/docs/next/imagebackground\#example "Direct link to Example")

ImageBackground - Snack

# ImageBackground

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {ImageBackground, StyleSheet, Text} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const image = {uri: 'https://legacy.reactjs.org/logo-og.png'};

const styles = StyleSheet.create({
container: {
flex: 1,
},
image: {
flex: 1,
justifyContent: 'center',
},
text: {
color: 'white',
fontSize: 42,
lineHeight: 84,
fontWeight: 'bold',
textAlign: 'center',
backgroundColor: '#000000c0',
},
});

export default App;

const styles = StyleSheet.create({
container: {
flex: 1,
},
image: {
flex: 1,
justifyContent: 'center',
},
text: {
color: 'white',
fontSize: 42,
lineHeight: 84,
fontWeight: 'bold',
textAlign: 'center',
backgroundColor: '#000000c0',
},
});

Snack

Inside

Updating…

PreviewMy DeviceAndroidiOSWeb

* * *

# Reference

## Props [​](https://reactnative.dev/docs/next/imagebackground\#props "Direct link to Props")

### [Image Props](https://reactnative.dev/docs/next/image\#props) [​](https://reactnative.dev/docs/next/imagebackground\#image-props "Direct link to image-props")

Inherits [Image Props](https://reactnative.dev/docs/next/image#props).

### `imageStyle` [​](https://reactnative.dev/docs/next/imagebackground\#imagestyle "Direct link to imagestyle")

| Type |
| --- |
| [Image Style](https://reactnative.dev/docs/next/image-style-props) |

### `imageRef` [​](https://reactnative.dev/docs/next/imagebackground\#imageref "Direct link to imageref")

A ref setter that will be assigned the [element node](https://reactnative.dev/docs/next/element-nodes) of the inner `Image` component when mounted.

### `style` [​](https://reactnative.dev/docs/next/imagebackground\#style "Direct link to style")

| Type |
| --- |
| [View Style](https://reactnative.dev/docs/next/view-style-props) |

Is this page useful?

- [Example](https://reactnative.dev/docs/next/imagebackground#example)
- [Props](https://reactnative.dev/docs/next/imagebackground#props)
- [Image Props](https://reactnative.dev/docs/next/imagebackground#image-props)
- [`imageStyle`](https://reactnative.dev/docs/next/imagebackground#imagestyle)
- [`imageRef`](https://reactnative.dev/docs/next/imagebackground#imageref)
- [`style`](https://reactnative.dev/docs/next/imagebackground#style)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/alertios

[Skip to main content](https://reactnative.dev/docs/next/alertios#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/alertios)** (0.81).

Version: Next

Removed from React Native

Use [`Alert`](https://reactnative.dev/docs/next/alert) instead.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/integration-with-android-fragment

[Skip to main content](https://reactnative.dev/docs/next/integration-with-android-fragment#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/integration-with-android-fragment)** (0.81).

Version: Next

On this page

The guide for [Integration with Existing Apps](https://reactnative.dev/docs/integration-with-existing-apps) details how to integrate a full-screen React Native app into an existing Android app as an **Activity**.

To use React Native components within **Fragments** in an existing app requires some additional setup.

### 1\. Add React Native to your app [​](https://reactnative.dev/docs/next/integration-with-android-fragment\#1-add-react-native-to-your-app "Direct link to 1. Add React Native to your app")

Follow the guide for [Integration with Existing Apps](https://reactnative.dev/docs/integration-with-existing-apps) until the end to make sure you can safely run your React Native app in a full screen Activity.

### 2\. Add a FrameLayout for the React Native Fragment [​](https://reactnative.dev/docs/next/integration-with-android-fragment\#2-add-a-framelayout-for-the-react-native-fragment "Direct link to 2. Add a FrameLayout for the React Native Fragment")

In this example, we're going to use a `FrameLayout` to add a React Native Fragment to an Activity. This approach is flexible enough and can be adapted to use React Native in other layouts such as Bottom Sheets or Tab Layouts.

xml

```codeBlockLines_AclH
<FrameLayout
android:id="@+id/react_native_fragment"
android:layout_width="match_parent"

### 3\. Make your host Activity implement `DefaultHardwareBackBtnHandler` [​](https://reactnative.dev/docs/next/integration-with-android-fragment\#3-make-your-host-activity-implement-defaulthardwarebackbtnhandler "Direct link to 3-make-your-host-activity-implement-defaulthardwarebackbtnhandler")

As your host activity is not a `ReactActivity`, you need to implement the `DefaultHardwareBackBtnHandler` interface to handle the back button press event.
This is required by React Native to handle the back button press event.

Go into your host activity and make sure it implements the `DefaultHardwareBackBtnHandler` interface:

Deprecated

`Activity.onBackPressed()` has been [deprecated](https://developer.android.com/reference/android/app/Activity#onBackPressed()) since API level 33. Android 16 devices with apps targeting API level 36 this will [no longer be called](https://developer.android.com/about/versions/16/behavior-changes-16#predictive-back) and [OnBackPressedDispatcher](https://developer.android.com/reference/androidx/activity/OnBackPressedDispatcher) should be used instead.

- Java
- Kotlin

diff

```codeBlockLines_AclH

import androidx.appcompat.app.AppCompatActivity
+import com.facebook.react.modules.core.DefaultHardwareBackBtnHandler

+class MainActivity : AppCompatActivity() {
+class MainActivity : AppCompatActivity(), DefaultHardwareBackBtnHandler {

override fun onCreate(savedInstanceState: Bundle?) {
super.onCreate(savedInstanceState)
setContentView(R.layout.main_activity)

// Handle button click
}
}

+ override fun invokeDefaultOnBackPressed() {
+ onBackPressedDispatcher.onBackPressed()
+ }
}

import android.os.Bundle;
import androidx.appcompat.app.AppCompatActivity;
+import com.facebook.react.modules.core.DefaultHardwareBackBtnHandler;

-class MainActivity extends AppCompatActivity {
+class MainActivity extends AppCompatActivity implements DefaultHardwareBackBtnHandler {

@Override
protected void onCreate(@Nullable Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main_activity);

// Handle button click
});
}

+ @Override
+ public void invokeDefaultOnBackPressed() {
+ getOnBackPressedDispatcher().onBackPressed();
+ }
}

### 4\. Add a React Native Fragment to the FrameLayout [​](https://reactnative.dev/docs/next/integration-with-android-fragment\#4-add-a-react-native-fragment-to-the-framelayout "Direct link to 4. Add a React Native Fragment to the FrameLayout")

Finally, we can update the Activity to add a React Native Fragment to the FrameLayout.
In this specific example, we're going to assume that your Activity has a button with id `sample_button` that when clicked will render a React Native Fragment into the FrameLayout.

Update your Activity's `onCreate` method as follows:

import androidx.appcompat.app.AppCompatActivity
+import com.facebook.react.ReactFragment
import com.facebook.react.modules.core.DefaultHardwareBackBtnHandler

public class MainActivity : AppCompatActivity(), DefaultHardwareBackBtnHandler {

+ val reactNativeFragment = ReactFragment.Builder()
+ .setComponentName("HelloWorld")
+ .setLaunchOptions(Bundle().apply { putString("message", "my value") })
+ .build()
+ supportFragmentManager
+ .beginTransaction()
+ .add(R.id.react_native_fragment, reactNativeFragment)
+ .commit()
}
}

override fun invokeDefaultOnBackPressed() {
super.onBackPressed()
}
}

import android.os.Bundle;
import androidx.appcompat.app.AppCompatActivity;
+import com.facebook.react.ReactFragment;
import com.facebook.react.modules.core.DefaultHardwareBackBtnHandler;

public class MainActivity extends AppCompatActivity implements DefaultHardwareBackBtnHandler {

+ Bundle launchOptions = new Bundle();
+ launchOptions.putString("message", "my value");
+
+ ReactFragment fragment = new ReactFragment.Builder()
+ .setComponentName("HelloWorld")
+ .setLaunchOptions(launchOptions)
+ .build();
+ getSupportFragmentManager()
+ .beginTransaction()
+ .add(R.id.react_native_fragment, fragment)
+ .commit();
});
}

@Override
public void invokeDefaultOnBackPressed() {
super.onBackPressed();
}
}

Let's look at the code above.

The `ReactFragment.Builder()` is used to create a new `ReactFragment` and then we use the `supportFragmentManager` to add that Fragment to the `FrameLayout`.

Inside the builder you can customize how the fragment is created:

- `setComponentName` is the name of the component you want to render. It's the same string specified in your `index.js` inside the `registerComponent` method.
- `setLaunchOptions` is an optional method to pass initial props to your component. This is optional and you can remove it if you don't use it.

### 5\. Test your integration [​](https://reactnative.dev/docs/next/integration-with-android-fragment\#5-test-your-integration "Direct link to 5. Test your integration")

Make sure you run `yarn start` to run the bundler and then run your android app in Android Studio. The app should load the JavaScript/TypeScript code from the development server and display it in your React Native Fragment in the Activity.

Your app should look like this one:

Is this page useful?

- [1\. Add React Native to your app](https://reactnative.dev/docs/next/integration-with-android-fragment#1-add-react-native-to-your-app)
- [2\. Add a FrameLayout for the React Native Fragment](https://reactnative.dev/docs/next/integration-with-android-fragment#2-add-a-framelayout-for-the-react-native-fragment)
- [3\. Make your host Activity implement `DefaultHardwareBackBtnHandler`](https://reactnative.dev/docs/next/integration-with-android-fragment#3-make-your-host-activity-implement-defaulthardwarebackbtnhandler)
- [4\. Add a React Native Fragment to the FrameLayout](https://reactnative.dev/docs/next/integration-with-android-fragment#4-add-a-react-native-fragment-to-the-framelayout)
- [5\. Test your integration](https://reactnative.dev/docs/next/integration-with-android-fragment#5-test-your-integration)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/integration-with-existing-apps

[Skip to main content](https://reactnative.dev/docs/next/integration-with-existing-apps#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/integration-with-existing-apps)** (0.81).

Version: Next

React Native is great when you are starting a new mobile app from scratch. However, it also works well for adding a single view or user flow to existing native applications. With a few steps, you can add new React Native based features, screens, views, etc.

The specific steps are different depending on what platform you're targeting.

- Android (Java & Kotlin)
- iOS (Objective-C and Swift)

## Key Concepts [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#key-concepts "Direct link to Key Concepts")

The keys to integrating React Native components into your Android application are to:

1. Set up the correct directory structure.
2. Install the necessary NPM dependencies.
3. Adding React Native to your Gradle configuration.
4. Writing the TypeScript code for your first React Native screen.
5. Integrate React Native with your Android code using a ReactActivity.
6. Testing your integration by running the bundler and seeing your app in action.

## Using the Community Template [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#using-the-community-template "Direct link to Using the Community Template")

While you follow this guide, we suggest you to use the [React Native Community Template](https://github.com/react-native-community/template/) as reference. The template contains a **minimal Android app** and will help you understanding how to integrate React Native into an existing Android app.

## Prerequisites [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#prerequisites "Direct link to Prerequisites")

Follow the guide on [setting up your development environment](https://reactnative.dev/docs/next/set-up-your-environment) and using [React Native without a framework](https://reactnative.dev/docs/next/getting-started-without-a-framework) to configure your development environment for building React Native apps for Android.
This guide also assumes you're familiar with the basics of Android development such as creating Activities and editing the `AndroidManifest.xml` file.

## 1\. Set up directory structure [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#1-set-up-directory-structure "Direct link to 1. Set up directory structure")

To ensure a smooth experience, create a new folder for your integrated React Native project, then **move your existing Android project** to the `/android` subfolder.

## 2\. Install NPM dependencies [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#2-install-npm-dependencies "Direct link to 2. Install NPM dependencies")

Go to the root directory and run the following command:

shell

```codeBlockLines_AclH
curl -O https://raw.githubusercontent.com/react-native-community/template/refs/heads/main/template/package.json

This will copy the `package.json` [file from the Community template](https://github.com/react-native-community/template/blob/main/template/package.json) to your project.

Next, install the NPM packages by running:

- npm
- Yarn

```codeBlockLines_AclH
npm install

```codeBlockLines_AclH
yarn install

Installation process has created a new `node_modules` folder. This folder stores all the JavaScript dependencies required to build your project.

Add `node_modules/` to your `.gitignore` file (here the [Community default one](https://github.com/react-native-community/template/blob/main/template/_gitignore)).

## 3\. Adding React Native to your app [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#3-adding-react-native-to-your-app "Direct link to 3. Adding React Native to your app")

### Configuring Gradle [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#configuring-gradle "Direct link to Configuring Gradle")

React Native uses the React Native Gradle Plugin to configure your dependencies and project setup.

First, let's edit your `settings.gradle` file by adding those lines (as suggested from the [Community template](https://github.com/react-native-community/template/blob/main/template/android/settings.gradle)):

groovy

```codeBlockLines_AclH
// Configures the React Native Gradle Settings plugin used for autolinking
pluginManagement { includeBuild("../node_modules/@react-native/gradle-plugin") }
plugins { id("com.facebook.react.settings") }

// If using .gradle.kts files:

includeBuild("../node_modules/@react-native/gradle-plugin")

// Include your existing Gradle modules here.
// include(":app")

Then you need to open your top level `build.gradle` and include this line (as suggested from the [Community template](https://github.com/react-native-community/template/blob/main/template/android/build.gradle)):

diff

```codeBlockLines_AclH
buildscript {
repositories {
google()
mavenCentral()
}
dependencies {
classpath("com.android.tools.build:gradle:7.3.1")
+ classpath("com.facebook.react:react-native-gradle-plugin")
}
}

This makes sure the React Native Gradle Plugin (RNGP) is available inside your project.
Finally, add those lines inside your Applications's `build.gradle` file (it's a different `build.gradle` file usually inside your `app` folder - you can use the [Community template file as reference](https://github.com/react-native-community/template/blob/main/template/android/build.gradle)):

```codeBlockLines_AclH
apply plugin: "com.android.application"
+apply plugin: "com.facebook.react"

repositories {
mavenCentral()
}

dependencies {
// Other dependencies here
+ // Note: we intentionally don't specify the version number here as RNGP will take care of it.
+ // If you don't use the RNGP, you'll have to specify version manually.
+ implementation("com.facebook.react:react-android")
+ implementation("com.facebook.react:hermes-android")
}

+react {
+ // Needed to enable Autolinking - https://github.com/react-native-community/cli/blob/master/docs/autolinking.md
+ autolinkLibrariesWithApp()
+}

Finally, open your application `gradle.properties` files and add the following line (here the [Community template file as reference](https://github.com/react-native-community/template/blob/main/template/android/gradle.properties)):

```codeBlockLines_AclH
+reactNativeArchitectures=armeabi-v7a,arm64-v8a,x86,x86_64
+newArchEnabled=true
+hermesEnabled=true

### Configuring your manifest [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#configuring-your-manifest "Direct link to Configuring your manifest")

First, make sure you have the Internet permission in your `AndroidManifest.xml`:

```codeBlockLines_AclH

Then you need to enable [cleartext traffic](https://developer.android.com/training/articles/security-config#CleartextTrafficPermitted) in your **debug** `AndroidManifest.xml`:

+ android:usesCleartextTraffic="true"
+ tools:targetApi="28"

As usual, here the AndroidManifest.xml file from the Community template to use as a reference: [main](https://github.com/react-native-community/template/blob/main/template/android/app/src/main/AndroidManifest.xml) and [debug](https://github.com/react-native-community/template/blob/main/template/android/app/src/debug/AndroidManifest.xml).

This is needed as your application will communicate with your local bundler, [Metro](https://metrobundler.dev/), via HTTP.

Make sure you add this only to your **debug** manifest.

## 4\. Writing the TypeScript Code [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#4-writing-the-typescript-code "Direct link to 4. Writing the TypeScript Code")

Now we will actually modify the native Android application to integrate React Native.

The first bit of code we will write is the actual React Native code for the new screen that will be integrated into our application.

### Create a `index.js` file [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#create-a-indexjs-file "Direct link to create-a-indexjs-file")

First, create an empty `index.js` file in the root of your React Native project.

`index.js` is the starting point for React Native applications, and it is always required. It can be a small file that `import` s other file that are part of your React Native component or application, or it can contain all the code that is needed for it.

Our index.js should look as follows (here the [Community template file as reference](https://github.com/react-native-community/template/blob/main/template/index.js)):

js

```codeBlockLines_AclH
import {AppRegistry} from 'react-native';
import App from './App';

### Create a `App.tsx` file [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#create-a-apptsx-file "Direct link to create-a-apptsx-file")

Let's create an `App.tsx` file. This is a [TypeScript](https://www.typescriptlang.org/) file that can have [JSX](https://en.wikipedia.org/wiki/JSX_(JavaScript)) expressions. It contains the root React Native component that we will integrate into our Android application ( [link](https://github.com/react-native-community/template/blob/main/template/App.tsx)):

tsx

```codeBlockLines_AclH
import React from 'react';
import {
SafeAreaView,
ScrollView,
StatusBar,
StyleSheet,
Text,
useColorScheme,
View,
} from 'react-native';

import {
Colors,
DebugInstructions,
Header,
ReloadInstructions,
} from 'react-native/Libraries/NewAppScreen';

function App(): React.JSX.Element {
const isDarkMode = useColorScheme() === 'dark';

const backgroundStyle = {
backgroundColor: isDarkMode ? Colors.darker : Colors.lighter,
};

return (

barStyle={isDarkMode ? 'light-content' : 'dark-content'}
backgroundColor={backgroundStyle.backgroundColor}

contentInsetAdjustmentBehavior="automatic"

style={{
backgroundColor: isDarkMode
? Colors.black
: Colors.white,
padding: 24,

change this screen and see your edits.

}

const styles = StyleSheet.create({
title: {
fontSize: 24,
fontWeight: '600',
},
bold: {
fontWeight: '700',
},
});

export default App;

Here is the [Community template file as reference](https://github.com/react-native-community/template/blob/main/template/App.tsx).

## 5\. Integrating with your Android code [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#5-integrating-with-your-android-code "Direct link to 5. Integrating with your Android code")

We now need to add some native code in order to start the React Native runtime and tell it to render our React components.

### Updating your Application class [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#updating-your-application-class "Direct link to Updating your Application class")

First, we need to update your `Application` class to properly initialize React Native as follows:

- Java
- Kotlin

import android.app.Application;
+import com.facebook.react.PackageList;
+import com.facebook.react.ReactApplication;
+import com.facebook.react.ReactHost;
+import com.facebook.react.ReactNativeHost;
+import com.facebook.react.ReactPackage;
+import com.facebook.react.defaults.DefaultNewArchitectureEntryPoint;
+import com.facebook.react.defaults.DefaultReactHost;
+import com.facebook.react.defaults.DefaultReactNativeHost;
+import com.facebook.soloader.SoLoader;
+import com.facebook.react.soloader.OpenSourceMergedSoMapping
+import java.util.List;

-class MainApplication extends Application {
+class MainApplication extends Application implements ReactApplication {
+ @Override
+ public ReactNativeHost getReactNativeHost() {
+ return new DefaultReactNativeHost(this) {
+ @Override

+ @Override
+ protected String getJSMainModuleName() { return "index"; }
+ @Override
+ public boolean getUseDeveloperSupport() { return BuildConfig.DEBUG; }
+ @Override
+ protected boolean isNewArchEnabled() { return BuildConfig.IS_NEW_ARCHITECTURE_ENABLED; }
+ @Override
+ protected Boolean isHermesEnabled() { return BuildConfig.IS_HERMES_ENABLED; }
+ };
+ }

+ @Override
+ public ReactHost getReactHost() {
+ return DefaultReactHost.getDefaultReactHost(getApplicationContext(), getReactNativeHost());
+ }

@Override
public void onCreate() {
super.onCreate();
+ SoLoader.init(this, OpenSourceMergedSoMapping);
+ if (BuildConfig.IS_NEW_ARCHITECTURE_ENABLED) {
+ DefaultNewArchitectureEntryPoint.load();
+ }
}
}

+import com.facebook.react.PackageList
+import com.facebook.react.ReactApplication
+import com.facebook.react.ReactHost
+import com.facebook.react.ReactNativeHost
+import com.facebook.react.ReactPackage
+import com.facebook.react.defaults.DefaultNewArchitectureEntryPoint.load
+import com.facebook.react.defaults.DefaultReactHost.getDefaultReactHost
+import com.facebook.react.defaults.DefaultReactNativeHost
+import com.facebook.soloader.SoLoader
+import com.facebook.react.soloader.OpenSourceMergedSoMapping

-class MainApplication : Application() {
+class MainApplication : Application(), ReactApplication {

+ override val reactNativeHost: ReactNativeHost =
+ object : DefaultReactNativeHost(this) {

+ override fun getJSMainModuleName(): String = "index"
+ override fun getUseDeveloperSupport(): Boolean = BuildConfig.DEBUG
+ override val isNewArchEnabled: Boolean = BuildConfig.IS_NEW_ARCHITECTURE_ENABLED
+ override val isHermesEnabled: Boolean = BuildConfig.IS_HERMES_ENABLED
+ }

+ override val reactHost: ReactHost
+ get() = getDefaultReactHost(applicationContext, reactNativeHost)

override fun onCreate() {
super.onCreate()
+ SoLoader.init(this, OpenSourceMergedSoMapping)
+ if (BuildConfig.IS_NEW_ARCHITECTURE_ENABLED) {
+ load()
+ }
}
}

As usual, here the [`MainApplication.kt` Community template file as reference](https://github.com/react-native-community/template/blob/main/template/android/app/src/main/java/com/helloworld/MainApplication.kt).

#### Creating a `ReactActivity` [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#creating-a-reactactivity "Direct link to creating-a-reactactivity")

Finally, we need to create a new `Activity` that will extend `ReactActivity` and host the React Native code. This activity will be responsible for starting the React Native runtime and rendering the React component.

java

import com.facebook.react.ReactActivity;
import com.facebook.react.ReactActivityDelegate;
import com.facebook.react.defaults.DefaultNewArchitectureEntryPoint;
import com.facebook.react.defaults.DefaultReactActivityDelegate;

public class MyReactActivity extends ReactActivity {

@Override
protected String getMainComponentName() {
return "HelloWorld";
}

@Override
protected ReactActivityDelegate createReactActivityDelegate() {
return new DefaultReactActivityDelegate(this, getMainComponentName(), DefaultNewArchitectureEntryPoint.getFabricEnabled());
}
}

kotlin

import com.facebook.react.ReactActivityDelegate
import com.facebook.react.defaults.DefaultNewArchitectureEntryPoint.fabricEnabled
import com.facebook.react.defaults.DefaultReactActivityDelegate

class MyReactActivity : ReactActivity() {

override fun getMainComponentName(): String = "HelloWorld"

override fun createReactActivityDelegate(): ReactActivityDelegate =
DefaultReactActivityDelegate(this, mainComponentName, fabricEnabled)
}

As usual, here the [`MainActivity.kt` Community template file as reference](https://github.com/react-native-community/template/blob/main/template/android/app/src/main/java/com/helloworld/MainActivity.kt).

Whenever you create a new Activity, you need to add it to your `AndroidManifest.xml` file. You also need set the theme of `MyReactActivity` to `Theme.AppCompat.Light.NoActionBar` (or to any non-ActionBar theme) as otherwise your application will render an ActionBar on top of your React Native screen:

+ android:name=".MyReactActivity"
+ android:label="@string/app_name"

Now your activity is ready to run some JavaScript code.

## 6\. Test your integration [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#6-test-your-integration "Direct link to 6. Test your integration")

You have completed all the basic steps to integrate React Native with your application. Now we will start the [Metro bundler](https://metrobundler.dev/) to build your TypeScript application code into a bundle. Metro's HTTP server shares the bundle from `localhost` on your developer environment to a simulator or device. This allows for [hot reloading](https://reactnative.dev/blog/2016/03/24/introducing-hot-reloading).

First, you need to create a `metro.config.js` file in the root of your project as follows:

```codeBlockLines_AclH
const {getDefaultConfig} = require('@react-native/metro-config');
module.exports = getDefaultConfig(__dirname);

You can checkout the [`metro.config.js` file](https://github.com/react-native-community/template/blob/main/template/metro.config.js) from the Community template file as reference.

Once you have the configuration file in place, you can run the bundler. Run the following command in the root directory of your project:

```codeBlockLines_AclH
npm start

```codeBlockLines_AclH
yarn start

Now build and run your Android app as normal.

Once you reach your React-powered Activity inside the app, it should load the JavaScript code from the development server and display:

### Creating a release build in Android Studio [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#creating-a-release-build-in-android-studio "Direct link to Creating a release build in Android Studio")

You can use Android Studio to create your release builds too! It’s as quick as creating release builds of your previously-existing native Android app.

The React Native Gradle Plugin will take care of bundling the JS code inside your APK/App Bundle.

If you're not using Android Studio, you can create a release build with:

```codeBlockLines_AclH
cd android
# For a Release APK
./gradlew :app:assembleRelease
# For a Release AAB
./gradlew :app:bundleRelease

### Now what? [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#now-what "Direct link to Now what?")

At this point you can continue developing your app as usual. Refer to our [debugging](https://reactnative.dev/docs/next/debugging) and [deployment](https://reactnative.dev/docs/next/running-on-device) docs to learn more about working with React Native.

The keys to integrating React Native components into your iOS application are to:

1. Set up the correct directory structure.
2. Install the necessary NPM dependencies.
3. Adding React Native to your Podfile configuration.
4. Writing the TypeScript code for your first React Native screen.
5. Integrate React Native with your iOS code using a `RCTRootView`.
6. Testing your integration by running the bundler and seeing your app in action.

While you follow this guide, we suggest you to use the [React Native Community Template](https://github.com/react-native-community/template/) as reference. The template contains a **minimal iOS app** and will help you understanding how to integrate React Native into an existing iOS app.

Follow the guide on [setting up your development environment](https://reactnative.dev/docs/next/set-up-your-environment) and using [React Native without a framework](https://reactnative.dev/docs/next/getting-started-without-a-framework) to configure your development environment for building React Native apps for iOS.
This guide also assumes you're familiar with the basics of iOS development such as creating a `UIViewController` and editing the `Podfile` file.

### 1\. Set up directory structure [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#1-set-up-directory-structure "Direct link to 1. Set up directory structure")

To ensure a smooth experience, create a new folder for your integrated React Native project, then **move your existing iOS project** to the `/ios` subfolder.

### Command Line Tools for Xcode [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#command-line-tools-for-xcode "Direct link to Command Line Tools for Xcode")

Install the Command Line Tools. Choose **Settings... (or Preferences...)** in the Xcode menu. Go to the Locations panel and install the tools by selecting the most recent version in the Command Line Tools dropdown.

### CocoaPods [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#cocoapods "Direct link to CocoaPods")

[CocoaPods](https://cocoapods.org/) is a package management tool for iOS and macOS development. We use it to add the actual React Native framework code locally into your current project.

We recommend installing CocoaPods using [Homebrew](https://brew.sh/):

```codeBlockLines_AclH
brew install cocoapods

## 4\. Adding React Native to your app [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#4-adding-react-native-to-your-app "Direct link to 4. Adding React Native to your app")

### Configuring CocoaPods [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#configuring-cocoapods "Direct link to Configuring CocoaPods")

To configure CocoaPods, we need two files:

- A **Gemfile** that defines which Ruby dependencies we need.
- A **Podfile** that defines how to properly install our dependencies.

For the **Gemfile**, go to the root directory of your project and run this command

```codeBlockLines_AclH
curl -O https://raw.githubusercontent.com/react-native-community/template/refs/heads/main/template/Gemfile

This will download the Gemfile from the template.

note

If you created your project with Xcode 16, you need to update the Gemfile as it follows:

+gem 'cocoapods', '1.16.2'

-gem 'xcodeproj', '< 1.26.0'
+gem 'xcodeproj', '1.27.0'

Xcode 16 generates a project in a slightly different ways from previous versions of Xcode, and you need the latest CocoaPods and Xcodeproj gems to make it work properly.

Similarly, for the **Podfile**, go to the `ios` folder of your project and run

```codeBlockLines_AclH
curl -O https://raw.githubusercontent.com/react-native-community/template/refs/heads/main/template/ios/Podfile

Please use the Community Template as a reference point for the [Gemfile](https://github.com/react-native-community/template/blob/main/template/Gemfile) and for the [Podfile](https://github.com/react-native-community/template/blob/main/template/ios/Podfile).

Remember to change [this line](https://github.com/react-native-community/template/blob/main/template/ios/Podfile#L17).

Now, we need to run a couple of extra commands to install the Ruby gems and the Pods.
Navigate to the `ios` folder and run the following commands:

sh

```codeBlockLines_AclH
bundle install
bundle exec pod install

The first command will install the Ruby dependencies and the second command will actually integrate the React Native code in your application so that your iOS files can import the React Native headers.

## 5\. Writing the TypeScript Code [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#5-writing-the-typescript-code "Direct link to 5. Writing the TypeScript Code")

Now we will actually modify the native iOS application to integrate React Native.

### Create a `index.js` file [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#create-a-indexjs-file "Direct link to create-a-indexjs-file")

Our `index.js` should look as follows (here the [Community template file as reference](https://github.com/react-native-community/template/blob/main/template/index.js)):

### Create a `App.tsx` file [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#create-a-apptsx-file "Direct link to create-a-apptsx-file")

Let's create an `App.tsx` file. This is a [TypeScript](https://www.typescriptlang.org/) file that can have [JSX](https://en.wikipedia.org/wiki/JSX_(JavaScript)) expressions. It contains the root React Native component that we will integrate into our iOS application ( [link](https://github.com/react-native-community/template/blob/main/template/App.tsx)):

## 5\. Integrating with your iOS code [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#5-integrating-with-your-ios-code "Direct link to 5. Integrating with your iOS code")

### Requirements [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#requirements "Direct link to Requirements")

React Native intialization is now unbound to any specific part of an iOS app.

React Native can be initialized using a class called `RCTReactNativeFactory`, that takes care of handling the React Native lifecycle for you.

Once the class is initialized, you can either start a React Native view providing a `UIWindow` object, or you can ask for the factory to generate a `UIView` that you can load in any `UIViewController.`

In the following example, we will create a ViewController that can load a React Native view as it's `view`.

#### Create the ReactViewController [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#create-the-reactviewcontroller "Direct link to Create the ReactViewController")

Create a new file from template ( `⌘` + `N`) and choose the Cocoa Touch Class template.

Make sure to select `UIViewController` as the "Subclass of" field.

- ObjectiveC
- Swift

Now open the `ReactViewController.m` file and apply the following changes

ReactViewController.m

#import "ReactViewController.h"

@end

+@interface ReactNativeFactoryDelegate: RCTDefaultReactNativeFactoryDelegate
+@end

-@implementation ReactViewController
+@implementation ReactViewController {
+ RCTReactNativeFactory *_factory;

+}

- (void)viewDidLoad {
[super viewDidLoad];
// Do any additional setup after loading the view.
+ _factoryDelegate = [ReactNativeFactoryDelegate new];
+ _factoryDelegate.dependencyProvider = [RCTAppDependencyProvider new];
+ _factory = [[RCTReactNativeFactory alloc] initWithDelegate:_factoryDelegate];
+ self.view = [_factory.rootViewFactory viewWithModuleName:@"HelloWorld"];
}

+@implementation ReactNativeFactoryDelegate
+
+- (NSURL *)sourceURLForBridge:(RCTBridge *)bridge
+{
+ return [self bundleURL];
+}
+
+- (NSURL *)bundleURL
+{
+#if DEBUG
+ return [RCTBundleURLProvider.sharedSettings jsBundleURLForBundleRoot:@"index"];
+#else
+ return [NSBundle.mainBundle URLForResource:@"main" withExtension:@"jsbundle"];
+#endif
+}

Now open the `ReactViewController.swift` file and apply the following changes

ReactViewController.swift

```codeBlockLines_AclH
import UIKit
+import React
+import React_RCTAppDelegate
+import ReactAppDependencyProvider

class ReactViewController: UIViewController {
+ var reactNativeFactory: RCTReactNativeFactory?
+ var reactNativeFactoryDelegate: RCTReactNativeFactoryDelegate?

override func viewDidLoad() {
super.viewDidLoad()
+ reactNativeFactoryDelegate = ReactNativeDelegate()
+ reactNativeFactoryDelegate!.dependencyProvider = RCTAppDependencyProvider()
+ reactNativeFactory = RCTReactNativeFactory(delegate: reactNativeFactoryDelegate!)
+ view = reactNativeFactory!.rootViewFactory.view(withModuleName: "HelloWorld")

}
}

+class ReactNativeDelegate: RCTDefaultReactNativeFactoryDelegate {

+ self.bundleURL()
+ }
+

+ #if DEBUG
+ RCTBundleURLProvider.sharedSettings().jsBundleURL(forBundleRoot: "index")
+ #else
+ Bundle.main.url(forResource: "main", withExtension: "jsbundle")
+ #endif
+ }
+
+}

#### Presenting a React Native view in a rootViewController [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#presenting-a-react-native-view-in-a-rootviewcontroller "Direct link to Presenting a React Native view in a rootViewController")

Finally, we can present our React Native view. To do so, we need a new View Controller that can host a view in which we can load the JS content.
We already have the initial `ViewController`, and we can make it present the `ReactViewController`. There are several ways to do so, depending on your app. For this example, we assume that you have a button that presents React Native modally.

ViewController.m

#import "ViewController.h"
```codeBlockLines_AclH
+#import "ReactViewController.h"

@interface ViewController ()

- @implementation ViewController
+@implementation ViewController {
+ ReactViewController *reactViewController;
+}

- (void)viewDidLoad {
[super viewDidLoad];
// Do any additional setup after loading the view.
self.view.backgroundColor = UIColor.systemBackgroundColor;
+ UIButton *button = [UIButton new];
+ [button setTitle:@"Open React Native" forState:UIControlStateNormal];
+ [button setTitleColor:UIColor.systemBlueColor forState:UIControlStateNormal];
+ [button setTitleColor:UIColor.blueColor forState:UIControlStateHighlighted];
+ [button addTarget:self action:@selector(presentReactNative) forControlEvents:UIControlEventTouchUpInside];
+ [self.view addSubview:button];

+ button.translatesAutoresizingMaskIntoConstraints = NO;
+ [NSLayoutConstraint activateConstraints:@[\
+ [button.leadingAnchor constraintEqualToAnchor:self.view.leadingAnchor],\
+ [button.trailingAnchor constraintEqualToAnchor:self.view.trailingAnchor],\
+ [button.centerYAnchor constraintEqualToAnchor:self.view.centerYAnchor],\
+ [button.centerXAnchor constraintEqualToAnchor:self.view.centerXAnchor],\
+ ]];
}

+- (void)presentReactNative
+{
+ if (reactViewController == NULL) {
+ reactViewController = [ReactViewController new];
+ }
+ [self presentViewController:reactViewController animated:YES];
+}

ViewController.swift

```codeBlockLines_AclH
import UIKit

class ViewController: UIViewController {

+ var reactViewController: ReactViewController?

override func viewDidLoad() {
super.viewDidLoad()
// Do any additional setup after loading the view.
self.view.backgroundColor = .systemBackground

+ let button = UIButton()
+ button.setTitle("Open React Native", for: .normal)
+ button.setTitleColor(.systemBlue, for: .normal)
+ button.setTitleColor(.blue, for: .highlighted)
+ button.addAction(UIAction { [weak self] _ in
+ guard let self else { return }
+ if reactViewController == nil {
+ reactViewController = ReactViewController()
+ }
+ present(reactViewController!, animated: true)
+ }, for: .touchUpInside)
+ self.view.addSubview(button)
+
+ button.translatesAutoresizingMaskIntoConstraints = false
+ NSLayoutConstraint.activate([\
+ button.leadingAnchor.constraint(equalTo: self.view.leadingAnchor),\
+ button.trailingAnchor.constraint(equalTo: self.view.trailingAnchor),\
+ button.centerXAnchor.constraint(equalTo: self.view.centerXAnchor),\
+ button.centerYAnchor.constraint(equalTo: self.view.centerYAnchor),\
+ ])
}
}

Make sure to disable the Sandbox scripting. To achieve this, in Xcode, click on your app, then on build settings. Filter for script and set the `User Script Sandboxing` to `NO`. This step is needed to properly switch between the Debug and Release version of the [Hermes engine](https://github.com/facebook/hermes/blob/main/README.md) that we ship with React Native.

Finally, make sure to add the `UIViewControllerBasedStatusBarAppearance` key into your `Info.plist` file, with value of `NO`.

Then, you need to create a `.watchmanconfig` file in the root of your project. The file must contain an empty json object:

Now build and run your iOS app as normal.

### Creating a release build in Xcode [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#creating-a-release-build-in-xcode "Direct link to Creating a release build in Xcode")

You can use Xcode to create your release builds too! The only additional step is to add a script that is executed when the app is built to package your JS and images into the iOS application.

1. In Xcode, select your application
2. Click on `Build Phases`
3. Click on the `+` in the top left corner and select `New Run Script Phase`
4. Click on the `Run Script` line and rename the Script to `Bundle React Native code and images`
5. Paste in the text box the following script

Build React Native code and image

```codeBlockLines_AclH
set -e

WITH_ENVIRONMENT="$REACT_NATIVE_PATH/scripts/xcode/with-environment.sh"
REACT_NATIVE_XCODE="$REACT_NATIVE_PATH/scripts/react-native-xcode.sh"

/bin/sh -c "$WITH_ENVIRONMENT $REACT_NATIVE_XCODE"

6. Drag and drop the script before the one called `[CP] Embed Pods Frameworks`.

Now, if you build your app for Release, it will work as expected.

## 7\. Passing initial props to the React Native view [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#7-passing-initial-props-to-the-react-native-view "Direct link to 7. Passing initial props to the React Native view")

In some case, you'd like to pass some information from the Native app to JavaScript. For example, you might want to pass the user id of the currently logged user to React Native, together with a token that can be used to retrieve information from a database.

This is possible by using the `initialProperties` parameter of the `view(withModuleName:initialProperty)` overload of the `RCTReactNativeFactory` class. The following steps shows you how to do it.

### Update the App.tsx file to read the initial properties. [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#update-the-apptsx-file-to-read-the-initial-properties "Direct link to Update the App.tsx file to read the initial properties.")

Open the `App.tsx` file and add the following code:

App.tsx

```codeBlockLines_AclH
import {
Colors,
DebugInstructions,
Header,
ReloadInstructions,
} from 'react-native/Libraries/NewAppScreen';

-function App(): React.JSX.Element {
+function App(props): React.JSX.Element {
const isDarkMode = useColorScheme() === 'dark';

- style={{
- backgroundColor: isDarkMode
- ? Colors.black
- : Colors.white,
- padding: 24,

- change this screen and see your edits.

const styles = StyleSheet.create({
title: {
fontSize: 24,
fontWeight: '600',
+ marginLeft: 20,
},
bold: {
fontWeight: '700',
},
});

These changes will tell React Native that your App component is now accepting some properties. The `RCTreactNativeFactory` will take care of passing them to the component when it's rendered.

### Update the Native code to pass the initial properties to JavaScript. [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#update-the-native-code-to-pass-the-initial-properties-to-javascript "Direct link to Update the Native code to pass the initial properties to JavaScript.")

Modify the `ReactViewController.mm` to pass the initial properties to JavaScript.

ReactViewController.mm

```codeBlockLines_AclH
- (void)viewDidLoad {
[super viewDidLoad];
// Do any additional setup after loading the view.

_factoryDelegate = [ReactNativeFactoryDelegate new];
_factoryDelegate.dependencyProvider = [RCTAppDependencyProvider new];
_factory = [[RCTReactNativeFactory alloc] initWithDelegate:_factoryDelegate];
- self.view = [_factory.rootViewFactory viewWithModuleName:@"HelloWorld"];
+ self.view = [_factory.rootViewFactory viewWithModuleName:@"HelloWorld" initialProperties:@{\
+ @"userID": @"12345678",\
+ @"token": @"secretToken"\
+ }];
}

Modify the `ReactViewController.swift` to pass the initial properties to the React Native view.

```codeBlockLines_AclH
override func viewDidLoad() {
super.viewDidLoad()
reactNativeFactoryDelegate = ReactNativeDelegate()
reactNativeFactoryDelegate!.dependencyProvider = RCTAppDependencyProvider()
reactNativeFactory = RCTReactNativeFactory(delegate: reactNativeFactoryDelegate!)
- view = reactNativeFactory!.rootViewFactory.view(withModuleName: "HelloWorld")
+ view = reactNativeFactory!.rootViewFactory.view(withModuleName: "HelloWorld" initialProperties: [\
+ "userID": "12345678",\
+ "token": "secretToken"\
+])

3. Run your app once again. You should see the following screen after you present the `ReactViewController`:

## Now what? [​](https://reactnative.dev/docs/next/integration-with-existing-apps\#now-what "Direct link to Now what?")

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/handling-touches

[Skip to main content](https://reactnative.dev/docs/next/handling-touches#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/handling-touches)** (0.81).

Version: Next

On this page

Users interact with mobile apps mainly through touch. They can use a combination of gestures, such as tapping on a button, scrolling a list, or zooming on a map. React Native provides components to handle all sorts of common gestures, as well as a comprehensive [gesture responder system](https://reactnative.dev/docs/next/gesture-responder-system) to allow for more advanced gesture recognition, but the one component you will most likely be interested in is the basic Button.

## Displaying a basic button [​](https://reactnative.dev/docs/next/handling-touches\#displaying-a-basic-button "Direct link to Displaying a basic button")

[Button](https://reactnative.dev/docs/next/button) provides a basic button component that is rendered nicely on all platforms. The minimal example to display a button looks like this:

tsx

```codeBlockLines_AclH
<Button

console.log('You tapped the button!');
}}
title="Press Me"

This will render a blue label on iOS, and a blue rounded rectangle with light text on Android. Pressing the button will call the "onPress" function, which in this case displays an alert popup. If you like, you can specify a "color" prop to change the color of your button.

Go ahead and play around with the `Button` component using the example below. You can select which platform your app is previewed in by clicking on the toggle in the bottom right and then clicking on "Tap to Play" to preview the app.

Button Basics - Snack

# Button Basics

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {Alert, Button, StyleSheet, View} from 'react-native';

Alert.alert('You tapped the button!');
};

return (

};

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
},
buttonContainer: {
margin: 20,
},
alternativeLayoutButtonContainer: {
margin: 20,
flexDirection: 'row',
justifyContent: 'space-between',
},
});

export default ButtonBasics;

Alert.alert('You tapped the button!');
};

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
},
buttonContainer: {
margin: 20,
},
alternativeLayoutButtonContainer: {
margin: 20,
flexDirection: 'row',
justifyContent: 'space-between',
},
});

Snack

Press Me

This looks great!

OK!

Updating…

PreviewMy DeviceAndroidiOSWeb

## Touchables [​](https://reactnative.dev/docs/next/handling-touches\#touchables "Direct link to Touchables")

If the basic button doesn't look right for your app, you can build your own button using any of the "Touchable" components provided by React Native. These components provide the capability to capture tapping gestures and can display feedback when a gesture is recognized. However, these components do not provide any default styling, so you will need to do a bit of work to get them looking nice in your app.

Which "Touchable" component you use will depend on what kind of feedback you want to provide:

- Generally, you can use [**TouchableHighlight**](https://reactnative.dev/docs/next/touchablehighlight) anywhere you would use a button or link on web. The view's background will be darkened when the user presses down on the button.

- You may consider using [**TouchableNativeFeedback**](https://reactnative.dev/docs/next/touchablenativefeedback) on Android to display ink surface reaction ripples that respond to the user's touch.

- [**TouchableOpacity**](https://reactnative.dev/docs/next/touchableopacity) can be used to provide feedback by reducing the opacity of the button, allowing the background to be seen through while the user is pressing down.

- If you need to handle a tap gesture but you don't want any feed.

In some cases, you may want to detect when a user presses and holds a view for a set amount of time. These long presses can be handled by passing a function to the `onLongPress` props of any of the "Touchable" components.

Let's see all of these in action:

Touchables - Snack

# Touchables

import React from 'react';
import {
Alert,
Platform,
StyleSheet,
Text,
TouchableHighlight,
TouchableOpacity,
TouchableNativeFeedback,
TouchableWithoutFeedback,
View,
} from 'react-native';

Alert.alert('You long-pressed the button!');
};

onPress={onPressButton}
background={
Platform.OS === 'android'
? TouchableNativeFeedback.SelectableBackground()
: undefined

{Platform.OS !== 'android' ? '(Android only)' : ''}

onPress={onPressButton}
onLongPress={onLongPressButton}

const styles = StyleSheet.create({
container: {
paddingTop: 60,
alignItems: 'center',
},
button: {
marginBottom: 30,
width: 260,
alignItems: 'center',
backgroundColor: '#2196F3',
},
buttonText: {
textAlign: 'center',
padding: 20,
color: 'white',
},
});

export default Touchables;

import React from 'react';
import {
Alert,
Platform,
StyleSheet,
Text,
TouchableHighlight,
TouchableOpacity,
TouchableNativeFeedback,
TouchableWithoutFeedback,
View,
} from 'react-native';

Alert.alert('You long-pressed the button!');
};

onPress={onPressButton}
background={
Platform.OS === 'android'
? TouchableNativeFeedback.SelectableBackground()
: undefined

onPress={onPressButton}
onLongPress={onLongPressButton}

const styles = StyleSheet.create({
container: {
paddingTop: 60,
alignItems: 'center',
},
button: {
marginBottom: 30,
width: 260,
alignItems: 'center',
backgroundColor: '#2196F3',
},
buttonText: {
textAlign: 'center',
padding: 20,
color: 'white',
},
});

TouchableHighlight

TouchableOpacity

TouchableNativeFeedback (Android only)

TouchableWithoutFeedback

Touchable with Long Press

## Scrolling and swiping [​](https://reactnative.dev/docs/next/handling-touches\#scrolling-and-swiping "Direct link to Scrolling and swiping")

Gestures commonly used on devices with touchable screens include swipes and pans. These allow the user to scroll through a list of items, or swipe through pages of content. For these, check out the [ScrollView](https://reactnative.dev/docs/next/scrollview) Core Component.

## Known issues [​](https://reactnative.dev/docs/next/handling-touches\#known-issues "Direct link to Known issues")

- [react-native#29308](https://github.com/facebook/react-native/issues/29308#issuecomment-792864162): The touch area never extends past the parent view bounds and on Android negative margin is not supported.

Is this page useful?

- [Displaying a basic button](https://reactnative.dev/docs/next/handling-touches#displaying-a-basic-button)
- [Touchables](https://reactnative.dev/docs/next/handling-touches#touchables)
- [Scrolling and swiping](https://reactnative.dev/docs/next/handling-touches#scrolling-and-swiping)
- [Known issues](https://reactnative.dev/docs/next/handling-touches#known-issues)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/global-global

[Skip to main content](https://reactnative.dev/docs/next/global-global#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

[`global`](https://nodejs.org/api/globals.html#global) is a legacy alias for [`globalThis`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis), as defined in Node.js.

The use of `globalThis` is recommended over `global`.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/safeareaview

[Skip to main content](https://reactnative.dev/docs/next/safeareaview#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/safeareaview)** (0.81).

Version: Next

On this page

Deprecated

Use [react-native-safe-area-context](https://github.com/AppAndFlow/react-native-safe-area-context) instead.

The purpose of `SafeAreaView` is to render content within the safe area boundaries of a device. It is currently only applicable to iOS devices with iOS version 11 or later.

`SafeAreaView` renders nested content and automatically applies padding to reflect the portion of the view that is not covered by navigation bars, tab bars, toolbars, and other ancestor views. Moreover, and most importantly, Safe Area's paddings reflect the physical limitation of the screen, such as rounded corners or camera notches (i.e. the sensor housing area on iPhone 13).

## Example [​](https://reactnative.dev/docs/next/safeareaview\#example "Direct link to Example")

To use, wrap your top level view with a `SafeAreaView` with a `flex: 1` style applied to it. You may also want to use a background color that matches your application's design.

SafeAreaView - Snack

# SafeAreaView

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {StyleSheet, Text, SafeAreaView} from 'react-native';

return (

};

const styles = StyleSheet.create({
container: {
flex: 1,
},
text: {
fontSize: 25,
fontWeight: '500',
},
});

export default App;

const styles = StyleSheet.create({
container: {
flex: 1,
},
text: {
fontSize: 25,
fontWeight: '500',
},
});

### Download [Expo Go](https://expo.dev/client) and scan the QR code to get started.

exp://u.expo.dev/933fd9c0-1666-11e7-afca-d980795c5824?runtime-version=exposdk%3A53.0.0&channel-name=production&snack-channel=6ArN3sB7PS

### Connected devices

0

[Log in](https://expo.dev/login) to open this Snack from Expo Go on your device or simulator.

PreviewMy DeviceiOS

* * *

# Reference

## Props [​](https://reactnative.dev/docs/next/safeareaview\#props "Direct link to Props")

### [View Props](https://reactnative.dev/docs/next/view\#props) [​](https://reactnative.dev/docs/next/safeareaview\#view-props "Direct link to view-props")

Inherits [View Props](https://reactnative.dev/docs/next/view#props).

note

As padding is used to implement the behavior of the component, padding rules in styles applied to a `SafeAreaView` will be ignored and can cause different results depending on the platform. See [#22211](https://github.com/facebook/react-native/issues/22211) for details.

Is this page useful?

- [Example](https://reactnative.dev/docs/next/safeareaview#example)
- [Props](https://reactnative.dev/docs/next/safeareaview#props)
- [View Props](https://reactnative.dev/docs/next/safeareaview#view-props)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/native-platform

[Skip to main content](https://reactnative.dev/docs/next/native-platform#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/native-platform)** (0.81).

Version: Next

Your application may need access to platform features that aren’t directly available from react-native or one of the hundreds of [third-party libraries](https://reactnative.directory/) maintained by the community. Maybe you want to reuse some existing Objective-C, Swift, Java, Kotlin or C++ code from the JavaScript runtime. Whatever your reason, React Native exposes a powerful set of API to connect your native code to your JavaScript application code.

This guide introduces:

- **Native Modules:** native libraries that have no User Interface (UI) for the user. Examples would be persistent storage, notifications, network events. These are accessible to your user as JavaScript functions and objects.
- **Native Component:** native platform views, widgets and controllers that are available to your application's JavaScript code through React Components.

note

You might have previously been familiar with:

- [Legacy Native Modules](https://reactnative.dev/docs/next/legacy/native-modules-intro);
- [Legacy Native Components](https://reactnative.dev/docs/next/legacy/native-components-android);

These are our deprecated native module and component API. You can still use many of these legacy libraries with the New Architecture thanks to our interop layers. You should consider:

- using alternative libraries,
- upgrading to newer library versions that have first-class support for the New Architecture, or
- port these libraries yourself to Turbo Native Modules or Fabric Native Components.

1. Native Modules
- [Android & iOS](https://reactnative.dev/docs/next/turbo-native-modules-introduction)
- [Cross-Platform with C++](https://reactnative.dev/docs/next/the-new-architecture/pure-cxx-modules)
- [Advanced: Custom C++ Types](https://reactnative.dev/docs/next/the-new-architecture/custom-cxx-types)
2. Fabric Native Components
- [Android & iOS](https://reactnative.dev/docs/next/fabric-native-components-introduction)

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/linking-libraries-ios

[Skip to main content](https://reactnative.dev/docs/next/linking-libraries-ios#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/linking-libraries-ios)** (0.81).

Version: Next

On this page

Not every app uses all the native capabilities, and including the code to support all those features would impact the binary size... But we still want to support adding these features whenever you need them.

With that in mind we exposed many of these features as independent static libraries.

For most of the libs it will be as quick as dragging two files, sometimes a third step will be necessary, but no more than that.

note

All the libraries we ship with React Native live in the `Libraries` folder in the root of the repository. Some of them are pure JavaScript, and you only need to `require` it.
Other libraries also rely on some native code, in that case you'll have to add these files to your app, otherwise the app will throw an error as soon as you try to use the library.

## Here are the few steps to link your libraries that contain native code [​](https://reactnative.dev/docs/next/linking-libraries-ios\#here-are-the-few-steps-to-link-your-libraries-that-contain-native-code "Direct link to Here are the few steps to link your libraries that contain native code")

### Automatic linking [​](https://reactnative.dev/docs/next/linking-libraries-ios\#automatic-linking "Direct link to Automatic linking")

Install a library with native dependencies:

shell

```codeBlockLines_AclH

info

`--save` or `--save-dev` flag is very important for this step. React Native will link your libs based on `dependencies` and `devDependencies` in your `package.json` file.

That's it! Next time you build your app the native code will be linked thanks to the [autolinking](https://github.com/react-native-community/cli/blob/main/docs/autolinking.md) mechanism.

#### Step 1 [​](https://reactnative.dev/docs/next/linking-libraries-ios\#step-1 "Direct link to Step 1")

If the library has native code, there must be an `.xcodeproj` file inside its folder. Drag this file to your project on Xcode (usually under the `Libraries` group on Xcode);

#### Step 2 [​](https://reactnative.dev/docs/next/linking-libraries-ios\#step-2 "Direct link to Step 2")

Click on your main project file (the one that represents the `.xcodeproj`) select `Build Phases` and drag the static library from the `Products` folder inside the Library you are importing to `Link Binary With Libraries`

#### Step 3 [​](https://reactnative.dev/docs/next/linking-libraries-ios\#step-3 "Direct link to Step 3")

Not every library will need this step, what you need to consider is:

_Do I need to know the contents of the library at compile time?_

What that means is, are you using this library on the native side or only in JavaScript? If you are only using it in JavaScript, you are good to go!

If you do need to call it from native, then we need to know the library's headers. To achieve that you have to go to your project's file, select `Build Settings` and search for `Header Search Paths`. There you should include the path to your library. (This documentation used to recommend using `recursive`, but this is no longer recommended, as it can cause subtle build failures, especially with CocoaPods.)

Is this page useful?

- [Here are the few steps to link your libraries that contain native code](https://reactnative.dev/docs/next/linking-libraries-ios#here-are-the-few-steps-to-link-your-libraries-that-contain-native-code)
- [Automatic linking](https://reactnative.dev/docs/next/linking-libraries-ios#automatic-linking)
- [Manual linking](https://reactnative.dev/docs/next/linking-libraries-ios#manual-linking)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/optimizing-javascript-loading

[Skip to main content](https://reactnative.dev/docs/next/optimizing-javascript-loading#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/optimizing-javascript-loading)** (0.81).

Version: Next

On this page

Parsing and running JavaScript code requires memory and time. Because of this, as your app grows, it's often useful to delay loading code until it's needed for the first time. React Native comes with some standard optimizations that are on by default, and there are techniques you can adopt in your own code to help React load your app more efficiently. There are also some advanced automatic optimizations (with their own tradeoffs) that are suitable for very large apps.

## Recommended: Use Hermes [​](https://reactnative.dev/docs/next/optimizing-javascript-loading\#recommended-use-hermes "Direct link to Recommended: Use Hermes")

Hermes is the default engine for new React Native apps, and is highly optimized for efficient code loading. In release builds, JavaScript code is fully compiled to bytecode ahead of time. Bytecode is loaded to memory on-demand and does not need to be parsed like plain JavaScript does.

info

Read more about using Hermes in React Native [here](https://reactnative.dev/docs/next/hermes).

## Recommended: Lazy-load large components [​](https://reactnative.dev/docs/next/optimizing-javascript-loading\#recommended-lazy-load-large-components "Direct link to Recommended: Lazy-load large components")

If a component with a lot of code/dependencies is not likely to be used when initially rendering your app, you can use React's [`lazy`](https://react.dev/reference/react/lazy) API to defer loading its code until it's rendered for the first time. Typically, you should consider lazy-loading screen-level components in your app, so that adding new screens to your app does not increase its startup time.

Read more about [lazy-loading components with Suspense](https://react.dev/reference/react/lazy#suspense-for-code-splitting), including code examples, in React's documentation.

### Tip: Avoid module side effects [​](https://reactnative.dev/docs/next/optimizing-javascript-loading\#tip-avoid-module-side-effects "Direct link to Tip: Avoid module side effects")

Lazy-loading components can change the behavior of your app if your component modules (or their dependencies) have _side effects_, such as modifying global variables or subscribing to events outside of a component. Most modules in React apps should not have any side effects.

SideEffects.tsx

```codeBlockLines_AclH
import Logger from './utils/Logger';

// 🚩 🚩 🚩 Side effect! This must be executed before React can even begin to
// render the SplashScreen component, and can unexpectedly break code elsewhere
// in your app if you later decide to lazy-load SplashScreen.
global.logger = new Logger();

export function SplashScreen() {
// ...
}

## Advanced: Call `require` inline [​](https://reactnative.dev/docs/next/optimizing-javascript-loading\#advanced-call-require-inline "Direct link to advanced-call-require-inline")

Sometimes you may want to defer loading some code until you use it for the first time, without using `lazy` or an asynchronous `import()`. You can do this by using the [`require()`](https://metrobundler.dev/docs/module-api/#require) function where you would otherwise use a static `import` at the top of the file.

VeryExpensive.tsx

```codeBlockLines_AclH
import {Component} from 'react';
import {Text} from 'react-native';
// ... import some very expensive modules

export default function VeryExpensive() {
// ... lots and lots of rendering logic

}

Optimized.tsx

```codeBlockLines_AclH
import {useCallback, useState} from 'react';
import {TouchableOpacity, View, Text} from 'react-native';
// Usually we would write a static import:
// import VeryExpensive from './VeryExpensive';

let VeryExpensive = null;

export default function Optimize() {
const [needsExpensive, setNeedsExpensive] = useState(false);

if (VeryExpensive == null) {
VeryExpensive = require('./VeryExpensive').default;
}

setNeedsExpensive(true);
}, []);

return (

## Advanced: Automatically inline `require` calls [​](https://reactnative.dev/docs/next/optimizing-javascript-loading\#advanced-automatically-inline-require-calls "Direct link to advanced-automatically-inline-require-calls")

If you use the React Native CLI to build your app, `require` calls (but not `import` s) will automatically be inlined for you, both in your code and inside any third-party packages ( `node_modules`) you use.

tsx

```codeBlockLines_AclH
import {useCallback, useState} from 'react';
import {TouchableOpacity, View, Text} from 'react-native';

// This top-level require call will be evaluated lazily as part of the component below.
const VeryExpensive = require('./VeryExpensive').default;

Some React Native frameworks disable this behavior. In particular, in Expo projects, `require` calls are not inlined by default. You can enable this optimization by editing your project's Metro config and setting `inlineRequires: true` in [`getTransformOptions`](https://metrobundler.dev/docs/configuration#gettransformoptions).

### Pitfalls of inline `require` s [​](https://reactnative.dev/docs/next/optimizing-javascript-loading\#pitfalls-of-inline-requires "Direct link to pitfalls-of-inline-requires")

Inlining `require` calls changes the order in which modules are evaluated, and can even cause some modules to _never_ be evaluated. This is usually safe to do automatically, because JavaScript modules are often written to be side-effect-free.

If one of your modules does have side effects - for example, if it initializes some logging mechanism, or patches a global API used by the rest of your code - then you might see unexpected behavior or even crashes. In those cases, you may want to exclude certain modules from this optimization, or disable it entirely.

To **disable all automatic inlining of `require` calls:**

Update your `metro.config.js` to set the `inlineRequires` transformer option to `false`:

metro.config.js

```codeBlockLines_AclH
module.exports = {
transformer: {
async getTransformOptions() {
return {
transform: {
inlineRequires: false,
},
};
},
},
};

To only **exclude certain modules from `require` inlining:**

There are two relevant transformer options: `inlineRequires.blockList` and `nonInlinedRequires`. See the code snippet for examples of how to use each one.

```codeBlockLines_AclH
module.exports = {
transformer: {
async getTransformOptions() {
return {
transform: {
inlineRequires: {
blockList: {
// require() calls in `DoNotInlineHere.js` will not be inlined.
[require.resolve('./src/DoNotInlineHere.js')]: true,

// require() calls anywhere else will be inlined, unless they
// match any entry nonInlinedRequires (see below).
},
},
nonInlinedRequires: [\
// require('react') calls will not be inlined anywhere\
'react',\
],
},
};
},
},
};

See the documentation for [`getTransformOptions` in Metro](https://metrobundler.dev/docs/configuration#gettransformoptions) for more details on setting up and fine-tuning your inline `require` s.

## Advanced: Use random access module bundles (non-Hermes) [​](https://reactnative.dev/docs/next/optimizing-javascript-loading\#advanced-use-random-access-module-bundles-non-hermes "Direct link to Advanced: Use random access module bundles (non-Hermes)")

tip

**Not supported when [using Hermes](https://reactnative.dev/docs/next/optimizing-javascript-loading#use-hermes).** Hermes bytecode is not compatible with the RAM bundle format, and provides the same (or better) performance in all use cases.

Random access module bundles (also known as RAM bundles) work in conjunction with the techniques mentioned above to limit the amount of JavaScript code that needs to be parsed and loaded into memory. Each module is stored as a separate string (or file) which is only parsed when the module needs to be executed.

RAM bundles may be physically split into separate files, or they may use the _indexed_ format, consisting of a lookup table of multiple modules in a single file.

- Android
- iOS

On Android enable the RAM format by editing your `android/app/build.gradle` file. Before the line `apply from: "../../node_modules/react-native/react.gradle"` add or amend the `project.ext.react` block:

```codeBlockLines_AclH
project.ext.react = [\
bundleCommand: "ram-bundle",\
]

Use the following lines on Android if you want to use a single indexed file:

```codeBlockLines_AclH
project.ext.react = [\
bundleCommand: "ram-bundle",\
extraPackagerArgs: ["--indexed-ram-bundle"]\
]

On iOS, RAM bundles are always indexed ( = single file).

Enable the RAM format in Xcode by editing the build phase "Bundle React Native code and images". Before `../node_modules/react-native/scripts/react-native-xcode.sh` add `export BUNDLE_COMMAND="ram-bundle"`:

```codeBlockLines_AclH
export BUNDLE_COMMAND="ram-bundle"
export NODE_BINARY=node
../node_modules/react-native/scripts/react-native-xcode.sh

See the documentation for [`getTransformOptions` in Metro](https://metrobundler.dev/docs/configuration#gettransformoptions) for more details on setting up and fine-tuning your RAM bundle build.

Is this page useful?

- [Recommended: Use Hermes](https://reactnative.dev/docs/next/optimizing-javascript-loading#recommended-use-hermes)
- [Recommended: Lazy-load large components](https://reactnative.dev/docs/next/optimizing-javascript-loading#recommended-lazy-load-large-components)
- [Tip: Avoid module side effects](https://reactnative.dev/docs/next/optimizing-javascript-loading#tip-avoid-module-side-effects)
- [Advanced: Call `require` inline](https://reactnative.dev/docs/next/optimizing-javascript-loading#advanced-call-require-inline)
- [Advanced: Automatically inline `require` calls](https://reactnative.dev/docs/next/optimizing-javascript-loading#advanced-automatically-inline-require-calls)
- [Pitfalls of inline `require` s](https://reactnative.dev/docs/next/optimizing-javascript-loading#pitfalls-of-inline-requires)
- [Advanced: Use random access module bundles (non-Hermes)](https://reactnative.dev/docs/next/optimizing-javascript-loading#advanced-use-random-access-module-bundles-non-hermes)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/strict-typescript-api

[Skip to main content](https://reactnative.dev/docs/next/strict-typescript-api#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/strict-typescript-api)** (0.81).

Version: Next

On this page

The Strict TypeScript API is a preview of our future, stable JavaScript API for React Native.

Specifically, this is a new set of TypeScript types for the `react-native` npm package, available from 0.80 onwards. These provide stronger and more futureproof type accuracy, and will allow us to confidently evolve React Native's API into a stable shape. Opting in to the Strict TypeScript API brings some structural type differences, and is therefore a one-time breaking change.

The new types are:

1. **Generated directly from our source code** — improving coverage and correctness, so you can expect stronger compatibility guarantees.
2. **Restricted to `react-native`'s index file** — more tightly defining our public API, and meaning we won't break the API when making internal file changes.

When the community is ready, the Strict TypeScript API will become our default API in future — synchronized with deep imports removal.

## Opting in [​](https://reactnative.dev/docs/next/strict-typescript-api\#opting-in "Direct link to Opting in")

We're shipping these new types alongside our existing types, meaning you can choose to migrate when ready. We encourage early adopters and newly created apps to opt in via your `tsconfig.json` file.

Opting in is a **breaking change**, since some of our new types have updated names and shapes, although many apps won't be affected. You can learn about each breaking change in the next section.

tsconfig.json

```codeBlockLines_AclH
{
"extends": "@react-native/typescript-config",
"compilerOptions": {
...
"customConditions": ["react-native-strict-api"]
}
}

Under the hood

This will instruct TypeScript to resolve `react-native` types from our new [`types_generated/`](https://www.npmjs.com/package/react-native?activeTab=code) dir, instead of the previous [`types/`](https://www.npmjs.com/package/react-native?activeTab=code) dir (manually maintained). No restart of TypeScript or your editor is required.

The Strict TypeScript API follows our [RFC](https://github.com/react-native-community/discussions-and-proposals/pull/894) to remove deep imports from React Native. Therefore, some APIs are no longer exported at root. This is intentional, in order to reduce the overall surface area of React Native's API.

API feedback

**Sending feedback**: We will be working with the community to finalize which APIs we export over (at least) the next two React Native releases. Please share your feedback in our [feedback thread](https://github.com/react-native-community/discussions-and-proposals/discussions/893).

See also our [announcement blog post](https://reactnative.dev/blog/2025/06/12/moving-towards-a-stable-javascript-api) for more info on our motivation and timelines.

## Migration guide [​](https://reactnative.dev/docs/next/strict-typescript-api\#migration-guide "Direct link to Migration guide")

### Codegen types should now be imported from the `react-native` package [​](https://reactnative.dev/docs/next/strict-typescript-api\#codegen-types-should-now-be-imported-from-the-react-native-package "Direct link to codegen-types-should-now-be-imported-from-the-react-native-package")

Types used for codegen, like `Int32`, `Double`, `WithDefault` etc. are now available under a single `CodegenTypes` namespace. Similarly, `codegenNativeComponent` and `codegenNativeCommands` are now available to import from the react-native package instead of using the deep import.

Namespaced `CodegenTypes` as well as `codegenNativeCommands` and `codegenNativeComponent` are also available from `react-native` package when the Strict API is not enabled to make the adoption easier for third-party libraries.

**Before**

```codeBlockLines_AclH
import codegenNativeComponent from 'react-native/Libraries/Utilities/codegenNativeComponent';
import type {
Int32,
WithDefault,
} from 'react-native/Libraries/Types/CodegenTypes';

interface NativeProps extends ViewProps {

size?: Int32;
}

'RNCustomComponent',
);

**After**

```codeBlockLines_AclH
import {CodegenTypes, codegenNativeComponent} from 'react-native';

size?: CodegenTypes.Int32;
}

### Removal of `*Static` types [​](https://reactnative.dev/docs/next/strict-typescript-api\#removal-of-static-types "Direct link to removal-of-static-types")

```codeBlockLines_AclH
import {Linking, LinkingStatic} from 'react-native';

function foo(linking: LinkingStatic) {}
foo(Linking);

```codeBlockLines_AclH
import {Linking} from 'react-native';

function foo(linking: Linking) {}
foo(Linking);

The following APIs were previously named as `*Static` plus a variable declaration of said type. In most cases there was an alias so that value and the type were exported under the same identifier, but some were missing.

(For example there was an `AlertStatic` type, `Alert` variable of type `AlertStatic` and type `Alert` which was an alias for `AlertStatic`. But in the case of `PixelRatio` there was a `PixelRatioStatic` type and a `PixelRatio` variable of that type without additional type aliases.)

**Affected APIs**

- `AlertStatic`
- `ActionSheetIOSStatic`
- `ToastAndroidStatic`
- `InteractionManagerStatic` (In this case there was no relevant `InteractionManager` type alias)
- `UIManagerStatic`
- `PlatformStatic`
- `SectionListStatic`
- `PixelRatioStatic` (In this case there was no relevant `PixelRatio` type alias)
- `AppStateStatic`
- `AccessibilityInfoStatic`
- `ImageResizeModeStatic`
- `BackHandlerStatic`
- `DevMenuStatic` (In this case there was no relevant `DevMenu` type alias)
- `ClipboardStatic`
- `PermissionsAndroidStatic`
- `ShareStatic`
- `DeviceEventEmitterStatic`
- `LayoutAnimationStatic`
- `KeyboardStatic` (In this case there was no relevant `Keyboard` type alias)
- `DevSettingsStatic` (In this case there was no relevant `DevSettings` type alias)
- `I18nManagerStatic`
- `EasingStatic`
- `PanResponderStatic`
- `NativeModulesStatic` (In this case there was no relevant `NativeModules` type alias)
- `LogBoxStatic`
- `PushNotificationIOSStatic`
- `SettingsStatic`
- `VibrationStatic`

### Some core components are now function components instead of class components [​](https://reactnative.dev/docs/next/strict-typescript-api\#some-core-components-are-now-function-components-instead-of-class-components "Direct link to Some core components are now function components instead of class components")

- `View`
- `Image`
- `TextInput`
- `Modal`
- `Text`
- `TouchableWithoutFeedback`
- `Switch`
- `ActivityIndicator`
- `ProgressBarAndroid`
- `InputAccessoryView`
- `Button`
- `SafeAreaView`

```codeBlockLines_AclH
const ref = useRef<React.ComponentRef<typeof View>>(null);

## Other breaking changes [​](https://reactnative.dev/docs/next/strict-typescript-api\#other-breaking-changes "Direct link to Other breaking changes")

### Changes to Animated types [​](https://reactnative.dev/docs/next/strict-typescript-api\#changes-to-animated-types "Direct link to Changes to Animated types")

Animated nodes were previously generic types based on their interpolation output. Now, they are non-generic types with a generic `interpolate` method.

`Animated.LegacyRef` is no longer available.

### Unified types for optional props [​](https://reactnative.dev/docs/next/strict-typescript-api\#unified-types-for-optional-props "Direct link to Unified types for optional props")

In the new types, every optional prop will be typed as `type | undefined`.

### Removal of some deprecated types [​](https://reactnative.dev/docs/next/strict-typescript-api\#removal-of-some-deprecated-types "Direct link to Removal of some deprecated types")

All types listed in [`DeprecatedPropertiesAlias.d.ts`](https://github.com/facebook/react-native/blob/0.80-stable/packages/react-native/types/public/DeprecatedPropertiesAlias.d.ts) are inaccessible under the Strict API.

### Removal of leftover component props [​](https://reactnative.dev/docs/next/strict-typescript-api\#removal-of-leftover-component-props "Direct link to Removal of leftover component props")

Some properties that were defined in type definitions but were not used by the component or were lacking a definition were removed (for example: `lineBreakMode` on `Text`, `scrollWithoutAnimationTo` on `ScrollView`, transform styles defined outside of transform array).

### Previously accessible private type helpers may now be removed [​](https://reactnative.dev/docs/next/strict-typescript-api\#previously-accessible-private-type-helpers-may-now-be-removed "Direct link to Previously accessible private type helpers may now be removed")

Due to the configuration of the previous type definitions, every defined type was accessible from the `react-native` package. This included types that were not explicitly exported and helper types that were only supposed to be used internally.

Notable examples of this are types related to StyleSheet (like `RecursiveArray`, `RegisteredStyle` and `Falsy`) and Animated (like `WithAnimatedArray` and `WithAnimatedObject`).

Is this page useful?

- [Opting in](https://reactnative.dev/docs/next/strict-typescript-api#opting-in)
- [Migration guide](https://reactnative.dev/docs/next/strict-typescript-api#migration-guide)
- [Codegen types should now be imported from the `react-native` package](https://reactnative.dev/docs/next/strict-typescript-api#codegen-types-should-now-be-imported-from-the-react-native-package)
- [Removal of `*Static` types](https://reactnative.dev/docs/next/strict-typescript-api#removal-of-static-types)
- [Some core components are now function components instead of class components](https://reactnative.dev/docs/next/strict-typescript-api#some-core-components-are-now-function-components-instead-of-class-components)
- [Other breaking changes](https://reactnative.dev/docs/next/strict-typescript-api#other-breaking-changes)
- [Changes to Animated types](https://reactnative.dev/docs/next/strict-typescript-api#changes-to-animated-types)
- [Unified types for optional props](https://reactnative.dev/docs/next/strict-typescript-api#unified-types-for-optional-props)
- [Removal of some deprecated types](https://reactnative.dev/docs/next/strict-typescript-api#removal-of-some-deprecated-types)
- [Removal of leftover component props](https://reactnative.dev/docs/next/strict-typescript-api#removal-of-leftover-component-props)
- [Previously accessible private type helpers may now be removed](https://reactnative.dev/docs/next/strict-typescript-api#previously-accessible-private-type-helpers-may-now-be-removed)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/touchablehighlight

[Skip to main content](https://reactnative.dev/docs/next/touchablehighlight#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/touchablehighlight)** (0.81).

Version: Next

On this page

tip

If you're looking for a more extensive and future-proof way to handle touch-based input, check out the [Pressable](https://reactnative.dev/docs/next/pressable) API.

A wrapper for making views respond properly to touches. On press down, the opacity of the wrapped view is decreased, which allows the underlay color to show through, darkening or tinting the view.

The underlay comes from wrapping the child in a new View, which can affect layout, and sometimes cause unwanted visual artifacts if not used correctly, for example if the backgroundColor of the wrapped view isn't explicitly set to an opaque color.

TouchableHighlight must have one child (not zero or more than one). If you wish to have several child components, wrap them in a View.

tsx

```codeBlockLines_AclH
function MyComponent(props: MyComponentProps) {
return (

}

<TouchableHighlight
activeOpacity={0.6}
underlayColor="#DDDDDD"

## Example [​](https://reactnative.dev/docs/next/touchablehighlight\#example "Direct link to Example")

TouchableHighlight Example - Snack

# TouchableHighlight Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React, {useState} from 'react';
import {StyleSheet, Text, TouchableHighlight, View} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const \[count, setCount\] = useState(0);

return (

};

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
paddingHorizontal: 10,
},
button: {
alignItems: 'center',
backgroundColor: '#DDDDDD',
padding: 10,
},
countContainer: {
alignItems: 'center',
padding: 10,
},
countText: {
color: '#FF00FF',
},
});

export default TouchableHighlightExample;

const [count, setCount] = useState(0);

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
paddingHorizontal: 10,
},
button: {
alignItems: 'center',
backgroundColor: '#DDDDDD',
padding: 10,
},
countContainer: {
alignItems: 'center',
padding: 10,
},
countText: {
color: '#FF00FF',
},
});

Snack

Touch Here

Updating…

PreviewMy DeviceAndroidiOSWeb

* * *

# Reference

## Props [​](https://reactnative.dev/docs/next/touchablehighlight\#props "Direct link to Props")

### [TouchableWithoutFeedback Props](https://reactnative.dev/docs/next/touchablewithoutfeedback\#props) [​](https://reactnative.dev/docs/next/touchablehighlight\#touchablewithoutfeedback-props "Direct link to touchablewithoutfeedback-props")

Inherits [TouchableWithoutFeedback Props](https://reactnative.dev/docs/next/touchablewithoutfeedback#props).

### `activeOpacity` [​](https://reactnative.dev/docs/next/touchablehighlight\#activeopacity "Direct link to activeopacity")

Determines what the opacity of the wrapped view should be when touch is active. The value should be between 0 and 1. Defaults to 0.85. Requires `underlayColor` to be set.

| Type |
| --- |
| number |

### `onHideUnderlay` [​](https://reactnative.dev/docs/next/touchablehighlight\#onhideunderlay "Direct link to onhideunderlay")

Called immediately after the underlay is hidden.

| Type |
| --- |
| function |

### `onShowUnderlay` [​](https://reactnative.dev/docs/next/touchablehighlight\#onshowunderlay "Direct link to onshowunderlay")

Called immediately after the underlay is shown.

### `ref` [​](https://reactnative.dev/docs/next/touchablehighlight\#ref "Direct link to ref")

A ref setter that will be assigned an [element node](https://reactnative.dev/docs/next/element-nodes) when mounted.

### `style` [​](https://reactnative.dev/docs/next/touchablehighlight\#style "Direct link to style")

| Type |
| --- |
| View.style |

### `underlayColor` [​](https://reactnative.dev/docs/next/touchablehighlight\#underlaycolor "Direct link to underlaycolor")

The color of the underlay that will show through when the touch is active.

| Type |
| --- |
| [color](https://reactnative.dev/docs/next/colors) |

### `hasTVPreferredFocus` iOS [​](https://reactnative.dev/docs/next/touchablehighlight\#hastvpreferredfocus-ios "Direct link to hastvpreferredfocus-ios")

_(Apple TV only)_ TV preferred focus (see documentation for the View component).

| Type |
| --- |
| bool |

### `nextFocusDown` Android [​](https://reactnative.dev/docs/next/touchablehighlight\#nextfocusdown-android "Direct link to nextfocusdown-android")

TV next focus down (see documentation for the View component).

### `nextFocusForward` Android [​](https://reactnative.dev/docs/next/touchablehighlight\#nextfocusforward-android "Direct link to nextfocusforward-android")

TV next focus forward (see documentation for the View component).

### `nextFocusLeft` Android [​](https://reactnative.dev/docs/next/touchablehighlight\#nextfocusleft-android "Direct link to nextfocusleft-android")

TV next focus left (see documentation for the View component).

### `nextFocusRight` Android [​](https://reactnative.dev/docs/next/touchablehighlight\#nextfocusright-android "Direct link to nextfocusright-android")

TV next focus right (see documentation for the View component).

### `nextFocusUp` Android [​](https://reactnative.dev/docs/next/touchablehighlight\#nextfocusup-android "Direct link to nextfocusup-android")

TV next focus up (see documentation for the View component).

### `testOnly_pressed` [​](https://reactnative.dev/docs/next/touchablehighlight\#testonly_pressed "Direct link to testonly_pressed")

Handy for snapshot tests.

Is this page useful?

- [Example](https://reactnative.dev/docs/next/touchablehighlight#example)
- [Props](https://reactnative.dev/docs/next/touchablehighlight#props)
- [TouchableWithoutFeedback Props](https://reactnative.dev/docs/next/touchablehighlight#touchablewithoutfeedback-props)
- [`activeOpacity`](https://reactnative.dev/docs/next/touchablehighlight#activeopacity)
- [`onHideUnderlay`](https://reactnative.dev/docs/next/touchablehighlight#onhideunderlay)
- [`onShowUnderlay`](https://reactnative.dev/docs/next/touchablehighlight#onshowunderlay)
- [`ref`](https://reactnative.dev/docs/next/touchablehighlight#ref)
- [`style`](https://reactnative.dev/docs/next/touchablehighlight#style)
- [`underlayColor`](https://reactnative.dev/docs/next/touchablehighlight#underlaycolor)
- [`hasTVPreferredFocus` \\
iOS](https://reactnative.dev/docs/next/touchablehighlight#hastvpreferredfocus-ios)
- [`nextFocusDown` \\
Android](https://reactnative.dev/docs/next/touchablehighlight#nextfocusdown-android)
- [`nextFocusForward` \\
Android](https://reactnative.dev/docs/next/touchablehighlight#nextfocusforward-android)
- [`nextFocusLeft` \\
Android](https://reactnative.dev/docs/next/touchablehighlight#nextfocusleft-android)
- [`nextFocusRight` \\
Android](https://reactnative.dev/docs/next/touchablehighlight#nextfocusright-android)
- [`nextFocusUp` \\
Android](https://reactnative.dev/docs/next/touchablehighlight#nextfocusup-android)
- [`testOnly_pressed`](https://reactnative.dev/docs/next/touchablehighlight#testonly_pressed)

# How are we doing?

Help us make the site even better by answering a few quick questions!

[No Thanks](https://reactnative.dev/docs/next/touchablehighlight#) [Give Feedback](https://www.surveymonkey.com/r/CCPP62S)

[powered by](https://www.surveymonkey.com/?ut_source=powered_by&ut_source2=new_website_collector)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/metro

[Skip to main content](https://reactnative.dev/docs/next/metro#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/metro)** (0.81).

Version: Next

On this page

React Native uses [Metro](https://metrobundler.dev/) to build your JavaScript code and assets.

## Configuring Metro [​](https://reactnative.dev/docs/next/metro\#configuring-metro "Direct link to Configuring Metro")

Configuration options for Metro can be customized in your project's `metro.config.js` file. This can export either:

- **An object (recommended)** that will be merged on top of Metro's internal config defaults.
- [**A function**](https://reactnative.dev/docs/next/metro#advanced-using-a-config-function) that will be called with Metro's internal config defaults and should return a final config object.

tip

Please see [**Configuring Metro**](https://metrobundler.dev/docs/configuration) on the Metro website for documentation on all available config options.

In React Native, your Metro config should extend either [`@react-native/metro-config`](https://www.npmjs.com/package/@react-native/metro-config) or [`@expo/metro-config`](https://www.npmjs.com/package/@expo/metro-config). These packages contain essential defaults necessary to build and run React Native apps.

Below is the default `metro.config.js` file in a React Native template project:

js

```codeBlockLines_AclH
const {getDefaultConfig, mergeConfig} = require('@react-native/metro-config');

/**
* Metro configuration
* https://metrobundler.dev/docs/configuration

* @type {import('metro-config').MetroConfig}
*/
const config = {};

module.exports = mergeConfig(getDefaultConfig(__dirname), config);

Metro options you wish to customize can be done so within the `config` object.

### Advanced: Using a config function [​](https://reactnative.dev/docs/next/metro\#advanced-using-a-config-function "Direct link to Advanced: Using a config function")

Exporting a config function is an opt-in to managing the final config yourself — **Metro will not apply any internal defaults**. This pattern can be useful when needing to read the base default config object from Metro or to set options dynamically.

info

**From `@react-native/metro-config` 0.72.1**, it is no longer necessary to use a config function to access the complete default config. See the **Tip** section below.

module.exports = function (baseConfig) {
const defaultConfig = mergeConfig(baseConfig, getDefaultConfig(__dirname));
const {resolver: {assetExts, sourceExts}} = defaultConfig;

return mergeConfig(
defaultConfig,
{
resolver: {

sourceExts: [...sourceExts, 'svg'],
},
},
);
};

Using a config function is for advanced use cases. A simpler method than the above, e.g. for customising `sourceExts`, would be to read these defaults from `@react-native/metro-config`.

**Alternative**

```codeBlockLines_AclH
const defaultConfig = getDefaultConfig(__dirname);

const config = {
resolver: {
sourceExts: [...defaultConfig.resolver.sourceExts, 'svg'],
},
};

module.exports = mergeConfig(defaultConfig, config);

**However!**, we recommend copying and editing when overriding these config values — placing the source of truth in your config file.

✅ **Recommended**

```codeBlockLines_AclH
const config = {
resolver: {
sourceExts: ['js', 'ts', 'tsx', 'svg'],
},
};

## Learn more about Metro [​](https://reactnative.dev/docs/next/metro\#learn-more-about-metro "Direct link to Learn more about Metro")

- [Metro website](https://metrobundler.dev/)
- [Video: "Metro & React Native DevX" talk at App.js 2023](https://www.youtube.com/watch?v=c9D4pg0y9cI)

Is this page useful?

- [Configuring Metro](https://reactnative.dev/docs/next/metro#configuring-metro)
- [Advanced: Using a config function](https://reactnative.dev/docs/next/metro#advanced-using-a-config-function)
- [Learn more about Metro](https://reactnative.dev/docs/next/metro#learn-more-about-metro)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/the-new-architecture/create-module-library

[Skip to main content](https://reactnative.dev/docs/next/the-new-architecture/create-module-library#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/the-new-architecture/create-module-library)** (0.81).

Version: Next

On this page

React Native has a rich ecosystem of libraries to solve common problems. We collect React Native libraries in the [reactnative.directory](https://reactnative.directory/) website, and this is a great resource to bookmark for every React Native developer.

Sometimes, you might be working on a module that is worth extracting in a separate library for code reuse. This can be a library that you want to reuse in all your apps, a library that you want to distribute to the ecosystem as an open source component, or even a library you'd like to sell.

In this guide, you'll learn:

- how to extract a module into a library
- how to distribute the library using NPM

## Extract the Module into a Library [​](https://reactnative.dev/docs/next/the-new-architecture/create-module-library\#extract-the-module-into-a-library "Direct link to Extract the Module into a Library")

You can use the [`create-react-native-library`](https://callstack.github.io/react-native-builder-bob/create) tool to create a new library. This tool sets up a new library with all the boilerplate code that is needed: all the configuration files and all files required by the various platforms. It also comes with a nice interactive menu to guide you through the creation of the library.

To extract a module into a separate library, you can follow these steps:

1. Create the new library
2. Move the code from the App to the Library
3. Update the code to reflect the new structure
4. Publish it.

### 1\. Create a Library [​](https://reactnative.dev/docs/next/the-new-architecture/create-module-library\#1-create-a-library "Direct link to 1. Create a Library")

1. Start the creation process by running the command:

sh

```codeBlockLines_AclH

2. Add a name for your module. It must be a valid npm name, so it should be all lowercase. You can use `-` to separate words.
3. Add a description for the package.
4. Continue filling the form until you reach the question _"What type of library do you want to develop?"_![What type of Library](https://reactnative.dev/assets/images/what-library-82a9a474327fd86f807a7eedf6cd29fc.png)
5. For the sake of this guide, select the _Turbo module_ option. Notice that you can create libraries for both New Architecture and Legacy Architecture.
6. Then, you can choose whether you want a library that access the platform (Kotlin & Objective-C) or a shared C++ library (C++ for Android and iOS).
7. Finally, select the `Test App` as last option. This option creates the library with a separate app already configured within the library folder.

Once the interactive prompt is done, the tool creates a folder whose structure looks like this in Visual Studio Code:

Feel free to explore the code that has been created for you. However, the most important parts:

- The `android` folder: this is where the Android code lives
- The `cpp` folder: this is where the c++ code lives
- The `ios` folder: this is where the iOS code lives
- The `src` folder: this is where the JS code lives.

The `package.json` is already configured with all the information that we provided to the `create-react-native-library` tool, including the name and the description of the package. Notice that the `package.json` is also already configured to run Codegen.

json

```codeBlockLines_AclH
"codegenConfig": {

"type": "all",
"jsSrcsDir": "src",
"outputDir": {
"ios": "ios/generated",
"android": "android/generated"
},
"android": {

}
},

Finally, the library contains already all the infrastructure to let the library be linked with iOS and Android.

### 2\. Copy the Code over from Your App [​](https://reactnative.dev/docs/next/the-new-architecture/create-module-library\#2-copy-the-code-over-from-your-app "Direct link to 2. Copy the Code over from Your App")

The rest of the guide assumes that you have a local Turbo Native Module in your app, created following the guidelines shown in the other guides in the website: platform specific Turbo Native Modules, or [cross-platform Turbo Native Modules](https://reactnative.dev/docs/next/the-new-architecture/pure-cxx-modules). But it works also for Components and legacy architecture modules and components. You'll have to adapt the files you need to copy and update.

1. **\[Not required for legacy architecture modules and components\]** Move the code you have in the `specs` folder in your app into the `src` folder created by the `create-react-native-library` folder.
2. Update the `index.ts` file to properly export the Turbo Native Module spec so that it is accessible from the library. For example:

ts

```codeBlockLines_AclH
import NativeSampleModule from './NativeSampleModule';

export default NativeSampleModule;

3. Copy the native module over:

- Replace the code in the `ios` folder with the code you wrote in your app for your native module, if any.
- Replace the code in the `cpp` folder with the code you wrote in your app for your native module, if any.
4. **\[Not required for legacy architecture modules and components\]** Update all the references from the previous spec name to the new spec name, the one that is defined in the `codegenConfig` field of the library's `package.json`. For example, if in the app `package.json` you set `AppSpecs` as `codegenConfig.name` and in the library it is called `RNNativeSampleModuleSpec`, you have to replace every occurrence of `AppSpecs` with `RNNativeSampleModuleSpec`.

That's it! You have moved all the required code out of your app and in a separate library.

## Testing your Library [​](https://reactnative.dev/docs/next/the-new-architecture/create-module-library\#testing-your-library "Direct link to Testing your Library")

The `create-react-native-library` comes with a useful example application that is already configured to work properly with the library. This is a great way to test it!

If you look at the `example` folder, you can find the same structure of a new React Native application that you can create from the [`react-native-community/template`](https://github.com/react-native-community/template).

To test your library:

1. Navigate to the `example` folder.
2. Run `yarn install` to install all the dependencies.
3. For iOS only, you need to install CocoaPods: `cd ios && pod install`.
4. Build and run Android with `yarn android` from the `example` folder.
5. Build and run iOS with `yarn ios` from the `example` folder.

## Use your library as a Local Module [​](https://reactnative.dev/docs/next/the-new-architecture/create-module-library\#use-your-library-as-a-local-module "Direct link to Use your library as a Local Module")

There are some scenario where you might want to reuse your library as a local module for your applications, without publishing it to NPM.

In this case, you might end up in a scenario where you have your library sitting as a sibling of your apps.

shell

```codeBlockLines_AclH
Development
├── App
└── Library

You can use the library created with `create-react-native-library` also in this case.

1. add you library to your app by navigating into the `App` folder and running `yarn add ../Library`.
2. For iOS only, navigate in the `App/ios` folder and run `bundle exec pod install` to install your dependencies.
3. Update the `App.tsx` code to import the code in your library. For example:

tsx

```codeBlockLines_AclH
import NativeSampleModule from '../Library/src/index';

If you run your app right now, Metro would not find the JS files that it needs to serve to the app. That's because metro will be running starting from the `App` folder and it would not have access to the JS files located in the `Library` folder. To fix this, let's update the `metro.config.js` file as it follows

diff

```codeBlockLines_AclH
const {getDefaultConfig, mergeConfig} = require('@react-native/metro-config');

/**
* Metro configuration
* https://reactnative.dev/docs/metro

* @type {import('metro-config').MetroConfig}
*/
+ const path = require('path');

- const config = {}
+ const config = {
+ // Make Metro able to resolve required external dependencies
+ watchFolders: [\
+ path.resolve(__dirname, '../Library'),\
+ ],
+ resolver: {
+ extraNodeModules: {
+ 'react-native': path.resolve(__dirname, 'node_modules/react-native'),
+ },
+ },
+};

module.exports = mergeConfig(getDefaultConfig(__dirname), config);

The `watchFolders` configs tells Metro to watch for files and changes in some additional paths, in this case to the `../Library` path, which contains the `src/index` file you need.
The `resolver` property is required to feed to the library the React Native code used by the app. The library might refer and import code from React Native: without the additional resolver, the imports in the library will fail.

At this point, you can build and run your app as usual:

- Build and run Android with `yarn android` from the `example` folder.
- Build and run iOS with `yarn ios` from the `example` folder.

## Publish the Library on NPM [​](https://reactnative.dev/docs/next/the-new-architecture/create-module-library\#publish-the-library-on-npm "Direct link to Publish the Library on NPM")

The setup to publish everything on NPM is already in place, thanks to `create-react-native-library`.

1. Install the dependencies in your module `yarn install`.
2. Build the library running `yarn prepare`.
3. Release it with `yarn release`.

After a while, you'll find your library on NPM. To verify that, run:

bash

where `package.name` is the `name` you set up in the `package.json` file during the initialization of the library.

Now, you can install the library in your application by running:

note

For iOS only, whenever you install a new module with some native code, you have to reinstall CocoaPods, by running `bundle exec pod install` (recommended) or `pod install` if you are not using Ruby's Bundler (not recommended).

Congratulations! You published your first React Native library.

Is this page useful?

- [Extract the Module into a Library](https://reactnative.dev/docs/next/the-new-architecture/create-module-library#extract-the-module-into-a-library)
- [1\. Create a Library](https://reactnative.dev/docs/next/the-new-architecture/create-module-library#1-create-a-library)
- [2\. Copy the Code over from Your App](https://reactnative.dev/docs/next/the-new-architecture/create-module-library#2-copy-the-code-over-from-your-app)
- [Testing your Library](https://reactnative.dev/docs/next/the-new-architecture/create-module-library#testing-your-library)
- [Use your library as a Local Module](https://reactnative.dev/docs/next/the-new-architecture/create-module-library#use-your-library-as-a-local-module)
- [Publish the Library on NPM](https://reactnative.dev/docs/next/the-new-architecture/create-module-library#publish-the-library-on-npm)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/touchableopacity

[Skip to main content](https://reactnative.dev/docs/next/touchableopacity#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/touchableopacity)** (0.81).

Version: Next

On this page

tip

If you're looking for a more extensive and future-proof way to handle touch-based input, check out the [Pressable](https://reactnative.dev/docs/next/pressable) API.

A wrapper for making views respond properly to touches. On press down, the opacity of the wrapped view is decreased, dimming it.

Opacity is controlled by wrapping the children in an `Animated.View`, which is added to the view hierarchy. Be aware that this can affect layout.

## Example [​](https://reactnative.dev/docs/next/touchableopacity\#example "Direct link to Example")

TouchableOpacity Example - Snack

# TouchableOpacity Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React, {useState} from 'react';
import {StyleSheet, Text, TouchableOpacity, View} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const \[count, setCount\] = useState(0);

return (

};

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
paddingHorizontal: 10,
},
button: {
alignItems: 'center',
backgroundColor: '#DDDDDD',
padding: 10,
},
countContainer: {
alignItems: 'center',
padding: 10,
},
});

export default App;

const [count, setCount] = useState(0);

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
paddingHorizontal: 10,
},
button: {
alignItems: 'center',
backgroundColor: '#DDDDDD',
padding: 10,
},
countContainer: {
alignItems: 'center',
padding: 10,
},
});

Snack

Count: 0

Press Here

Updating…

PreviewMy DeviceAndroidiOSWeb

* * *

# Reference

## Props [​](https://reactnative.dev/docs/next/touchableopacity\#props "Direct link to Props")

### [TouchableWithoutFeedback Props](https://reactnative.dev/docs/next/touchablewithoutfeedback\#props) [​](https://reactnative.dev/docs/next/touchableopacity\#touchablewithoutfeedback-props "Direct link to touchablewithoutfeedback-props")

Inherits [TouchableWithoutFeedback Props](https://reactnative.dev/docs/next/touchablewithoutfeedback#props).

### `style` [​](https://reactnative.dev/docs/next/touchableopacity\#style "Direct link to style")

| Type |
| --- |
| [View.style](https://reactnative.dev/docs/next/view-style-props) |

### `activeOpacity` [​](https://reactnative.dev/docs/next/touchableopacity\#activeopacity "Direct link to activeopacity")

Determines what the opacity of the wrapped view should be when touch is active. Defaults to `0.2`.

| Type |
| --- |
| number |

### `hasTVPreferredFocus` iOS [​](https://reactnative.dev/docs/next/touchableopacity\#hastvpreferredfocus-ios "Direct link to hastvpreferredfocus-ios")

_(Apple TV only)_ TV preferred focus (see documentation for the View component).

| Type |
| --- |
| bool |

### `nextFocusDown` Android [​](https://reactnative.dev/docs/next/touchableopacity\#nextfocusdown-android "Direct link to nextfocusdown-android")

TV next focus down (see documentation for the View component).

### `nextFocusForward` Android [​](https://reactnative.dev/docs/next/touchableopacity\#nextfocusforward-android "Direct link to nextfocusforward-android")

TV next focus forward (see documentation for the View component).

### `nextFocusLeft` Android [​](https://reactnative.dev/docs/next/touchableopacity\#nextfocusleft-android "Direct link to nextfocusleft-android")

TV next focus left (see documentation for the View component).

### `nextFocusRight` Android [​](https://reactnative.dev/docs/next/touchableopacity\#nextfocusright-android "Direct link to nextfocusright-android")

TV next focus right (see documentation for the View component).

### `nextFocusUp` Android [​](https://reactnative.dev/docs/next/touchableopacity\#nextfocusup-android "Direct link to nextfocusup-android")

TV next focus up (see documentation for the View component).

### `ref` [​](https://reactnative.dev/docs/next/touchableopacity\#ref "Direct link to ref")

A ref setter that will be assigned an [element node](https://reactnative.dev/docs/next/element-nodes) when mounted.

Is this page useful?

- [Example](https://reactnative.dev/docs/next/touchableopacity#example)
- [Props](https://reactnative.dev/docs/next/touchableopacity#props)
- [TouchableWithoutFeedback Props](https://reactnative.dev/docs/next/touchableopacity#touchablewithoutfeedback-props)
- [`style`](https://reactnative.dev/docs/next/touchableopacity#style)
- [`activeOpacity`](https://reactnative.dev/docs/next/touchableopacity#activeopacity)
- [`hasTVPreferredFocus` \\
iOS](https://reactnative.dev/docs/next/touchableopacity#hastvpreferredfocus-ios)
- [`nextFocusDown` \\
Android](https://reactnative.dev/docs/next/touchableopacity#nextfocusdown-android)
- [`nextFocusForward` \\
Android](https://reactnative.dev/docs/next/touchableopacity#nextfocusforward-android)
- [`nextFocusLeft` \\
Android](https://reactnative.dev/docs/next/touchableopacity#nextfocusleft-android)
- [`nextFocusRight` \\
Android](https://reactnative.dev/docs/next/touchableopacity#nextfocusright-android)
- [`nextFocusUp` \\
Android](https://reactnative.dev/docs/next/touchableopacity#nextfocusup-android)
- [`ref`](https://reactnative.dev/docs/next/touchableopacity#ref)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/testing-overview

[Skip to main content](https://reactnative.dev/docs/next/testing-overview#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/testing-overview)** (0.81).

Version: Next

On this page

As your codebase expands, small errors and edge cases you don’t expect can cascade into larger failures. Bugs lead to bad user experience and ultimately, business losses. One way to prevent fragile programming is to test your code before releasing it into the wild.

In this guide, we will cover different, automated ways to ensure your app works as expected, ranging from static analysis to end-to-end tests.

## Why Test [​](https://reactnative.dev/docs/next/testing-overview\#why-test "Direct link to Why Test")

We're humans, and humans make mistakes. Testing is important because it helps you uncover these mistakes and verifies that your code is working. Perhaps even more importantly, testing ensures that your code continues to work in the future as you add new features, refactor the existing ones, or upgrade major dependencies of your project.

There is more value in testing than you might realize. One of the best ways to fix a bug in your code is to write a failing test that exposes it. Then when you fix the bug and re-run the test, if it passes it means the bug is fixed, never reintroduced into the code base.

Tests can also serve as documentation for new people joining your team. For people who have never seen a codebase before, reading tests can help them understand how the existing code works.

Last but not least, more automated testing means less time spent with manual QA, freeing up valuable time.

## Static Analysis [​](https://reactnative.dev/docs/next/testing-overview\#static-analysis "Direct link to Static Analysis")

The first step to improve your code quality is to start using static analysis tools. Static analysis checks your code for errors as you write it, but without running any of that code.

- **Linters** analyze code to catch common errors such as unused code and to help avoid pitfalls, to flag style guide no-nos like using tabs instead of spaces (or vice versa, depending on your configuration).
- **Type checking** ensures that the construct you’re passing to a function matches what the function was designed to accept, preventing passing a string to a counting function that expects a number, for instance.

React Native comes with two such tools configured out of the box: [ESLint](https://eslint.org/) for linting and [TypeScript](https://reactnative.dev/docs/next/typescript) for type checking.

## Writing Testable Code [​](https://reactnative.dev/docs/next/testing-overview\#writing-testable-code "Direct link to Writing Testable Code")

To start with tests, you first need to write code that is testable. Consider an aircraft manufacturing process - before any model first takes off to show that all of its complex systems work well together, individual parts are tested to guarantee they are safe and function correctly. For example, wings are tested by bending them under extreme load; engine parts are tested for their durability; the windshield is tested against simulated bird impact.

Software is similar. Instead of writing your entire program in one huge file with many lines of code, you write your code in multiple small modules that you can test more thoroughly than if you tested the assembled whole. In this way, writing testable code is intertwined with writing clean, modular code.

To make your app more testable, start by separating the view part of your app—your React components—from your business logic and app state (regardless of whether you use Redux, MobX or other solutions). This way, you can keep your business logic testing—which shouldn’t rely on your React components—independent of the components themselves, whose job is primarily rendering your app’s UI!

Theoretically, you could go so far as to move all logic and data fetching out of your components. This way your components would be solely dedicated to rendering. Your state would be entirely independent of your components. Your app’s logic would work without any React components at all!

tip

We encourage you to further explore the topic of testable code in other learning resources.

## Writing Tests [​](https://reactnative.dev/docs/next/testing-overview\#writing-tests "Direct link to Writing Tests")

After writing testable code, it’s time to write some actual tests! The default template of React Native ships with [Jest](https://jestjs.io/) testing framework. It includes a preset that's tailored to this environment so you can get productive without tweaking the configuration and mocks straight away— [more on mocks](https://reactnative.dev/docs/next/testing-overview#mocking) shortly. You can use Jest to write all types of tests featured in this guide.

note

If you do test-driven development, you actually write tests first! That way, testability of your code is given.

### Structuring Tests [​](https://reactnative.dev/docs/next/testing-overview\#structuring-tests "Direct link to Structuring Tests")

Your tests should be short and ideally test only one thing. Let's start with an example unit test written with Jest:

js

```codeBlockLines_AclH

expect(colorForDueDate('2000-10-20')).toBe('red');
});

The test is described by the string passed to the [`it`](https://jestjs.io/docs/en/api#testname-fn-timeout) function. Take good care writing the description so that it’s clear what is being tested. Do your best to cover the following:

1. **Given** \- some precondition
2. **When** \- some action executed by the function that you’re testing
3. **Then** \- the expected outcome

This is also known as AAA (Arrange, Act, Assert).

Jest offers [`describe`](https://jestjs.io/docs/en/api#describename-fn) function to help structure your tests. Use `describe` to group together all tests that belong to one functionality. Describes can be nested, if you need that. Other functions you'll commonly use are [`beforeEach`](https://jestjs.io/docs/en/api#beforeeachfn-timeout) or [`beforeAll`](https://jestjs.io/docs/en/api#beforeallfn-timeout) that you can use for setting up the objects you're testing. Read more in the [Jest api reference](https://jestjs.io/docs/en/api).

If your test has many steps or many expectations, you probably want to split it into multiple smaller ones. Also, ensure that your tests are completely independent of one another. Each test in your suite must be executable on its own without first running some other test. Conversely, if you run all your tests together, the first test must not influence the output of the second one.

Lastly, as developers we like when our code works great and doesn't crash. With tests, this is often the opposite. Think of a failed test as of a _good thing!_ When a test fails, it often means something is not right. This gives you an opportunity to fix the problem before it impacts the users.

## Unit Tests [​](https://reactnative.dev/docs/next/testing-overview\#unit-tests "Direct link to Unit Tests")

Unit tests cover the smallest parts of code, like individual functions or classes.

When the object being tested has any dependencies, you’ll often need to mock them out, as described in the next paragraph.

The great thing about unit tests is that they are quick to write and run. Therefore, as you work, you get fast feedback about whether your tests are passing. Jest even has an option to continuously run tests that are related to code you’re editing: [Watch mode](https://jestjs.io/docs/en/cli#watch).

### Mocking [​](https://reactnative.dev/docs/next/testing-overview\#mocking "Direct link to Mocking")

Sometimes, when your tested objects have external dependencies, you’ll want to “mock them out.” “Mocking” is when you replace some dependency of your code with your own implementation.

info

Generally, using real objects in your tests is better than using mocks but there are situations where this is not possible. For example: when your JS unit test relies on a native module written in Java or Objective-C.

Imagine you’re writing an app that shows the current weather in your city and you’re using some external service or other dependency that provides you with the weather information. If the service tells you that it’s raining, you want to show an image with a rainy cloud. You don’t want to call that service in your tests, because:

- It could make the tests slow and unstable (because of the network requests involved)
- The service may return different data every time you run the test
- Third party services can go offline when you really need to run tests!

Therefore, you can provide a mock implementation of the service, effectively replacing thousands of lines of code and some internet-connected thermometers!

Jest comes with [support for mocking](https://jestjs.io/docs/en/mock-functions#mocking-modules) from function level all the way to module level mocking.

## Integration Tests [​](https://reactnative.dev/docs/next/testing-overview\#integration-tests "Direct link to Integration Tests")

When writing larger software systems, individual pieces of it need to interact with each other. In unit testing, if your unit depends on another one, you’ll sometimes end up mocking the dependency, replacing it with a fake one.

In integration testing, real individual units are combined (same as in your app) and tested together to ensure that their cooperation works as expected. This is not to say that mocking does not happen here: you’ll still need mocks (for example, to mock communication with a weather service), but you'll need them much less than in unit testing.

Please note that the terminology around what integration testing means is not always consistent. Also, the line between what is a unit test and what is an integration test may not always be clear. For this guide, your test falls into "integration testing" if it:

- Combines several modules of your app as described above
- Uses an external system
- Makes a network call to other application (such as the weather service API)
- Does any kind of file or database I/O

## Component Tests [​](https://reactnative.dev/docs/next/testing-overview\#component-tests "Direct link to Component Tests")

React components are responsible for rendering your app, and users will directly interact with their output. Even if your app's business logic has high testing coverage and is correct, without component tests you may still deliver a broken UI to your users. Component tests could fall into both unit and integration testing, but because they are such a core part of React Native, we'll cover them separately.

For testing React components, there are two things you may want to test:

- Interaction: to ensure the component behaves correctly when interacted with by a user (eg. when user presses a button)
- Rendering: to ensure the component render output used by React is correct (eg. the button's appearance and placement in the UI)

For example, if you have a button that has an `onPress` listener, you want to test that the button both appears correctly and that tapping the button is correctly handled by the component.

There are several libraries that can help you testing these:

- [React Native Testing Library](https://callstack.github.io/react-native-testing-library/) builds on top of React’s test renderer and adds `fireEvent` and `query` APIs described in the next paragraph.
- \[Deprecated\] React’s [Test Renderer](https://react.dev/blog/2024/04/25/react-19-upgrade-guide#deprecated-react-test-renderer), developed alongside its core, provides a React renderer that can be used to render React components to pure JavaScript objects, without depending on the DOM or a native mobile environment.

warning

Component tests are only JavaScript tests running in Node.js environment. They do _not_ take into account any iOS, Android, or other platform code which is backing the React Native components. It follows that they cannot give you a 100% confidence that everything works for the user. If there is a bug in the iOS or Android code, they will not find it.

### Testing User Interactions [​](https://reactnative.dev/docs/next/testing-overview\#testing-user-interactions "Direct link to Testing User Interactions")

Aside from rendering some UI, your components handle events like `onChangeText` for `TextInput` or `onPress` for `Button`. They may also contain other functions and event callbacks. Consider the following example:

tsx

```codeBlockLines_AclH
function GroceryShoppingList() {
const [groceryItem, setGroceryItem] = useState('');

setItems([groceryItem, ...items]);
setGroceryItem('');
}, [groceryItem, items]);

return (

value={groceryItem}
placeholder="Enter grocery item"

title="Add the item to list"
onPress={addNewItemToShoppingList}

}

When testing user interactions, test the component from the user perspective—what's on the page? What changes when interacted with?

As a rule of thumb, prefer using things users can see or hear:

- make assertions using rendered text or [accessibility helpers](https://reactnative.dev/docs/accessibility#accessibility-properties)

Conversely, you should avoid:

- making assertions on component props or state
- testID queries

Avoid testing implementation details like props or state—while such tests work, they are not oriented toward how users will interact with the component and tend to break by refactoring (for example when you'd like to rename some things or rewrite class component using hooks).

React class components are especially prone to testing their implementation details such as internal state, props or event handlers. To avoid testing implementation details, prefer using function components with Hooks, which make relying on component internals _harder_.

Component testing libraries such as [React Native Testing Library](https://callstack.github.io/react-native-testing-library/) facilitate writing user-centric tests by careful choice of provided APIs. The following example uses `fireEvent` methods `changeText` and `press` that simulate a user interacting with the component and a query function `getAllByText` that finds matching `Text` nodes in the rendered output.

const {getByPlaceholderText, getByText, getAllByText} = render(

);

fireEvent.changeText(
getByPlaceholderText('Enter grocery item'),
'banana',
);
fireEvent.press(getByText('Add the item to list'));

const bananaElements = getAllByText('banana');
expect(bananaElements).toHaveLength(1); // expect 'banana' to be on the list
});

This example is not testing how some state changes when you call a function. It tests what happens when a user changes text in the `TextInput` and presses the `Button`!

### Testing Rendered Output [​](https://reactnative.dev/docs/next/testing-overview\#testing-rendered-output "Direct link to Testing Rendered Output")

[Snapshot testing](https://jestjs.io/docs/en/snapshot-testing) is an advanced kind of testing enabled by Jest. It is a very powerful and low-level tool, so extra attention is advised when using it.

A "component snapshot" is a JSX-like string created by a custom React serializer built into Jest. This serializer lets Jest translate React component trees to string that's human-readable. Put another way: a component snapshot is a textual representation of your component’s render output _generated_ during a test run. It may look like this:

```codeBlockLines_AclH
<Text
style={
Object {
"fontSize": 20,
"textAlign": "center",
}

With snapshot testing, you typically first implement your component and then run the snapshot test. The snapshot test then creates a snapshot and saves it to a file in your repo as a reference snapshot. **The file is then committed and checked during code review**. Any future changes to the component render output will change its snapshot, which will cause the test to fail. You then need to update the stored reference snapshot for the test to pass. That change again needs to be committed and reviewed.

Snapshots have several weak points:

- For you as a developer or reviewer, it can be hard to tell whether a change in snapshot is intended or whether it's evidence of a bug. Especially large snapshots can quickly become hard to understand and their added value becomes low.
- When snapshot is created, at that point it is considered to be correct-even in the case when the rendered output is actually wrong.
- When a snapshot fails, it's tempting to update it using the `--updateSnapshot` jest option without taking proper care to investigate whether the change is expected. Certain developer discipline is thus needed.

Snapshots themselves do not ensure that your component render logic is correct, they are merely good at guarding against unexpected changes and for checking that the components in the React tree under test receive the expected props (styles and etc.).

We recommend that you only use small snapshots (see [`no-large-snapshots` rule](https://github.com/jest-community/eslint-plugin-jest/blob/master/docs/rules/no-large-snapshots.md)). If you want to test a _change_ between two React component states, use [`snapshot-diff`](https://github.com/jest-community/snapshot-diff). When in doubt, prefer explicit expectations as described in the previous paragraph.

## End-to-End Tests [​](https://reactnative.dev/docs/next/testing-overview\#end-to-end-tests "Direct link to End-to-End Tests")

In end-to-end (E2E) tests, you verify your app is working as expected on a device (or a simulator / emulator) from the user perspective.

This is done by building your app in the release configuration and running the tests against it. In E2E tests, you no longer think about React components, React Native APIs, Redux stores or any business logic. That is not the purpose of E2E tests and those are not even accessible to you during E2E testing.

Instead, E2E testing libraries allow you to find and control elements in the screen of your app: for example, you can _actually_ tap buttons or insert text into `TextInputs` the same way a real user would. Then you can make assertions about whether or not a certain element exists in the app’s screen, whether or not it’s visible, what text it contains, and so on.

E2E tests give you the highest possible confidence that part of your app is working. The tradeoffs include:

- writing them is more time consuming compared to the other types of tests
- they are slower to run
- they are more prone to flakiness (a "flaky" test is a test which randomly passes and fails without any change to code)

Try to cover the vital parts of your app with E2E tests: authentication flow, core functionalities, payments, etc. Use faster JS tests for the non-vital parts of your app. The more tests you add, the higher your confidence, but also, the more time you'll spend maintaining and running them. Consider the tradeoffs and decide what's best for you.

There are several E2E testing tools available: in the React Native community, [Detox](https://github.com/wix/detox/) is a popular framework because it’s tailored for React Native apps. Another popular library in the space of iOS and Android apps is [Appium](https://appium.io/) or [Maestro](https://maestro.mobile.dev/).

## Summary [​](https://reactnative.dev/docs/next/testing-overview\#summary "Direct link to Summary")

We hope you enjoyed reading and learned something from this guide. There are many ways you can test your apps. It may be hard to decide what to use at first. However, we believe it all will make sense once you start adding tests to your awesome React Native app. So what are you waiting for? Get your coverage up!

### Links [​](https://reactnative.dev/docs/next/testing-overview\#links "Direct link to Links")

- [React testing overview](https://react.dev/reference/react/act)
- [React Native Testing Library](https://callstack.github.io/react-native-testing-library/)
- [Jest docs](https://jestjs.io/docs/en/tutorial-react-native)
- [Detox](https://github.com/wix/detox/)
- [Appium](https://appium.io/)
- [Maestro](https://maestro.mobile.dev/)

* * *

_This guide originally authored and contributed in full by [Vojtech Novak](https://twitter.com/vonovak)._

Is this page useful?

- [Why Test](https://reactnative.dev/docs/next/testing-overview#why-test)
- [Static Analysis](https://reactnative.dev/docs/next/testing-overview#static-analysis)
- [Writing Testable Code](https://reactnative.dev/docs/next/testing-overview#writing-testable-code)
- [Writing Tests](https://reactnative.dev/docs/next/testing-overview#writing-tests)
- [Structuring Tests](https://reactnative.dev/docs/next/testing-overview#structuring-tests)
- [Unit Tests](https://reactnative.dev/docs/next/testing-overview#unit-tests)
- [Mocking](https://reactnative.dev/docs/next/testing-overview#mocking)
- [Integration Tests](https://reactnative.dev/docs/next/testing-overview#integration-tests)
- [Component Tests](https://reactnative.dev/docs/next/testing-overview#component-tests)
- [Testing User Interactions](https://reactnative.dev/docs/next/testing-overview#testing-user-interactions)
- [Testing Rendered Output](https://reactnative.dev/docs/next/testing-overview#testing-rendered-output)
- [End-to-End Tests](https://reactnative.dev/docs/next/testing-overview#end-to-end-tests)
- [Summary](https://reactnative.dev/docs/next/testing-overview#summary)
- [Links](https://reactnative.dev/docs/next/testing-overview#links)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/pixelratio

[Skip to main content](https://reactnative.dev/docs/next/pixelratio#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/pixelratio)** (0.81).

Version: Next

On this page

`PixelRatio` gives you access to the device's pixel density and font scale.

## Fetching a correctly sized image [​](https://reactnative.dev/docs/next/pixelratio\#fetching-a-correctly-sized-image "Direct link to Fetching a correctly sized image")

You should get a higher resolution image if you are on a high pixel density device. A good rule of thumb is to multiply the size of the image you display by the pixel ratio.

tsx

```codeBlockLines_AclH
const image = getImage({
width: PixelRatio.getPixelSizeForLayoutSize(200),
height: PixelRatio.getPixelSizeForLayoutSize(100),
});

## Pixel grid snapping [​](https://reactnative.dev/docs/next/pixelratio\#pixel-grid-snapping "Direct link to Pixel grid snapping")

In iOS, you can specify positions and dimensions for elements with arbitrary precision, for example 29.674825. But, ultimately the physical display only have a fixed number of pixels, for example 640×1136 for iPhone SE (1st generation) or 828×1792 for iPhone 11. iOS tries to be as faithful as possible to the user value by spreading one original pixel into multiple ones to trick the eye. The downside of this technique is that it makes the resulting element look blurry.

In practice, we found out that developers do not want this feature and they have to work around it by doing manual rounding in order to avoid having blurry elements. In React Native, we are rounding all the pixels automatically.

We have to be careful when to do this rounding. You never want to work with rounded and unrounded values at the same time as you're going to accumulate rounding errors. Having even one rounding error is deadly because a one pixel border may vanish or be twice as big.

In React Native, everything in JavaScript and within the layout engine works with arbitrary precision numbers. It's only when we set the position and dimensions of the native element on the main thread that we round. Also, rounding is done relative to the root rather than the parent, again to avoid accumulating rounding errors.

## Example [​](https://reactnative.dev/docs/next/pixelratio\#example "Direct link to Example")

PixelRatio Example - Snack

# PixelRatio Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {
Image,
PixelRatio,
ScrollView,
StyleSheet,
Text,
View,
} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const size = 50;
const cat = {
uri: 'https://reactnative.dev/docs/assets/p\_cat1.png',
width: size,
height: size,
};

source={cat}
style={{
width: PixelRatio.getPixelSizeForLayoutSize(size),
height: PixelRatio.getPixelSizeForLayoutSize(size),
}}

const styles = StyleSheet.create({
scrollContainer: {
flex: 1,
},
container: {
justifyContent: 'center',
alignItems: 'center',
},
value: {
fontSize: 24,
marginBottom: 12,
marginTop: 4,
},
});

export default App;

import React from 'react';
import {
Image,
PixelRatio,
ScrollView,
StyleSheet,
Text,
View,
} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const size = 50;
const cat = {
uri: 'https://reactnative.dev/docs/assets/p_cat1.png',
width: size,
height: size,
};

source={cat}
style={{
width: PixelRatio.getPixelSizeForLayoutSize(size),
height: PixelRatio.getPixelSizeForLayoutSize(size),
}}

const styles = StyleSheet.create({
scrollContainer: {
flex: 1,
},
container: {
justifyContent: 'center',
alignItems: 'center',
},
value: {
fontSize: 24,
marginBottom: 12,
marginTop: 4,
},
});

Snack

Current Pixel Ratio is:

1

Current Font Scale is:

On this device images with a layout width of

50 px

require images with a pixel width of

Updating…

PreviewMy DeviceAndroidiOSWeb

* * *

# Reference

## Methods [​](https://reactnative.dev/docs/next/pixelratio\#methods "Direct link to Methods")

### `get()` [​](https://reactnative.dev/docs/next/pixelratio\#get "Direct link to get")

```codeBlockLines_AclH
static get(): number;

Returns the device pixel density. Some examples:

- `PixelRatio.get() === 1`
- [mdpi Android devices](https://material.io/tools/devices/)
- `PixelRatio.get() === 1.5`
- [hdpi Android devices](https://material.io/tools/devices/)
- `PixelRatio.get() === 2`
- iPhone SE, 6S, 7, 8
- iPhone XR
- iPhone 11
- [xhdpi Android devices](https://material.io/tools/devices/)
- `PixelRatio.get() === 3`
- iPhone 6S Plus, 7 Plus, 8 Plus
- iPhone X, XS, XS Max
- iPhone 11 Pro, 11 Pro Max
- Pixel, Pixel 2
- [xxhdpi Android devices](https://material.io/tools/devices/)
- `PixelRatio.get() === 3.5`
- Nexus 6
- Pixel XL, Pixel 2 XL
- [xxxhdpi Android devices](https://material.io/tools/devices/)

### `getFontScale()` [​](https://reactnative.dev/docs/next/pixelratio\#getfontscale "Direct link to getfontscale")

```codeBlockLines_AclH
static getFontScale(): number;

Returns the scaling factor for font sizes. This is the ratio that is used to calculate the absolute font size, so any elements that heavily depend on that should use this to do calculations.

If a font scale is not set, this returns the device pixel ratio.

### `getPixelSizeForLayoutSize()` [​](https://reactnative.dev/docs/next/pixelratio\#getpixelsizeforlayoutsize "Direct link to getpixelsizeforlayoutsize")

```codeBlockLines_AclH
static getPixelSizeForLayoutSize(layoutSize: number): number;

Converts a layout size (dp) to pixel size (px).

Guaranteed to return an integer number.

### `roundToNearestPixel()` [​](https://reactnative.dev/docs/next/pixelratio\#roundtonearestpixel "Direct link to roundtonearestpixel")

```codeBlockLines_AclH
static roundToNearestPixel(layoutSize: number): number;

Rounds a layout size (dp) to the nearest layout size that corresponds to an integer number of pixels. For example, on a device with a PixelRatio of 3, `PixelRatio.roundToNearestPixel(8.4) = 8.33`, which corresponds to exactly (8.33 \* 3) = 25 pixels.

Is this page useful?

- [Fetching a correctly sized image](https://reactnative.dev/docs/next/pixelratio#fetching-a-correctly-sized-image)
- [Pixel grid snapping](https://reactnative.dev/docs/next/pixelratio#pixel-grid-snapping)
- [Example](https://reactnative.dev/docs/next/pixelratio#example)
- [Methods](https://reactnative.dev/docs/next/pixelratio#methods)
- [`get()`](https://reactnative.dev/docs/next/pixelratio#get)
- [`getFontScale()`](https://reactnative.dev/docs/next/pixelratio#getfontscale)
- [`getPixelSizeForLayoutSize()`](https://reactnative.dev/docs/next/pixelratio#getpixelsizeforlayoutsize)
- [`roundToNearestPixel()`](https://reactnative.dev/docs/next/pixelratio#roundtonearestpixel)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/switch

[Skip to main content](https://reactnative.dev/docs/next/switch#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/switch)** (0.81).

Version: Next

On this page

Renders a boolean input.

This is a controlled component that requires an `onValueChange` callback that updates the `value` prop in order for the component to reflect user actions. If the `value` prop is not updated, the component will continue to render the supplied `value` prop instead of the expected result of any user actions.

## Example [​](https://reactnative.dev/docs/next/switch\#example "Direct link to Example")

Switch - Snack

# Switch

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React, {useState} from 'react';
import {Switch, StyleSheet} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const \[isEnabled, setIsEnabled\] = useState(false);

return (

trackColor={{false: '#767577', true: '#81b0ff'}}
thumbColor={isEnabled ? '#f5dd4b' : '#f4f3f4'}
ios\_backgroundColor="#3e3e3e"
onValueChange={toggleSwitch}
value={isEnabled}

};

const styles = StyleSheet.create({
container: {
flex: 1,
alignItems: 'center',
justifyContent: 'center',
},
});

export default App;

const [isEnabled, setIsEnabled] = useState(false);

trackColor={{false: '#767577', true: '#81b0ff'}}
thumbColor={isEnabled ? '#f5dd4b' : '#f4f3f4'}
ios_backgroundColor="#3e3e3e"
onValueChange={toggleSwitch}
value={isEnabled}

const styles = StyleSheet.create({
container: {
flex: 1,
alignItems: 'center',
justifyContent: 'center',
},
});

### Download [Expo Go](https://expo.dev/client) and scan the QR code to get started.

exp://u.expo.dev/933fd9c0-1666-11e7-afca-d980795c5824?runtime-version=exposdk%3A53.0.0&channel-name=production&snack-channel=XxtMtVHp4c

### Connected devices

0

[Log in](https://expo.dev/login) to open this Snack from Expo Go on your device or simulator.

PreviewMy DeviceAndroidiOS

* * *

# Reference

## Props [​](https://reactnative.dev/docs/next/switch\#props "Direct link to Props")

### [View Props](https://reactnative.dev/docs/next/view\#props) [​](https://reactnative.dev/docs/next/switch\#view-props "Direct link to view-props")

Inherits [View Props](https://reactnative.dev/docs/next/view#props).

### `disabled` [​](https://reactnative.dev/docs/next/switch\#disabled "Direct link to disabled")

If true the user won't be able to toggle the switch.

| Type | Default |
| --- | --- |
| bool | `false` |

### `ios_backgroundColor` iOS [​](https://reactnative.dev/docs/next/switch\#ios_backgroundcolor-ios "Direct link to ios_backgroundcolor-ios")

On iOS, custom color for the background. This background color can be seen either when the switch value is `false` or when the switch is disabled (and the switch is translucent).

| Type |
| --- |
| [color](https://reactnative.dev/docs/next/colors) |

### `onChange` [​](https://reactnative.dev/docs/next/switch\#onchange "Direct link to onchange")

Invoked when the user tries to change the value of the switch. Receives the change event as an argument. If you want to only receive the new value, use `onValueChange` instead.

| Type |
| --- |
| function |

### `onValueChange` [​](https://reactnative.dev/docs/next/switch\#onvaluechange "Direct link to onvaluechange")

Invoked when the user tries to change the value of the switch. Receives the new value as an argument. If you want to instead receive an event, use `onChange`.

### `ref` [​](https://reactnative.dev/docs/next/switch\#ref "Direct link to ref")

A ref setter that will be assigned an [element node](https://reactnative.dev/docs/next/element-nodes) when mounted.

### `thumbColor` [​](https://reactnative.dev/docs/next/switch\#thumbcolor "Direct link to thumbcolor")

Color of the foreground switch grip. If this is set on iOS, the switch grip will lose its drop shadow.

### `trackColor` [​](https://reactnative.dev/docs/next/switch\#trackcolor "Direct link to trackcolor")

Custom colors for the switch track.

_iOS_: When the switch value is `false`, the track shrinks into the border. If you want to change the color of the background exposed by the shrunken track, use [`ios_backgroundColor`](https://reactnative.dev/docs/next/switch#ios_backgroundColor).

| Type |
| --- |
| `object: {false: [color](https://reactnative.dev/docs/next/colors), true: [color](https://reactnative.dev/docs/next/colors)}` |

### `value` [​](https://reactnative.dev/docs/next/switch\#value "Direct link to value")

The value of the switch. If true the switch will be turned on. Default value is false.

| Type |
| --- |
| bool |

Is this page useful?

- [Example](https://reactnative.dev/docs/next/switch#example)
- [Props](https://reactnative.dev/docs/next/switch#props)
- [View Props](https://reactnative.dev/docs/next/switch#view-props)
- [`disabled`](https://reactnative.dev/docs/next/switch#disabled)
- [`ios_backgroundColor` \\
iOS](https://reactnative.dev/docs/next/switch#ios_backgroundcolor-ios)
- [`onChange`](https://reactnative.dev/docs/next/switch#onchange)
- [`onValueChange`](https://reactnative.dev/docs/next/switch#onvaluechange)
- [`ref`](https://reactnative.dev/docs/next/switch#ref)
- [`thumbColor`](https://reactnative.dev/docs/next/switch#thumbcolor)
- [`trackColor`](https://reactnative.dev/docs/next/switch#trackcolor)
- [`value`](https://reactnative.dev/docs/next/switch#value)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/state

[Skip to main content](https://reactnative.dev/docs/next/state#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/state)** (0.81).

Version: Next

There are two types of data that control a component: `props` and `state`. `props` are set by the parent and they are fixed throughout the lifetime of a component. For data that is going to change, we have to use `state`.

In general, you should initialize `state` in the constructor, and then call `setState` when you want to change it.

For example, let's say we want to make text that blinks all the time. The text itself gets set once when the blinking component gets created, so the text itself is a `prop`. The "whether the text is currently on or off" changes over time, so that should be kept in `state`.

- TypeScript
- JavaScript

In a real application, you probably won't be setting state with a timer. You might set state when you have new data from the server, or from user input. You can also use a state container like [Redux](https://redux.js.org/) or [MobX](https://mobx.js.org/) to control your data flow. In that case you would use Redux or MobX to modify your state rather than calling `setState` directly.

When setState is called, BlinkApp will re-render its Component. By calling setState within the Timer, the component will re-render every time the Timer ticks.

State works the same way as it does in React, so for more details on handling state, you can look at the [React.Component API](https://react.dev/reference/react/Component#setstate). At this point, you may have noticed that most of our examples use the default text color. To customize the text color, you will have to [learn about Style](https://reactnative.dev/docs/next/style).

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/legacy/native-modules-ios

[Skip to main content](https://reactnative.dev/docs/next/legacy/native-modules-ios#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/legacy/native-modules-ios)** (0.81).

Version: Next

On this page

info

Native Module and Native Components are our stable technologies used by the legacy architecture.
They will be deprecated in the future when the New Architecture will be stable. The New Architecture uses [Turbo Native Module](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/turbo-modules.md) and [Fabric Native Components](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/fabric-native-components.md) to achieve similar results.

Welcome to Native Modules for iOS. Please start by reading the [Native Modules Intro](https://reactnative.dev/docs/next/legacy/native-modules-intro) for an intro to what native modules are.

## Create a Calendar Native Module [​](https://reactnative.dev/docs/next/legacy/native-modules-ios\#create-a-calendar-native-module "Direct link to Create a Calendar Native Module")

In the following guide you will create a native module, `CalendarModule`, that will allow you to access Apple's calendar APIs from JavaScript. By the end you will be able to call `CalendarModule.createCalendarEvent('Dinner Party', 'My House');` from JavaScript, invoking a native method that creates a calendar event.

### Setup [​](https://reactnative.dev/docs/next/legacy/native-modules-ios\#setup "Direct link to Setup")

To get started, open up the iOS project within your React Native application in Xcode. You can find your iOS project here within a React Native app:

We recommend using Xcode to write your native code. Xcode is built for iOS development, and using it will help you to quickly resolve smaller errors like code syntax.

### Create Custom Native Module Files [​](https://reactnative.dev/docs/next/legacy/native-modules-ios\#create-custom-native-module-files "Direct link to Create Custom Native Module Files")

The first step is to create our main custom native module header and implementation files. Create a new file called `RCTCalendarModule.h`

and add the following to it:

objectivec

```codeBlockLines_AclH
// RCTCalendarModule.h

You can use any name that fits the native module you are building. Name the class `RCTCalendarModule` since you are creating a calendar native module. Since ObjC does not have language-level support for namespaces like Java or C++, convention is to prepend the class name with a substring. This could be an abbreviation of your application name or your infra name. RCT, in this example, refers to React.

As you can see below, the CalendarModule class implements the `RCTBridgeModule` protocol. A native module is an Objective-C class that implements the `RCTBridgeModule` protocol.

Next up, let’s start implementing the native module. Create the corresponding implementation file using cocoa touch class in xcode, `RCTCalendarModule.m`, in the same folder and include the following content:

```codeBlockLines_AclH
// RCTCalendarModule.m
#import "RCTCalendarModule.h"

@implementation RCTCalendarModule

// To export a module named RCTCalendarModule
RCT_EXPORT_MODULE();

@end

### Module Name [​](https://reactnative.dev/docs/next/legacy/native-modules-ios\#module-name "Direct link to Module Name")

For now, your `RCTCalendarModule.m` native module only includes a `RCT_EXPORT_MODULE` macro, which exports and registers the native module class with React Native. The `RCT_EXPORT_MODULE` macro also takes an optional argument that specifies the name that the module will be accessible as in your JavaScript code.

This argument is not a string literal. In the example below `RCT_EXPORT_MODULE(CalendarModuleFoo)` is passed, not `RCT_EXPORT_MODULE("CalendarModuleFoo")`.

```codeBlockLines_AclH
// To export a module named CalendarModuleFoo
RCT_EXPORT_MODULE(CalendarModuleFoo);

The native module can then be accessed in JS like this:

tsx

```codeBlockLines_AclH
const {CalendarModuleFoo} = ReactNative.NativeModules;

If you do not specify a name, the JavaScript module name will match the Objective-C class name, with any "RCT" or "RK" prefixes removed.

Let's follow the example below and call `RCT_EXPORT_MODULE` without any arguments. As a result, the module will be exposed to React Native using the name `CalendarModule`, since that is the Objective-C class name, with RCT removed.

```codeBlockLines_AclH
// Without passing in a name this will export the native module name as the Objective-C class name with “RCT” removed
RCT_EXPORT_MODULE();

```codeBlockLines_AclH
const {CalendarModule} = ReactNative.NativeModules;

### Export a Native Method to JavaScript [​](https://reactnative.dev/docs/next/legacy/native-modules-ios\#export-a-native-method-to-javascript "Direct link to Export a Native Method to JavaScript")

React Native will not expose any methods in a native module to JavaScript unless explicitly told to. This can be done using the `RCT_EXPORT_METHOD` macro. Methods written in the `RCT_EXPORT_METHOD` macro are asynchronous and the return type is therefore always void. In order to pass a result from a `RCT_EXPORT_METHOD` method to JavaScript you can use callbacks or emit events (covered below). Let’s go ahead and set up a native method for our `CalendarModule` native module using the `RCT_EXPORT_METHOD` macro. Call it `createCalendarEvent()` and for now have it take in name and location arguments as strings. Argument type options will be covered shortly.

```codeBlockLines_AclH
RCT_EXPORT_METHOD(createCalendarEvent:(NSString *)name location:(NSString *)location)
{
}

note

Please note that the `RCT_EXPORT_METHOD` macro will not be necessary with TurboModules unless your method relies on RCT argument conversion (see argument types below). Ultimately, React Native will remove `RCT_EXPORT_MACRO,` so we discourage people from using `RCTConvert`. Instead, you can do the argument conversion within the method body.

Before you build out the `createCalendarEvent()` method’s functionality, add a console log in the method so you can confirm it has been invoked from JavaScript in your React Native application. Use the `RCTLog` APIs from React. Let’s import that header at the top of your file and then add the log call.

```codeBlockLines_AclH

{
RCTLogInfo(@"Pretending to create an event %@ at %@", name, location);
}

### Synchronous Methods [​](https://reactnative.dev/docs/next/legacy/native-modules-ios\#synchronous-methods "Direct link to Synchronous Methods")

You can use the `RCT_EXPORT_BLOCKING_SYNCHRONOUS_METHOD` to create a synchronous native method.

```codeBlockLines_AclH
RCT_EXPORT_BLOCKING_SYNCHRONOUS_METHOD(getName)
{
return [[UIDevice currentDevice] name];
}

The return type of this method must be of object type (id) and should be serializable to JSON. This means that the hook can only return nil or JSON values (e.g. NSNumber, NSString, NSArray, NSDictionary).

At the moment, we do not recommend using synchronous methods, since calling methods synchronously can have strong performance penalties and introduce threading-related bugs to your native modules. Additionally, please note that if you choose to use `RCT_EXPORT_BLOCKING_SYNCHRONOUS_METHOD`, your app can no longer use the Google Chrome debugger. This is because synchronous methods require the JS VM to share memory with the app. For the Google Chrome debugger, React Native runs inside the JS VM in Google Chrome, and communicates asynchronously with the mobile devices via WebSockets.

### Test What You Have Built [​](https://reactnative.dev/docs/next/legacy/native-modules-ios\#test-what-you-have-built "Direct link to Test What You Have Built")

At this point you have set up the basic scaffolding for your native module in iOS. Test that out by accessing the native module and invoking it’s exported method in JavaScript.

Find a place in your application where you would like to add a call to the native module’s `createCalendarEvent()` method. Below is an example of a component, `NewModuleButton` you can add in your app. You can invoke the native module inside `NewModuleButton`'s `onPress()` function.

```codeBlockLines_AclH
import React from 'react';
import {Button} from 'react-native';

console.log('We will invoke the native module here!');
};

return (
<Button
title="Click to invoke your native module!"
color="#841584"
onPress={onPress}

};

export default NewModuleButton;

In order to access your native module from JavaScript you need to first import `NativeModules` from React Native:

```codeBlockLines_AclH
import {NativeModules} from 'react-native';

You can then access the `CalendarModule` native module off of `NativeModules`.

```codeBlockLines_AclH
const {CalendarModule} = NativeModules;

Now that you have the CalendarModule native module available, you can invoke your native method `createCalendarEvent()`. Below it is added to the `onPress()` method in `NewModuleButton`:

CalendarModule.createCalendarEvent('testName', 'testLocation');
};

The final step is to rebuild the React Native app so that you can have the latest native code (with your new native module!) available. In your command line, where the react native application is located, run the following :

- npm
- Yarn

shell

```codeBlockLines_AclH
npm run ios

```codeBlockLines_AclH
yarn ios

### Building as You Iterate [​](https://reactnative.dev/docs/next/legacy/native-modules-ios\#building-as-you-iterate "Direct link to Building as You Iterate")

As you work through these guides and iterate on your native module, you will need to do a native rebuild of your application to access your most recent changes from JavaScript. This is because the code that you are writing sits within the native part of your application. While React Native’s metro bundler can watch for changes in JavaScript and rebuild JS bundle on the fly for you, it will not do so for native code. So if you want to test your latest native changes you need to rebuild by using the above command.

### Recap✨ [​](https://reactnative.dev/docs/next/legacy/native-modules-ios\#recap "Direct link to Recap✨")

You should now be able to invoke your `createCalendarEvent()` method on your native module in JavaScript. Since you are using `RCTLog` in the function, you can confirm your native method is being invoked by [enabling debug mode in your app](https://reactnative.dev/docs/debugging#chrome-developer-tools) and looking at the JS console in Chrome or the mobile app debugger Flipper. You should see your `RCTLogInfo(@"Pretending to create an event %@ at %@", name, location);` message each time you invoke the native module method.

At this point you have created an iOS native module and invoked a method on it from JavaScript in your React Native application. You can read on to learn more about things like what argument types your native module method takes and how to setup callbacks and promises within your native module.

## Beyond a Calendar Native Module [​](https://reactnative.dev/docs/next/legacy/native-modules-ios\#beyond-a-calendar-native-module "Direct link to Beyond a Calendar Native Module")

### Better Native Module Export [​](https://reactnative.dev/docs/next/legacy/native-modules-ios\#better-native-module-export "Direct link to Better Native Module Export")

Importing your native module by pulling it off of `NativeModules` like above is a bit clunky.

To save consumers of your native module from needing to do that each time they want to access your native module, you can create a JavaScript wrapper for the module. Create a new JavaScript file named NativeCalendarModule.js with the following content:

```codeBlockLines_AclH
/**
* This exposes the native CalendarModule module as a JS module. This has a
* function 'createCalendarEvent' which takes the following parameters:

* 1. String name: A string representing the name of the event
* 2. String location: A string representing the location of the event
*/
import {NativeModules} from 'react-native';
const {CalendarModule} = NativeModules;
export default CalendarModule;

This JavaScript file also becomes a good location for you to add any JavaScript side functionality. For example, if you use a type system like TypeScript you can add type annotations for your native module here. While React Native does not yet support Native to JS type safety, with these type annotations, all your JS code will be type safe. These annotations will also make it easier for you to switch to type-safe native modules down the line. Below is an example of adding type safety to the Calendar Module:

```codeBlockLines_AclH
/**
* This exposes the native CalendarModule module as a JS module. This has a
* function 'createCalendarEvent' which takes the following parameters:

* 1. String name: A string representing the name of the event
* 2. String location: A string representing the location of the event
*/
import {NativeModules} from 'react-native';
const {CalendarModule} = NativeModules;
interface CalendarInterface {
createCalendarEvent(name: string, location: string): void;
}
export default CalendarModule as CalendarInterface;

In your other JavaScript files you can access the native module and invoke its method like this:

```codeBlockLines_AclH
import NativeCalendarModule from './NativeCalendarModule';
NativeCalendarModule.createCalendarEvent('foo', 'bar');

This assumes that the place you are importing `CalendarModule` is in the same hierarchy as `NativeCalendarModule.js`. Please update the relative import as necessary.

### Argument Types [​](https://reactnative.dev/docs/next/legacy/native-modules-ios\#argument-types "Direct link to Argument Types")

When a native module method is invoked in JavaScript, React Native converts the arguments from JS objects to their Objective-C/Swift object analogues. So for example, if your Objective-C Native Module method accepts a NSNumber, in JS you need to call the method with a number. React Native will handle the conversion for you. Below is a list of the argument types supported for native module methods and the JavaScript equivalents they map to.

| Objective-C | JavaScript |
| --- | --- |
| NSString | string, ?string |
| BOOL | boolean |
| double | number |
| NSNumber | ?number |
| NSArray | Array, ?Array |
| NSDictionary | Object, ?Object |
| RCTResponseSenderBlock | Function (success) |
| RCTResponseSenderBlock, RCTResponseErrorBlock | Function (failure) |
| RCTPromiseResolveBlock, RCTPromiseRejectBlock | Promise |

The following types are currently supported but will not be supported in TurboModules. Please avoid using them.

For iOS, you can also write native module methods with any argument type that is supported by the `RCTConvert` class (see [RCTConvert](https://github.com/facebook/react-native/blob/main/packages/react-native/React/Base/RCTConvert.h) for details about what is supported). The RCTConvert helper functions all accept a JSON value as input and map it to a native Objective-C type or class.

### Exporting Constants [​](https://reactnative.dev/docs/next/legacy/native-modules-ios\#exporting-constants "Direct link to Exporting Constants")

A native module can export constants by overriding the native method `constantsToExport()`. Below `constantsToExport()` is overridden, and returns a Dictionary that contains a default event name property you can access in JavaScript like so:

```codeBlockLines_AclH
- (NSDictionary *)constantsToExport
{
return @{ @"DEFAULT_EVENT_NAME": @"New Event" };
}

The constant can then be accessed by invoking `getConstants()` on the native module in JS like so:

```codeBlockLines_AclH
const {DEFAULT_EVENT_NAME} = CalendarModule.getConstants();
console.log(DEFAULT_EVENT_NAME);

Technically, it is possible to access constants exported in `constantsToExport()` directly off the `NativeModule` object. This will no longer be supported with TurboModules, so we encourage the community to switch to the above approach to avoid necessary migration down the line.

The constants are exported only at initialization time, so if you change `constantsToExport()` values at runtime it won't affect the JavaScript environment.

For iOS, if you override `constantsToExport()` then you should also implement `+ requiresMainQueueSetup` to let React Native know if your module needs to be initialized on the main thread, before any JavaScript code executes. Otherwise you will see a warning that in the future your module may be initialized on a background thread unless you explicitly opt out with `+ requiresMainQueueSetup:`. If your module does not require access to UIKit, then you should respond to `+ requiresMainQueueSetup` with NO.

### Callbacks [​](https://reactnative.dev/docs/next/legacy/native-modules-ios\#callbacks "Direct link to Callbacks")

Native modules also support a unique kind of argument - a callback. Callbacks are used to pass data from Objective-C to JavaScript for asynchronous methods. They can also be used to asynchronously execute JS from the native side.

For iOS, callbacks are implemented using the type `RCTResponseSenderBlock`. Below the callback parameter `myCallBack` is added to the `createCalendarEventMethod()`:

```codeBlockLines_AclH
RCT_EXPORT_METHOD(createCalendarEvent:(NSString *)title
location:(NSString *)location
myCallback:(RCTResponseSenderBlock)callback)

You can then invoke the callback in your native function, providing whatever result you want to pass to JavaScript in an array. Note that `RCTResponseSenderBlock` accepts only one argument - an array of parameters to pass to the JavaScript callback. Below you will pass back the ID of an event created in an earlier call.

It is important to highlight that the callback is not invoked immediately after the native function completes—remember the communication is asynchronous.

```codeBlockLines_AclH
RCT_EXPORT_METHOD(createCalendarEvent:(NSString *)title location:(NSString *)location callback: (RCTResponseSenderBlock)callback)
{
NSInteger eventId = ...
callback(@[@(eventId)]);

RCTLogInfo(@"Pretending to create an event %@ at %@", title, location);
}

This method could then be accessed in JavaScript using the following:

CalendarModule.createCalendarEvent(
'Party',
'04-12-2020',

console.log(`Created a new event with id ${eventId}`);
},
);
};

A native module is supposed to invoke its callback only once. It can, however, store the callback and invoke it later. This pattern is often used to wrap iOS APIs that require delegates— see [`RCTAlertManager`](https://github.com/facebook/react-native/blob/main/packages/react-native/React/CoreModules/RCTAlertManager.mm) for an example. If the callback is never invoked, some memory is leaked.

There are two approaches to error handling with callbacks. The first is to follow Node’s convention and treat the first argument passed to the callback array as an error object.

```codeBlockLines_AclH
RCT_EXPORT_METHOD(createCalendarEventCallback:(NSString *)title location:(NSString *)location callback: (RCTResponseSenderBlock)callback)
{
NSNumber *eventId = [NSNumber numberWithInt:123];
callback(@[[NSNull null], eventId]);
}

In JavaScript, you can then check the first argument to see if an error was passed through:

CalendarModule.createCalendarEventCallback(
'testName',
'testLocation',

if (error) {
console.error(`Error found! ${error}`);
}
console.log(`event id ${eventId} returned`);
},
);
};

Another option is to use two separate callbacks: onFailure and onSuccess.

```codeBlockLines_AclH
RCT_EXPORT_METHOD(createCalendarEventCallback:(NSString *)title
location:(NSString *)location
errorCallback: (RCTResponseSenderBlock)errorCallback
successCallback: (RCTResponseSenderBlock)successCallback)
{
@try {
NSNumber *eventId = [NSNumber numberWithInt:123];
successCallback(@[eventId]);
}

@catch ( NSException *e ) {
errorCallback(@[e]);
}
}

Then in JavaScript you can add a separate callback for error and success responses:

console.error(`Error found! ${error}`);
},

console.log(`event id ${eventId} returned`);
},
);
};

If you want to pass error-like objects to JavaScript, use `RCTMakeError` from [`RCTUtils.h.`](https://github.com/facebook/react-native/blob/main/packages/react-native/React/Base/RCTUtils.h) Right now this only passes an Error-shaped dictionary to JavaScript, but React Native aims to automatically generate real JavaScript Error objects in the future. You can also provide a `RCTResponseErrorBlock` argument, which is used for error callbacks and accepts an `NSError \* object`. Please note that this argument type will not be supported with TurboModules.

### Promises [​](https://reactnative.dev/docs/next/legacy/native-modules-ios\#promises "Direct link to Promises")

Native modules can also fulfill a promise, which can simplify your JavaScript, especially when using ES2016's `async/await` syntax. When the last parameter of a native module method is a `RCTPromiseResolveBlock` and `RCTPromiseRejectBlock`, its corresponding JS method will return a JS Promise object.

Refactoring the above code to use a promise instead of callbacks looks like this:

```codeBlockLines_AclH
RCT_EXPORT_METHOD(createCalendarEvent:(NSString *)title
location:(NSString *)location
resolver:(RCTPromiseResolveBlock)resolve
rejecter:(RCTPromiseRejectBlock)reject)
{
NSInteger eventId = createCalendarEvent();
if (eventId) {
resolve(@(eventId));
} else {
reject(@"event_failure", @"no event id returned", nil);
}
}

The JavaScript counterpart of this method returns a Promise. This means you can use the `await` keyword within an async function to call it and wait for its result:

try {
const eventId = await CalendarModule.createCalendarEvent(
'Party',
'my house',
);
console.log(`Created a new event with id ${eventId}`);
} catch (e) {
console.error(e);
}
};

### Sending Events to JavaScript [​](https://reactnative.dev/docs/next/legacy/native-modules-ios\#sending-events-to-javascript "Direct link to Sending Events to JavaScript")

Native modules can signal events to JavaScript without being invoked directly. For example, you might want to signal to JavaScript a reminder that a calendar event from the native iOS calendar app will occur soon. The preferred way to do this is to subclass `RCTEventEmitter`, implement `supportedEvents` and call self `sendEventWithName`:

Update your header class to import `RCTEventEmitter` and subclass `RCTEventEmitter`:

```codeBlockLines_AclH
// CalendarModule.h

JavaScript code can subscribe to these events by creating a new `NativeEventEmitter` instance around your module.

You will receive a warning if you expend resources unnecessarily by emitting an event while there are no listeners. To avoid this, and to optimize your module's workload (e.g. by unsubscribing from upstream notifications or pausing background tasks), you can override `startObserving` and `stopObserving` in your `RCTEventEmitter` subclass.

```codeBlockLines_AclH
@implementation CalendarModule
{
bool hasListeners;
}

// Will be called when this module's first listener is added.
-(void)startObserving {
hasListeners = YES;
// Set up any upstream listeners or background tasks as necessary
}

// Will be called when this module's last listener is removed, or on dealloc.
-(void)stopObserving {
hasListeners = NO;
// Remove upstream listeners, stop unnecessary background tasks
}

- (void)calendarEventReminderReceived:(NSNotification *)notification
{
NSString *eventName = notification.userInfo[@"name"];
if (hasListeners) {// Only send events if anyone is listening
[self sendEventWithName:@"EventReminder" body:@{@"name": eventName}];
}
}

### Threading [​](https://reactnative.dev/docs/next/legacy/native-modules-ios\#threading "Direct link to Threading")

Unless the native module provides its own method queue, it shouldn't make any assumptions about what thread it's being called on. Currently, if a native module doesn't provide a method queue, React Native will create a separate GCD queue for it and invoke its methods there. Please note that this is an implementation detail and might change. If you want to explicitly provide a method queue for a native module, override the `(dispatch_queue_t) methodQueue` method in the native module. For example, if it needs to use a main-thread-only iOS API, it should specify this via:

```codeBlockLines_AclH
- (dispatch_queue_t)methodQueue
{
return dispatch_get_main_queue();
}

Similarly, if an operation may take a long time to complete, the native module can specify its own queue to run operations on. Again, currently React Native will provide a separate method queue for your native module, but this is an implementation detail you should not rely on. If you don't provide your own method queue, in the future, your native module's long running operations may end up blocking async calls being executed on other unrelated native modules. The `RCTAsyncLocalStorage` module here, for example, creates its own queue so the React queue isn't blocked waiting on potentially slow disk access.

```codeBlockLines_AclH
- (dispatch_queue_t)methodQueue
{
return dispatch_queue_create("com.facebook.React.AsyncLocalStorageQueue", DISPATCH_QUEUE_SERIAL);
}

The specified `methodQueue` will be shared by all of the methods in your module. If only one of your methods is long-running (or needs to be run on a different queue than the others for some reason), you can use `dispatch_async` inside the method to perform that particular method's code on another queue, without affecting the others:

```codeBlockLines_AclH
RCT_EXPORT_METHOD(doSomethingExpensive:(NSString *)param callback:(RCTResponseSenderBlock)callback)
{
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
// Call long-running code on background thread
...
// You can invoke callback from any thread/queue
callback(@[...]);
});
}

Sharing dispatch queues between modules

The `methodQueue` method will be called once when the module is initialized, and then retained by React Native, so there is no need to keep a reference to the queue yourself, unless you wish to make use of it within your module. However, if you wish to share the same queue between multiple modules then you will need to ensure that you retain and return the same queue instance for each of them.

### Dependency Injection [​](https://reactnative.dev/docs/next/legacy/native-modules-ios\#dependency-injection "Direct link to Dependency Injection")

React Native will create and initialize any registered native modules automatically. However, you may wish to create and initialize your own module instances to, for example, inject dependencies.

You can do this by creating a class that implements the `RCTBridgeDelegate` Protocol, initializing an `RCTBridge` with the delegate as an argument and initialising a `RCTRootView` with the initialized bridge.

RCTBridge *bridge = [[RCTBridge alloc] initWithDelegate:moduleInitialiser launchOptions:nil];

RCTRootView *rootView = [[RCTRootView alloc]\
initWithBridge:bridge\
moduleName:kModuleName\
initialProperties:nil];

### Exporting Swift [​](https://reactnative.dev/docs/next/legacy/native-modules-ios\#exporting-swift "Direct link to Exporting Swift")

Swift doesn't have support for macros, so exposing native modules and their methods to JavaScript inside React Native requires a bit more setup. However, it works relatively the same. Let's say you have the same `CalendarModule` but as a Swift class:

swift

```codeBlockLines_AclH
// CalendarModule.swift

@objc(CalendarModule)
class CalendarModule: NSObject {

@objc(addEvent:location:date:)

// Date is ready to use!
}

@objc

return ["someKey": "someValue"]
}

}

It is important to use the `@objc` modifiers to ensure the class and functions are exported properly to the Objective-C runtime.

Then create a private implementation file that will register the required information with React Native:

```codeBlockLines_AclH
// CalendarModuleBridge.m

RCT_EXTERN_METHOD(addEvent:(NSString *)name location:(NSString *)location date:(nonnull NSNumber *)date)

```codeBlockLines_AclH
// CalendarModule-Bridging-Header.h

You can also use `RCT_EXTERN_REMAP_MODULE` and `_RCT_EXTERN_REMAP_METHOD` to alter the JavaScript name of the module or methods you are exporting. For more information see [`RCTBridgeModule`](https://github.com/facebook/react-native/blob/main/packages/react-native/React/Base/RCTBridgeModule.h).

Important when making third party modules: Static libraries with Swift are only supported in Xcode 9 and later. In order for the Xcode project to build when you use Swift in the iOS static library you include in the module, your main app project must contain Swift code and a bridging header itself. If your app project does not contain any Swift code, a workaround can be a single empty .swift file and an empty bridging header.

#### invalidate() [​](https://reactnative.dev/docs/next/legacy/native-modules-ios\#invalidate "Direct link to invalidate()")

Native modules can conform to the [RCTInvalidating](https://github.com/facebook/react-native/blob/main/packages/react-native/React/Base/RCTInvalidating.h) protocol on iOS by implementing the `invalidate()` method. This method [can be invoked](https://github.com/facebook/react-native/blob/0.62-stable/ReactCommon/turbomodule/core/platform/ios/RCTTurboModuleManager.mm#L456) when the native bridge is invalidated (i.e.: on devmode reload). Please use this mechanism as necessary to do the required cleanup for your native module.

Is this page useful?

- [Create a Calendar Native Module](https://reactnative.dev/docs/next/legacy/native-modules-ios#create-a-calendar-native-module)
- [Setup](https://reactnative.dev/docs/next/legacy/native-modules-ios#setup)
- [Create Custom Native Module Files](https://reactnative.dev/docs/next/legacy/native-modules-ios#create-custom-native-module-files)
- [Module Name](https://reactnative.dev/docs/next/legacy/native-modules-ios#module-name)
- [Export a Native Method to JavaScript](https://reactnative.dev/docs/next/legacy/native-modules-ios#export-a-native-method-to-javascript)
- [Synchronous Methods](https://reactnative.dev/docs/next/legacy/native-modules-ios#synchronous-methods)
- [Test What You Have Built](https://reactnative.dev/docs/next/legacy/native-modules-ios#test-what-you-have-built)
- [Building as You Iterate](https://reactnative.dev/docs/next/legacy/native-modules-ios#building-as-you-iterate)
- [Recap✨](https://reactnative.dev/docs/next/legacy/native-modules-ios#recap)
- [Beyond a Calendar Native Module](https://reactnative.dev/docs/next/legacy/native-modules-ios#beyond-a-calendar-native-module)
- [Better Native Module Export](https://reactnative.dev/docs/next/legacy/native-modules-ios#better-native-module-export)
- [Argument Types](https://reactnative.dev/docs/next/legacy/native-modules-ios#argument-types)
- [Exporting Constants](https://reactnative.dev/docs/next/legacy/native-modules-ios#exporting-constants)
- [Callbacks](https://reactnative.dev/docs/next/legacy/native-modules-ios#callbacks)
- [Promises](https://reactnative.dev/docs/next/legacy/native-modules-ios#promises)
- [Sending Events to JavaScript](https://reactnative.dev/docs/next/legacy/native-modules-ios#sending-events-to-javascript)
- [Threading](https://reactnative.dev/docs/next/legacy/native-modules-ios#threading)
- [Dependency Injection](https://reactnative.dev/docs/next/legacy/native-modules-ios#dependency-injection)
- [Exporting Swift](https://reactnative.dev/docs/next/legacy/native-modules-ios#exporting-swift)
- [Reserved Method Names](https://reactnative.dev/docs/next/legacy/native-modules-ios#reserved-method-names)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/releases

[Skip to main content](https://reactnative.dev/docs/next/releases#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

On this page

New React Native releases are shipped **every two months**, usually resulting in six (6) new minors per year.

Below is the schedule and current status of recent and upcoming React Native releases:

| Version | Branch-cut Date | Release Date | Support | Blogpost |
| --- | --- | --- | --- | --- |
| `0.83.x` | 2025-11-03 | 2025-12-08 | Future | |
| `0.82.x` | 2025-09-01 | 2025-10-06 | Future | |
| `0.81.x` | 2025-07-10 | 2025-08-12 | Active | [Details](https://reactnative.dev/blog/2025/08/12/react-native-0.81) |
| `0.80.x` | 2025-05-07 | 2025-06-12 | Active | [Details](https://reactnative.dev/blog/2025/06/12/react-native-0.80) |
| `0.79.x` | 2025-03-04 | 2025-04-08 | End of Cycle | [Details](https://reactnative.dev/blog/2025/04/08/react-native-0.79) |
| `0.78.x` | 2025-01-15 | 2025-02-19 | Unsupported | [Details](https://reactnative.dev/blog/2025/02/19/react-native-0.78) |
| `0.77.x` | 2024-11-26 | 2025-01-21 | Unsupported | [Details](https://reactnative.dev/blog/2025/01/21/version-0.77) |

The different support level presented in the table are defined as such:

- Future
- After a new version branch gets cut, creating new Release Candidates to allow the community to test the upcoming version is very important. New RC releases are done at a high pace, as soon as viable.
- Active
- Stable releases in active support receive frequent updates. Latest stable has the highest priority, and at the start of its stable cycle (right after .0 is released) multiple patches will be done as soon as possible to stabilize the version and ensure a good upgrade experience to the community.
- End of Cycle
- A version in this support bracket will receive less patches, unless some important regressions need to be addressed. Once a next version becomes the new latest stable, before the version in EoC moves over into Unsupported one last patch released will be produced with the latest receive pick requests.
- Unsupported
- When a version is in the unsupported stage, no new released are to be expected. Only very important regressions might create exceptions to this rule; it is recommended that codebases using an unsupported version upgrade as soon as possible.

## Commitment to Stability [​](https://reactnative.dev/docs/next/releases\#commitment-to-stability "Direct link to Commitment to Stability")

In order to support users upgrading React Native versions, we’re committed to maintain the **latest 3 minor series** (e.g. 0.78.x, 0.77.x and 0.76.x when 0.78 is the latest release).

For those releases we’ll be publishing regular updates and bug fixes.

You can read more about our support policy on [the react-native-releases working group](https://github.com/reactwg/react-native-releases/blob/main/docs/support.md).

More information on our versioning, and what we consider a breaking change is available in our [versioning policy](https://reactnative.dev/contributing/versioning-policy) page.

Is this page useful?

- [Commitment to Stability](https://reactnative.dev/docs/next/releases#commitment-to-stability)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/intro-react-native-components

[Skip to main content](https://reactnative.dev/docs/next/intro-react-native-components#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/intro-react-native-components)** (0.81).

Version: Next

On this page

React Native is an open source framework for building Android and iOS applications using [React](https://react.dev/) and the app platform’s native capabilities. With React Native, you use JavaScript to access your platform’s APIs as well as to describe the appearance and behavior of your UI using React components: bundles of reusable, nestable code. You can learn more about React in the next section. But first, let’s cover how components work in React Native.

## Views and mobile development [​](https://reactnative.dev/docs/next/intro-react-native-components\#views-and-mobile-development "Direct link to Views and mobile development")

In Android and iOS development, a **view** is the basic building block of UI: a small rectangular element on the screen which can be used to display text, images, or respond to user input. Even the smallest visual elements of an app, like a line of text or a button, are kinds of views. Some kinds of views can contain other views. It’s views all the way down!

## Native Components [​](https://reactnative.dev/docs/next/intro-react-native-components\#native-components "Direct link to Native Components")

In Android development, you write views in Kotlin or Java; in iOS development, you use Swift or Objective-C. With React Native, you can invoke these views with JavaScript using React components. At runtime, React Native creates the corresponding Android and iOS views for those components. Because React Native components are backed by the same views as Android and iOS, React Native apps look, feel, and perform like any other apps. We call these platform-backed components **Native Components.**

React Native comes with a set of essential, ready-to-use Native Components you can use to start building your app today. These are React Native's **Core Components**.

caution

This documentation references a legacy set of API and needs to be updated to reflect the New Architecture

React Native also lets you build your own Native Components for [Android](https://reactnative.dev/docs/next/legacy/native-components-android) and [iOS](https://reactnative.dev/docs/next/legacy/native-components-ios) to suit your app’s unique needs. We also have a thriving ecosystem of these **community-contributed components.** Check out [Native Directory](https://reactnative.directory/) to find what the community has been creating.

## Core Components [​](https://reactnative.dev/docs/next/intro-react-native-components\#core-components "Direct link to Core Components")

React Native has many Core Components for everything from controls to activity indicators. You can find them all [documented in the API section](https://reactnative.dev/docs/next/components-and-apis). You will mostly work with the following Core Components:

| React Native UI Component | Android View | iOS View | Web Analog | Description |
| --- | --- | --- | --- | --- |

In the next section, you will start combining these Core Components to learn about how React works. Have a play with them here now!

Hello World - Snack

# Hello World

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {View, Text, Image, ScrollView, TextInput} from 'react-native';

return (

source={{
uri: 'https://reactnative.dev/docs/assets/p\_cat2.png',
}}
style={{width: 200, height: 200}}

style={{
height: 40,
borderColor: 'gray',
borderWidth: 1,
}}
defaultValue="You can type in me"

};

export default App;

source={{
uri: 'https://reactnative.dev/docs/assets/p_cat2.png',
}}
style={{width: 200, height: 200}}

style={{
height: 40,
borderColor: 'gray',
borderWidth: 1,
}}
defaultValue="You can type in me"

Snack

Some text

Some more text

Updating…

PreviewMy DeviceAndroidiOSWeb

* * *

Because React Native uses the same API structure as React components, you’ll need to understand React component APIs to get started. The [next section](https://reactnative.dev/docs/next/intro-react) makes for a quick introduction or refresher on the topic. However, if you’re already familiar with React, feel free to [skip ahead](https://reactnative.dev/docs/next/handling-text-input).

Is this page useful?

- [Views and mobile development](https://reactnative.dev/docs/next/intro-react-native-components#views-and-mobile-development)
- [Native Components](https://reactnative.dev/docs/next/intro-react-native-components#native-components)
- [Core Components](https://reactnative.dev/docs/next/intro-react-native-components#core-components)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/pressable

[Skip to main content](https://reactnative.dev/docs/next/pressable#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/pressable)** (0.81).

Version: Next

On this page

Pressable is a Core Component wrapper that can detect various stages of press interactions on any of its defined children.

tsx

```codeBlockLines_AclH

## How it works [​](https://reactnative.dev/docs/next/pressable\#how-it-works "Direct link to How it works")

On an element wrapped by `Pressable`:

- [`onPressIn`](https://reactnative.dev/docs/next/pressable#onpressin) is called when a press is activated.
- [`onPressOut`](https://reactnative.dev/docs/next/pressable#onpressout) is called when the press gesture is deactivated.

After pressing [`onPressIn`](https://reactnative.dev/docs/next/pressable#onpressin), one of two things will happen:

1. The person will remove their finger, triggering [`onPressOut`](https://reactnative.dev/docs/next/pressable#onpressout) followed by [`onPress`](https://reactnative.dev/docs/next/pressable#onpress).
2. If the person leaves their finger longer than 500 milliseconds before removing it, [`onLongPress`](https://reactnative.dev/docs/next/pressable#onlongpress) is triggered. ( [`onPressOut`](https://reactnative.dev/docs/next/pressable#onpressout) will still fire when they remove their finger.)

Fingers are not the most precise instruments, and it is common for users to accidentally activate the wrong element or miss the activation area. To help, `Pressable` has an optional `HitRect` you can use to define how far a touch can register away from the wrapped element. Presses can start anywhere within a `HitRect`.

`PressRect` allows presses to move beyond the element and its `HitRect` while maintaining activation and being eligible for a "press"—think of sliding your finger slowly away from a button you're pressing down on.

note

The touch area never extends past the parent view bounds and the Z-index of sibling views always takes precedence if a touch hits two overlapping views.

You can set `HitRect` with `hitSlop` and set `PressRect` with `pressRetentionOffset`.

info

`Pressable` uses React Native's `Pressability` API. For more information around the state machine flow of Pressability and how it works, check out the implementation for [Pressability](https://github.com/facebook/react-native/blob/main/packages/react-native/Libraries/Pressability/Pressability.js#L350).

## Example [​](https://reactnative.dev/docs/next/pressable\#example "Direct link to Example")

Pressable - Snack

# Pressable

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React, {useState} from 'react';
import {Pressable, StyleSheet, Text, View} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const \[timesPressed, setTimesPressed\] = useState(0);

let textLog = '';

textLog = timesPressed + 'x onPress';

textLog = 'onPress';
}

return (

}}

{\
backgroundColor: pressed ? 'rgb(210, 230, 255)' : 'white',\
},\
styles.wrapperCustom,\

};

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
},
text: {
fontSize: 16,
},
wrapperCustom: {
borderRadius: 8,
padding: 6,
},
logBox: {
padding: 20,
margin: 10,
borderWidth: StyleSheet.hairlineWidth,
borderColor: '#f0f0f0',
backgroundColor: '#f9f9f9',
},
});

export default App;

const [timesPressed, setTimesPressed] = useState(0);

textLog = 'onPress';
}

{\
backgroundColor: pressed ? 'rgb(210, 230, 255)' : 'white',\
},\
styles.wrapperCustom,\

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
},
text: {
fontSize: 16,
},
wrapperCustom: {
borderRadius: 8,
padding: 6,
},
logBox: {
padding: 20,
margin: 10,
borderWidth: StyleSheet.hairlineWidth,
borderColor: '#f0f0f0',
backgroundColor: '#f9f9f9',
},
});

Snack

Press Me

Updating…

PreviewMy DeviceAndroidiOSWeb

## Props [​](https://reactnative.dev/docs/next/pressable\#props "Direct link to Props")

### `android_disableSound` Android [​](https://reactnative.dev/docs/next/pressable\#android_disablesound-android "Direct link to android_disablesound-android")

If true, doesn't play Android system sound on press.

| Type | Default |
| --- | --- |
| boolean | `false` |

### `android_ripple` Android [​](https://reactnative.dev/docs/next/pressable\#android_ripple-android "Direct link to android_ripple-android")

Enables the Android ripple effect and configures its properties.

| Type |
| --- |
| [RippleConfig](https://reactnative.dev/docs/next/pressable#rippleconfig) |

### `children` [​](https://reactnative.dev/docs/next/pressable\#children "Direct link to children")

Either children or a function that receives a boolean reflecting whether the component is currently pressed.

| Type |
| --- |
| [React Node](https://reactnative.dev/docs/next/react-node) |

### `unstable_pressDelay` [​](https://reactnative.dev/docs/next/pressable\#unstable_pressdelay "Direct link to unstable_pressdelay")

Duration (in milliseconds) to wait after press down before calling `onPressIn`.

| Type |
| --- |
| number |

### `delayLongPress` [​](https://reactnative.dev/docs/next/pressable\#delaylongpress "Direct link to delaylongpress")

Duration (in milliseconds) from `onPressIn` before `onLongPress` is called.

| Type | Default |
| --- | --- |
| number | `500` |

### `disabled` [​](https://reactnative.dev/docs/next/pressable\#disabled "Direct link to disabled")

Whether the press behavior is disabled.

### `hitSlop` [​](https://reactnative.dev/docs/next/pressable\#hitslop "Direct link to hitslop")

Sets additional distance outside of element in which a press can be detected.

| Type |
| --- |
| [Rect](https://reactnative.dev/docs/next/rect) or number |

### `onHoverIn` [​](https://reactnative.dev/docs/next/pressable\#onhoverin "Direct link to onhoverin")

Called when the hover is activated to provide visual feedback.

| Type |
| --- |

### `onHoverOut` [​](https://reactnative.dev/docs/next/pressable\#onhoverout "Direct link to onhoverout")

Called when the hover is deactivated to undo visual feedback.

### `onLongPress` [​](https://reactnative.dev/docs/next/pressable\#onlongpress "Direct link to onlongpress")

Called if the time after `onPressIn` lasts longer than 500 milliseconds. This time period can be customized with [`delayLongPress`](https://reactnative.dev/docs/next/pressable#delaylongpress).

### `onPress` [​](https://reactnative.dev/docs/next/pressable\#onpress "Direct link to onpress")

Called after `onPressOut`.

### `onPressIn` [​](https://reactnative.dev/docs/next/pressable\#onpressin "Direct link to onpressin")

Called immediately when a touch is engaged, before `onPressOut` and `onPress`.

### `onPressMove` [​](https://reactnative.dev/docs/next/pressable\#onpressmove "Direct link to onpressmove")

Called when the press location moves.

### `onPressOut` [​](https://reactnative.dev/docs/next/pressable\#onpressout "Direct link to onpressout")

Called when a touch is released.

### `pressRetentionOffset` [​](https://reactnative.dev/docs/next/pressable\#pressretentionoffset "Direct link to pressretentionoffset")

Additional distance outside of this view in which a touch is considered a press before `onPressOut` is triggered.

| Type | Default |
| --- | --- |
| [Rect](https://reactnative.dev/docs/next/rect) or number | `{bottom: 30, left: 20, right: 20, top: 20}` |

### `style` [​](https://reactnative.dev/docs/next/pressable\#style "Direct link to style")

Either view styles or a function that receives a boolean reflecting whether the component is currently pressed and returns view styles.

### `testOnly_pressed` [​](https://reactnative.dev/docs/next/pressable\#testonly_pressed "Direct link to testonly_pressed")

Used only for documentation or testing (e.g. snapshot testing).

## Type Definitions [​](https://reactnative.dev/docs/next/pressable\#type-definitions "Direct link to Type Definitions")

### RippleConfig [​](https://reactnative.dev/docs/next/pressable\#rippleconfig "Direct link to RippleConfig")

Ripple effect configuration for the `android_ripple` property.

| Type |
| --- |
| object |

**Properties:**

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| color | [color](https://reactnative.dev/docs/next/colors) | No | Defines the color of the ripple effect. |
| borderless | boolean | No | Defines if ripple effect should not include border. |
| radius | number | No | Defines the radius of the ripple effect. |
| foreground | boolean | No | Set to true to add the ripple effect to the foreground of the view, instead of the background. This is useful if one of your child views has a background of its own, or you're e.g. displaying images, and you don't want the ripple to be covered by them. |

Is this page useful?

- [How it works](https://reactnative.dev/docs/next/pressable#how-it-works)
- [Example](https://reactnative.dev/docs/next/pressable#example)
- [Props](https://reactnative.dev/docs/next/pressable#props)
- [`android_disableSound` \\
Android](https://reactnative.dev/docs/next/pressable#android_disablesound-android)
- [`android_ripple` \\
Android](https://reactnative.dev/docs/next/pressable#android_ripple-android)
- [`children`](https://reactnative.dev/docs/next/pressable#children)
- [`unstable_pressDelay`](https://reactnative.dev/docs/next/pressable#unstable_pressdelay)
- [`delayLongPress`](https://reactnative.dev/docs/next/pressable#delaylongpress)
- [`disabled`](https://reactnative.dev/docs/next/pressable#disabled)
- [`hitSlop`](https://reactnative.dev/docs/next/pressable#hitslop)
- [`onHoverIn`](https://reactnative.dev/docs/next/pressable#onhoverin)
- [`onHoverOut`](https://reactnative.dev/docs/next/pressable#onhoverout)
- [`onLongPress`](https://reactnative.dev/docs/next/pressable#onlongpress)
- [`onPress`](https://reactnative.dev/docs/next/pressable#onpress)
- [`onPressIn`](https://reactnative.dev/docs/next/pressable#onpressin)
- [`onPressMove`](https://reactnative.dev/docs/next/pressable#onpressmove)
- [`onPressOut`](https://reactnative.dev/docs/next/pressable#onpressout)
- [`pressRetentionOffset`](https://reactnative.dev/docs/next/pressable#pressretentionoffset)
- [`style`](https://reactnative.dev/docs/next/pressable#style)
- [`testOnly_pressed`](https://reactnative.dev/docs/next/pressable#testonly_pressed)
- [Type Definitions](https://reactnative.dev/docs/next/pressable#type-definitions)
- [RippleConfig](https://reactnative.dev/docs/next/pressable#rippleconfig)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/share

[Skip to main content](https://reactnative.dev/docs/next/share#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/share)** (0.81).

Version: Next

On this page

## Example [​](https://reactnative.dev/docs/next/share\#example "Direct link to Example")

- TypeScript
- JavaScript

# Reference

## Methods [​](https://reactnative.dev/docs/next/share\#methods "Direct link to Methods")

tsx

```codeBlockLines_AclH
static share(content: ShareContent, options?: ShareOptions);

Open a dialog to share text content.

In iOS, returns a Promise which will be invoked with an object containing `action` and `activityType`. If the user dismissed the dialog, the Promise will still be resolved with action being `Share.dismissedAction` and all the other keys being undefined. Note that some share options will not appear or work on the iOS simulator.

In Android, returns a Promise which will always be resolved with action being `Share.sharedAction`.

**Properties:**

| Name | Type | Description |
| --- | --- | --- |

* * *

## Properties [​](https://reactnative.dev/docs/next/share\#properties "Direct link to Properties")

### `sharedAction` [​](https://reactnative.dev/docs/next/share\#sharedaction "Direct link to sharedaction")

```codeBlockLines_AclH
static sharedAction: 'sharedAction';

The content was successfully shared.

### `dismissedAction` iOS [​](https://reactnative.dev/docs/next/share\#dismissedaction-ios "Direct link to dismissedaction-ios")

```codeBlockLines_AclH
static dismissedAction: 'dismissedAction';

The dialog has been dismissed.

Is this page useful?

- [Example](https://reactnative.dev/docs/next/share#example)
- [Methods](https://reactnative.dev/docs/next/share#methods)
- [`share()`](https://reactnative.dev/docs/next/share#share)
- [Properties](https://reactnative.dev/docs/next/share#properties)
- [`sharedAction`](https://reactnative.dev/docs/next/share#sharedaction)
- [`dismissedAction` \\
iOS](https://reactnative.dev/docs/next/share#dismissedaction-ios)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/rect

[Skip to main content](https://reactnative.dev/docs/next/rect#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/rect)** (0.81).

Version: Next

On this page

`Rect` accepts numeric pixel values to describe how far to extend a rectangular area. These values are added to the original area's size to expand it.

## Example [​](https://reactnative.dev/docs/next/rect\#example "Direct link to Example")

js

```codeBlockLines_AclH
{
bottom: 20,
left: null,
right: undefined,
top: 50
}

## Keys and values [​](https://reactnative.dev/docs/next/rect\#keys-and-values "Direct link to Keys and values")

### `bottom` [​](https://reactnative.dev/docs/next/rect\#bottom "Direct link to bottom")

| Type | Required |
| --- | --- |
| number, `null`, `undefined` | No |

### `left` [​](https://reactnative.dev/docs/next/rect\#left "Direct link to left")

### `right` [​](https://reactnative.dev/docs/next/rect\#right "Direct link to right")

### `top` [​](https://reactnative.dev/docs/next/rect\#top "Direct link to top")

## Used by [​](https://reactnative.dev/docs/next/rect\#used-by "Direct link to Used by")

- [`Image`](https://reactnative.dev/docs/next/image)
- [`Pressable`](https://reactnative.dev/docs/next/pressable)
- [`Text`](https://reactnative.dev/docs/next/text)
- [`TouchableWithoutFeedback`](https://reactnative.dev/docs/next/touchablewithoutfeedback)

Is this page useful?

- [Example](https://reactnative.dev/docs/next/rect#example)
- [Keys and values](https://reactnative.dev/docs/next/rect#keys-and-values)
- [`bottom`](https://reactnative.dev/docs/next/rect#bottom)
- [`left`](https://reactnative.dev/docs/next/rect#left)
- [`right`](https://reactnative.dev/docs/next/rect#right)
- [`top`](https://reactnative.dev/docs/next/rect#top)
- [Used by](https://reactnative.dev/docs/next/rect#used-by)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/text-style-props

[Skip to main content](https://reactnative.dev/docs/next/text-style-props#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/text-style-props)** (0.81).

Version: Next

On this page

### Example [​](https://reactnative.dev/docs/next/text-style-props\#example "Direct link to Example")

- TypeScript
- JavaScript

# Reference

## Props [​](https://reactnative.dev/docs/next/text-style-props\#props "Direct link to Props")

### `color` [​](https://reactnative.dev/docs/next/text-style-props\#color "Direct link to color")

| Type |
| --- |
| [color](https://reactnative.dev/docs/next/colors) |

* * *

### `fontFamily` [​](https://reactnative.dev/docs/next/text-style-props\#fontfamily "Direct link to fontfamily")

| Type |
| --- |
| string |

The generic font families `system-ui`, `ui-sans-serif`, `ui-serif`, `ui-monospace`, and `ui-rounded` are supported on iOS.

### `fontSize` [​](https://reactnative.dev/docs/next/text-style-props\#fontsize "Direct link to fontsize")

| Type |
| --- |
| number |

### `fontStyle` [​](https://reactnative.dev/docs/next/text-style-props\#fontstyle "Direct link to fontstyle")

| Type |
| --- |
| enum( `'normal'`, `'italic'`) |

### `fontWeight` [​](https://reactnative.dev/docs/next/text-style-props\#fontweight "Direct link to fontweight")

Specifies font weight. The values `'normal'` and `'bold'` are supported for most fonts. Not all fonts have a variant for each of the numeric values, in that case the closest one is chosen.

| Type | Default |
| --- | --- |
| enum( `'normal'`, `'bold'`, `'100'`, `'200'`, `'300'`, `'400'`, `'500'`, `'600'`, `'700'`, `'800'`, `'900'`) or number | `'normal'` |

### `includeFontPadding` Android [​](https://reactnative.dev/docs/next/text-style-props\#includefontpadding-android "Direct link to includefontpadding-android")

Set to `false` to remove extra font padding intended to make space for certain ascenders / descenders. With some fonts, this padding can make text look slightly misaligned when centered vertically. For best results also set `textAlignVertical` to `center`.

| Type | Default |
| --- | --- |
| bool | `true` |

### `fontVariant` [​](https://reactnative.dev/docs/next/text-style-props\#fontvariant "Direct link to fontvariant")

Allows you to set all the font variants for a font. Can be set by using an array of enums or a space-separated string e.g. `'small-caps common-ligatures'`.

| Type | Default |
| --- | --- |
| array of enum( `'small-caps'`, `'oldstyle-nums'`, `'lining-nums'`, `'tabular-nums'`, `'proportional-nums'`) or string | `[]` |

### `letterSpacing` [​](https://reactnative.dev/docs/next/text-style-props\#letterspacing "Direct link to letterspacing")

Increase or decrease the spacing between characters. By default there is no extra letter spacing.

### `lineHeight` [​](https://reactnative.dev/docs/next/text-style-props\#lineheight "Direct link to lineheight")

Numeric value that controls the vertical spacing between lines of text within a text element. It specifies the distance between the baselines of consecutive lines of text.

### `textAlign` [​](https://reactnative.dev/docs/next/text-style-props\#textalign "Direct link to textalign")

| Type | Default |
| --- | --- |
| enum( `'auto'`, `'top'`, `'bottom'`, `'center'`) | `'auto'` |

### `textDecorationColor` iOS [​](https://reactnative.dev/docs/next/text-style-props\#textdecorationcolor-ios "Direct link to textdecorationcolor-ios")

### `textDecorationLine` [​](https://reactnative.dev/docs/next/text-style-props\#textdecorationline "Direct link to textdecorationline")

| Type | Default |
| --- | --- |
| enum( `'none'`, `'underline'`, `'line-through'`, `'underline line-through'`) | `'none'` |

### `textDecorationStyle` iOS [​](https://reactnative.dev/docs/next/text-style-props\#textdecorationstyle-ios "Direct link to textdecorationstyle-ios")

| Type | Default |
| --- | --- |
| enum( `'solid'`, `'double'`, `'dotted'`, `'dashed'`) | `'solid'` |

### `textShadowColor` [​](https://reactnative.dev/docs/next/text-style-props\#textshadowcolor "Direct link to textshadowcolor")

### `textShadowOffset` [​](https://reactnative.dev/docs/next/text-style-props\#textshadowoffset "Direct link to textshadowoffset")

| Type |
| --- |
| object: `{width?: number, height?: number}` |

### `textShadowRadius` [​](https://reactnative.dev/docs/next/text-style-props\#textshadowradius "Direct link to textshadowradius")

### `textTransform` [​](https://reactnative.dev/docs/next/text-style-props\#texttransform "Direct link to texttransform")

| Type | Default |
| --- | --- |
| enum( `'none'`, `'uppercase'`, `'lowercase'`, `'capitalize'`) | `'none'` |

### `verticalAlign` Android [​](https://reactnative.dev/docs/next/text-style-props\#verticalalign-android "Direct link to verticalalign-android")

| Type | Default |
| --- | --- |
| enum( `'auto'`, `'top'`, `'bottom'`, `'middle'`) | `'auto'` |

### `writingDirection` iOS [​](https://reactnative.dev/docs/next/text-style-props\#writingdirection-ios "Direct link to writingdirection-ios")

| Type | Default |
| --- | --- |
| enum( `'auto'`, `'ltr'`, `'rtl'`) | `'auto'` |

### `userSelect` [​](https://reactnative.dev/docs/next/text-style-props\#userselect "Direct link to userselect")

It allows the user to select text and to use the native copy and paste functionality. Has precedence over the `selectable` prop.

| Type | Default |
| --- | --- |
| enum( `'auto'`, `'text'`, `'none'`, `'contain'`, `'all'`) | `none` |

Is this page useful?

- [Example](https://reactnative.dev/docs/next/text-style-props#example)
- [Props](https://reactnative.dev/docs/next/text-style-props#props)
- [`color`](https://reactnative.dev/docs/next/text-style-props#color)
- [`fontFamily`](https://reactnative.dev/docs/next/text-style-props#fontfamily)
- [`fontSize`](https://reactnative.dev/docs/next/text-style-props#fontsize)
- [`fontStyle`](https://reactnative.dev/docs/next/text-style-props#fontstyle)
- [`fontWeight`](https://reactnative.dev/docs/next/text-style-props#fontweight)
- [`includeFontPadding` \\
Android](https://reactnative.dev/docs/next/text-style-props#includefontpadding-android)
- [`fontVariant`](https://reactnative.dev/docs/next/text-style-props#fontvariant)
- [`letterSpacing`](https://reactnative.dev/docs/next/text-style-props#letterspacing)
- [`lineHeight`](https://reactnative.dev/docs/next/text-style-props#lineheight)
- [`textAlign`](https://reactnative.dev/docs/next/text-style-props#textalign)
- [`textAlignVertical` \\
Android](https://reactnative.dev/docs/next/text-style-props#textalignvertical-android)
- [`textDecorationColor` \\
iOS](https://reactnative.dev/docs/next/text-style-props#textdecorationcolor-ios)
- [`textDecorationLine`](https://reactnative.dev/docs/next/text-style-props#textdecorationline)
- [`textDecorationStyle` \\
iOS](https://reactnative.dev/docs/next/text-style-props#textdecorationstyle-ios)
- [`textShadowColor`](https://reactnative.dev/docs/next/text-style-props#textshadowcolor)
- [`textShadowOffset`](https://reactnative.dev/docs/next/text-style-props#textshadowoffset)
- [`textShadowRadius`](https://reactnative.dev/docs/next/text-style-props#textshadowradius)
- [`textTransform`](https://reactnative.dev/docs/next/text-style-props#texttransform)
- [`verticalAlign` \\
Android](https://reactnative.dev/docs/next/text-style-props#verticalalign-android)
- [`writingDirection` \\
iOS](https://reactnative.dev/docs/next/text-style-props#writingdirection-ios)
- [`userSelect`](https://reactnative.dev/docs/next/text-style-props#userselect)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/signed-apk-android

[Skip to main content](https://reactnative.dev/docs/next/signed-apk-android#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/signed-apk-android)** (0.81).

Version: Next

On this page

Android requires that all apps be digitally signed with a certificate before they can be installed. In order to distribute your Android application via [Google Play store](https://play.google.com/store) it needs to be signed with a release key that then needs to be used for all future updates. Since 2017 it is possible for Google Play to manage signing releases automatically thanks to [App Signing by Google Play](https://developer.android.com/studio/publish/app-signing#app-signing-google-play) functionality. However, before your application binary is uploaded to Google Play it needs to be signed with an upload key. The [Signing Your Applications](https://developer.android.com/tools/publishing/app-signing.html) page on Android Developers documentation describes the topic in detail. This guide covers the process in brief, as well as lists the steps required to package the JavaScript bundle.

info

If you are using Expo, read the Expo guide for [Deploying to App Stores](https://docs.expo.dev/distribution/app-stores/) to build and submit your app for the Google Play Store. This guide works with any React Native app to automate the deployment process.

## Generating an upload key [​](https://reactnative.dev/docs/next/signed-apk-android\#generating-an-upload-key "Direct link to Generating an upload key")

You can generate a private signing key using `keytool`.

### Windows [​](https://reactnative.dev/docs/next/signed-apk-android\#windows "Direct link to Windows")

On Windows `keytool` must be run from `C:\Program Files\Java\jdkx.x.x_x\bin`, as administrator.

shell

```codeBlockLines_AclH
keytool -genkeypair -v -storetype PKCS12 -keystore my-upload-key.keystore -alias my-key-alias -keyalg RSA -keysize 2048 -validity 10000

This command prompts you for passwords for the keystore and key and for the Distinguished Name fields for your key. It then generates the keystore as a file called `my-upload-key.keystore`.

The keystore contains a single key, valid for 10000 days. The alias is a name that you will use later when signing your app, so remember to take note of the alias.

### macOS [​](https://reactnative.dev/docs/next/signed-apk-android\#macos "Direct link to macOS")

On macOS, if you're not sure where your JDK bin folder is, then perform the following command to find it:

```codeBlockLines_AclH
/usr/libexec/java_home

It will output the directory of the JDK, which will look something like this:

```codeBlockLines_AclH
/Library/Java/JavaVirtualMachines/jdkX.X.X_XXX.jdk/Contents/Home

Navigate to that directory by using the command `cd /your/jdk/path` and use the keytool command with sudo permission as shown below.

```codeBlockLines_AclH
sudo keytool -genkey -v -keystore my-upload-key.keystore -alias my-key-alias -keyalg RSA -keysize 2048 -validity 10000

caution

Remember to keep the keystore file private. In case you've lost upload key or it's been compromised you should [follow these instructions](https://support.google.com/googleplay/android-developer/answer/7384423#reset).

## Setting up Gradle variables [​](https://reactnative.dev/docs/next/signed-apk-android\#setting-up-gradle-variables "Direct link to Setting up Gradle variables")

1. Place the `my-upload-key.keystore` file under the `android/app` directory in your project folder.
2. Edit the file `~/.gradle/gradle.properties` or `android/gradle.properties`, and add the following (replace `*****` with the correct keystore password, alias and key password),

```codeBlockLines_AclH
MYAPP_UPLOAD_STORE_FILE=my-upload-key.keystore
MYAPP_UPLOAD_KEY_ALIAS=my-key-alias
MYAPP_UPLOAD_STORE_PASSWORD=*****
MYAPP_UPLOAD_KEY_PASSWORD=*****

These are going to be global Gradle variables, which we can later use in our Gradle config to sign our app.

Note about using git

Saving the above Gradle variables in `~/.gradle/gradle.properties` instead of `android/gradle.properties` prevents them from being checked in to git. You may have to create the `~/.gradle/gradle.properties` file in your user's home directory before you can add the variables.

Note about security

If you are not keen on storing your passwords in plaintext, and you are running macOS, you can also [store your credentials in the Keychain Access app](https://pilloxa.gitlab.io/posts/safer-passwords-in-gradle/). Then you can skip the two last rows in `~/.gradle/gradle.properties`.

## Adding signing config to your app's Gradle config [​](https://reactnative.dev/docs/next/signed-apk-android\#adding-signing-config-to-your-apps-gradle-config "Direct link to Adding signing config to your app's Gradle config")

The last configuration step that needs to be done is to setup release builds to be signed using upload key. Edit the file `android/app/build.gradle` in your project folder, and add the signing config,

groovy

```codeBlockLines_AclH
...
android {
...
defaultConfig { ... }
signingConfigs {
release {
if (project.hasProperty('MYAPP_UPLOAD_STORE_FILE')) {
storeFile file(MYAPP_UPLOAD_STORE_FILE)
storePassword MYAPP_UPLOAD_STORE_PASSWORD
keyAlias MYAPP_UPLOAD_KEY_ALIAS
keyPassword MYAPP_UPLOAD_KEY_PASSWORD
}
}
}
buildTypes {
release {
...
signingConfig signingConfigs.release
}
}
}
...

## Generating the release AAB [​](https://reactnative.dev/docs/next/signed-apk-android\#generating-the-release-aab "Direct link to Generating the release AAB")

Run the following command in a terminal:

```codeBlockLines_AclH
npx react-native build-android --mode=release

This command uses Gradle's `bundleRelease` under the hood that bundles all the JavaScript needed to run your app into the AAB ( [Android App Bundle](https://developer.android.com/guide/app-bundle)). If you need to change the way the JavaScript bundle and/or drawable resources are bundled (e.g. if you changed the default file/folder names or the general structure of the project), have a look at `android/app/build.gradle` to see how you can update it to reflect these changes.

note

Make sure `gradle.properties` does not include `org.gradle.configureondemand=true` as that will make the release build skip bundling JS and assets into the app binary.

The generated AAB can be found under `android/app/build/outputs/bundle/release/app-release.aab`, and is ready to be uploaded to Google Play.

In order for Google Play to accept AAB format the App Signing by Google Play needs to be configured for your application on the Google Play Console. If you are updating an existing app that doesn't use App Signing by Google Play, please check our [migration section](https://reactnative.dev/docs/next/signed-apk-android#migrating-old-android-react-native-apps-to-use-app-signing-by-google-play) to learn how to perform that configuration change.

## Testing the release build of your app [​](https://reactnative.dev/docs/next/signed-apk-android\#testing-the-release-build-of-your-app "Direct link to Testing the release build of your app")

Before uploading the release build to the Play Store, make sure you test it thoroughly. First uninstall any previous version of the app you already have installed. Install it on the device using the following command in the project root:

- npm
- Yarn

```codeBlockLines_AclH
npm run android -- --mode="release"

```codeBlockLines_AclH
yarn android --mode release

Note that `--mode release` is only available if you've set up signing as described above.

You can terminate any running bundler instances, since all your framework and JavaScript code is bundled in the APK's assets.

## Publishing to other stores [​](https://reactnative.dev/docs/next/signed-apk-android\#publishing-to-other-stores "Direct link to Publishing to other stores")

By default, the generated APK has the native code for both `x86`, `x86_64`, `ARMv7a` and `ARM64-v8a` CPU architectures. This makes it easier to share APKs that run on almost all Android devices. However, this has the downside that there will be some unused native code on any device, leading to unnecessarily bigger APKs.

You can create an APK for each CPU by adding the following line in your `android/app/build.gradle` file:

diff

```codeBlockLines_AclH
android {

splits {
abi {
reset()
enable true
universalApk false
include "armeabi-v7a", "arm64-v8a", "x86", "x86_64"
}
}

}

Upload these files to markets which support device targeting, such as [Amazon AppStore](https://developer.amazon.com/docs/app-submission/device-filtering-and-compatibility.html) or [F-Droid](https://f-droid.org/en/), and the users will automatically get the appropriate APK. If you want to upload to other markets, such as [APKFiles](https://www.apkfiles.com/), which do not support multiple APKs for a single app, change the `universalApk false` line to `true` to create the default universal APK with binaries for both CPUs.

Please note that you will also have to configure distinct version codes, as [suggested in this page](https://developer.android.com/studio/build/configure-apk-splits#configure-APK-versions) from the official Android documentation.

## Enabling Proguard to reduce the size of the APK (optional) [​](https://reactnative.dev/docs/next/signed-apk-android\#enabling-proguard-to-reduce-the-size-of-the-apk-optional "Direct link to Enabling Proguard to reduce the size of the APK (optional)")

Proguard is a tool that can slightly reduce the size of the APK. It does this by stripping parts of the React Native Java bytecode (and its dependencies) that your app is not using.

Important

Make sure to thoroughly test your app if you've enabled Proguard. Proguard often requires configuration specific to each native library you're using. See `app/proguard-rules.pro`.

To enable Proguard, edit `android/app/build.gradle`:

```codeBlockLines_AclH
/**
* Run Proguard to shrink the Java bytecode in release builds.
*/
def enableProguardInReleaseBuilds = true

## Migrating old Android React Native apps to use App Signing by Google Play [​](https://reactnative.dev/docs/next/signed-apk-android\#migrating-old-android-react-native-apps-to-use-app-signing-by-google-play "Direct link to Migrating old Android React Native apps to use App Signing by Google Play")

If you are migrating from previous version of React Native chances are your app does not use App Signing by Google Play feature. We recommend you enable that in order to take advantage from things like automatic app splitting. In order to migrate from the old way of signing you need to start by [generating new upload key](https://reactnative.dev/docs/next/signed-apk-android#generating-an-upload-key) and then replacing release signing config in `android/app/build.gradle` to use the upload key instead of the release one (see section about [adding signing config to gradle](https://reactnative.dev/docs/next/signed-apk-android#adding-signing-config-to-your-apps-gradle-config)). Once that's done you should follow the [instructions from Google Play Help website](https://support.google.com/googleplay/android-developer/answer/7384423) in order to send your original release key to Google Play.

## Default Permissions [​](https://reactnative.dev/docs/next/signed-apk-android\#default-permissions "Direct link to Default Permissions")

By default, `INTERNET` permission is added to your Android app as pretty much all apps use it. `SYSTEM_ALERT_WINDOW` permission is added to your Android APK in debug mode but it will be removed in production.

Is this page useful?

- [Generating an upload key](https://reactnative.dev/docs/next/signed-apk-android#generating-an-upload-key)
- [Windows](https://reactnative.dev/docs/next/signed-apk-android#windows)
- [macOS](https://reactnative.dev/docs/next/signed-apk-android#macos)
- [Setting up Gradle variables](https://reactnative.dev/docs/next/signed-apk-android#setting-up-gradle-variables)
- [Adding signing config to your app's Gradle config](https://reactnative.dev/docs/next/signed-apk-android#adding-signing-config-to-your-apps-gradle-config)
- [Generating the release AAB](https://reactnative.dev/docs/next/signed-apk-android#generating-the-release-aab)
- [Testing the release build of your app](https://reactnative.dev/docs/next/signed-apk-android#testing-the-release-build-of-your-app)
- [Publishing to other stores](https://reactnative.dev/docs/next/signed-apk-android#publishing-to-other-stores)
- [Enabling Proguard to reduce the size of the APK (optional)](https://reactnative.dev/docs/next/signed-apk-android#enabling-proguard-to-reduce-the-size-of-the-apk-optional)
- [Migrating old Android React Native apps to use App Signing by Google Play](https://reactnative.dev/docs/next/signed-apk-android#migrating-old-android-react-native-apps-to-use-app-signing-by-google-play)
- [Default Permissions](https://reactnative.dev/docs/next/signed-apk-android#default-permissions)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/more-resources

[Skip to main content](https://reactnative.dev/docs/next/more-resources#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/more-resources)** (0.81).

Version: Next

On this page

There’s always more to learn: developer workflows, shipping to app stores, internationalization, security and more.

## Where to go from here [​](https://reactnative.dev/docs/next/more-resources\#where-to-go-from-here "Direct link to Where to go from here")

- [Set up your environment](https://reactnative.dev/docs/next/environment-setup)
- [Set up your development workflow](https://reactnative.dev/docs/next/running-on-device)
- [Design and layout your app](https://reactnative.dev/docs/next/flexbox)
- [Debug your app](https://reactnative.dev/docs/next/debugging)
- [Make your app cross platform](https://reactnative.dev/docs/next/platform-specific-code)
- [Get involved in the React Native community](https://reactnative.dev/community/overview)

## Dive deep [​](https://reactnative.dev/docs/next/more-resources\#dive-deep "Direct link to Dive deep")

- [React’s Documentation](https://react.dev/learn)
- [MDN’s JavaScript tutorials, reference, and guides](https://developer.mozilla.org/en-US/docs/Web/JavaScript)
- [Android](https://developer.android.com/docs) and [iOS](https://developer.apple.com/documentation/uikit) platform docs

## IDEs [​](https://reactnative.dev/docs/next/more-resources\#ides "Direct link to IDEs")

We recommend using the [VS Code](https://code.visualstudio.com/) code editor and its handy [React Native tools](https://marketplace.visualstudio.com/items?itemName=msjsdiag.vscode-react-native).

## Platforms to try [​](https://reactnative.dev/docs/next/more-resources\#platforms-to-try "Direct link to Platforms to try")

[Expo](https://docs.expo.dev/) is a framework of tools and services for React Native that focuses on helping you build, ship, and iterate on your app, to use preview deployment workflows that are popular with web development, and to automate your development workflows. Expo also makes it possible to build React Native apps without ever touching Xcode or Android Studio, and it doesn't get in the way if you want to use those tools.

[Ignite](https://github.com/infinitered/ignite) is a starter kit CLI with several React Native boilerplates. The latest, Ignite Maverick, uses MobX-State-Tree for state management, React Navigation, and other common libraries. It has generators for screens, models, and more, and supports Expo out of the box. Ignite also comes with a component library that is tuned for custom designs, theming support, and testing. If you are looking for a preconfigured tech stack, Ignite could be perfect for you.

## Example Apps [​](https://reactnative.dev/docs/next/more-resources\#example-apps "Direct link to Example Apps")

Try out apps from the [Showcase](https://reactnative.dev/showcase) to see what React Native is capable of! Looking for something more hands on? Check out this [set of example apps on GitHub](https://github.com/ReactNativeNews/React-Native-Apps). You can look at their source code—try running one on a simulator or device.

## Find, make, and share your own Native Components and TurboModules [​](https://reactnative.dev/docs/next/more-resources\#find-make-and-share-your-own-native-components-and-turbomodules "Direct link to Find, make, and share your own Native Components and TurboModules")

React Native has a community of thousands of developers like you making content, tools, tutorials—and Native Components!

Can’t find what you’re looking for in the Core Components? Visit [React Native Directory](https://reactnative.directory/) to find what the community has been creating.

caution

This documentation references a legacy set of API and needs to be updated to reflect the New Architecture

Interested in making your own Native Component or Module? Making modules for your own use case and sharing them with others on NPM and GitHub helps grow the React Native ecosystem and community! Read the guides to making your own Native Modules ( [Android](https://reactnative.dev/docs/next/legacy/native-modules-android), [iOS](https://reactnative.dev/docs/next/legacy/native-modules-ios)) and Native Components ( [Android](https://reactnative.dev/docs/next/legacy/native-components-android), [iOS](https://reactnative.dev/docs/next/legacy/native-components-ios)).

Is this page useful?

- [Where to go from here](https://reactnative.dev/docs/next/more-resources#where-to-go-from-here)
- [Dive deep](https://reactnative.dev/docs/next/more-resources#dive-deep)
- [IDEs](https://reactnative.dev/docs/next/more-resources#ides)
- [Platforms to try](https://reactnative.dev/docs/next/more-resources#platforms-to-try)
- [Example Apps](https://reactnative.dev/docs/next/more-resources#example-apps)
- [Find, make, and share your own Native Components and TurboModules](https://reactnative.dev/docs/next/more-resources#find-make-and-share-your-own-native-components-and-turbomodules)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/platform-specific-code

[Skip to main content](https://reactnative.dev/docs/next/platform-specific-code#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/platform-specific-code)** (0.81).

Version: Next

On this page

When building a cross-platform app, you'll want to re-use as much code as possible. Scenarios may arise where it makes sense for the code to be different, for example you may want to implement separate visual components for Android and iOS.

React Native provides two ways to organize your code and separate it by platform:

- Using the [`Platform` module](https://reactnative.dev/docs/next/platform-specific-code#platform-module).
- Using [platform-specific file extensions](https://reactnative.dev/docs/next/platform-specific-code#platform-specific-extensions).

Certain components may have properties that work on one platform only. All of these props are annotated with `@platform` and have a small badge next to them on the website.

## Platform module [​](https://reactnative.dev/docs/next/platform-specific-code\#platform-module "Direct link to Platform module")

React Native provides a module that detects the platform in which the app is running. You can use the detection logic to implement platform-specific code. Use this option when only small parts of a component are platform-specific.

tsx

```codeBlockLines_AclH
import {Platform, StyleSheet} from 'react-native';

const styles = StyleSheet.create({
height: Platform.OS === 'ios' ? 200 : 100,
});

`Platform.OS` will be `ios` when running on iOS and `android` when running on Android.

There is also a `Platform.select` method available that, given an object where keys can be one of `'ios' | 'android' | 'native' | 'default'`, returns the most fitting value for the platform you are currently running on. That is, if you're running on a phone, `ios` and `android` keys will take preference. If those are not specified, `native` key will be used and then the `default` key.

const styles = StyleSheet.create({
container: {
flex: 1,
...Platform.select({
ios: {
backgroundColor: 'red',
},
android: {
backgroundColor: 'green',
},
default: {
// other platforms, web for example
backgroundColor: 'blue',
},
}),
},
});

This will result in a container having `flex: 1` on all platforms, a red background color on iOS, a green background color on Android, and a blue background color on other platforms.

Since it accepts `any` value, you can also use it to return platform-specific components, like below:

```codeBlockLines_AclH
const Component = Platform.select({

})();

### Detecting the Android version Android [​](https://reactnative.dev/docs/next/platform-specific-code\#detecting-the-android-version-android "Direct link to detecting-the-android-version-android")

On Android, the `Platform` module can also be used to detect the version of the Android Platform in which the app is running:

```codeBlockLines_AclH
import {Platform} from 'react-native';

if (Platform.Version === 25) {
console.log('Running on Nougat!');
}

**Note**: `Version` is set to the Android API version not the Android OS version. To find a mapping please refer to [Android Version History](https://en.wikipedia.org/wiki/Android_version_history#Overview).

### Detecting the iOS version iOS [​](https://reactnative.dev/docs/next/platform-specific-code\#detecting-the-ios-version-ios "Direct link to detecting-the-ios-version-ios")

On iOS, the `Version` is a result of `-[UIDevice systemVersion]`, which is a string with the current version of the operating system. An example of the system version is "10.3". For example, to detect the major version number on iOS:

const majorVersionIOS = parseInt(Platform.Version, 10);
if (majorVersionIOS <= 9) {
console.log('Work around a change in behavior');
}

## Platform-specific extensions [​](https://reactnative.dev/docs/next/platform-specific-code\#platform-specific-extensions "Direct link to Platform-specific extensions")

When your platform-specific code is more complex, you should consider splitting the code out into separate files. React Native will detect when a file has a `.ios.` or `.android.` extension and load the relevant platform file when required from other components.

For example, say you have the following files in your project:

shell

```codeBlockLines_AclH
BigButton.ios.js
BigButton.android.js

You can then import the component as follows:

```codeBlockLines_AclH
import BigButton from './BigButton';

React Native will automatically pick up the right file based on the running platform.

## Native-specific extensions (i.e. sharing code with NodeJS and Web) [​](https://reactnative.dev/docs/next/platform-specific-code\#native-specific-extensions-ie-sharing-code-with-nodejs-and-web "Direct link to Native-specific extensions (i.e. sharing code with NodeJS and Web)")

You can also use the `.native.js` extension when a module needs to be shared between NodeJS/Web and React Native but it has no Android/iOS differences. This is especially useful for projects that have common code shared among React Native and ReactJS.

```codeBlockLines_AclH
Container.js # picked up by webpack, Rollup or any other Web bundler
Container.native.js # picked up by the React Native bundler for both Android and iOS (Metro)

You can still import it without the `.native` extension, as follows:

```codeBlockLines_AclH
import Container from './Container';

**Pro tip:** Configure your Web bundler to ignore `.native.js` extensions in order to avoid having unused code in your production bundle, thus reducing the final bundle size.

Is this page useful?

- [Platform module](https://reactnative.dev/docs/next/platform-specific-code#platform-module)
- [Detecting the Android version \\
Android](https://reactnative.dev/docs/next/platform-specific-code#detecting-the-android-version-android)
- [Detecting the iOS version \\
iOS](https://reactnative.dev/docs/next/platform-specific-code#detecting-the-ios-version-ios)
- [Platform-specific extensions](https://reactnative.dev/docs/next/platform-specific-code#platform-specific-extensions)
- [Native-specific extensions (i.e. sharing code with NodeJS and Web)](https://reactnative.dev/docs/next/platform-specific-code#native-specific-extensions-ie-sharing-code-with-nodejs-and-web)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/keyboardavoidingview

[Skip to main content](https://reactnative.dev/docs/next/keyboardavoidingview#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/keyboardavoidingview)** (0.81).

Version: Next

On this page

This component will automatically adjust its height, position, or bottom padding based on the keyboard height to remain visible while the virtual keyboard is displayed.

## Example [​](https://reactnative.dev/docs/next/keyboardavoidingview\#example "Direct link to Example")

KeyboardAvoidingView - Snack

# KeyboardAvoidingView

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {
View,
KeyboardAvoidingView,
TextInput,
StyleSheet,
Text,
Platform,
TouchableWithoutFeedback,
Button,
Keyboard,
} from 'react-native';

return (
<KeyboardAvoidingView
behavior={Platform.OS === 'ios' ? 'padding' : 'height'}

};

const styles = StyleSheet.create({
container: {
flex: 1,
},
inner: {
padding: 24,
flex: 1,
justifyContent: 'space-around',
},
header: {
fontSize: 36,
marginBottom: 48,
},
textInput: {
height: 40,
borderColor: '#000000',
borderBottomWidth: 1,
marginBottom: 36,
},
btnContainer: {
backgroundColor: 'white',
marginTop: 12,
},
});

export default KeyboardAvoidingComponent;

import React from 'react';
import {
View,
KeyboardAvoidingView,
TextInput,
StyleSheet,
Text,
Platform,
TouchableWithoutFeedback,
Button,
Keyboard,
} from 'react-native';

return (
<KeyboardAvoidingView
behavior={Platform.OS === 'ios' ? 'padding' : 'height'}

const styles = StyleSheet.create({
container: {
flex: 1,
},
inner: {
padding: 24,
flex: 1,
justifyContent: 'space-around',
},
header: {
fontSize: 36,
marginBottom: 48,
},
textInput: {
height: 40,
borderColor: '#000000',
borderBottomWidth: 1,
marginBottom: 36,
},
btnContainer: {
backgroundColor: 'white',
marginTop: 12,
},
});

### Download [Expo Go](https://expo.dev/client) and scan the QR code to get started.

exp://u.expo.dev/933fd9c0-1666-11e7-afca-d980795c5824?runtime-version=exposdk%3A53.0.0&channel-name=production&snack-channel=6GTgrN2wrK

### Connected devices

0

[Log in](https://expo.dev/login) to open this Snack from Expo Go on your device or simulator.

PreviewMy DeviceAndroidiOS

* * *

# Reference

## Props [​](https://reactnative.dev/docs/next/keyboardavoidingview\#props "Direct link to Props")

### [View Props](https://reactnative.dev/docs/next/view\#props) [​](https://reactnative.dev/docs/next/keyboardavoidingview\#view-props "Direct link to view-props")

Inherits [View Props](https://reactnative.dev/docs/next/view#props).

### `behavior` [​](https://reactnative.dev/docs/next/keyboardavoidingview\#behavior "Direct link to behavior")

Specify how to react to the presence of the keyboard.

note

Android and iOS both interact with this prop differently. On both iOS and Android, setting `behavior` is recommended.

| Type |
| --- |
| enum( `'height'`, `'position'`, `'padding'`) |

### `contentContainerStyle` [​](https://reactnative.dev/docs/next/keyboardavoidingview\#contentcontainerstyle "Direct link to contentcontainerstyle")

The style of the content container (View) when behavior is `'position'`.

| Type |
| --- |
| [View Style](https://reactnative.dev/docs/next/view-style-props) |

### `enabled` [​](https://reactnative.dev/docs/next/keyboardavoidingview\#enabled "Direct link to enabled")

Enabled or disabled KeyboardAvoidingView.

| Type | Default |
| --- | --- |
| boolean | `true` |

### `keyboardVerticalOffset` [​](https://reactnative.dev/docs/next/keyboardavoidingview\#keyboardverticaloffset "Direct link to keyboardverticaloffset")

This is the distance between the top of the user screen and the react native view, may be non-zero in some use cases.

| Type | Default |
| --- | --- |
| number | `0` |

Is this page useful?

- [Example](https://reactnative.dev/docs/next/keyboardavoidingview#example)
- [Props](https://reactnative.dev/docs/next/keyboardavoidingview#props)
- [View Props](https://reactnative.dev/docs/next/keyboardavoidingview#view-props)
- [`behavior`](https://reactnative.dev/docs/next/keyboardavoidingview#behavior)
- [`contentContainerStyle`](https://reactnative.dev/docs/next/keyboardavoidingview#contentcontainerstyle)
- [`enabled`](https://reactnative.dev/docs/next/keyboardavoidingview#enabled)
- [`keyboardVerticalOffset`](https://reactnative.dev/docs/next/keyboardavoidingview#keyboardverticaloffset)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/props

[Skip to main content](https://reactnative.dev/docs/next/props#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/props)** (0.81).

Version: Next

Most components can be customized when they are created, with different parameters. These created parameters are called `props`, short for properties.

For example, one basic React Native component is the `Image`. When you create an image, you can use a prop named `source` to control what image it shows.

Props - Snack

# Props

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {Image} from 'react-native';

let pic = {
uri: 'https://upload.wikimedia.org/wikipedia/commons/d/de/Bananavarieties.jpg',
};
return (

};

export default Bananas;

let pic = {
uri: 'https://upload.wikimedia.org/wikipedia/commons/d/de/Bananavarieties.jpg',
};
return (

Snack

Updating…

PreviewMy DeviceAndroidiOSWeb

Notice the braces surrounding `{pic}` \- these embed the variable `pic` into JSX. You can put any JavaScript expression inside braces in JSX.

Your own components can also use `props`. This lets you make a single component that is used in many different places in your app, with slightly different properties in each place by referring to `props` in your `render` function. Here's an example:

- TypeScript
- JavaScript

Using `name` as a prop lets us customize the `Greeting` component, so we can reuse that component for each of our greetings. This example also uses the `Greeting` component in JSX, similar to the [Core Components](https://reactnative.dev/docs/next/intro-react-native-components). The power to do this is what makes React so cool - if you find yourself wishing that you had a different set of UI primitives to work with, you can invent new ones.

The other new thing going on here is the [`View`](https://reactnative.dev/docs/next/view) component. A [`View`](https://reactnative.dev/docs/next/view) is useful as a container for other components, to help control style and layout.

With `props` and the basic [`Text`](https://reactnative.dev/docs/next/text), [`Image`](https://reactnative.dev/docs/next/image), and [`View`](https://reactnative.dev/docs/next/view) components, you can build a wide variety of static screens. To learn how to make your app change over time, you need to [learn about State](https://reactnative.dev/docs/next/state).

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/network

[Skip to main content](https://reactnative.dev/docs/next/network#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/network)** (0.81).

Version: Next

On this page

Many mobile apps need to load resources from a remote URL. You may want to make a POST request to a REST API, or you may need to fetch a chunk of static content from another server.

## Using Fetch [​](https://reactnative.dev/docs/next/network\#using-fetch "Direct link to Using Fetch")

React Native provides the [Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API) for your networking needs. Fetch will seem familiar if you have used `XMLHttpRequest` or other networking APIs before. You may refer to MDN's guide on [Using Fetch](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch) for additional information.

### Making requests [​](https://reactnative.dev/docs/next/network\#making-requests "Direct link to Making requests")

In order to fetch content from an arbitrary URL, you can pass the URL to fetch:

tsx

```codeBlockLines_AclH
fetch('https://mywebsite.com/mydata.json');

Fetch also takes an optional second argument that allows you to customize the HTTP request. You may want to specify additional headers, or make a POST request:

```codeBlockLines_AclH
fetch('https://mywebsite.com/endpoint/', {
method: 'POST',
headers: {
Accept: 'application/json',
'Content-Type': 'application/json',
},
body: JSON.stringify({
firstParam: 'yourValue',
secondParam: 'yourOtherValue',
}),
});

Take a look at the [Fetch Request docs](https://developer.mozilla.org/en-US/docs/Web/API/Request) for a full list of properties.

### Handling the response [​](https://reactnative.dev/docs/next/network\#handling-the-response "Direct link to Handling the response")

The above examples show how you can make a request. In many cases, you will want to do something with the response.

Networking is an inherently asynchronous operation. Fetch method will return a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise) that makes it straightforward to write code that works in an asynchronous manner:

```codeBlockLines_AclH

return fetch('https://reactnative.dev/movies.json')

return json.movies;
})

console.error(error);
});
};

You can also use the `async` / `await` syntax in a React Native app:

try {
const response = await fetch(
'https://reactnative.dev/movies.json',
);
const json = await response.json();
return json.movies;
} catch (error) {
console.error(error);
}
};

Don't forget to catch any errors that may be thrown by `fetch`, otherwise they will be dropped silently.

- TypeScript
- JavaScript

info

By default, iOS 9.0 or later enforce App Transport Security (ATS). ATS requires any HTTP connection to use HTTPS. If you need to fetch from a cleartext URL (one that begins with `http`) you will first need to [add an ATS exception](https://reactnative.dev/docs/next/integration-with-existing-apps#test-your-integration). If you know ahead of time what domains you will need access to, it is more secure to add exceptions only for those domains; if the domains are not known until runtime you can [disable ATS completely](https://reactnative.dev/docs/next/publishing-to-app-store#1-enable-app-transport-security). Note however that from January 2017, [Apple's App Store review will require reasonable justification for disabling ATS](https://forums.developer.apple.com/thread/48979). See [Apple's documentation](https://developer.apple.com/library/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW33) for more information.

tip

On Android, as of API Level 28, clear text traffic is also blocked by default. This behaviour can be overridden by setting [`android:usesCleartextTraffic`](https://developer.android.com/guide/topics/manifest/application-element#usesCleartextTraffic) in the app manifest file.

## Using Other Networking Libraries [​](https://reactnative.dev/docs/next/network\#using-other-networking-libraries "Direct link to Using Other Networking Libraries")

The [XMLHttpRequest API](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest) is built into React Native. This means that you can use third party libraries such as [frisbee](https://github.com/niftylettuce/frisbee) or [axios](https://github.com/axios/axios) that depend on it, or you can use the XMLHttpRequest API directly if you prefer.

```codeBlockLines_AclH
const request = new XMLHttpRequest();

if (request.readyState !== 4) {
return;
}

if (request.status === 200) {
console.log('success', request.responseText);
} else {
console.warn('error');
}
};

request.open('GET', 'https://mywebsite.com/endpoint/');
request.send();

Caution

The security model for XMLHttpRequest is different than on web as there is no concept of [CORS](https://en.wikipedia.org/wiki/Cross-origin_resource_sharing) in native apps.

## WebSocket Support [​](https://reactnative.dev/docs/next/network\#websocket-support "Direct link to WebSocket Support")

React Native also supports [WebSockets](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket), a protocol which provides full-duplex communication channels over a single TCP connection.

```codeBlockLines_AclH
const ws = new WebSocket('ws://host.com/path');

// connection opened
ws.send('something'); // send a message
};

// a message was received
console.log(e.data);
};

// an error occurred
console.log(e.message);
};

// connection closed
console.log(e.code, e.reason);
};

## Known Issues with `fetch` and cookie based authentication [​](https://reactnative.dev/docs/next/network\#known-issues-with-fetch-and-cookie-based-authentication "Direct link to known-issues-with-fetch-and-cookie-based-authentication")

The following options are currently not working with `fetch`

- `redirect:manual`
- `credentials:omit`

- Having same name headers on Android will result in only the latest one being present. A temporary solution can be found here: [https://github.com/facebook/react-native/issues/18837#issuecomment-398779994](https://github.com/facebook/react-native/issues/18837#issuecomment-398779994).
- Cookie based authentication is currently unstable. You can view some of the issues raised here: [https://github.com/facebook/react-native/issues/23185](https://github.com/facebook/react-native/issues/23185)
- As a minimum on iOS, when redirected through a `302`, if a `Set-Cookie` header is present, the cookie is not set properly. Since the redirect cannot be handled manually this might cause a scenario where infinite requests occur if the redirect is the result of an expired session.

## Configuring NSURLSession on iOS [​](https://reactnative.dev/docs/next/network\#configuring-nsurlsession-on-ios "Direct link to Configuring NSURLSession on iOS")

For some applications it may be appropriate to provide a custom `NSURLSessionConfiguration` for the underlying `NSURLSession` that is used for network requests in a React Native application running on iOS. For instance, one may need to set a custom user agent string for all network requests coming from the app or supply `NSURLSession` with an ephemeral `NSURLSessionConfiguration`. The function `RCTSetCustomNSURLSessionConfigurationProvider` allows for such customization. Remember to add the following import to the file in which `RCTSetCustomNSURLSessionConfigurationProvider` will be called:

objectivec

`RCTSetCustomNSURLSessionConfigurationProvider` should be called early in the application life cycle such that it is readily available when needed by React, for instance:

```codeBlockLines_AclH
-(void)application:(__unused UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

// set RCTSetCustomNSURLSessionConfigurationProvider
RCTSetCustomNSURLSessionConfigurationProvider(^NSURLSessionConfiguration *{
NSURLSessionConfiguration *configuration = [NSURLSessionConfiguration defaultSessionConfiguration];
// configure the session
return configuration;
});

// set up React
_bridge = [[RCTBridge alloc] initWithDelegate:self launchOptions:launchOptions];
}

Is this page useful?

- [Using Fetch](https://reactnative.dev/docs/next/network#using-fetch)
- [Making requests](https://reactnative.dev/docs/next/network#making-requests)
- [Handling the response](https://reactnative.dev/docs/next/network#handling-the-response)
- [Using Other Networking Libraries](https://reactnative.dev/docs/next/network#using-other-networking-libraries)
- [WebSocket Support](https://reactnative.dev/docs/next/network#websocket-support)
- [Known Issues with `fetch` and cookie based authentication](https://reactnative.dev/docs/next/network#known-issues-with-fetch-and-cookie-based-authentication)
- [Configuring NSURLSession on iOS](https://reactnative.dev/docs/next/network#configuring-nsurlsession-on-ios)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/linking

[Skip to main content](https://reactnative.dev/docs/next/linking#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/linking)** (0.81).

Version: Next

On this page

`Linking` gives you a general interface to interact with both incoming and outgoing app links.

Every Link (URL) has a URL Scheme, some websites are prefixed with `https://` or `http://` and the `http` is the URL Scheme. Let's call it scheme for short.

In addition to `https`, you're likely also familiar with the `mailto` scheme. When you open a link with the mailto scheme, your operating system will open an installed mail application. Similarly, there are schemes for making phone calls and sending SMS. Read more about [built-in URL](https://reactnative.dev/docs/next/linking#built-in-url-schemes) schemes below.

Like using the mailto scheme, it's possible to link to other applications by using custom url schemes. For example, when you get a **Magic Link** email from Slack, the **Launch Slack** button is an anchor tag with an href that looks something like: `slack://secret/magic-login/other-secret`. Like with Slack, you can tell the operating system that you want to handle a custom scheme. When the Slack app opens, it receives the URL that was used to open it. This is often referred to as deep linking. Read more about how to [get the deep link](https://reactnative.dev/docs/next/linking#get-the-deep-link) into your app.

A custom URL scheme isn't the only way to open your application on mobile. For example, if you want to email someone a link to be opened on mobile, using a custom URL scheme isn't ideal because the user might open the email on a desktop, where the link wouldn't work. Instead, you should use standard `https` links, such as `https://www.myapp.io/records/1234546`. On mobile, these links can be configured to open your app. On Android, this feature is called **Deep Links**, while on iOS, it is known as **Universal Links**.

### Built-in URL Schemes [​](https://reactnative.dev/docs/next/linking\#built-in-url-schemes "Direct link to Built-in URL Schemes")

As mentioned in the introduction, there are some URL schemes for core functionality that exist on every platform. The following is a non-exhaustive list, but covers the most commonly used schemes.

| Scheme | Description | iOS | Android |
| --- | --- | --- | --- |
| `mailto` | Open mail app, eg: mailto: [hello@world.dev](mailto:hello@world.dev) | ✅ | ✅ |
| `tel` | Open phone app, eg: tel:+123456789 | ✅ | ✅ |
| `sms` | Open SMS app, eg: sms:+123456789 | ✅ | ✅ |
| `https` / `http` | Open web browser app, eg: [https://expo.dev](https://expo.dev/) | ✅ | ✅ |

### Projects with Native Code Only

The following section only applies to projects with native code exposed. If you are using the managed Expo workflow, see the guide on [Linking](https://docs.expo.dev/guides/linking/) in the Expo documentation for the appropriate alternative.

If you want to enable deep links in your app, please read the below guide:

- Android
- iOS

info

For instructions on how to add support for deep linking on Android, refer to [Enabling Deep Links for App Content - Add Intent Filters for Your Deep Links](https://developer.android.com/training/app-indexing/deep-linking.html#adding-filters).

xml

```codeBlockLines_AclH
<activity
android:name=".MainActivity"

note

On iOS, you'll need to add the `LinkingIOS` folder into your header search paths as described in step 3 [here](https://reactnative.dev/docs/next/linking-libraries-ios#step-3). If you also want to listen to incoming app links during your app's execution, you'll need to add the following lines to your `*AppDelegate.m`:

- ObjectiveC
- Swift

AppDelegate.mm

```codeBlockLines_AclH
// iOS 9.x or newer

openURL:(NSURL *)url

{
return [RCTLinkingManager application:application openURL:url options:options];
}

If your app is using [Universal Links](https://developer.apple.com/ios/universal-links/), you'll need to add the following code as well:

```codeBlockLines_AclH
- (BOOL)application:(UIApplication *)application continueUserActivity:(nonnull NSUserActivity *)userActivity
restorationHandler:(nonnull void (^)(NSArray<id<UIUserActivityRestoring>> * _Nullable))restorationHandler
{
return [RCTLinkingManager application:application\
continueUserActivity:userActivity\
restorationHandler:restorationHandler];
}

AppDelegate.swift

```codeBlockLines_AclH

return RCTLinkingManager.application(app, open: url, options: options)
}

```codeBlockLines_AclH
override func application(
_ application: UIApplication,
continue userActivity: NSUserActivity,

return RCTLinkingManager.application(
application,
continue: userActivity,
restorationHandler: restorationHandler
)
}

### Handling Deep Links [​](https://reactnative.dev/docs/next/linking\#handling-deep-links "Direct link to Handling Deep Links")

There are two ways to handle URLs that open your app.

#### 1\. If the app is already open, the app is foregrounded and a Linking 'url' event is fired [​](https://reactnative.dev/docs/next/linking\#1-if-the-app-is-already-open-the-app-is-foregrounded-and-a-linking-url-event-is-fired "Direct link to 1. If the app is already open, the app is foregrounded and a Linking 'url' event is fired")

You can handle these events with `Linking.addEventListener('url', callback)` \- it calls `callback({url})` with the linked URL

#### 2\. If the app is not already open, it is opened and the url is passed in as the initialURL [​](https://reactnative.dev/docs/next/linking\#2-if-the-app-is-not-already-open-it-is-opened-and-the-url-is-passed-in-as-the-initialurl "Direct link to 2. If the app is not already open, it is opened and the url is passed in as the initialURL")

You can handle these events with `Linking.getInitialURL()` \- it returns a Promise that resolves to the URL, if there is one.

* * *

## Example [​](https://reactnative.dev/docs/next/linking\#example "Direct link to Example")

### Open Links and Deep Links (Universal Links) [​](https://reactnative.dev/docs/next/linking\#open-links-and-deep-links-universal-links "Direct link to Open Links and Deep Links (Universal Links)")

- TypeScript
- JavaScript

### Open Custom Settings [​](https://reactnative.dev/docs/next/linking\#open-custom-settings "Direct link to Open Custom Settings")

### Get the Deep Link [​](https://reactnative.dev/docs/next/linking\#get-the-deep-link "Direct link to Get the Deep Link")

### Send Intents (Android) [​](https://reactnative.dev/docs/next/linking\#send-intents-android "Direct link to Send Intents (Android)")

# Reference

## Methods [​](https://reactnative.dev/docs/next/linking\#methods "Direct link to Methods")

### `addEventListener()` [​](https://reactnative.dev/docs/next/linking\#addeventlistener "Direct link to addeventlistener")

tsx

```codeBlockLines_AclH
static addEventListener(
type: 'url',

): EmitterSubscription;

Add a handler to Linking changes by listening to the `url` event type and providing the handler.

### `canOpenURL()` [​](https://reactnative.dev/docs/next/linking\#canopenurl "Direct link to canopenurl")

Determine whether or not an installed app can handle a given URL.

The method returns a `Promise` object. When it is determined whether or not the given URL can be handled, the promise is resolved and the first parameter is whether or not it can be opened.

The `Promise` will reject on Android if it was impossible to check if the URL can be opened or when targeting Android 11 (SDK 30) if you didn't specify the relevant intent queries in `AndroidManifest.xml`. Similarly on iOS, the promise will reject if you didn't add the specific scheme in the `LSApplicationQueriesSchemes` key inside `Info.plist` (see bellow).

**Parameters:**

| Name | Type | Description |
| --- | --- | --- |

For web URLs, the protocol ( `"http://"`, `"https://"`) must be set accordingly!

warning

This method has limitations on . From [the official Apple documentation](https://developer.apple.com/documentation/uikit/uiapplication/1622952-canopenurl):

- If your app is linked against an earlier version of iOS but is running in iOS 9.0 or later, you can call this method up to 50 times. After reaching that limit, subsequent calls always resolve to `false`. If the user reinstalls or upgrades the app, iOS resets the limit.
- As of iOS 9, your app also needs to provide the `LSApplicationQueriesSchemes` key inside `Info.plist` or `canOpenURL()` will always resolve to `false`.

When targeting Android 11 (SDK 30) you must specify the intents for the schemes you want to handle in `AndroidManifest.xml`. A list of common intents can be found [here](https://developer.android.com/guide/components/intents-common).

For example to handle `https` schemes the following needs to be added to your manifest:

### `getInitialURL()` [​](https://reactnative.dev/docs/next/linking\#getinitialurl "Direct link to getinitialurl")

If the app launch was triggered by an app link, it will give the link url, otherwise it will give `null`.

To support deep linking on Android, refer [https://developer.android.com/training/app-indexing/deep-linking.html#handling-intents](https://developer.android.com/training/app-indexing/deep-linking.html#handling-intents).

tip

`getInitialURL` may return `null` when Remote JS Debugging is active. Disable the debugger to ensure it gets passed.

### `openSettings()` [​](https://reactnative.dev/docs/next/linking\#opensettings "Direct link to opensettings")

Open the Settings app and displays the app’s custom settings, if it has any.

### `openURL()` [​](https://reactnative.dev/docs/next/linking\#openurl "Direct link to openurl")

Try to open the given `url` with any of the installed apps.

You can use other URLs, like a location (e.g. "geo:37.484847,-122.148386" on Android or " [https://maps.apple.com/?ll=37.484847,-122.148386](https://maps.apple.com/?ll=37.484847,-122.148386)" on iOS), a contact, or any other URL that can be opened with the installed apps.

The method returns a `Promise` object. If the user confirms the open dialog or the url automatically opens, the promise is resolved. If the user cancels the open dialog or there are no registered applications for the url, the promise is rejected.

This method will fail if the system doesn't know how to open the specified URL. If you're passing in a non-http(s) URL, it's best to check `canOpenURL()` first. For web URLs, the protocol ( `"http://"`, `"https://"`) must be set accordingly!

This method may behave differently in a simulator e.g. `"tel:"` links are not able to be handled in the iOS simulator as there's no access to the dialer app.

### `sendIntent()` Android [​](https://reactnative.dev/docs/next/linking\#sendintent-android "Direct link to sendintent-android")

```codeBlockLines_AclH
static sendIntent(
action: string,

Launch an Android intent with extras.

| Name | Type |
| --- | --- |

Is this page useful?

- [Built-in URL Schemes](https://reactnative.dev/docs/next/linking#built-in-url-schemes)
- [Enabling Deep Links](https://reactnative.dev/docs/next/linking#enabling-deep-links)
- [Handling Deep Links](https://reactnative.dev/docs/next/linking#handling-deep-links)
- [Example](https://reactnative.dev/docs/next/linking#example)
- [Open Links and Deep Links (Universal Links)](https://reactnative.dev/docs/next/linking#open-links-and-deep-links-universal-links)
- [Open Custom Settings](https://reactnative.dev/docs/next/linking#open-custom-settings)
- [Get the Deep Link](https://reactnative.dev/docs/next/linking#get-the-deep-link)
- [Send Intents (Android)](https://reactnative.dev/docs/next/linking#send-intents-android)
- [Methods](https://reactnative.dev/docs/next/linking#methods)
- [`addEventListener()`](https://reactnative.dev/docs/next/linking#addeventlistener)
- [`canOpenURL()`](https://reactnative.dev/docs/next/linking#canopenurl)
- [`getInitialURL()`](https://reactnative.dev/docs/next/linking#getinitialurl)
- [`openSettings()`](https://reactnative.dev/docs/next/linking#opensettings)
- [`openURL()`](https://reactnative.dev/docs/next/linking#openurl)
- [`sendIntent()` \\
Android](https://reactnative.dev/docs/next/linking#sendintent-android)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/the-new-architecture/direct-manipulation-new-architecture

[Skip to main content](https://reactnative.dev/docs/next/the-new-architecture/direct-manipulation-new-architecture#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/the-new-architecture/direct-manipulation-new-architecture)** (0.81).

Version: Next

On this page

It is sometimes necessary to make changes directly to a component without using state/props to trigger a re-render of the entire subtree. When using React in the browser for example, you sometimes need to directly modify a DOM node, and the same is true for views in mobile apps. `setNativeProps` is the React Native equivalent to setting properties directly on a DOM node.

caution

Use `setNativeProps` when frequent re-rendering creates a performance bottleneck!

Direct manipulation will not be a tool that you reach for frequently. You will typically only be using it for creating continuous animations to avoid the overhead of rendering the component hierarchy and reconciling many views.
`setNativeProps` is imperative and stores state in the native layer (DOM, UIView, etc.) and not within your React components, which makes your code more difficult to reason about.

Before you use it, try to solve your problem with `setState` and [`shouldComponentUpdate`](https://react.dev/reference/react/Component#shouldcomponentupdate).

## setNativeProps to edit TextInput value [​](https://reactnative.dev/docs/next/the-new-architecture/direct-manipulation-new-architecture\#setnativeprops-to-edit-textinput-value "Direct link to setNativeProps to edit TextInput value")

Another very common use case of `setNativeProps` is to edit the value of the TextInput. The `controlled` prop of TextInput can sometimes drop characters when the `bufferDelay` is low and the user types very quickly. Some developers prefer to skip this prop entirely and instead use `setNativeProps` to directly manipulate the TextInput value when necessary.

For example, the following code demonstrates editing the input when you tap a button:

- TypeScript
- JavaScript

You can use the [`clear`](https://reactnative.dev/docs/next/textinput#clear) method to clear the `TextInput` which clears the current input text using the same approach.

## Avoiding conflicts with the render function [​](https://reactnative.dev/docs/next/the-new-architecture/direct-manipulation-new-architecture\#avoiding-conflicts-with-the-render-function "Direct link to Avoiding conflicts with the render function")

If you update a property that is also managed by the render function, you might end up with some unpredictable and confusing bugs because anytime the component re-renders and that property changes, whatever value was previously set from `setNativeProps` will be completely ignored and overridden.

Is this page useful?

- [setNativeProps to edit TextInput value](https://reactnative.dev/docs/next/the-new-architecture/direct-manipulation-new-architecture#setnativeprops-to-edit-textinput-value)
- [Avoiding conflicts with the render function](https://reactnative.dev/docs/next/the-new-architecture/direct-manipulation-new-architecture#avoiding-conflicts-with-the-render-function)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/react-native-gradle-plugin

[Skip to main content](https://reactnative.dev/docs/next/react-native-gradle-plugin#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/react-native-gradle-plugin)** (0.81).

Version: Next

On this page

This guide describes how to configure the **React Native Gradle Plugin** (often referred as RNGP), when building your React Native application for Android.

## Using the plugin [​](https://reactnative.dev/docs/next/react-native-gradle-plugin\#using-the-plugin "Direct link to Using the plugin")

The React Native Gradle Plugin is distributed as a separate NPM package which is installed automatically with `react-native`.

The plugin is **already configured** for new projects created using `npx react-native init`. You don't need to do any extra steps to install it if you created your app with this command.

If you're integrating React Native into an existing project, please refer to [the corresponding page](https://reactnative.dev/docs/next/integration-with-existing-apps#configuring-gradle): it contains specific instructions on how to install the plugin.

## Configuring the plugin [​](https://reactnative.dev/docs/next/react-native-gradle-plugin\#configuring-the-plugin "Direct link to Configuring the plugin")

By default, the plugin will work **out of the box** with sensible defaults. You should refer to this guide and customize the behavior only if you need it.

To configure the plugin you can modify the `react` block, inside your `android/app/build.gradle`:

groovy

```codeBlockLines_AclH
apply plugin: "com.facebook.react"

/**
* This is the configuration block to customize your React Native Android app.
* By default you don't need to apply any configuration, just uncomment the lines you need.
*/
react {
// Custom configuration goes here.
}

Each configuration key is described below:

### `root` [​](https://reactnative.dev/docs/next/react-native-gradle-plugin\#root "Direct link to root")

This is the root folder of your React Native project, i.e. where the `package.json` file lives. Default is `..`. You can customize it as follows:

```codeBlockLines_AclH
root = file("../")

### `reactNativeDir` [​](https://reactnative.dev/docs/next/react-native-gradle-plugin\#reactnativedir "Direct link to reactnativedir")

This is the folder where the `react-native` package lives. Default is `../node_modules/react-native`.
If you're in a monorepo or using a different package manager, you can use adjust `reactNativeDir` to your setup.

You can customize it as follows:

```codeBlockLines_AclH
reactNativeDir = file("../node_modules/react-native")

### `codegenDir` [​](https://reactnative.dev/docs/next/react-native-gradle-plugin\#codegendir "Direct link to codegendir")

This is the folder where the `react-native-codegen` package lives. Default is `../node_modules/react-native-codegen`.
If you're in a monorepo or using a different package manager, you can adjust `codegenDir` to your setup.

```codeBlockLines_AclH
codegenDir = file("../node_modules/@react-native/codegen")

### `cliFile` [​](https://reactnative.dev/docs/next/react-native-gradle-plugin\#clifile "Direct link to clifile")

This is the entrypoint file for the React Native CLI. Default is `../node_modules/react-native/cli.js`.
The entrypoint file is needed as the plugin needs to invoke the CLI for bundling and creating your app.

If you're in a monorepo or using a different package manager, you can adjust `cliFile` to your setup.
You can customize it as follows:

```codeBlockLines_AclH
cliFile = file("../node_modules/react-native/cli.js")

### `debuggableVariants` [​](https://reactnative.dev/docs/next/react-native-gradle-plugin\#debuggablevariants "Direct link to debuggablevariants")

This is the list of variants that are debuggable (see [using variants](https://reactnative.dev/docs/next/react-native-gradle-plugin#using-variants) for more context on variants).

By default the plugin is considering as `debuggableVariants` only `debug`, while `release` is not. If you have other
variants (like `staging`, `lite`, etc.) you'll need to adjust this accordingly.

Variants that are listed as `debuggableVariants` will not come with a shipped bundle, so you'll need Metro to run them.

```codeBlockLines_AclH
debuggableVariants = ["liteDebug", "prodDebug"]

### `nodeExecutableAndArgs` [​](https://reactnative.dev/docs/next/react-native-gradle-plugin\#nodeexecutableandargs "Direct link to nodeexecutableandargs")

This is the list of node command and arguments that should be invoked for all the scripts. By default is `[node]` but can be customized to add extra flags as follows:

```codeBlockLines_AclH
nodeExecutableAndArgs = ["node"]

### `bundleCommand` [​](https://reactnative.dev/docs/next/react-native-gradle-plugin\#bundlecommand "Direct link to bundlecommand")

This is the name of the `bundle` command to be invoked when creating the bundle for your app. That's useful if you're using [RAM Bundles](https://reactnative.dev/docs/0.74/ram-bundles-inline-requires). By default is `bundle` but can be customized to add extra flags as follows:

```codeBlockLines_AclH
bundleCommand = "ram-bundle"

### `bundleConfig` [​](https://reactnative.dev/docs/next/react-native-gradle-plugin\#bundleconfig "Direct link to bundleconfig")

```codeBlockLines_AclH
bundleConfig = file(../rn-cli.config.js)

### `bundleAssetName` [​](https://reactnative.dev/docs/next/react-native-gradle-plugin\#bundleassetname "Direct link to bundleassetname")

This is the name of the bundle file that should be generated. Default is `index.android.bundle`. Can be customized as follow:

```codeBlockLines_AclH
bundleAssetName = "MyApplication.android.bundle"

### `entryFile` [​](https://reactnative.dev/docs/next/react-native-gradle-plugin\#entryfile "Direct link to entryfile")

The entry file used for bundle generation. The default is to search for `index.android.js` or `index.js`. Can be customized as follow:

```codeBlockLines_AclH
entryFile = file("../js/MyApplication.android.js")

### `extraPackagerArgs` [​](https://reactnative.dev/docs/next/react-native-gradle-plugin\#extrapackagerargs "Direct link to extrapackagerargs")

A list of extra flags that will be passed to the `bundle` command. The list of available flags is in [the CLI documentation](https://github.com/react-native-community/cli/blob/main/docs/commands.md#bundle). Default is empty. Can be customized as follows:

```codeBlockLines_AclH
extraPackagerArgs = []

### `hermesCommand` [​](https://reactnative.dev/docs/next/react-native-gradle-plugin\#hermescommand "Direct link to hermescommand")

The path to the `hermesc` command (the Hermes Compiler). React Native comes with a version of the Hermes compiler bundled with it, so you generally won't be needing to customize this. The plugin will use the correct compiler for your system by default.

### `hermesFlags` [​](https://reactnative.dev/docs/next/react-native-gradle-plugin\#hermesflags "Direct link to hermesflags")

The list of flags to pass to `hermesc`. By default is `["-O", "-output-source-map"]`. You can customize it as follows

```codeBlockLines_AclH
hermesFlags = ["-O", "-output-source-map"]

### `enableBundleCompression` [​](https://reactnative.dev/docs/next/react-native-gradle-plugin\#enablebundlecompression "Direct link to enablebundlecompression")

Whether the Bundle Asset should be compressed when packaged into a `.apk`, or not.

Disabling compression for the `.bundle` allows it to be directly memory-mapped to RAM, hence improving startup time - at the cost of a larger resulting app size on disk. Please note that the `.apk` download size will be mostly unaffected as the `.apk` files are compressed before downloading

By default this is disabled, and you should not turn it on, unless you're really concerned about disk space for your application.

## Using Flavors & Build Variants [​](https://reactnative.dev/docs/next/react-native-gradle-plugin\#using-flavors--build-variants "Direct link to Using Flavors & Build Variants")

When building Android apps, you might want to use [custom flavors](https://developer.android.com/studio/build/build-variants#product-flavors) to have different versions of your app starting from the same project.

Please refer to the [official Android guide](https://developer.android.com/studio/build/build-variants) to configure custom build types (like `staging`) or custom flavors (like `full`, `lite`, etc.).
By default new apps are created with two build types ( `debug` and `release`) and no custom flavors.

The combination of all the build types and all the flavors generates a set of **build variants**. For instance for `debug`/ `staging`/ `release` build types and `full`/ `lite` you will have 6 build variants: `fullDebug`, `fullStaging`, `fullRelease` and so on.

If you're using custom variants beyond `debug` and `release`, you need to instruct the React Native Gradle Plugin specifying which of your variants are **debuggable** using the [`debuggableVariants`](https://reactnative.dev/docs/next/react-native-gradle-plugin#debuggablevariants) configuration as follows:

diff

react {
+ debuggableVariants = ["fullStaging", "fullDebug"]
}

This is necessary because the plugin will skip the JS bundling for all the `debuggableVariants`: you'll need Metro to run them. For example, if you list `fullStaging` in the `debuggableVariants`, you won't be able to publish it to a store as it will be missing the bundle.

## What is the plugin doing under the hood? [​](https://reactnative.dev/docs/next/react-native-gradle-plugin\#what-is-the-plugin-doing-under-the-hood "Direct link to What is the plugin doing under the hood?")

The React Native Gradle Plugin is responsible for configuring your Application build to ship React Native applications to production.
The plugin is also used inside 3rd party libraries, to run the [Codegen](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/codegen.md) used for the New Architecture.

Here is a summary of the plugin responsibilities:

- Setting up the proper version of the `com.facebook.react:react-android` and `com.facebook.react:hermes-android` dependency, reading the React Native version from the `package.json` of `react-native`.
- Setting up the proper Maven repositories (Maven Central, Google Maven Repo, JSC local Maven repo, etc.) needed to consume all the necessary Maven Dependencies.
- Setting up the NDK to let you build apps that are using the New Architecture.
- Setting up the `buildConfigFields` so that you can know at runtime if Hermes or the New Architecture are enabled.
- Setting up the Metro DevServer Port as an Android resource so the app knows on which port to connect.
- Invoking the [React Native Codegen](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/codegen.md) if a library or app is using the Codegen for the New Architecture.

Is this page useful?

- [Using the plugin](https://reactnative.dev/docs/next/react-native-gradle-plugin#using-the-plugin)
- [Configuring the plugin](https://reactnative.dev/docs/next/react-native-gradle-plugin#configuring-the-plugin)
- [`root`](https://reactnative.dev/docs/next/react-native-gradle-plugin#root)
- [`reactNativeDir`](https://reactnative.dev/docs/next/react-native-gradle-plugin#reactnativedir)
- [`codegenDir`](https://reactnative.dev/docs/next/react-native-gradle-plugin#codegendir)
- [`cliFile`](https://reactnative.dev/docs/next/react-native-gradle-plugin#clifile)
- [`debuggableVariants`](https://reactnative.dev/docs/next/react-native-gradle-plugin#debuggablevariants)
- [`nodeExecutableAndArgs`](https://reactnative.dev/docs/next/react-native-gradle-plugin#nodeexecutableandargs)
- [`bundleCommand`](https://reactnative.dev/docs/next/react-native-gradle-plugin#bundlecommand)
- [`bundleConfig`](https://reactnative.dev/docs/next/react-native-gradle-plugin#bundleconfig)
- [`bundleAssetName`](https://reactnative.dev/docs/next/react-native-gradle-plugin#bundleassetname)
- [`entryFile`](https://reactnative.dev/docs/next/react-native-gradle-plugin#entryfile)
- [`extraPackagerArgs`](https://reactnative.dev/docs/next/react-native-gradle-plugin#extrapackagerargs)
- [`hermesCommand`](https://reactnative.dev/docs/next/react-native-gradle-plugin#hermescommand)
- [`hermesFlags`](https://reactnative.dev/docs/next/react-native-gradle-plugin#hermesflags)
- [`enableBundleCompression`](https://reactnative.dev/docs/next/react-native-gradle-plugin#enablebundlecompression)
- [Using Flavors & Build Variants](https://reactnative.dev/docs/next/react-native-gradle-plugin#using-flavors--build-variants)
- [What is the plugin doing under the hood?](https://reactnative.dev/docs/next/react-native-gradle-plugin#what-is-the-plugin-doing-under-the-hood)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/platform

[Skip to main content](https://reactnative.dev/docs/next/platform#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/platform)** (0.81).

Version: Next

On this page

## Example [​](https://reactnative.dev/docs/next/platform\#example "Direct link to Example")

Platform API Example - Snack

# Platform API Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {Platform, StyleSheet, Text, ScrollView} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

return (

};

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
alignItems: 'center',
},
value: {
fontWeight: '600',
padding: 4,
marginBottom: 8,
},
});

export default App;

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
alignItems: 'center',
},
value: {
fontWeight: '600',
padding: 4,
marginBottom: 8,
},
});

### Download [Expo Go](https://expo.dev/client) and scan the QR code to get started.

exp://u.expo.dev/933fd9c0-1666-11e7-afca-d980795c5824?runtime-version=exposdk%3A53.0.0&channel-name=production&snack-channel=DhUDcmXN0H

### Connected devices

0

[Log in](https://expo.dev/login) to open this Snack from Expo Go on your device or simulator.

PreviewMy DeviceAndroidiOS

* * *

# Reference

## Properties [​](https://reactnative.dev/docs/next/platform\#properties "Direct link to Properties")

### `constants` [​](https://reactnative.dev/docs/next/platform\#constants "Direct link to constants")

tsx

```codeBlockLines_AclH
static constants: PlatformConstants;

Returns an object which contains all available common and specific constants related to the platform.

**Properties:**

| Name | Type | Optional | Description |
| --- | --- | --- | --- |
| isTesting | boolean | No | |
| reactNativeVersion | object | No | Information about React Native version. Keys are `major`, `minor`, `patch` with optional `prerelease` and values are `number` s. |

### `isPad` iOS [​](https://reactnative.dev/docs/next/platform\#ispad-ios "Direct link to ispad-ios")

```codeBlockLines_AclH
static isPad: boolean;

Returns a boolean which defines if device is an iPad.

| Type |
| --- |
| boolean |

### `isTV` [​](https://reactnative.dev/docs/next/platform\#istv "Direct link to istv")

```codeBlockLines_AclH
static isTV: boolean;

Returns a boolean which defines if device is a TV.

### `isVision` [​](https://reactnative.dev/docs/next/platform\#isvision "Direct link to isvision")

```codeBlockLines_AclH
static isVision: boolean;

Returns a boolean which defines if device is an Apple Vision. _If you are using [Apple Vision Pro (Designed for iPad)](https://developer.apple.com/documentation/visionos/determining-whether-to-bring-your-app-to-visionos) `isVision` will be `false` but `isPad` will be `true`_

### `isTesting` [​](https://reactnative.dev/docs/next/platform\#istesting "Direct link to istesting")

```codeBlockLines_AclH
static isTesting: boolean;

Returns a boolean which defines if application is running in Developer Mode with testing flag set.

### `OS` [​](https://reactnative.dev/docs/next/platform\#os "Direct link to os")

```codeBlockLines_AclH
static OS: 'android' | 'ios';

Returns string value representing the current OS.

| Type |
| --- |
| enum( `'android'`, `'ios'`) |

### `Version` [​](https://reactnative.dev/docs/next/platform\#version "Direct link to version")

```codeBlockLines_AclH
static Version: 'number' | 'string';

Returns the version of the OS.

| Type |
| --- |

## Methods [​](https://reactnative.dev/docs/next/platform\#methods "Direct link to Methods")

### `select()` [​](https://reactnative.dev/docs/next/platform\#select "Direct link to select")

```codeBlockLines_AclH

Returns the most fitting value for the platform you are currently running on.

#### Parameters: [​](https://reactnative.dev/docs/next/platform\#parameters "Direct link to Parameters:")

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| config | object | Yes | See config description below. |

Select method returns the most fitting value for the platform you are currently running on. That is, if you're running on a phone, `android` and `ios` keys will take preference. If those are not specified, `native` key will be used and then the `default` key.

The `config` parameter is an object with the following keys:

- `android` (any)
- `ios` (any)
- `native` (any)
- `default` (any)

**Example usage:**

```codeBlockLines_AclH
import {Platform, StyleSheet} from 'react-native';

const styles = StyleSheet.create({
container: {
flex: 1,
...Platform.select({
android: {
backgroundColor: 'green',
},
ios: {
backgroundColor: 'red',
},
default: {
// other platforms, web for example
backgroundColor: 'blue',
},
}),
},
});

This will result in a container having `flex: 1` on all platforms, a green background color on Android, a red background color on iOS, and a blue background color on other platforms.

Since the value of the corresponding platform key can be of type `any`, [`select`](https://reactnative.dev/docs/next/platform#select) method can also be used to return platform-specific components, like below:

```codeBlockLines_AclH
const Component = Platform.select({

})();

Is this page useful?

- [Example](https://reactnative.dev/docs/next/platform#example)
- [Properties](https://reactnative.dev/docs/next/platform#properties)
- [`constants`](https://reactnative.dev/docs/next/platform#constants)
- [`isPad` \\
iOS](https://reactnative.dev/docs/next/platform#ispad-ios)
- [`isTV`](https://reactnative.dev/docs/next/platform#istv)
- [`isVision`](https://reactnative.dev/docs/next/platform#isvision)
- [`isTesting`](https://reactnative.dev/docs/next/platform#istesting)
- [`OS`](https://reactnative.dev/docs/next/platform#os)
- [`Version`](https://reactnative.dev/docs/next/platform#version)
- [Methods](https://reactnative.dev/docs/next/platform#methods)
- [`select()`](https://reactnative.dev/docs/next/platform#select)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/text

[Skip to main content](https://reactnative.dev/docs/next/text#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/text)** (0.81).

Version: Next

On this page

A React component for displaying text.

`Text` supports nesting, styling, and touch handling.

In the following example, the nested title and body text will inherit the `fontFamily` from `styles.baseText`, but the title provides its own additional styles. The title and body will stack on top of each other on account of the literal newlines:

Text Function Component Example - Snack

# Text Function Component Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React, {useState} from 'react';
import {Text, StyleSheet} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const \[titleText, setTitleText\] = useState("Bird's Nest");
const bodyText = 'This is not really a bird nest.';

setTitleText("Bird's Nest \[pressed\]");
};

return (

{'\\n'}
{'\\n'}

};

const styles = StyleSheet.create({
container: {
flex: 1,
},
baseText: {
fontFamily: 'Cochin',
},
titleText: {
fontSize: 20,
fontWeight: 'bold',
},
});

export default TextInANest;

const [titleText, setTitleText] = useState("Bird's Nest");
const bodyText = 'This is not really a bird nest.';

setTitleText("Bird's Nest [pressed]");
};

{'\n'}
{'\n'}

const styles = StyleSheet.create({
container: {
flex: 1,
},
baseText: {
fontFamily: 'Cochin',
},
titleText: {
fontSize: 20,
fontWeight: 'bold',
},
});

Snack

Bird's Nest

This is not really a bird nest.

Updating…

PreviewMy DeviceAndroidiOSWeb

## Nested text [​](https://reactnative.dev/docs/next/text\#nested-text "Direct link to Nested text")

Both Android and iOS allow you to display formatted text by annotating ranges of a string with specific formatting like bold or colored text ( `NSAttributedString` on iOS, `SpannableString` on Android). In practice, this is very tedious. For React Native, we decided to use the web paradigm for this, where you can nest text to achieve the same effect.

Nested Text Example - Snack

# Nested Text Example

import React from 'react';
import {Text, StyleSheet} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const styles = StyleSheet.create({
container: {
flex: 1,
},
baseText: {
fontWeight: 'bold',
},
innerText: {
color: 'red',
},
});

export default BoldAndBeautiful;

const styles = StyleSheet.create({
container: {
flex: 1,
},
baseText: {
fontWeight: 'bold',
},
innerText: {
color: 'red',
},
});

I am bold and red

Behind the scenes, React Native converts this to a flat `NSAttributedString` or `SpannableString` that contains the following information:

```codeBlockLines_AclH
"I am bold and red"
0-9: bold
9-17: bold, red

## Containers [​](https://reactnative.dev/docs/next/text\#containers "Direct link to Containers")

tsx

```codeBlockLines_AclH

// |First part and second part|

// otherwise, the text will flow as if it was one
// |First part |
// |and second |
// |part |

// |First part and|
// |second part |

// otherwise, the text will flow in its own block
// |First part |
// |and |
// |second part|

## Limited Style Inheritance [​](https://reactnative.dev/docs/next/text\#limited-style-inheritance "Direct link to Limited Style Inheritance")

On the web, the usual way to set a font family and size for the entire document is to take advantage of inherited CSS properties like so:

css

```codeBlockLines_AclH
html {
font-family:
'lucida grande', tahoma, verdana, arial, sans-serif;
font-size: 11px;
color: #141823;
}

All elements in the document will inherit this font unless they or one of their parents specifies a new rule.

You also lose the ability to set up a default font for an entire subtree. Meanwhile, `fontFamily` only accepts a single font name, which is different from `font-family` in CSS. The recommended way to use consistent fonts and sizes across your application is to create a component `MyAppText` that includes them and use this component across your app. You can also use this component to make more specific components like `MyAppHeaderText` for other kinds of text.

Assuming that `MyAppText` is a component that only renders out its children into a `Text` component with styling, then `MyAppHeaderText` can be defined as follows:

Composing `MyAppText` in this way ensures that we get the styles from a top-level component, but leaves us the ability to add/override them in specific use cases.

React Native still has the concept of style inheritance, but limited to text subtrees. In this case, the second part will be both bold and red.

We believe that this more constrained way to style text will yield better apps:

- (Developer) React components are designed with strong isolation in mind: You should be able to drop a component anywhere in your application, trusting that as long as the props are the same, it will look and behave the same way. Text properties that could inherit from outside of the props would break this isolation.

- (Implementor) The implementation of React Native is also simplified. We do not need to have a `fontFamily` field on every single element, and we do not need to potentially traverse the tree up to the root every time we display a text node. The style inheritance is only encoded inside of the native Text component and doesn't leak to other components or the system itself.

* * *

# Reference

## Props [​](https://reactnative.dev/docs/next/text\#props "Direct link to Props")

### `accessibilityHint` [​](https://reactnative.dev/docs/next/text\#accessibilityhint "Direct link to accessibilityhint")

An accessibility hint helps users understand what will happen when they perform an action on the accessibility element when that result is not clear from the accessibility label.

| Type |
| --- |
| string |

### `accessibilityLanguage` iOS [​](https://reactnative.dev/docs/next/text\#accessibilitylanguage-ios "Direct link to accessibilitylanguage-ios")

A value indicating which language should be used by the screen reader when the user interacts with the element. It should follow the [BCP 47 specification](https://www.rfc-editor.org/info/bcp47).

See the [iOS `accessibilityLanguage` doc](https://developer.apple.com/documentation/objectivec/nsobject/1615192-accessibilitylanguage) for more information.

### `accessibilityLabel` [​](https://reactnative.dev/docs/next/text\#accessibilitylabel "Direct link to accessibilitylabel")

Overrides the text that's read by the screen reader when the user interacts with the element. By default, the label is constructed by traversing all the children and accumulating all the `Text` nodes separated by space.

### `accessibilityRole` [​](https://reactnative.dev/docs/next/text\#accessibilityrole "Direct link to accessibilityrole")

Tells the screen reader to treat the currently focused on element as having a specific role.

On iOS, these roles map to corresponding Accessibility Traits. Image button has the same functionality as if the trait was set to both 'image' and 'button'. See the [Accessibility guide](https://reactnative.dev/docs/next/accessibility#accessibilitytraits-ios) for more information.

On Android, these roles have similar functionality on TalkBack as adding Accessibility Traits does on Voiceover in iOS

| Type |
| --- |
| [AccessibilityRole](https://reactnative.dev/docs/next/accessibility#accessibilityrole) |

### `accessibilityState` [​](https://reactnative.dev/docs/next/text\#accessibilitystate "Direct link to accessibilitystate")

Tells the screen reader to treat the currently focused on element as being in a specific state.

You can provide one state, no state, or multiple states. The states must be passed in through an object, e.g. `{selected: true, disabled: true}`.

| Type |
| --- |
| [AccessibilityState](https://reactnative.dev/docs/next/accessibility#accessibilitystate) |

### `accessibilityActions` [​](https://reactnative.dev/docs/next/text\#accessibilityactions "Direct link to accessibilityactions")

Accessibility actions allow an assistive technology to programmatically invoke the actions of a component. The `accessibilityActions` property should contain a list of action objects. Each action object should contain the field name and label.

See the [Accessibility guide](https://reactnative.dev/docs/next/accessibility#accessibility-actions) for more information.

| Type | Required |
| --- | --- |
| array | No |

### `onAccessibilityAction` [​](https://reactnative.dev/docs/next/text\#onaccessibilityaction "Direct link to onaccessibilityaction")

Invoked when the user performs the accessibility actions. The only argument to this function is an event containing the name of the action to perform.

| Type | Required |
| --- | --- |
| function | No |

### `accessible` [​](https://reactnative.dev/docs/next/text\#accessible "Direct link to accessible")

When set to `true`, indicates that the view is an accessibility element.

See the [Accessibility guide](https://reactnative.dev/docs/next/accessibility#accessible-ios-android) for more information.

| Type | Default |
| --- | --- |
| boolean | `true` |

### `adjustsFontSizeToFit` [​](https://reactnative.dev/docs/next/text\#adjustsfontsizetofit "Direct link to adjustsfontsizetofit")

Specifies whether fonts should be scaled down automatically to fit given style constraints.

| Type | Default |
| --- | --- |
| boolean | `false` |

### `allowFontScaling` [​](https://reactnative.dev/docs/next/text\#allowfontscaling "Direct link to allowfontscaling")

Specifies whether fonts should scale to respect Text Size accessibility settings.

### `android_hyphenationFrequency` Android [​](https://reactnative.dev/docs/next/text\#android_hyphenationfrequency-android "Direct link to android_hyphenationfrequency-android")

Sets the frequency of automatic hyphenation to use when determining word breaks on Android API Level 23+.

| Type | Default |
| --- | --- |
| enum( `'none'`, `'normal'`, `'full'`) | `'none'` |

### `aria-busy` [​](https://reactnative.dev/docs/next/text\#aria-busy "Direct link to aria-busy")

Indicates an element is being modified and that assistive technologies may want to wait until the changes are complete before informing the user about the update.

| Type | Default |
| --- | --- |
| boolean | false |

### `aria-checked` [​](https://reactnative.dev/docs/next/text\#aria-checked "Direct link to aria-checked")

Indicates the state of a checkable element. This field can either take a boolean or the "mixed" string to represent mixed checkboxes.

| Type | Default |
| --- | --- |
| boolean, 'mixed' | false |

### `aria-disabled` [​](https://reactnative.dev/docs/next/text\#aria-disabled "Direct link to aria-disabled")

Indicates that the element is perceivable but disabled, so it is not editable or otherwise operable.

### `aria-expanded` [​](https://reactnative.dev/docs/next/text\#aria-expanded "Direct link to aria-expanded")

Indicates whether an expandable element is currently expanded or collapsed.

### `aria-label` [​](https://reactnative.dev/docs/next/text\#aria-label "Direct link to aria-label")

Defines a string value that labels an interactive element.

### `aria-selected` [​](https://reactnative.dev/docs/next/text\#aria-selected "Direct link to aria-selected")

Indicates whether a selectable element is currently selected or not.

| Type |
| --- |
| boolean |

### `dataDetectorType` Android [​](https://reactnative.dev/docs/next/text\#datadetectortype-android "Direct link to datadetectortype-android")

Determines the types of data converted to clickable URLs in the text element. By default, no data types are detected.

You can provide only one type.

| Type | Default |
| --- | --- |
| enum( `'phoneNumber'`, `'link'`, `'email'`, `'none'`, `'all'`) | `'none'` |

### `disabled` Android [​](https://reactnative.dev/docs/next/text\#disabled-android "Direct link to disabled-android")

Specifies the disabled state of the text view for testing purposes.

| Type | Default |
| --- | --- |
| bool | `false` |

### `dynamicTypeRamp` iOS [​](https://reactnative.dev/docs/next/text\#dynamictyperamp-ios "Direct link to dynamictyperamp-ios")

The [Dynamic Type](https://developer.apple.com/documentation/uikit/uifont/scaling_fonts_automatically) ramp to apply to this element on iOS.

| Type | Default |
| --- | --- |
| enum( `'caption2'`, `'caption1'`, `'footnote'`, `'subheadline'`, `'callout'`, `'body'`, `'headline'`, `'title3'`, `'title2'`, `'title1'`, `'largeTitle'`) | `'body'` |

### `ellipsizeMode` [​](https://reactnative.dev/docs/next/text\#ellipsizemode "Direct link to ellipsizemode")

When `numberOfLines` is set, this prop defines how the text will be truncated. `numberOfLines` must be set in conjunction with this prop.

This can be one of the following values:

- `head` \- The line is displayed so that the end fits in the container and the missing text at the beginning of the line is indicated by an ellipsis glyph. e.g., "...wxyz"
- `middle` \- The line is displayed so that the beginning and end fit in the container and the missing text in the middle is indicated by an ellipsis glyph. "ab...yz"
- `tail` \- The line is displayed so that the beginning fits in the container and the missing text at the end of the line is indicated by an ellipsis glyph. e.g., "abcd..."
- `clip` \- Lines are not drawn past the edge of the text container.

note

On Android, when `numberOfLines` is set to a value higher than `1`, only `tail` value will work correctly.

| Type | Default |
| --- | --- |
| enum( `'head'`, `'middle'`, `'tail'`, `'clip'`) | `tail` |

### `id` [​](https://reactnative.dev/docs/next/text\#id "Direct link to id")

Used to locate this view from native code. Has precedence over `nativeID` prop.

### `maxFontSizeMultiplier` [​](https://reactnative.dev/docs/next/text\#maxfontsizemultiplier "Direct link to maxfontsizemultiplier")

Specifies the largest possible scale a font can reach when `allowFontScaling` is enabled. Possible values:

- `null/undefined`: inherit from the parent node or the global default (0)
- `0`: no max, ignore parent/global default

| Type | Default |
| --- | --- |
| number | `undefined` |

### `minimumFontScale` [​](https://reactnative.dev/docs/next/text\#minimumfontscale "Direct link to minimumfontscale")

Specifies the smallest possible scale a font can reach when `adjustsFontSizeToFit` is enabled. (values 0.01-1.0).

| Type |
| --- |
| number |

### `nativeID` [​](https://reactnative.dev/docs/next/text\#nativeid "Direct link to nativeid")

Used to locate this view from native code.

### `numberOfLines` [​](https://reactnative.dev/docs/next/text\#numberoflines "Direct link to numberoflines")

Used to truncate the text with an ellipsis after computing the text layout, including line wrapping, such that the total number of lines does not exceed this number. Setting this property to `0` will result in unsetting this value, which means that no lines restriction will be applied.

This prop is commonly used with `ellipsizeMode`.

| Type | Default |
| --- | --- |
| number | `0` |

### `onLayout` [​](https://reactnative.dev/docs/next/text\#onlayout "Direct link to onlayout")

Invoked on mount and on layout changes.

| Type |
| --- |

### `onLongPress` [​](https://reactnative.dev/docs/next/text\#onlongpress "Direct link to onlongpress")

This function is called on long press.

### `onMoveShouldSetResponder` [​](https://reactnative.dev/docs/next/text\#onmoveshouldsetresponder "Direct link to onmoveshouldsetresponder")

Does this view want to "claim" touch responsiveness? This is called for every touch move on the `View` when it is not the responder.

### `onPress` [​](https://reactnative.dev/docs/next/text\#onpress "Direct link to onpress")

Function called on user press, triggered after `onPressOut`.

### `onPressIn` [​](https://reactnative.dev/docs/next/text\#onpressin "Direct link to onpressin")

Called immediately when a touch is engaged, before `onPressOut` and `onPress`.

### `onPressOut` [​](https://reactnative.dev/docs/next/text\#onpressout "Direct link to onpressout")

Called when a touch is released.

### `onResponderGrant` [​](https://reactnative.dev/docs/next/text\#onrespondergrant "Direct link to onrespondergrant")

The View is now responding to touch events. This is the time to highlight and show the user what is happening.

### `onResponderMove` [​](https://reactnative.dev/docs/next/text\#onrespondermove "Direct link to onrespondermove")

The user is moving their finger.

### `onResponderRelease` [​](https://reactnative.dev/docs/next/text\#onresponderrelease "Direct link to onresponderrelease")

Fired at the end of the touch.

### `onResponderTerminate` [​](https://reactnative.dev/docs/next/text\#onresponderterminate "Direct link to onresponderterminate")

The responder has been taken from the `View`. Might be taken by other views after a call to `onResponderTerminationRequest`, or might be taken by the OS without asking (e.g., happens with control center/ notification center on iOS)

### `onResponderTerminationRequest` [​](https://reactnative.dev/docs/next/text\#onresponderterminationrequest "Direct link to onresponderterminationrequest")

Some other `View` wants to become a responder and is asking this `View` to release its responder. Returning `true` allows its release.

### `onStartShouldSetResponderCapture` [​](https://reactnative.dev/docs/next/text\#onstartshouldsetrespondercapture "Direct link to onstartshouldsetrespondercapture")

If a parent `View` wants to prevent a child `View` from becoming a responder on a touch start, it should have this handler which returns `true`.

### `onTextLayout` [​](https://reactnative.dev/docs/next/text\#ontextlayout "Direct link to ontextlayout")

Invoked on Text layout change.

### `pressRetentionOffset` [​](https://reactnative.dev/docs/next/text\#pressretentionoffset "Direct link to pressretentionoffset")

When the scroll view is disabled, this defines how far your touch may move off of the button, before deactivating the button. Once deactivated, try moving it back and you'll see that the button is once again reactivated! Move it back and forth several times while the scroll view is disabled. Ensure you pass in a constant to reduce memory allocations.

| Type |
| --- |
| [Rect](https://reactnative.dev/docs/next/rect), number |

### `ref` [​](https://reactnative.dev/docs/next/text\#ref "Direct link to ref")

A ref setter that will be assigned an [element node](https://reactnative.dev/docs/next/element-nodes) when mounted.

### `role` [​](https://reactnative.dev/docs/next/text\#role "Direct link to role")

`role` communicates the purpose of a component to the user of an assistive technology. Has precedence over the [`accessibilityRole`](https://reactnative.dev/docs/next/text#accessibilityrole) prop.

| Type |
| --- |
| [Role](https://reactnative.dev/docs/next/accessibility#role) |

### `selectable` [​](https://reactnative.dev/docs/next/text\#selectable "Direct link to selectable")

Lets the user select text, to use the native copy and paste functionality.

### `selectionColor` Android [​](https://reactnative.dev/docs/next/text\#selectioncolor-android "Direct link to selectioncolor-android")

The highlight color of the text.

| Type |
| --- |
| [color](https://reactnative.dev/docs/next/colors) |

### `style` [​](https://reactnative.dev/docs/next/text\#style "Direct link to style")

| Type |
| --- |
| [Text Style](https://reactnative.dev/docs/next/text-style-props), [View Style Props](https://reactnative.dev/docs/next/view-style-props) |

### `suppressHighlighting` iOS [​](https://reactnative.dev/docs/next/text\#suppresshighlighting-ios "Direct link to suppresshighlighting-ios")

When `true`, no visual change is made when text is pressed down. By default, a gray oval highlights the text on press down.

### `testID` [​](https://reactnative.dev/docs/next/text\#testid "Direct link to testid")

Used to locate this view in end-to-end tests.

### `textBreakStrategy` Android [​](https://reactnative.dev/docs/next/text\#textbreakstrategy-android "Direct link to textbreakstrategy-android")

Set text break strategy on Android API Level 23+, possible values are `simple`, `highQuality`, `balanced`.

| Type | Default |
| --- | --- |
| enum( `'simple'`, `'highQuality'`, `'balanced'`) | `highQuality` |

### `lineBreakStrategyIOS` iOS [​](https://reactnative.dev/docs/next/text\#linebreakstrategyios-ios "Direct link to linebreakstrategyios-ios")

Set line break strategy on . Possible values are `none`, `standard`, `hangul-word` and `push-out`.

| Type | Default |
| --- | --- |
| enum( `'none'`, `'standard'`, `'hangul-word'`, `'push-out'`) | `'none'` |

## Type Definitions [​](https://reactnative.dev/docs/next/text\#type-definitions "Direct link to Type Definitions")

### TextLayout [​](https://reactnative.dev/docs/next/text\#textlayout "Direct link to TextLayout")

`TextLayout` object is a part of [`TextLayoutEvent`](https://reactnative.dev/docs/next/text#textlayoutevent) callback and contains the measurement data for `Text` line.

#### Example [​](https://reactnative.dev/docs/next/text\#example "Direct link to Example")

js

```codeBlockLines_AclH
{
capHeight: 10.496,
ascender: 14.624,
descender: 4,
width: 28.224,
height: 18.624,
xHeight: 6.048,
x: 0,
y: 0
}

#### Properties [​](https://reactnative.dev/docs/next/text\#properties "Direct link to Properties")

| Name | Type | Optional | Description |
| --- | --- | --- | --- |
| ascender | number | No | The line ascender height after the text layout changes. |
| capHeight | number | No | Height of capital letter above the baseline. |
| descender | number | No | The line descender height after the text layout changes. |
| height | number | No | Height of the line after the text layout changes. |
| width | number | No | Width of the line after the text layout changes. |
| x | number | No | Line X coordinate inside the Text component. |
| xHeight | number | No | Distance between the baseline and median of the line (corpus size). |
| y | number | No | Line Y coordinate inside the Text component. |

### TextLayoutEvent [​](https://reactnative.dev/docs/next/text\#textlayoutevent "Direct link to TextLayoutEvent")

`TextLayoutEvent` object is returned in the callback as a result of a component layout change. It contains a key called `lines` with a value which is an array containing [`TextLayout`](https://reactnative.dev/docs/next/text#textlayout) object corresponded to every rendered text line.

#### Example [​](https://reactnative.dev/docs/next/text\#example-1 "Direct link to Example")

```codeBlockLines_AclH
{
lines: [\
TextLayout,\
TextLayout,\
// ...\
];
target: 1127;
}

#### Properties [​](https://reactnative.dev/docs/next/text\#properties-1 "Direct link to Properties")

| Name | Type | Optional | Description |
| --- | --- | --- | --- |
| lines | array of [TextLayout](https://reactnative.dev/docs/next/text#textlayout) s | No | Provides the TextLayout data for every rendered line. |
| target | number | No | The node id of the element. |

Is this page useful?

- [Nested text](https://reactnative.dev/docs/next/text#nested-text)
- [Containers](https://reactnative.dev/docs/next/text#containers)
- [Limited Style Inheritance](https://reactnative.dev/docs/next/text#limited-style-inheritance)
- [Props](https://reactnative.dev/docs/next/text#props)
- [`accessibilityHint`](https://reactnative.dev/docs/next/text#accessibilityhint)
- [`accessibilityLanguage` \\
iOS](https://reactnative.dev/docs/next/text#accessibilitylanguage-ios)
- [`accessibilityLabel`](https://reactnative.dev/docs/next/text#accessibilitylabel)
- [`accessibilityRole`](https://reactnative.dev/docs/next/text#accessibilityrole)
- [`accessibilityState`](https://reactnative.dev/docs/next/text#accessibilitystate)
- [`accessibilityActions`](https://reactnative.dev/docs/next/text#accessibilityactions)
- [`onAccessibilityAction`](https://reactnative.dev/docs/next/text#onaccessibilityaction)
- [`accessible`](https://reactnative.dev/docs/next/text#accessible)
- [`adjustsFontSizeToFit`](https://reactnative.dev/docs/next/text#adjustsfontsizetofit)
- [`allowFontScaling`](https://reactnative.dev/docs/next/text#allowfontscaling)
- [`android_hyphenationFrequency` \\
Android](https://reactnative.dev/docs/next/text#android_hyphenationfrequency-android)
- [`aria-busy`](https://reactnative.dev/docs/next/text#aria-busy)
- [`aria-checked`](https://reactnative.dev/docs/next/text#aria-checked)
- [`aria-disabled`](https://reactnative.dev/docs/next/text#aria-disabled)
- [`aria-expanded`](https://reactnative.dev/docs/next/text#aria-expanded)
- [`aria-label`](https://reactnative.dev/docs/next/text#aria-label)
- [`aria-selected`](https://reactnative.dev/docs/next/text#aria-selected)
- [`dataDetectorType` \\
Android](https://reactnative.dev/docs/next/text#datadetectortype-android)
- [`disabled` \\
Android](https://reactnative.dev/docs/next/text#disabled-android)
- [`dynamicTypeRamp` \\
iOS](https://reactnative.dev/docs/next/text#dynamictyperamp-ios)
- [`ellipsizeMode`](https://reactnative.dev/docs/next/text#ellipsizemode)
- [`id`](https://reactnative.dev/docs/next/text#id)
- [`maxFontSizeMultiplier`](https://reactnative.dev/docs/next/text#maxfontsizemultiplier)
- [`minimumFontScale`](https://reactnative.dev/docs/next/text#minimumfontscale)
- [`nativeID`](https://reactnative.dev/docs/next/text#nativeid)
- [`numberOfLines`](https://reactnative.dev/docs/next/text#numberoflines)
- [`onLayout`](https://reactnative.dev/docs/next/text#onlayout)
- [`onLongPress`](https://reactnative.dev/docs/next/text#onlongpress)
- [`onMoveShouldSetResponder`](https://reactnative.dev/docs/next/text#onmoveshouldsetresponder)
- [`onPress`](https://reactnative.dev/docs/next/text#onpress)
- [`onPressIn`](https://reactnative.dev/docs/next/text#onpressin)
- [`onPressOut`](https://reactnative.dev/docs/next/text#onpressout)
- [`onResponderGrant`](https://reactnative.dev/docs/next/text#onrespondergrant)
- [`onResponderMove`](https://reactnative.dev/docs/next/text#onrespondermove)
- [`onResponderRelease`](https://reactnative.dev/docs/next/text#onresponderrelease)
- [`onResponderTerminate`](https://reactnative.dev/docs/next/text#onresponderterminate)
- [`onResponderTerminationRequest`](https://reactnative.dev/docs/next/text#onresponderterminationrequest)
- [`onStartShouldSetResponderCapture`](https://reactnative.dev/docs/next/text#onstartshouldsetrespondercapture)
- [`onTextLayout`](https://reactnative.dev/docs/next/text#ontextlayout)
- [`pressRetentionOffset`](https://reactnative.dev/docs/next/text#pressretentionoffset)
- [`ref`](https://reactnative.dev/docs/next/text#ref)
- [`role`](https://reactnative.dev/docs/next/text#role)
- [`selectable`](https://reactnative.dev/docs/next/text#selectable)
- [`selectionColor` \\
Android](https://reactnative.dev/docs/next/text#selectioncolor-android)
- [`style`](https://reactnative.dev/docs/next/text#style)
- [`suppressHighlighting` \\
iOS](https://reactnative.dev/docs/next/text#suppresshighlighting-ios)
- [`testID`](https://reactnative.dev/docs/next/text#testid)
- [`textBreakStrategy` \\
Android](https://reactnative.dev/docs/next/text#textbreakstrategy-android)
- [`lineBreakStrategyIOS` \\
iOS](https://reactnative.dev/docs/next/text#linebreakstrategyios-ios)
- [Type Definitions](https://reactnative.dev/docs/next/text#type-definitions)
- [TextLayout](https://reactnative.dev/docs/next/text#textlayout)
- [TextLayoutEvent](https://reactnative.dev/docs/next/text#textlayoutevent)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/the-new-architecture/advanced-topics-modules

[Skip to main content](https://reactnative.dev/docs/next/the-new-architecture/advanced-topics-modules#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/the-new-architecture/advanced-topics-modules)** (0.81).

Version: Next

This document contains a set of advanced topics to implement more complex functionalities of Native Modules. It is recommended to first read the [Codegen](https://reactnative.dev/docs/the-new-architecture/what-is-codegen) section and the guides on [Native Modules](https://reactnative.dev/docs/turbo-native-modules-introduction).

This guide will cover the following topics:

- [Add custom C++ types to your C++ modules](https://reactnative.dev/docs/the-new-architecture/custom-cxx-types)
- [Use Swift in your Module](https://reactnative.dev/docs/next/the-new-architecture/turbo-modules-with-swift)
- [Emit custom events from your Native Modules](https://reactnative.dev/docs/next/the-new-architecture/native-modules-custom-events)
- [Native Modules Lifecycle](https://reactnative.dev/docs/next/the-new-architecture/native-modules-lifecycle)

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/the-new-architecture/turbo-modules-with-swift

[Skip to main content](https://reactnative.dev/docs/next/the-new-architecture/turbo-modules-with-swift#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/the-new-architecture/turbo-modules-with-swift)** (0.81).

Version: Next

On this page

Swift is the official and default language for developing native application on iOS.

In this guide, you will explore how you can write your Native Modules using Swift.

note

The core of React Native is mainly written in C++ and the interoperability between Swift and C++ is not great, despite the [interoperability layer](https://www.swift.org/documentation/cxx-interop/) developed by Apple.

Therefore, the module you are going to write in this guide won't be a pure Swift implementation due to the incompatibilities between the languages. You'll have to write some Objective-C++ glue code but the goal of the guide is to minimize the amount of Objective-C++ code that is needed. If you are migrating an existing Native Modules from the legacy architecture to the New Architecture, this approach should allow you to reuse most of the code.

This guide starts from the iOS implementation of the [Native Module](https://reactnative.dev/docs/next/turbo-native-modules-introduction) guide.
Make sure to be familiar with that guide before diving into this one, potentially implementing the example in the guide.

## The Adapter pattern [​](https://reactnative.dev/docs/next/the-new-architecture/turbo-modules-with-swift\#the-adapter-pattern "Direct link to The Adapter pattern")

The goal is to implement all our business logic using a Swift module and have a thin glue layer in Objective-C++ that is able to connect the app with the Swift implementation.

You can achieve this by leveraging the [Adapter](https://en.wikipedia.org/wiki/Adapter_pattern) design pattern, to connect the Swift Module with the Objective-C++ layer.

The Objective-C++ object is created by React Native and it keeps a reference to the Swift module, handling its lifecycle. The Objective-C++ object forwards to the all the methods invocation to Swift.

### Creating the Swift Module [​](https://reactnative.dev/docs/next/the-new-architecture/turbo-modules-with-swift\#creating-the-swift-module "Direct link to Creating the Swift Module")

The first step is to move the implementation from the Objective-C++ layer to the Swift Layer.

To achieve that, please follow these steps:

1. Create a new empty file in the Xcode project, and call it `NativeLocalStorage.swift`
2. Add the implementation in your Swift module like it follows:

NativeLocalStorage.swift

```codeBlockLines_AclH
import Foundation

@objc public class NativeLocalStorage: NSObject {
let userDefaults = UserDefaults(suiteName: "local-storage");

return userDefaults?.string(forKey: key)
}

@objc public func setItem(for key: String, value: String) {
userDefaults?.set(value, forKey: key)
}

@objc public func removeItem(for key: String) {
userDefaults?.removeObject(forKey: key)
}

@objc public func clear() {
userDefaults?.dictionaryRepresentation().keys.forEach { removeItem(for: $0) }
}
}

Notice that you have to declare all the methods that you need to call from Objective-C as `public` and with the `@objc` annotation.
Remember also to make your class inherit from `NSObject`, otherwise it would not be possible to use it from Objective-C.

### Update the `RCTNativeLocalStorage` file [​](https://reactnative.dev/docs/next/the-new-architecture/turbo-modules-with-swift\#update-the-rctnativelocalstorage-file "Direct link to update-the-rctnativelocalstorage-file")

Then, you need to update the implementation of the `RCTNativeLocalStorage` to be able to create the Swift module and to call its methods.

1. Open the `RCTNativeLocalStorage.mm` file
2. Update it as it follows:

RCTNativeLocalStorage.mm

```codeBlockLines_AclH
// RCTNativeLocalStorage.m
// TurboModuleExample

#import "RCTNativeLocalStorage.h"
+#import "SampleApp-Swift.h"

- static NSString *const RCTNativeLocalStorageKey = @"local-storage";

-@interface RCTNativeLocalStorage()
-@property (strong, nonatomic) NSUserDefaults *localStorage;
-@end

-@implementation RCTNativeLocalStorage
+@implementation RCTNativeLocalStorage {
+ NativeLocalStorage *storage;
+}

-RCT_EXPORT_MODULE(NativeLocalStorage)

- (id) init {
if (self = [super init]) {
- _localStorage = [[NSUserDefaults alloc] initWithSuiteName:RCTNativeLocalStorageKey];
+ storage = [NativeLocalStorage new];
}
return self;
}

}

- (NSString * _Nullable)getItem:(NSString *)key {
- return [self.localStorage stringForKey:key];
+ return [storage getItemFor:key];
}

- (void)setItem:(NSString *)value key:(NSString *)key {
- [self.localStorage setObject:value forKey:key];
+ [storage setItemFor:key value:value];
}

- (void)removeItem:(NSString *)key {
- [self.localStorage removeObjectForKey:key];
+ [storage removeItemFor:key];
}

- (void)clear {
- NSDictionary *keys = [self.localStorage dictionaryRepresentation];
- for (NSString *key in keys) {
- [self removeItem:key];
- }
+ [storage clear];
}

++ (NSString *)moduleName
+{
+ return @"NativeLocalStorage";
+}

@end

The code is not really changed. Instead of creating a reference to the `NSUserDefaults` directly, you create a new `NativeLocalStorage` using the swift implementation and, whenever a native module function is invoked, the invocation is forwarded to the `NativeLocalStorage` implemented in Swift.

Remember to import the `"SampleApp-Swift.h"` header. This is a header automatically generated by Xcode which contains the public API of your Swift files, in a format that is consumable by Objective-C. The `SampleApp` part of the header is actually your App name, so if you created the app with a name that is **different** from `SampleApp`, you'll have to change it.

Note also that the `RCT_EXPORT_MODULE` macro is not required anymore, because native modules are registered using the `package.json` as described [here](https://reactnative.dev/docs/next/turbo-native-modules-introduction?platforms=ios#register-the-native-module-in-your-app).

This approach introduces a bit of code duplication in the interfaces, but it allows you to reuse the Swift code you may already have in your codebase, with little extra effort.

### Implementing the Bridging Header [​](https://reactnative.dev/docs/next/the-new-architecture/turbo-modules-with-swift\#implementing-the-bridging-header "Direct link to Implementing the Bridging Header")

If you are a library author, developing a native module that is going to be distributed as a separate library, this step is not required.

The last required step to connect the Swift code with the Objective-C++ counterpart is a bridging header.

A bridging header is an header where you can import all the Objective-C header files that needs to be visible by your swift code.

You might already have a bridging header in your codebase, but in case you haven't, you can create a new one by following these steps:

1. In Xcode, create a new file and call it `"SampleApp-Bridging-Header.h"`
2. Update the content of the `"SampleApp-Bridging-Header.h"` like this:

SampleApp-Bridging-Header.h

```codeBlockLines_AclH
//
// Use this file to import your target's public headers that you would like to expose to Swift.
//

3. Link the Bridging header in your project:
1. In the project navigator, select your app name ( `SampleApp`, on the left)
2. Click on `Build Settings`
3. Filter for `"Bridging Header"`
4. Add the relative path to the "Bridging Header", in the example it is `SampleApp-Bridging-Header.h`

## Build and Run Your App [​](https://reactnative.dev/docs/next/the-new-architecture/turbo-modules-with-swift\#build-and-run-your-app "Direct link to Build and Run Your App")

Now you can follow the last step of the [Native Module's guide](https://reactnative.dev/docs/turbo-native-modules-introduction#build-and-run-your-code-on-a-simulator) and you should see your app running with a Native Module written in Swift.

Is this page useful?

- [The Adapter pattern](https://reactnative.dev/docs/next/the-new-architecture/turbo-modules-with-swift#the-adapter-pattern)
- [Creating the Swift Module](https://reactnative.dev/docs/next/the-new-architecture/turbo-modules-with-swift#creating-the-swift-module)
- [Update the `RCTNativeLocalStorage` file](https://reactnative.dev/docs/next/the-new-architecture/turbo-modules-with-swift#update-the-rctnativelocalstorage-file)
- [Implementing the Bridging Header](https://reactnative.dev/docs/next/the-new-architecture/turbo-modules-with-swift#implementing-the-bridging-header)
- [Build and Run Your App](https://reactnative.dev/docs/next/the-new-architecture/turbo-modules-with-swift#build-and-run-your-app)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/the-new-architecture/native-modules-custom-events

[Skip to main content](https://reactnative.dev/docs/next/the-new-architecture/native-modules-custom-events#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/the-new-architecture/native-modules-custom-events)** (0.81).

Version: Next

On this page

In some circustamces, you may want to have a Native Module that listen to some events in the platform layer and then emit them to the JavaScript layer, to let you application react to such native events. In other cases, you might have long running operations that can emits events so that the UI can be updated when those happen.

Both are good use cases for emitting events from a Native Modules. In this guide, you'll learn how to do that.

## Emitting an Event when a new key added to the storage [​](https://reactnative.dev/docs/next/the-new-architecture/native-modules-custom-events\#emitting-an-event-when-a-new-key-added-to-the-storage "Direct link to Emitting an Event when a new key added to the storage")

In this example, you will learn how to emit an event when a new key is added to the storage. Changing the value of the key will not emit the event, but adding a new key will.

This guide starts from the [Native Module](https://reactnative.dev/docs/next/turbo-native-modules-introduction) guide.
Make sure to be familiar with that guide before diving into this one, potentially implementing the example in the guide.

## Step 1: Update the Specs of NativeLocalStorage [​](https://reactnative.dev/docs/next/the-new-architecture/native-modules-custom-events\#step-1-update-the-specs-of-nativelocalstorage "Direct link to Step 1: Update the Specs of NativeLocalStorage")

The first step would be to update the specs of the `NativeLocalStorage` specs to let React Native aware that the module can emit events.

- TypeScript
- Flow

Open the `NativeLocalStorage.ts` file and update it as it follows:

NativeLocalStorage.ts

```codeBlockLines_AclH
+import type {TurboModule, CodegenTypes} from 'react-native';
import {TurboModuleRegistry} from 'react-native';

+export type KeyValuePair = {
+ key: string,
+ value: string,
+}

export interface Spec extends TurboModule {
setItem(value: string, key: string): void;
getItem(key: string): string | null;
removeItem(key: string): void;
clear(): void;

}

'NativeLocalStorage',
);

Open the `NativeLocalStorage.js` file and update it as it follows:

NativeLocalStorage.js

```codeBlockLines_AclH

// @flow
+import type {TurboModule, CodegenTypes} from 'react-native';
import {TurboModule, TurboModuleRegistry} from 'react-native';

export interface Spec extends TurboModule {
setItem(value: string, key: string): void;
getItem(key: string): ?string;
removeItem(key: string): void;
clear(): void;

'NativeLocalStorage'
): ?Spec);

When the event is emitted, you expect for it to receive a parameter of type `string`.

## Step 2: Generate Codegen [​](https://reactnative.dev/docs/next/the-new-architecture/native-modules-custom-events\#step-2-generate-codegen "Direct link to Step 2: Generate Codegen")

Given that you have updated the specs for your Native Module, you now have to rerun Codegen to generate the artifacts in the native code.

This is the same process presented in the Native Modules guide.

- Android
- iOS

Codegen is executed through the `generateCodegenArtifactsFromSchema` Gradle task:

bash

```codeBlockLines_AclH
cd android
./gradlew generateCodegenArtifactsFromSchema

BUILD SUCCESSFUL in 837ms
14 actionable tasks: 3 executed, 11 up-to-date

This is automatically run when you build your Android application.

Codegen is run as part of the script phases that's automatically added to the project generated by CocoaPods.

```codeBlockLines_AclH
cd ios
bundle install
bundle exec pod install

The output will look like this:

shell

```codeBlockLines_AclH
...
Framework build type is static library
[Codegen] Adding script_phases to ReactCodegen.
[Codegen] Generating ./build/generated/ios/ReactCodegen.podspec.json
[Codegen] Analyzing /Users/me/src/TurboModuleExample/package.json
[Codegen] Searching for Codegen-enabled libraries in the app.
[Codegen] Found TurboModuleExample
[Codegen] Searching for Codegen-enabled libraries in the project dependencies.
[Codegen] Found react-native
...

## Step 3: Update the App code [​](https://reactnative.dev/docs/next/the-new-architecture/native-modules-custom-events\#step-3-update-the-app-code "Direct link to Step 3: Update the App code")

Now, it's time to update the code of the App to handle the new event.

Open the `App.tsx` file and modify it as it follows:

App.tsx

```codeBlockLines_AclH
import React from 'react';
import {
+ Alert,
+ EventSubscription,
SafeAreaView,
StyleSheet,
Text,
TextInput,
Button,
} from 'react-native';

import NativeLocalStorage from './specs/NativeLocalStorage';

function App(): React.JSX.Element {

+ listenerSubscription.current?.remove();
+ listenerSubscription.current = null;
+ }
+ }, [])

const [editingValue, setEditingValue] = React.useState<

- const storedValue = NativeLocalStorage?.getItem('myKey');
- setValue(storedValue ?? '');
- }, []);

function saveValue() {
+ if (key == null) {
+ Alert.alert('Please enter a key');
+ return;
+ }
NativeLocalStorage?.setItem(editingValue ?? EMPTY, key);
setValue(editingValue);
}

function clearAll() {
NativeLocalStorage?.clear();
setValue('');
}

function deleteValue() {
+ if (key == null) {
+ Alert.alert('Please enter a key');
+ return;
+ }
NativeLocalStorage?.removeItem(key);
setValue('');
}

+ function retrieveValue() {
+ if (key == null) {
+ Alert.alert('Please enter a key');
+ return;
+ }
+ const val = NativeLocalStorage?.getItem(key);
+ setValue(val);
+ }

return (

+ placeholder="Enter the key you want to store"
+ style={styles.textInput}
+ onChangeText={setKey}

placeholder="Enter the text you want to store"
style={styles.textInput}
onChangeText={setEditingValue}

const styles = StyleSheet.create({
text: {
margin: 10,
fontSize: 20,
},
textInput: {
margin: 10,
height: 40,
borderColor: 'black',
borderWidth: 1,
paddingLeft: 5,
paddingRight: 5,
borderRadius: 5,
},
});

export default App;

There are a few relevant changes to look at:

1. You need to import the `EventSubscription` type from `react-native` to handle the `EventSubscription`
2. You need to use a `useRef` to keep track of the `EventSubscription` reference
3. You register the listener using an `useEffect` hook. The `onKeyAdded` function takes a callback with an object of type `KeyValuePair` as a function parameter.
4. The callback added to `onKeyAdded` is executed every time the event is emitted from Native to JS.
5. In the `useEffect` cleanup function, you `remove` the event subscription and you set the ref to `null`.

The rest of the changes are regular React changes to improve the App for this new feature.

## Step 4: Write your Native Code [​](https://reactnative.dev/docs/next/the-new-architecture/native-modules-custom-events\#step-4-write-your-native-code "Direct link to Step 4: Write your Native Code")

With everything prepared, let's start writing native platform code.

Assuming you followed the guide for iOS described in the [Native Modules guide](https://reactnative.dev/docs/turbo-native-modules-introduction?platforms=android&language=typescript#3-write-application-code-using-the-turbo-native-module), what's left to do is to plug the code that emit the events in your app.

To do so, you have to:

1. Open the `NativeLocalStorage.kt` file
2. Modify it as it follows:

NativeLocalStorage

```codeBlockLines_AclH
package com.nativelocalstorage

import android.content.Context
import android.content.SharedPreferences
import com.nativelocalstorage.NativeLocalStorageSpec
+import com.facebook.react.bridge.Arguments
import com.facebook.react.bridge.ReactApplicationContext
+import com.facebook.react.bridge.WritableMap

class NativeLocalStorageModule(reactContext: ReactApplicationContext) : NativeLocalStorageSpec(reactContext) {

override fun getName() = NAME

override fun setItem(value: String, key: String) {
+ var shouldEmit = false
+ if (getItem(key) != null) {
+ shouldEmit = true
+ }
val sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE)
val editor = sharedPref.edit()
editor.putString(key, value)
editor.apply()

+ if (shouldEmit == true) {
+ val eventData = Arguments.createMap().apply {
+ putString("key", key)
+ putString("value", value)
+ }
+ emitOnKeyAdded(eventData)
+ }
}

override fun getItem(key: String): String? {
val sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE)
val username = sharedPref.getString(key, null)
return username.toString()
}

First, you need to import a couple of types that you need to use to create the eventData that needs to be sent from Native to JS. These imports are:

- `import com.facebook.react.bridge.Arguments`
- `import com.facebook.react.bridge.WritableMap`

Secondly, you need to implement the logic that actually emits the event to JS. In case of complex types, like the `KeyValuePair` defined in the specs, Codegen will generate a function that expects a `ReadableMap` as a parameter. You can create the `ReadableMap` by using the `Arguments.createMap()` factory method, and use the `apply` function to populate the map. It's your responsibility to make sure that the the keys you are using in the map are the same properties that are defined in the spec type in JS.

Assuming you followed the guide for iOS described in the [Native Modules guide](https://reactnative.dev/docs/turbo-native-modules-introduction?platforms=ios&language=typescript#3-write-application-code-using-the-turbo-native-module), what's left to do is to plug the code that emit the events in your app.

1. Open the `RCTNativeLocalStorage.h` file.
2. Change the base class from `NSObject` to `NativeLocalStorageSpecBase`

RCTNativeLocalStorage.h

NS_ASSUME_NONNULL_END

3. Open the `RCTNativeLocalStorage.mm` file.
4. Modify it to emit the events when needed, for example:

RCTNativeLocalStorage.mm

```codeBlockLines_AclH
- (void)setItem:(NSString *)value key:(NSString *)key {
+ BOOL shouldEmitEvent = NO;
+ if (![self getItem:key]) {
+ shouldEmitEvent = YES;
+ }
[self.localStorage setObject:value forKey:key];

+ if (shouldEmitEvent) {
+ [self emitOnKeyAdded:@{@"key": key, @"value": value}];
+ }
}

The `NativeLocalStorageSpecBase` is a base class that provides the `emitOnKeyAdded` method and its basic implementation and boilerplate. Thanks to this class, you don't have to handle all the conversion between Objective-C and JSI that is required to send the event to JS.

In case of complex types, like the `KeyValuePair` defined in the specs, Codegen will generate a generic dictionary that you can populate on the native side. It's your responsibility to make sure that the the keys you are using in the dictionary are the same properties that are defined in the spec type in JS.

## Step 5: Run Your App [​](https://reactnative.dev/docs/next/the-new-architecture/native-modules-custom-events\#step-5-run-your-app "Direct link to Step 5: Run Your App")

If you now try to run your app, you should see this behavior.

| Android | iOS |
| --- | --- |
| ![](https://reactnative.dev/docs/assets/turbo-native-modules-events-android.gif) | ![](https://reactnative.dev/docs/assets/turbo-native-modules-events-ios.gif) |

Is this page useful?

- [Emitting an Event when a new key added to the storage](https://reactnative.dev/docs/next/the-new-architecture/native-modules-custom-events#emitting-an-event-when-a-new-key-added-to-the-storage)
- [Step 1: Update the Specs of NativeLocalStorage](https://reactnative.dev/docs/next/the-new-architecture/native-modules-custom-events#step-1-update-the-specs-of-nativelocalstorage)
- [Step 2: Generate Codegen](https://reactnative.dev/docs/next/the-new-architecture/native-modules-custom-events#step-2-generate-codegen)
- [Step 3: Update the App code](https://reactnative.dev/docs/next/the-new-architecture/native-modules-custom-events#step-3-update-the-app-code)
- [Step 4: Write your Native Code](https://reactnative.dev/docs/next/the-new-architecture/native-modules-custom-events#step-4-write-your-native-code)
- [Step 5: Run Your App](https://reactnative.dev/docs/next/the-new-architecture/native-modules-custom-events#step-5-run-your-app)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/the-new-architecture/pure-cxx-modules

[Skip to main content](https://reactnative.dev/docs/next/the-new-architecture/pure-cxx-modules#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/the-new-architecture/pure-cxx-modules)** (0.81).

Version: Next

On this page

Writing a module in C++ is the best way to share platform-agnostic code between Android and iOS. With pure C++ modules, you can write your logic only once and reuse it right away from all the platforms, without the need of writing platform-specific code.

In this guide, we will go through the creation of a pure C++ Turbo Native Module:

1. Create the JS specs
2. Configure Codegen to generate the scaffolding
3. Implement the Native logic
4. Register the module in the Android and iOS application
5. Test your changes in JS

The rest of this guide assume that you have created your application running the command:

shell

```codeBlockLines_AclH
npx @react-native-community/cli@latest init SampleApp --version 0.80.0

## 1\. Create the JS specs [​](https://reactnative.dev/docs/next/the-new-architecture/pure-cxx-modules\#1-create-the-js-specs "Direct link to 1. Create the JS specs")

Pure C++ Turbo Native Modules are Turbo Native Modules. They need a specification file (also called spec file) so that Codegen can create the scaffolding code for us. The specification file is also what we use to access the Turbo Native Module in JS.

Spec files need to be written in a typed JS dialect. React Native currently supports Flow or TypeScript.

1. Inside the root folder of your app, create a new folder called `specs`.
2. Create a new file called `NativeSampleModule.ts` with the following code:

warning

All Native Turbo Module spec files must have the prefix `Native`, otherwise Codegen will ignore them.

- TypeScript
- Flow

specs/NativeSampleModule.ts

```codeBlockLines_AclH
// @flow
import type {TurboModule} from 'react-native'
import { TurboModuleRegistry } from "react-native";

export interface Spec extends TurboModule {

}

"NativeSampleModule"
): Spec);

```codeBlockLines_AclH
import {TurboModule, TurboModuleRegistry} from 'react-native';

'NativeSampleModule',
);

## 2\. Configure Codegen [​](https://reactnative.dev/docs/next/the-new-architecture/pure-cxx-modules\#2-configure-codegen "Direct link to 2. Configure Codegen")

The next step is to configure [Codegen](https://reactnative.dev/docs/next/the-new-architecture/what-is-codegen) in your `package.json`. Update the file to include:

package.json

```codeBlockLines_AclH
"start": "react-native start",
"test": "jest"
},
"codegenConfig": {
"name": "AppSpecs",
"type": "modules",
"jsSrcsDir": "specs",
"android": {
"javaPackageName": "com.sampleapp.specs"
}
},
"dependencies": {

This configuration tells Codegen to look for spec files in the `specs` folder. It also instructs Codegen to only generate code for `modules` and to namespace the generated code as `AppSpecs`.

## 3\. Write the Native Code [​](https://reactnative.dev/docs/next/the-new-architecture/pure-cxx-modules\#3-write-the-native-code "Direct link to 3. Write the Native Code")

Writing a C++ Turbo Native Module allows you to share the code between Android an iOS. Therefore we will be writing the code once, and we will look into what changes we need to apply to the platforms so that the C++ code can be picked up.

1. Create a folder named `shared` at the same level as the `android` and `ios` folders.

2. Inside the `shared` folder, create a new file called `NativeSampleModule.h`.

shared/NativeSampleModule.h

```codeBlockLines_AclH
#pragma once

public:

std::string reverseString(jsi::Runtime& rt, std::string input);
};

} // namespace facebook::react

3. Inside the `shared` folder, create a new file called `NativeSampleModule.cpp`.

shared/NativeSampleModule.cpp

#include "NativeSampleModule.h"

namespace facebook::react {

: NativeSampleModuleCxxSpec(std::move(jsInvoker)) {}

std::string NativeSampleModule::reverseString(jsi::Runtime& rt, std::string input) {
return std::string(input.rbegin(), input.rend());
}

Let's have a look at the two files we created:

- The `NativeSampleModule.h` file is the header file for a Pure C++ TurboModule. The `include` statements make sure that we include the specs that will be created by Codegen and that contains the interface and the base class we need to implement.
- The module lives in the `facebook::react` namespace to have access to all the types that live in that namespace.
- The class `NativeSampleModule` is the actual Turbo Native Module class and it extends the `NativeSampleModuleCxxSpec` class which contains some glue code and boilerplate code to let this class behave as a Turbo Native Module.
- Finally, we have the constructor, that accepts a pointer to the `CallInvoker`, to communicate with JS if needed and the function's prototype we have to implement.

The `NativeSampleModule.cpp` file is the actual implementation of our Turbo Native Module and implements the constructor and the method that we declared in the specs.

## 4\. Register the Module in the platform [​](https://reactnative.dev/docs/next/the-new-architecture/pure-cxx-modules\#4-register-the-module-in-the-platform "Direct link to 4. Register the Module in the platform")

The next steps will let us register the module in the platform. This is the step that exposes the native code to JS so that the React Native application can finally call the native methods from the JS layer.

This is the only time when we will have to write some platform-specific code.

### Android [​](https://reactnative.dev/docs/next/the-new-architecture/pure-cxx-modules\#android "Direct link to Android")

To make sure that the Android app can effectively build the C++ Turbo Native Module, we need to:

1. Create a `CMakeLists.txt` to access our C++ code.
2. Modify `build.gradle` to point to the newly created `CMakeLists.txt` file.
3. Create an `OnLoad.cpp` file in our Android app to register the new Turbo Native Module.

#### 1\. Create the `CMakeLists.txt` file [​](https://reactnative.dev/docs/next/the-new-architecture/pure-cxx-modules\#1-create-the-cmakeliststxt-file "Direct link to 1-create-the-cmakeliststxt-file")

Android uses CMake to build. CMake needs to access the files we defined in our shared folder to be able to build them.

1. Create a new folder `SampleApp/android/app/src/main/jni`. The `jni` folder is where the C++ side of Android lives.
2. Create a `CMakeLists.txt` file and add this context:

CMakeLists.txt

```codeBlockLines_AclH
cmake_minimum_required(VERSION 3.13)

# Define the library name here.
project(appmodules)

# This file includes all the necessary to let you build your React Native application
include(${REACT_ANDROID_DIR}/cmake-utils/ReactNative-application.cmake)

# Define where the additional source code lives. We need to crawl back the jni, main, src, app, android folders
target_sources(${CMAKE_PROJECT_NAME} PRIVATE ../../../../../shared/NativeSampleModule.cpp)

# Define where CMake can find the additional header files. We need to crawl back the jni, main, src, app, android folders
target_include_directories(${CMAKE_PROJECT_NAME} PUBLIC ../../../../../shared)

The CMake file does the following things:

- Defines the `appmodules` library, where all the app C++ code will be included.
- Loads the base React Native's CMake file.
- Adds the Module C++ source code that we need to build with the `target_sources` directives. By default React Native will already populate the `appmodules` library with default sources, here we include our custom one. You can see that we need to crawl back from the `jni` folder to the `shared` folder where our C++ Turbo Module lives.
- Specifies where CMake can find the module header files. Also in this case we need to crawl back from the `jni` folder.

#### 2\. Modify `build.gradle` to include the custom C++ code [​](https://reactnative.dev/docs/next/the-new-architecture/pure-cxx-modules\#2-modify-buildgradle-to-include-the-custom-c-code "Direct link to 2-modify-buildgradle-to-include-the-custom-c-code")

Gradle is the tool that orchestrates the Android build. We need to tell it where it can find the `CMake` files to build the Turbo Native Module.

1. Open the `SampleApp/android/app/build.gradle` file.
2. Add the following block into the Gradle file, within the existent `android` block:

android/app/build.gradle

```codeBlockLines_AclH
buildTypes {
debug {
signingConfig signingConfigs.debug
}
release {
// Caution! In production, you need to generate your own keystore file.
// see https://reactnative.dev/docs/signed-apk-android.
signingConfig signingConfigs.debug
minifyEnabled enableProguardInReleaseBuilds
proguardFiles getDefaultProguardFile("proguard-android.txt"), "proguard-rules.pro"
}
}

+ externalNativeBuild {
+ cmake {
+ path "src/main/jni/CMakeLists.txt"
+ }
+ }
}

This block tells the Gradle file where to look for the CMake file. The path is relative to the folder where the `build.gradle` file lives, so we need to add the path to the `CMakeLists.txt` files in the `jni` folder.

#### 3\. Register the new Turbo Native Module [​](https://reactnative.dev/docs/next/the-new-architecture/pure-cxx-modules\#3-register-the-new-turbo-native-module "Direct link to 3. Register the new Turbo Native Module")

The final step is to register the new C++ Turbo Native Module in the runtime, so that when JS requires the C++ Turbo Native Module, the app knows where to find it and can return it.

1. From the folder `SampleApp/android/app/src/main/jni`, run the following command:

sh

```codeBlockLines_AclH
curl -O https://raw.githubusercontent.com/facebook/react-native/v0.76.0/packages/react-native/ReactAndroid/cmake-utils/default-app-setup/OnLoad.cpp

2. Then, modify this file as follows:

android/app/src/main/jni/OnLoad.cpp

const std::string& name,

// Here you can provide your CXX Turbo Modules coming from
// either your application or from external libraries. The approach to follow
// is similar to the following (for a module called `NativeCxxModuleExample`):
//
// if (name == NativeCxxModuleExample::kModuleName) {

// }

+ // This code register the module so that when the JS side asks for it, the app can return it
+ if (name == NativeSampleModule::kModuleName) {

+ }

// And we fall

To make sure that the iOS app can effectively build the C++ Turbo Native Module, we need to:

1. Install pods and run Codegen.
2. Add the `shared` folder to our iOS project.
3. Register the C++ Turbo Native Module in the application.

#### 1\. Install Pods and Run Codegen. [​](https://reactnative.dev/docs/next/the-new-architecture/pure-cxx-modules\#1-install-pods-and-run-codegen "Direct link to 1. Install Pods and Run Codegen.")

The first step we need to run is the usual steps we run every time we have to prepare our iOS application. CocoaPods is the tool we use to setup and install React Native dependencies and, as part of the process, it will also run Codegen for us.

bash

```codeBlockLines_AclH
cd ios
bundle install
bundle exec pod install

#### 2\. Add the shared folder to the iOS project [​](https://reactnative.dev/docs/next/the-new-architecture/pure-cxx-modules\#2-add-the-shared-folder-to-the-ios-project "Direct link to 2. Add the shared folder to the iOS project")

This step adds the `shared` folder to the project to make it visible to Xcode.

1. Open the CocoaPods generated Xcode Workspace.

```codeBlockLines_AclH
cd ios
open SampleApp.xcworkspace

2. Click on the `SampleApp` project on the left and select `Add files to "Sample App"...`.

3. Select the `shared` folder and click on `Add`.

If you did everything right, your project on the left should look like this:

#### 3\. Registering the Cxx Turbo Native Module in your app [​](https://reactnative.dev/docs/next/the-new-architecture/pure-cxx-modules\#3-registering-the-cxx-turbo-native-module-in-your-app "Direct link to 3. Registering the Cxx Turbo Native Module in your app")

To register a pure Cxx Turbo Native Module in your app, you need to:

1. Create a `ModuleProvider` for the Native Module
2. Configure the `package.json` to associate the JS module name with the ModuleProvider class.

The ModuleProvider is an Objective-C++ that glues together the Pure C++ module with the rest of your iOS App.

##### 3.1 Create the ModuleProvider [​](https://reactnative.dev/docs/next/the-new-architecture/pure-cxx-modules\#31-create-the-moduleprovider "Direct link to 3.1 Create the ModuleProvider")

1. From Xcode, select the `SampleApp` project and press `⌘` \+ `N` to create a new file.
2. Select the `Cocoa Touch Class` template
3. Add the name `SampleNativeModuleProvider` (keep the other field as `Subclass of: NSObject` and `Language: Objective-C`)
4. Click Next to generate the files.
5. Rename the `SampleNativeModuleProvider.m` to `SampleNativeModuleProvider.mm`. The `mm` extension denotes an Objective-C++ file.
6. Implement the content of the `SampleNativeModuleProvider.h` with the following:

NativeSampleModuleProvider.h

NS_ASSUME_NONNULL_END

This declares a `NativeSampleModuleProvider` object that conforms to the `RCTModuleProvider` protocol.

7. Implement the content of the `SampleNativeModuleProvider.mm` with the following:

NativeSampleModuleProvider.mm

#import "NativeSampleModuleProvider.h"

@implementation NativeSampleModuleProvider

(const facebook::react::ObjCTurboModule::InitParams &)params
{

@end

This code implements the `RCTModuleProvider` protocol by creating the pure C++ `NativeSampleModule` when the `getTurboModule:` method is called.

##### 3.2 Update the package.json [​](https://reactnative.dev/docs/next/the-new-architecture/pure-cxx-modules\#32-update-the-packagejson "Direct link to 3.2 Update the package.json")

The last step consist in updating the `package.json` to tell React Native about the link between the JS specs of the Native Module and the concrete implementation of those spec in native code.

Modify the `package.json` as it follows:

```codeBlockLines_AclH
"start": "react-native start",
"test": "jest"
},
"codegenConfig": {
"name": "AppSpecs",
"type": "modules",
"jsSrcsDir": "specs",
"android": {
"javaPackageName": "com.sampleapp.specs"
},
"ios": {
"modulesProvider": {
"NativeSampleModule": "NativeSampleModuleProvider"
}
}
},

"dependencies": {

At this point, you need to re-install the pods to make sure that codegen runs again to generate the new files:

# from the ios folder
```codeBlockLines_AclH
bundle exec pod install
open SampleApp.xcworkspace

If you now build your application from Xcode, you should be able to build successfully.

## 5\. Testing your Code [​](https://reactnative.dev/docs/next/the-new-architecture/pure-cxx-modules\#5-testing-your-code "Direct link to 5. Testing your Code")

It's now time to access our C++ Turbo Native Module from JS. To do so, we have to modify the `App.tsx` file to import the Turbo Native Module and to call it in our code.

1. Open the `App.tsx` file.
2. Replace the content of the template with the following code:

App.tsx

```codeBlockLines_AclH
import React from 'react';
import {
Button,
SafeAreaView,
StyleSheet,
Text,
TextInput,
View,
} from 'react-native';
import SampleTurboModule from './specs/NativeSampleModule';

function App(): React.JSX.Element {
const [value, setValue] = React.useState('');
const [reversedValue, setReversedValue] = React.useState('');

const revString = SampleTurboModule.reverseString(value);
setReversedValue(revString);
};

return (

style={styles.textInput}
placeholder="Write your text here"
onChangeText={setValue}
value={value}

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
alignItems: 'center',
},
title: {
fontSize: 18,
marginBottom: 20,
},
textInput: {
borderColor: 'black',
borderWidth: 1,
borderRadius: 5,
padding: 10,
marginTop: 10,
},
});

export default App;

The interesting lines in this app are:

- `import SampleTurboModule from './specs/NativeSampleModule';`: this line imports the Turbo Native Module in the app,
- `const revString = SampleTurboModule.reverseString(value);` in the `onPress` callback: this is how you can use the Turbo Native Module in your app.

For the sake of this example and to keep it as short as possible, we directly imported the spec file in our app.
The best practice in this case is to create a separate file to wrap the specs and use that file into your application.
This allows you to prepare the input for the specs and gives you more control over them in JS.

Congratulations, you wrote your first C++ Turbo Native Module!

| Android | iOS |
| --- | --- |
| ![Android Video](https://reactnative.dev/docs/assets/CxxGuideAndroidVideo.gif) | ![iOS video](https://reactnative.dev/docs/assets/CxxGuideIOSVideo.gif) |

Is this page useful?

- [1\. Create the JS specs](https://reactnative.dev/docs/next/the-new-architecture/pure-cxx-modules#1-create-the-js-specs)
- [2\. Configure Codegen](https://reactnative.dev/docs/next/the-new-architecture/pure-cxx-modules#2-configure-codegen)
- [3\. Write the Native Code](https://reactnative.dev/docs/next/the-new-architecture/pure-cxx-modules#3-write-the-native-code)
- [4\. Register the Module in the platform](https://reactnative.dev/docs/next/the-new-architecture/pure-cxx-modules#4-register-the-module-in-the-platform)
- [Android](https://reactnative.dev/docs/next/the-new-architecture/pure-cxx-modules#android)
- [iOS](https://reactnative.dev/docs/next/the-new-architecture/pure-cxx-modules#ios)
- [5\. Testing your Code](https://reactnative.dev/docs/next/the-new-architecture/pure-cxx-modules#5-testing-your-code)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/roottag

[Skip to main content](https://reactnative.dev/docs/next/roottag#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/roottag)** (0.81).

Version: Next

On this page

`RootTag` is an opaque identifier assigned to the native root view of your React Native surface — i.e. the `ReactRootView` or `RCTRootView` instance for Android or iOS respectively. In short, it is a surface identifier.

## When to use a RootTag? [​](https://reactnative.dev/docs/next/roottag\#when-to-use-a-roottag "Direct link to When to use a RootTag?")

For most React Native developers, you likely won’t need to deal with `RootTag` s.

`RootTag` s are useful for when an app renders **multiple React Native root views** and you need to handle native API calls differently depending on the surface. An example of this is when an app is using native navigation and each screen is a separate React Native root view.

In native navigation, every React Native root view is rendered in a platform’s navigation view (e.g., `Activity` for Android, `UINavigationViewController` for iOS). By this, you are able to leverage the navigation paradigms of the platform such as native look and feel and navigation transitions. The functionality to interact with the native navigation APIs can be exposed to React Native via a [native module](https://reactnative.dev/docs/next/native-modules-intro).

For example, to update the title bar of a screen, you would call the navigation module’s API `setTitle("Updated Title")`, but it would need to know which screen in the stack to update. A `RootTag` is necessary here to identify the root view and its hosting container.

Another use case for `RootTag` is when your app needs to attribute a certain JavaScript call to native based on its originating root view. A `RootTag` is necessary to differentiate the source of the call from different surfaces.

## How to access the RootTag... if you need it [​](https://reactnative.dev/docs/next/roottag\#how-to-access-the-roottag-if-you-need-it "Direct link to How to access the RootTag... if you need it")

In versions 0.65 and below, RootTag is accessed via a [legacy context](https://github.com/facebook/react-native/blob/v0.64.1/Libraries/ReactNative/AppContainer.js#L56). To prepare React Native for Concurrent features coming in React 18 and beyond, we are migrating to the latest [Context API](https://react.dev/reference/react/createContext) via `RootTagContext` in 0.66. Version 0.65 supports both the legacy context and the recommended `RootTagContext` to allow developers time to migrate their call-sites. See the breaking changes summary.

How to access `RootTag` via the `RootTagContext`.

js

```codeBlockLines_AclH
import {RootTagContext} from 'react-native';
import NativeAnalytics from 'native-analytics';
import NativeNavigation from 'native-navigation';

function ScreenA() {
const rootTag = useContext(RootTagContext);

NativeNavigation.setTitle(rootTag, title);
};

NativeAnalytics.logEvent(rootTag, 'one_event');
};

// ...
}

class ScreenB extends React.Component {
static contextType: typeof RootTagContext = RootTagContext;

updateTitle(title) {
NativeNavigation.setTitle(this.context, title);
}

handleOneEvent() {
NativeAnalytics.logEvent(this.context, 'one_event');
}

Learn more about the Context API for [classes](https://react.dev/reference/react/Component#static-contexttype) and [hooks](https://react.dev/reference/react/useContext) from the React docs.

### Breaking Change in 0.65 [​](https://reactnative.dev/docs/next/roottag\#breaking-change-in-065 "Direct link to Breaking Change in 0.65")

`RootTagContext` was formerly named `unstable_RootTagContext` and changed to `RootTagContext` in 0.65. Please update any usages of `unstable_RootTagContext` in your codebase.

### Breaking Change in 0.66 [​](https://reactnative.dev/docs/next/roottag\#breaking-change-in-066 "Direct link to Breaking Change in 0.66")

The legacy context access to `RootTag` will be removed and replaced by `RootTagContext`. Beginning in 0.65, we encourage developers to proactively migrate `RootTag` accesses to `RootTagContext`.

## Future Plans [​](https://reactnative.dev/docs/next/roottag\#future-plans "Direct link to Future Plans")

With the new React Native architecture progressing, there will be future iterations to `RootTag`, with the intention to keep the `RootTag` type opaque and prevent thrash in React Native codebases. Please do not rely on the fact that RootTag currently aliases to a number! If your app relies on RootTags, keep an eye on our version change logs, which you can find [here](https://github.com/facebook/react-native/blob/main/CHANGELOG.md).

Is this page useful?

- [When to use a RootTag?](https://reactnative.dev/docs/next/roottag#when-to-use-a-roottag)
- [How to access the RootTag... if you need it](https://reactnative.dev/docs/next/roottag#how-to-access-the-roottag-if-you-need-it)
- [Breaking Change in 0.65](https://reactnative.dev/docs/next/roottag#breaking-change-in-065)
- [Breaking Change in 0.66](https://reactnative.dev/docs/next/roottag#breaking-change-in-066)
- [Future Plans](https://reactnative.dev/docs/next/roottag#future-plans)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/legacy/native-components-ios

[Skip to main content](https://reactnative.dev/docs/next/legacy/native-components-ios#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/legacy/native-components-ios)** (0.81).

Version: Next

On this page

info

Native Module and Native Components are our stable technologies used by the legacy architecture.
They will be deprecated in the future when the New Architecture will be stable. The New Architecture uses [Turbo Native Module](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/turbo-modules.md) and [Fabric Native Components](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/fabric-native-components.md) to achieve similar results.

There are tons of native UI widgets out there ready to be used in the latest apps - some of them are part of the platform, others are available as third-party libraries, and still more might be in use in your very own portfolio. React Native has several of the most critical platform components already wrapped, like `ScrollView` and `TextInput`, but not all of them, and certainly not ones you might have written yourself for a previous app. Fortunately, we can wrap up these existing components for seamless integration with your React Native application.

Like the native module guide, this too is a more advanced guide that assumes you are somewhat familiar with iOS programming. This guide will show you how to build a native UI component, walking you through the implementation of a subset of the existing `MapView` component available in the core React Native library.

## iOS MapView example [​](https://reactnative.dev/docs/next/legacy/native-components-ios\#ios-mapview-example "Direct link to iOS MapView example")

Let's say we want to add an interactive Map to our app - might as well use [`MKMapView`](https://developer.apple.com/library/prerelease/mac/documentation/MapKit/Reference/MKMapView_Class/index.html), we only need to make it usable from JavaScript.

Native views are created and manipulated by subclasses of `RCTViewManager`. These subclasses are similar in function to view controllers, but are essentially singletons - only one instance of each is created by the bridge. They expose native views to the `RCTUIManager`, which delegates view
{
return [[MKMapView alloc] init];
}

@end

note

Do not attempt to set the `frame` or `backgroundColor` properties on the `UIView` instance that you expose through the `-view` method.
React Native will overwrite the values set by your custom class in order to match your JavaScript component's layout props.
If you need this granularity of control it might be better to wrap the `UIView` instance you want to style in another `UIView` and return the wrapper `UIView` instead.
See [Issue 2948](https://github.com/facebook/react-native/issues/2948) for more context.

In the example above, we prefixed our class name with `RNT`. Prefixes are used to avoid name collisions with other frameworks.
Apple frameworks use two-letter prefixes, and React Native uses `RCT` as a prefix. In order to avoid name collisions, we recommend using a three-letter prefix other than `RCT` in your own classes.

Then you need a little bit of JavaScript to make this a usable React component:

MapView.tsx

```codeBlockLines_AclH
import {requireNativeComponent} from 'react-native';

export default requireNativeComponent('RNTMap');

The `requireNativeComponent` function automatically resolves `RNTMap` to `RNTMapManager` and exports our native view for use in JavaScript.

MyApp.tsx

```codeBlockLines_AclH
import MapView from './MapView.tsx';

export default function MyApp() {

}

When rendering, don't forget to stretch the view, otherwise you'll be staring at a blank screen.

This is now a fully-functioning native map view component in JavaScript, complete with pinch-zoom and other native gesture support. We can't really control it from JavaScript yet, though.

## Properties [​](https://reactnative.dev/docs/next/legacy/native-components-ios\#properties "Direct link to Properties")

The first thing we can do to make this component more usable is to bridge over some native properties. Let's say we want to be able to disable zooming and specify the visible region. Disabling zoom is a boolean, so we add this one line:

RNTMapManager.m

```codeBlockLines_AclH
RCT_EXPORT_VIEW_PROPERTY(zoomEnabled, BOOL)

Note that we explicitly specify the type as `BOOL` \- React Native uses `RCTConvert` under the hood to convert all sorts of different data types when talking over the bridge, and bad values will show convenient "RedBox" errors to let you know there is an issue ASAP. When things are straightforward like this, the whole implementation is taken care of for you by this macro.

Now to actually disable zooming, we set the property in JavaScript:

To document the properties (and which values they accept) of our MapView component we'll add a wrapper component and document the interface with TypeScript:

const RNTMap = requireNativeComponent('RNTMap');

export default function MapView(props: {
/**
* Whether the user may use pinch gestures to zoom in and out.
*/
zoomEnabled?: boolean;
}) {

Now we have a nicely documented wrapper component to work with.

Next, let's add the more complex `region` prop. We start by adding the native code:

```codeBlockLines_AclH
RCT_CUSTOM_VIEW_PROPERTY(region, MKCoordinateRegion, MKMapView)
{
[view setRegion:json ? [RCTConvert MKCoordinateRegion:json] : defaultView.region animated:YES];
}

Ok, this is more complicated than the `BOOL` case we had before. Now we have a `MKCoordinateRegion` type that needs a conversion function, and we have custom code so that the view will animate when we set the region from JS. Within the function body that we provide, `json` refers to the raw value that has been passed from JS. There is also a `view` variable which gives us access to the manager's view instance, and a `defaultView` that we use to reset the property json
{
json = [self NSDictionary:json];
return (MKCoordinateSpan){
[self CLLocationDegrees:json[@"latitudeDelta"]],
[self CLLocationDegrees:json[@"longitudeDelta"]]
};
}

+ (MKCoordinateRegion)MKCoordinateRegion:(id)json
{
return (MKCoordinateRegion){
[self CLLocationCoordinate2D:json],
[self MKCoordinateSpan:json]
};
}

These conversion functions are designed to safely process any JSON that the JS might throw at them by displaying "RedBox" errors and returning standard initialization values when missing keys or other developer errors are encountered.

To finish up support for the `region` prop, we can document it with TypeScript:

export default function MapView(props: {
/**
* The region to be displayed by the map.

* The region is defined by the center coordinates and the span of
* coordinates to display.
*/
region?: {
/**
* Coordinates for the center of the map.
*/
latitude: number;
longitude: number;

/**
* Distance between the minimum and the maximum latitude/longitude
* to be displayed.
*/
latitudeDelta: number;
longitudeDelta: number;
};
/**
* Whether the user may use pinch gestures to zoom in and out.
*/
zoomEnabled?: boolean;
}) {

We can now supply the `region` prop to `MapView`:

export default function MyApp() {
const region = {
latitude: 37.48,
longitude: -122.16,
latitudeDelta: 0.1,
longitudeDelta: 0.1,
};
return (
<MapView
region={region}
zoomEnabled={false}
style={{flex: 1}}

## Events [​](https://reactnative.dev/docs/next/legacy/native-components-ios\#events "Direct link to Events")

So now we have a native map component that we can control freely from JS, but how do we deal with events from the user, like pinch-zooms or panning to change the visible region?

Until now we've only returned a `MKMapView` instance from our manager's `-(UIView *)view` method. We can't add new properties to `MKMapView` so we have to create a new subclass from `MKMapView` which we use for our View. We can then add a `onRegionChange` callback on this subclass:

RNTMapView.h

```codeBlockLines_AclH

@property (nonatomic, copy) RCTBubblingEventBlock onRegionChange;

RNTMapView.m

#import "RNTMapView.h"

@implementation RNTMapView

Note that all `RCTBubblingEventBlock` must be prefixed with `on`. Next, declare an event handler property on `RNTMapManager`, make it a delegate for all the views it exposes, and forward events to JS by calling the event handler block from the native view.

#import "RCTConvert+Mapkit.h"

@implementation RNTMapManager

RCT_EXPORT_MODULE()

RCT_EXPORT_VIEW_PROPERTY(zoomEnabled, BOOL)
RCT_EXPORT_VIEW_PROPERTY(onRegionChange, RCTBubblingEventBlock)

RCT_CUSTOM_VIEW_PROPERTY(region, MKCoordinateRegion, MKMapView)
{
[view setRegion:json ? [RCTConvert MKCoordinateRegion:json] : defaultView.region animated:YES];
}

- (UIView *)view
{
RNTMapView *map = [RNTMapView new];
map.delegate = self;
return map;
}

#pragma mark MKMapViewDelegate

- (void)mapView:(RNTMapView *)mapView regionDidChangeAnimated:(BOOL)animated
{
if (!mapView.onRegionChange) {
return;
}

MKCoordinateRegion region = mapView.region;
mapView.onRegionChange(@{
@"region": @{
@"latitude": @(region.center.latitude),
@"longitude": @(region.center.longitude),
@"latitudeDelta": @(region.span.latitudeDelta),
@"longitudeDelta": @(region.span.longitudeDelta),
}
});
}
@end

In the delegate method `-mapView:regionDidChangeAnimated:` the event handler block is called on the corresponding view with the region data. Calling the `onRegionChange` event handler block results in calling the same callback prop in JavaScript. This callback is invoked with the raw event, which we typically process in the wrapper component to simplify the API:

```codeBlockLines_AclH
// ...

type RegionChangeEvent = {
nativeEvent: {
latitude: number;
longitude: number;
latitudeDelta: number;
longitudeDelta: number;
};
};

export default function MapView(props: {
// ...
/**
* Callback that is called continuously when the user is dragging the map.
*/

}) {

export default function MyApp() {
// ...

const {region} = event.nativeEvent;
// Do something with `region.latitude`, etc.
});

return (
<MapView
// ...
onRegionChange={onRegionChange}

## Handling multiple native views [​](https://reactnative.dev/docs/next/legacy/native-components-ios\#handling-multiple-native-views "Direct link to Handling multiple native views")

A React Native view can have more than one child view in the view tree eg.

tsx

In this example, the class `MyNativeView` is a wrapper for a `NativeComponent` and exposes methods, which will be called on the iOS platform. `MyNativeView` is defined in `MyNativeView.ios.js` and contains proxy methods of `NativeComponent`.

When the user interacts with the component, like clicking the button, the `backgroundColor` of `MyNativeView` changes. In this case `UIManager` would not know which `MyNativeView` should be handled and which one should change `backgroundColor`. Below you will find a solution to this problem:

this.myNativeReference.callNativeMethod();
}}

Now the above component has a reference to a particular `MyNativeView` which allows us to use a specific instance of `MyNativeView`. Now the button can control which `MyNativeView` should change its `backgroundColor`. In this example let's assume that `callNativeMethod` changes `backgroundColor`.

MyNativeView.ios.tsx

```codeBlockLines_AclH
class MyNativeView extends React.Component {

UIManager.dispatchViewManagerCommand(
ReactNative.findNodeHandle(this),
UIManager.getViewManagerConfig('RNCMyNativeView').Commands
.callNativeMethod,
[],
);
};

render() {

}
}

`callNativeMethod` is our custom iOS method which for example changes the `backgroundColor` which is exposed through `MyNativeView`. This method uses `UIManager.dispatchViewManagerCommand` which needs 3 parameters:

- `(nonnull NSNumber \*)reactTag`  -  id of react view.
- `commandID:(NSInteger)commandID`  -  Id of the native method that should be called

RNCMyNativeViewManager.m

NativeView *view = viewRegistry[reactTag];\
if (!view || ![view isKindOfClass:[NativeView class]]) {\
RCTLogError(@"Cannot find NativeView with tag #%@", reactTag);\
return;\
}\
[view callNativeMethod];\
}];

Here the `callNativeMethod` is defined in the `RNCMyNativeViewManager.m` file and contains only one parameter which is `(nonnull NSNumber*) reactTag`. This exported function will find a particular view using `addUIBlock` which contains the `viewRegistry` parameter and returns the component based on `reactTag` allowing it to call the method on the correct component.

## Styles [​](https://reactnative.dev/docs/next/legacy/native-components-ios\#styles "Direct link to Styles")

Since all our native react views are subclasses of `UIView`, most style attributes will work like you would expect out of the box. Some components will want a default style, however, for example `UIDatePicker` which is a fixed size. This default style is important for the layout algorithm to work as expected, but we also want to be able to override the default style when using the component. `DatePickerIOS` does this by wrapping the native component in an extra view, which has flexible styling, and using a fixed style (which is generated with constants passed in from native) on the inner native component:

DatePickerIOS.ios.tsx

```codeBlockLines_AclH
import {UIManager} from 'react-native';
const RCTDatePickerIOSConsts = UIManager.RCTDatePicker.Constants;
...
render: function() {
return (

ref={DATEPICKER}
style={styles.rkDatePickerIOS}
...

}
});

const styles = StyleSheet.create({
rkDatePickerIOS: {
height: RCTDatePickerIOSConsts.ComponentHeight,
width: RCTDatePickerIOSConsts.ComponentWidth,
},
});

The `RCTDatePickerIOSConsts` constants are exported from native by grabbing the actual frame of the native component like so:

RCTDatePickerManager.m

```codeBlockLines_AclH
- (NSDictionary *)constantsToExport
{
UIDatePicker *dp = [[UIDatePicker alloc] init];
[dp layoutIfNeeded];

return @{
@"ComponentHeight": @(CGRectGetHeight(dp.frame)),
@"ComponentWidth": @(CGRectGetWidth(dp.frame)),
@"DatePickerModes": @{
@"time": @(UIDatePickerModeTime),
@"date": @(UIDatePickerModeDate),
@"datetime": @(UIDatePickerModeDateAndTime),
}
};
}

This guide covered many of the aspects of bridging over custom native components, but there is even more you might need to consider, such as custom hooks for inserting and laying out subviews. If you want to go even deeper, check out the [source code](https://github.com/facebook/react-native/tree/main/packages/react-native/React/Views) of some of the implemented components.

Is this page useful?

- [iOS MapView example](https://reactnative.dev/docs/next/legacy/native-components-ios#ios-mapview-example)
- [Properties](https://reactnative.dev/docs/next/legacy/native-components-ios#properties)
- [Events](https://reactnative.dev/docs/next/legacy/native-components-ios#events)
- [Handling multiple native views](https://reactnative.dev/docs/next/legacy/native-components-ios#handling-multiple-native-views)
- [Styles](https://reactnative.dev/docs/next/legacy/native-components-ios#styles)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/the-new-architecture/custom-cxx-types

[Skip to main content](https://reactnative.dev/docs/next/the-new-architecture/custom-cxx-types#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/the-new-architecture/custom-cxx-types)** (0.81).

Version: Next

On this page

note

This guide assumes that you are familiar with the [**Pure C++ Turbo Native Modules**](https://reactnative.dev/docs/next/the-new-architecture/pure-cxx-modules) guide. This will build on top of that guide.

C++ Turbo Native Modules support [bridging functionality](https://github.com/facebook/react-native/tree/main/packages/react-native/ReactCommon/react/bridging) for most `std::` standard types. You can use most of those types in your modules without any additional code required.

If you want to add support for new and custom types in your app or library, you need to provide the necessary `bridging` header file.

## Adding a New Custom: Int64 [​](https://reactnative.dev/docs/next/the-new-architecture/custom-cxx-types\#adding-a-new-custom-int64 "Direct link to Adding a New Custom: Int64")

C++ Turbo Native Modules don't support `int64_t` numbers yet - because JavaScript doesn't support numbers greater 2^53. To represent numbers greater than 2^53, we can use a `string` type in JS and automatically convert it to `int64_t` in C++.

### 1\. Create the Bridging Header file [​](https://reactnative.dev/docs/next/the-new-architecture/custom-cxx-types\#1-create-the-bridging-header-file "Direct link to 1. Create the Bridging Header file")

The first step to support a new custom type is to define the bridging header that takes care of converting the type **from** the JS representation to the C++ representation, and from the C++ representation **to** the JS one.

1. In the `shared` folder, add a new file called `Int64.h`
2. Add the following code to that file:

Int64.h

```codeBlockLines_AclH
#pragma once

// Converts from the JS representation to the C++ representation
static int64_t fromJs(jsi::Runtime &rt, const jsi::String &value) {
try {
size_t pos;
auto str = value.utf8(rt);
auto num = std::stoll(str, &pos);
if (pos != str.size()) {
throw std::invalid_argument("Invalid number"); // don't support alphanumeric strings
}
return num;
} catch (const std::logic_error &e) {
throw jsi::JSError(rt, e.what());
}
}

// Converts from the C++ representation to the JS representation
static jsi::String toJs(jsi::Runtime &rt, int64_t value) {
return bridging::toJs(rt, std::to_string(value));
}
};

}

The key components for your custom bridging header are:

- Explicit specialization of the `Bridging` struct for your custom type. In this case, the template specify the `int64_t` type.
- A `fromJs` function to convert from the JS representation to the C++ representation
- A `toJs` function to convert from the C++ representation to the JS representation

On iOS, remember to add the `Int64.h` file to the Xcode project.

### 2\. Modify the JS Spec [​](https://reactnative.dev/docs/next/the-new-architecture/custom-cxx-types\#2-modify-the-js-spec "Direct link to 2. Modify the JS Spec")

Now, we can modify the JS spec to add a method that uses the new type. As usual, we can use either Flow or TypeScript for our specs.

1. Open the `specs/NativeSampleTurbomodule`
2. Modify the spec as follows:

- TypeScript
- Flow

NativeSampleModule.ts

```codeBlockLines_AclH
import {TurboModule, TurboModuleRegistry} from 'react-native';

export interface Spec extends TurboModule {

'NativeSampleModule',
);

NativeSampleModule.js

```codeBlockLines_AclH
// @flow
import type {TurboModule} from 'react-native';
import { TurboModuleRegistry } from "react-native";

"NativeSampleModule"
): Spec);

In this files, we are defining the function that needs to be implemented in C++.

### 3\. Implement the Native Code [​](https://reactnative.dev/docs/next/the-new-architecture/custom-cxx-types\#3-implement-the-native-code "Direct link to 3. Implement the Native Code")

Now, we need to implement the function that we declared in the JS specification.

1. Open the `specs/NativeSampleModule.h` file and apply the following changes:

NativeSampleModule.h

#pragma once

namespace facebook::react {

public:

std::string reverseString(jsi::Runtime& rt, std::string input);
+ int32_t cubicRoot(jsi::Runtime& rt, int64_t input);
};

} // namespace facebook::react

2. Open the `specs/NativeSampleModule.cpp` file and apply the implement the new function:

NativeSampleModule.cpp

#include "NativeSampleModule.h"

: NativeSampleModuleCxxSpec(std::move(jsInvoker)) {}

std::string NativeSampleModule::reverseString(jsi::Runtime& rt, std::string input) {
return std::string(input.rbegin(), input.rend());
}

+int32_t NativeSampleModule::cubicRoot(jsi::Runtime& rt, int64_t input) {
+ return std::cbrt(input);
+}

### 4\. Test your code in Your App [​](https://reactnative.dev/docs/next/the-new-architecture/custom-cxx-types\#4-test-your-code-in-your-app "Direct link to 4. Test your code in Your App")

Now, we can test the code in our app.

First, we need to update the `App.tsx` file to use the new method from the TurboModule. Then, we can build our apps in Android and iOS.

1. Open the `App.tsx` code apply the following changes:

App.tsx

```codeBlockLines_AclH
// ...
+ const [cubicSource, setCubicSource] = React.useState('')
+ const [cubicRoot, setCubicRoot] = React.useState(0)
return (

style={styles.textInput}
placeholder="Write your text here"
onChangeText={setValue}
value={value}

+ style={styles.textInput}
+ placeholder="Write your text here"
+ onChangeText={setCubicSource}
+ value={cubicSource}

}
//...

2. To test the app on Android, run `yarn android` from the root folder of your project.
3. To test the app on iOS, run `yarn ios` from the root folder of your project.

## Adding a New Structured Custom Type: Address [​](https://reactnative.dev/docs/next/the-new-architecture/custom-cxx-types\#adding-a-new-structured-custom-type-address "Direct link to Adding a New Structured Custom Type: Address")

The approach above can be generalized to any kind of type. For structured types, React Native provides some helper functions that make it easier to bridge them from JS to C++ and vice versa.

Let's assume that we want to bridge a custom `Address` type with the following properties:

ts

```codeBlockLines_AclH
interface Address {
street: string;
num: number;
isInUS: boolean;
}

### 1\. Define the type in the specs [​](https://reactnative.dev/docs/next/the-new-architecture/custom-cxx-types\#1-define-the-type-in-the-specs "Direct link to 1. Define the type in the specs")

For the first step, let's define the new custom type in the JS specs, so that Codegen can output all the supporting code. In this way, we don't have to manually write the code.

1. Open the `specs/NativeSampleModule` file and add the following changes.

NativeSampleModule (Add Address type and validateAddress function)

+export type Address = {
+ street: string,
+ num: number,
+ isInUS: boolean,
+};

// @flow
import type {TurboModule} from 'react-native';
import { TurboModuleRegistry } from "react-native";

This code defines the new `Address` type and defines a new `validateAddress` function for the Turbo Native Module. Notice that the `validateFunction` requires an `Address` object as parameter.

It is also possible to have functions that return custom types.

### 2\. Define the bridging code [​](https://reactnative.dev/docs/next/the-new-architecture/custom-cxx-types\#2-define-the-bridging-code "Direct link to 2. Define the bridging code")

From the `Address` type defined in the specs, Codegen will generate two helper types: `NativeSampleModuleAddress` and `NativeSampleModuleAddressBridging`.

The first type is the definition of the `Address`. The second type contains all the infrastructure to bridge the custom type from JS to C++ and vice versa. The only extra step we need to add is to define the `Bridging` structure that extends the `NativeSampleModuleAddressBridging` type.

1. Open the `shared/NativeSampleModule.h` file
2. Add the following code in the file:

NativeSampleModule.h (Bridging the Address type)

#include "Int64.h"

// ...
}

This code defines an `Address` typealias for the generic type `NativeSampleModuleAddress`. **The order of the generics matters**: the first template argument refers to the first data type of the struct, the second refers to the second, and so forth.

Then, the code adds the `Bridging` specialization for the new `Address` type, by extending `NativeSampleModuleAddressBridging` that is generated by Codegen.

There is a convention that is followed to generate this types:

- The first part of the name is always the type of the module. `NativeSampleModule`, in this example.
- The second part of the name is always the name of the JS type defined in the specs. `Address`, in this example.

### 3\. Implement the Native Code [​](https://reactnative.dev/docs/next/the-new-architecture/custom-cxx-types\#3-implement-the-native-code-1 "Direct link to 3. Implement the Native Code")

Now, we need to implement the `validateAddress` function in C++. First, we need to add the function declaration into the `.h` file, and then we can implement it in the `.cpp` file.

1. Open the `shared/NativeSampleModule.h` file and add the function definition

NativeSampleModule.h (validateAddress function prototype)

```codeBlockLines_AclH
std::string reverseString(jsi::Runtime& rt, std::string input);

+ bool validateAddress(jsi::Runtime &rt, jsi::Object input);
};

2. Open the `shared/NativeSampleModule.cpp` file and add the function implementation

NativeSampleModule.cpp (validateAddress implementation)

```codeBlockLines_AclH
bool NativeSampleModule::validateAddress(jsi::Runtime &rt, jsi::Object input) {
std::string street = input.getProperty(rt, "street").asString(rt).utf8(rt);
int32_t number = input.getProperty(rt, "num").asNumber();

In the implementation, the object that represents the `Address` is a `jsi::Object`. To extract the values from this object, we need to use the accessors provided by `JSI`:

- `getProperty()` retrieves the property from and object by name.
- `asString()` converts the property to `jsi::String`.
- `utf8()` converts the `jsi::String` to a `std::string`.
- `asNumber()` converts the property to a `double`.

Once we manually parsed the object, we can implement the logic that we need.

If you want to learn more about `JSI` and how it works, have a look at this [great talk](https://youtu.be/oLmGInjKU2U?feature=shared) from App.JS 2024

### 4\. Testing the code in the app [​](https://reactnative.dev/docs/next/the-new-architecture/custom-cxx-types\#4-testing-the-code-in-the-app "Direct link to 4. Testing the code in the app")

To test the code in the app, we have to modify the `App.tsx` file.

1. Open the `App.tsx` file. Remove the content of the `App()` function.
2. Replace the body of the `App()` function with the following code:

App.tsx (App function body replacement)

```codeBlockLines_AclH
const [street, setStreet] = React.useState('');
const [num, setNum] = React.useState('');
const [isValidAddress, setIsValidAddress] = React.useState<

let houseNum = parseInt(num, 10);
if (isNaN(houseNum)) {
houseNum = -1;
}
const address = {
street,
num: houseNum,
isInUS: false,
};
const result = SampleTurboModule.validateAddress(address);
setIsValidAddress(result);
};

return (

style={styles.textInput}
placeholder="Write your address here"
onChangeText={setStreet}
value={street}

style={styles.textInput}
placeholder="Write your address here"
onChangeText={setNum}
value={num}

Congratulation! 🎉

You bridged your first types from JS to C++.

Is this page useful?

- [Adding a New Custom: Int64](https://reactnative.dev/docs/next/the-new-architecture/custom-cxx-types#adding-a-new-custom-int64)
- [1\. Create the Bridging Header file](https://reactnative.dev/docs/next/the-new-architecture/custom-cxx-types#1-create-the-bridging-header-file)
- [2\. Modify the JS Spec](https://reactnative.dev/docs/next/the-new-architecture/custom-cxx-types#2-modify-the-js-spec)
- [3\. Implement the Native Code](https://reactnative.dev/docs/next/the-new-architecture/custom-cxx-types#3-implement-the-native-code)
- [4\. Test your code in Your App](https://reactnative.dev/docs/next/the-new-architecture/custom-cxx-types#4-test-your-code-in-your-app)
- [Adding a New Structured Custom Type: Address](https://reactnative.dev/docs/next/the-new-architecture/custom-cxx-types#adding-a-new-structured-custom-type-address)
- [1\. Define the type in the specs](https://reactnative.dev/docs/next/the-new-architecture/custom-cxx-types#1-define-the-type-in-the-specs)
- [2\. Define the bridging code](https://reactnative.dev/docs/next/the-new-architecture/custom-cxx-types#2-define-the-bridging-code)
- [3\. Implement the Native Code](https://reactnative.dev/docs/next/the-new-architecture/custom-cxx-types#3-implement-the-native-code-1)
- [4\. Testing the code in the app](https://reactnative.dev/docs/next/the-new-architecture/custom-cxx-types#4-testing-the-code-in-the-app)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/segmentedcontrolios

[Skip to main content](https://reactnative.dev/docs/next/segmentedcontrolios#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/segmentedcontrolios)** (0.81).

Version: Next

Removed from React Native

Use one of the [community packages](https://reactnative.directory/?search=segmentedcontrol) instead.

* * *

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/touchablenativefeedback

[Skip to main content](https://reactnative.dev/docs/next/touchablenativefeedback#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/touchablenativefeedback)** (0.81).

Version: Next

On this page

tip

If you're looking for a more extensive and future-proof way to handle touch-based input, check out the [Pressable](https://reactnative.dev/docs/next/pressable) API.

A wrapper for making views respond properly to touches (Android only). On Android this component uses native state drawable to display touch feedback.

At the moment it only supports having a single View instance as a child node, as it's implemented by replacing that View with another instance of RCTView node with some additional properties set.

Background drawable of native feedback touchable can be customized with `background` property.

## Example [​](https://reactnative.dev/docs/next/touchablenativefeedback\#example "Direct link to Example")

TouchableNativeFeedback Android Component Example - Snack

# TouchableNativeFeedback Android Component Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React, {useState} from 'react';
import {Text, View, StyleSheet, TouchableNativeFeedback} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const \[rippleColor, setRippleColor\] = useState(randomHexColor());
const \[rippleOverflow, setRippleOverflow\] = useState(false);
return (

setRippleColor(randomHexColor());
setRippleOverflow(!rippleOverflow);
}}
background={TouchableNativeFeedback.Ripple(
rippleColor,
rippleOverflow,

};

return '#000000'.replace(/0/g, function () {
return Math.round(Math.random() \* 16).toString(16);
});
};

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
backgroundColor: 'black',
paddingHorizontal: 20,
},
touchable: {
flex: 0.33,
justifyContent: 'center',
backgroundColor: '#eeeeee',
borderColor: 'black',
borderWidth: 1,
},
text: {
alignSelf: 'center',
},
});

export default App;

const [rippleColor, setRippleColor] = useState(randomHexColor());
const [rippleOverflow, setRippleOverflow] = useState(false);
return (

setRippleColor(randomHexColor());
setRippleOverflow(!rippleOverflow);
}}
background={TouchableNativeFeedback.Ripple(
rippleColor,
rippleOverflow,

return '#000000'.replace(/0/g, function () {
return Math.round(Math.random() * 16).toString(16);
});
};

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
backgroundColor: 'black',
paddingHorizontal: 20,
},
touchable: {
flex: 0.33,
justifyContent: 'center',
backgroundColor: '#eeeeee',
borderColor: 'black',
borderWidth: 1,
},
text: {
alignSelf: 'center',
},
});

### Download [Expo Go](https://expo.dev/client) and scan the QR code to get started.

exp://u.expo.dev/933fd9c0-1666-11e7-afca-d980795c5824?runtime-version=exposdk%3A53.0.0&channel-name=production&snack-channel=xQ0Ij5G7Fx

### Connected devices

0

[Log in](https://expo.dev/login) to open this Snack from Expo Go on your device or simulator.

PreviewMy DeviceAndroid

* * *

# Reference

## Props [​](https://reactnative.dev/docs/next/touchablenativefeedback\#props "Direct link to Props")

### [TouchableWithoutFeedback Props](https://reactnative.dev/docs/next/touchablewithoutfeedback\#props) [​](https://reactnative.dev/docs/next/touchablenativefeedback\#touchablewithoutfeedback-props "Direct link to touchablewithoutfeedback-props")

Inherits [TouchableWithoutFeedback Props](https://reactnative.dev/docs/next/touchablewithoutfeedback#props).

### `background` [​](https://reactnative.dev/docs/next/touchablenativefeedback\#background "Direct link to background")

Determines the type of background drawable that's going to be used to display feedback. It takes an object with `type` property and extra data depending on the `type`. It's recommended to use one of the static methods to generate that dictionary.

| Type |
| --- |
| backgroundPropType |

### `useForeground` [​](https://reactnative.dev/docs/next/touchablenativefeedback\#useforeground "Direct link to useforeground")

Set to true to add the ripple effect to the foreground of the view, instead of the background. This is useful if one of your child views has a background of its own, or you're e.g. displaying images, and you don't want the ripple to be covered by them.

Check TouchableNativeFeedback.canUseNativeForeground() first, as this is only available on Android 6.0 and above. If you try to use this on older versions you will get a warning and fall

TV preferred focus (see documentation for the View component).

| Type |
| --- |
| bool |

### `nextFocusDown` Android [​](https://reactnative.dev/docs/next/touchablenativefeedback\#nextfocusdown-android "Direct link to nextfocusdown-android")

TV next focus down (see documentation for the View component).

| Type |
| --- |
| number |

### `nextFocusForward` Android [​](https://reactnative.dev/docs/next/touchablenativefeedback\#nextfocusforward-android "Direct link to nextfocusforward-android")

TV next focus forward (see documentation for the View component).

### `nextFocusLeft` Android [​](https://reactnative.dev/docs/next/touchablenativefeedback\#nextfocusleft-android "Direct link to nextfocusleft-android")

TV next focus left (see documentation for the View component).

### `nextFocusRight` Android [​](https://reactnative.dev/docs/next/touchablenativefeedback\#nextfocusright-android "Direct link to nextfocusright-android")

TV next focus right (see documentation for the View component).

### `nextFocusUp` Android [​](https://reactnative.dev/docs/next/touchablenativefeedback\#nextfocusup-android "Direct link to nextfocusup-android")

TV next focus up (see documentation for the View component).

## Methods [​](https://reactnative.dev/docs/next/touchablenativefeedback\#methods "Direct link to Methods")

### `SelectableBackground()` [​](https://reactnative.dev/docs/next/touchablenativefeedback\#selectablebackground "Direct link to selectablebackground")

tsx

```codeBlockLines_AclH
static SelectableBackground(
rippleRadius: number | null,
): ThemeAttributeBackgroundPropType;

Creates an object that represents android theme's default background for selectable elements ( `?android:attr/selectableItemBackground`). `rippleRadius` parameter controls the radius of the ripple effect.

### `SelectableBackgroundBorderless()` [​](https://reactnative.dev/docs/next/touchablenativefeedback\#selectablebackgroundborderless "Direct link to selectablebackgroundborderless")

```codeBlockLines_AclH
static SelectableBackgroundBorderless(
rippleRadius: number | null,
): ThemeAttributeBackgroundPropType;

Creates an object that represent android theme's default background for borderless selectable elements ( `?android:attr/selectableItemBackgroundBorderless`). Available on android API level 21+. `rippleRadius` parameter controls the radius of the ripple effect.

### `Ripple()` [​](https://reactnative.dev/docs/next/touchablenativefeedback\#ripple "Direct link to ripple")

```codeBlockLines_AclH
static Ripple(
color: ColorValue,
borderless: boolean,
rippleRadius?: number | null,
): RippleBackgroundPropType;

Creates an object that represents ripple drawable with specified color (as a string). If property `borderless` evaluates to true the ripple will render outside of the view bounds (see native actionbar buttons as an example of that behavior). This background type is available on Android API level 21+.

**Parameters:**

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| color | string | Yes | The ripple color |
| borderless | boolean | Yes | If the ripple can render outside its bounds |
| rippleRadius | ?number | No | controls the radius of the ripple effect |

### `canUseNativeForeground()` [​](https://reactnative.dev/docs/next/touchablenativefeedback\#canusenativeforeground "Direct link to canusenativeforeground")

```codeBlockLines_AclH
static canUseNativeForeground(): boolean;

Is this page useful?

- [Example](https://reactnative.dev/docs/next/touchablenativefeedback#example)
- [Props](https://reactnative.dev/docs/next/touchablenativefeedback#props)
- [TouchableWithoutFeedback Props](https://reactnative.dev/docs/next/touchablenativefeedback#touchablewithoutfeedback-props)
- [`background`](https://reactnative.dev/docs/next/touchablenativefeedback#background)
- [`useForeground`](https://reactnative.dev/docs/next/touchablenativefeedback#useforeground)
- [`hasTVPreferredFocus` \\
Android](https://reactnative.dev/docs/next/touchablenativefeedback#hastvpreferredfocus-android)
- [`nextFocusDown` \\
Android](https://reactnative.dev/docs/next/touchablenativefeedback#nextfocusdown-android)
- [`nextFocusForward` \\
Android](https://reactnative.dev/docs/next/touchablenativefeedback#nextfocusforward-android)
- [`nextFocusLeft` \\
Android](https://reactnative.dev/docs/next/touchablenativefeedback#nextfocusleft-android)
- [`nextFocusRight` \\
Android](https://reactnative.dev/docs/next/touchablenativefeedback#nextfocusright-android)
- [`nextFocusUp` \\
Android](https://reactnative.dev/docs/next/touchablenativefeedback#nextfocusup-android)
- [Methods](https://reactnative.dev/docs/next/touchablenativefeedback#methods)
- [`SelectableBackground()`](https://reactnative.dev/docs/next/touchablenativefeedback#selectablebackground)
- [`SelectableBackgroundBorderless()`](https://reactnative.dev/docs/next/touchablenativefeedback#selectablebackgroundborderless)
- [`Ripple()`](https://reactnative.dev/docs/next/touchablenativefeedback#ripple)
- [`canUseNativeForeground()`](https://reactnative.dev/docs/next/touchablenativefeedback#canusenativeforeground)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/refreshcontrol

[Skip to main content](https://reactnative.dev/docs/next/refreshcontrol#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/refreshcontrol)** (0.81).

Version: Next

On this page

This component is used inside a ScrollView or ListView to add pull to refresh functionality. When the ScrollView is at `scrollY: 0`, swiping down triggers an `onRefresh` event.

## Example [​](https://reactnative.dev/docs/next/refreshcontrol\#example "Direct link to Example")

RefreshControl - Snack

# RefreshControl

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {RefreshControl, ScrollView, StyleSheet, Text} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const \[refreshing, setRefreshing\] = React.useState(false);

setRefreshing(true);

setRefreshing(false);
}, 2000);
}, \[\]);

return (

contentContainerStyle={styles.scrollView}
refreshControl={

};

const styles = StyleSheet.create({
container: {
flex: 1,
},
scrollView: {
flex: 1,
backgroundColor: 'pink',
alignItems: 'center',
justifyContent: 'center',
},
});

export default App;

const [refreshing, setRefreshing] = React.useState(false);

setRefreshing(false);
}, 2000);
}, []);

contentContainerStyle={styles.scrollView}
refreshControl={

const styles = StyleSheet.create({
container: {
flex: 1,
},
scrollView: {
flex: 1,
backgroundColor: 'pink',
alignItems: 'center',
justifyContent: 'center',
},
});

### Download [Expo Go](https://expo.dev/client) and scan the QR code to get started.

exp://u.expo.dev/933fd9c0-1666-11e7-afca-d980795c5824?runtime-version=exposdk%3A53.0.0&channel-name=production&snack-channel=hupjj0fWZp

### Connected devices

0

[Log in](https://expo.dev/login) to open this Snack from Expo Go on your device or simulator.

PreviewMy DeviceAndroidiOS

note

`refreshing` is a controlled prop, this is why it needs to be set to `true` in the `onRefresh` function otherwise the refresh indicator will stop immediately.

* * *

# Reference

## Props [​](https://reactnative.dev/docs/next/refreshcontrol\#props "Direct link to Props")

### [View Props](https://reactnative.dev/docs/next/view\#props) [​](https://reactnative.dev/docs/next/refreshcontrol\#view-props "Direct link to view-props")

Inherits [View Props](https://reactnative.dev/docs/next/view#props).

### Required **`refreshing`** [​](https://reactnative.dev/docs/next/refreshcontrol\#requiredrefreshing "Direct link to requiredrefreshing")

Whether the view should be indicating an active refresh.

| Type |
| --- |
| boolean |

### `colors` Android [​](https://reactnative.dev/docs/next/refreshcontrol\#colors-android "Direct link to colors-android")

The colors (at least one) that will be used to draw the refresh indicator.

| Type |
| --- |
| array of [colors](https://reactnative.dev/docs/next/colors) |

### `enabled` Android [​](https://reactnative.dev/docs/next/refreshcontrol\#enabled-android "Direct link to enabled-android")

Whether the pull to refresh functionality is enabled.

| Type | Default |
| --- | --- |
| boolean | `true` |

### `onRefresh` [​](https://reactnative.dev/docs/next/refreshcontrol\#onrefresh "Direct link to onrefresh")

Called when the view starts refreshing.

| Type |
| --- |
| function |

### `progressBackgroundColor` Android [​](https://reactnative.dev/docs/next/refreshcontrol\#progressbackgroundcolor-android "Direct link to progressbackgroundcolor-android")

The background color of the refresh indicator.

| Type |
| --- |
| [color](https://reactnative.dev/docs/next/colors) |

### `progressViewOffset` [​](https://reactnative.dev/docs/next/refreshcontrol\#progressviewoffset "Direct link to progressviewoffset")

Progress view top offset.

| Type | Default |
| --- | --- |
| number | `0` |

### `size` Android [​](https://reactnative.dev/docs/next/refreshcontrol\#size-android "Direct link to size-android")

Size of the refresh indicator.

| Type | Default |
| --- | --- |
| enum( `'default'`, `'large'`) | `'default'` |

### `tintColor` iOS [​](https://reactnative.dev/docs/next/refreshcontrol\#tintcolor-ios "Direct link to tintcolor-ios")

The color of the refresh indicator.

### `title` iOS [​](https://reactnative.dev/docs/next/refreshcontrol\#title-ios "Direct link to title-ios")

The title displayed under the refresh indicator.

| Type |
| --- |
| string |

### `titleColor` iOS [​](https://reactnative.dev/docs/next/refreshcontrol\#titlecolor-ios "Direct link to titlecolor-ios")

The color of the refresh indicator title.

Is this page useful?

- [Example](https://reactnative.dev/docs/next/refreshcontrol#example)
- [Props](https://reactnative.dev/docs/next/refreshcontrol#props)
- [View Props](https://reactnative.dev/docs/next/refreshcontrol#view-props)
- [Required\\
**`refreshing`**](https://reactnative.dev/docs/next/refreshcontrol#requiredrefreshing)
- [`colors` \\
Android](https://reactnative.dev/docs/next/refreshcontrol#colors-android)
- [`enabled` \\
Android](https://reactnative.dev/docs/next/refreshcontrol#enabled-android)
- [`onRefresh`](https://reactnative.dev/docs/next/refreshcontrol#onrefresh)
- [`progressBackgroundColor` \\
Android](https://reactnative.dev/docs/next/refreshcontrol#progressbackgroundcolor-android)
- [`progressViewOffset`](https://reactnative.dev/docs/next/refreshcontrol#progressviewoffset)
- [`size` \\
Android](https://reactnative.dev/docs/next/refreshcontrol#size-android)
- [`tintColor` \\
iOS](https://reactnative.dev/docs/next/refreshcontrol#tintcolor-ios)
- [`title` \\
iOS](https://reactnative.dev/docs/next/refreshcontrol#title-ios)
- [`titleColor` \\
iOS](https://reactnative.dev/docs/next/refreshcontrol#titlecolor-ios)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/transforms

[Skip to main content](https://reactnative.dev/docs/next/transforms#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/transforms)** (0.81).

Version: Next

On this page

Transforms are style properties that will help you modify the appearance and position of your components using 2D or 3D transformations. However, once you apply transforms, the layouts remain the same around the transformed component hence it might overlap with the nearby components. You can apply margin to the transformed component, the nearby components or padding to the container to prevent such overlaps.

## Example [​](https://reactnative.dev/docs/next/transforms\#example "Direct link to Example")

Transforms Example - Snack

# Transforms Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {ScrollView, StyleSheet, Text, View} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

style={\[\
styles.box,\
{\
transform: \[{scale: 2}\],\
},\

style={\[\
styles.box,\
{\
transform: \[{scaleX: 2}\],\
},\

style={\[\
styles.box,\
{\
transform: \[{scaleY: 2}\],\
},\

style={\[\
styles.box,\
{\
transform: \[{rotate: '45deg'}\],\
},\

style={\[\
styles.box,\
{\
transform: \[{rotateX: '45deg'}, {rotateZ: '45deg'}\],\
},\

style={\[\
styles.box,\
{\
transform: \[{rotateY: '45deg'}, {rotateZ: '45deg'}\],\
},\

style={\[\
styles.box,\
{\
transform: \[{skewX: '45deg'}\],\
},\

style={\[\
styles.box,\
{\
transform: \[{skewY: '45deg'}\],\
},\

style={\[\
styles.box,\
{\
transform: \[{skewX: '30deg'}, {skewY: '30deg'}\],\
},\

style={\[\
styles.box,\
{\
transform: \[{translateX: -50}\],\
},\

style={\[\
styles.box,\
{\
transform: \[{translateY: 50}\],\
},\

const styles = StyleSheet.create({
container: {
flex: 1,
},
scrollContentContainer: {
alignItems: 'center',
paddingBottom: 60,
},
box: {
height: 100,
width: 100,
borderRadius: 5,
marginVertical: 40,
backgroundColor: '#61dafb',
alignItems: 'center',
justifyContent: 'center',
},
text: {
fontSize: 14,
fontWeight: 'bold',
margin: 8,
color: '#000',
textAlign: 'center',
},
});

export default App;

style={[\
styles.box,\
{\
transform: [{scale: 2}],\
},\

style={[\
styles.box,\
{\
transform: [{scaleX: 2}],\
},\

style={[\
styles.box,\
{\
transform: [{scaleY: 2}],\
},\

style={[\
styles.box,\
{\
transform: [{rotate: '45deg'}],\
},\

style={[\
styles.box,\
{\
transform: [{rotateX: '45deg'}, {rotateZ: '45deg'}],\
},\

style={[\
styles.box,\
{\
transform: [{rotateY: '45deg'}, {rotateZ: '45deg'}],\
},\

style={[\
styles.box,\
{\
transform: [{skewX: '45deg'}],\
},\

style={[\
styles.box,\
{\
transform: [{skewY: '45deg'}],\
},\

style={[\
styles.box,\
{\
transform: [{skewX: '30deg'}, {skewY: '30deg'}],\
},\

style={[\
styles.box,\
{\
transform: [{translateX: -50}],\
},\

style={[\
styles.box,\
{\
transform: [{translateY: 50}],\
},\

const styles = StyleSheet.create({
container: {
flex: 1,
},
scrollContentContainer: {
alignItems: 'center',
paddingBottom: 60,
},
box: {
height: 100,
width: 100,
borderRadius: 5,
marginVertical: 40,
backgroundColor: '#61dafb',
alignItems: 'center',
justifyContent: 'center',
},
text: {
fontSize: 14,
fontWeight: 'bold',
margin: 8,
color: '#000',
textAlign: 'center',
},
});

Snack

Original Object

Scale by 2

ScaleX by 2

ScaleY by 2

Rotate by 45 deg

Rotate X&Z by 45 deg

Rotate Y&Z by 45 deg

SkewX by 45 deg

SkewY by 45 deg

Skew X&Y by 30 deg

TranslateX by -50

TranslateY by 50

Updating…

PreviewMy DeviceAndroidiOSWeb

* * *

# Reference

## Transform [​](https://reactnative.dev/docs/next/transforms\#transform "Direct link to Transform")

`transform` accepts an array of transformation objects or space-separated string values. Each object specifies the property that will be transformed as the key, and the value to use in the transformation. Objects should not be combined. Use a single key/value pair per object.

The rotate transformations require a string so that the transform may be expressed in degrees (deg) or radians (rad). For example:

js

```codeBlockLines_AclH
{
transform: [{rotateX: '45deg'}, {rotateZ: '0.785398rad'}],
}

The same could also be achieved using a space-separated string:

```codeBlockLines_AclH
{
transform: 'rotateX(45deg) rotateZ(0.785398rad)',
}

The skew transformations require a string so that the transform may be expressed in degrees (deg). For example:

```codeBlockLines_AclH
{
transform: [{skewX: '45deg'}],
}

| Type | Required |
| --- | --- |
| array of objects: `{matrix: number[]}`, `{perspective: number}`, `{rotate: string}`, `{rotateX: string}`, `{rotateY: string}`, `{rotateZ: string}`, `{scale: number}`, `{scaleX: number}`, `{scaleY: number}`, `{translateX: number}`, `{translateY: number}`, `{skewX: string}`, `{skewY: string}` or string | No |

### `decomposedMatrix`, `rotation`, `scaleX`, `scaleY`, `transformMatrix`, `translateX`, `translateY` [​](https://reactnative.dev/docs/next/transforms\#decomposedmatrix-rotation-scalex-scaley-transformmatrix-translatex-translatey "Direct link to decomposedmatrix-rotation-scalex-scaley-transformmatrix-translatex-translatey")

Deprecated

Use the [`transform`](https://reactnative.dev/docs/next/transforms#transform) prop instead.

## Transform Origin [​](https://reactnative.dev/docs/next/transforms\#transform-origin "Direct link to Transform Origin")

The `transformOrigin` property sets the origin for a view's transformations. The transform origin is the point around which a transformation is applied. By default, the origin of a transform is `center`.

# Example

TransformOrigin Example - Snack

# TransformOrigin Example

import React, {useEffect, useRef} from 'react';
import {Animated, View, StyleSheet, Easing} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const rotateAnim = useRef(new Animated.Value(0)).current;

Animated.loop(
Animated.timing(rotateAnim, {
toValue: 1,
duration: 5000,
easing: Easing.linear,
useNativeDriver: true,
}),
).start();
}, \[rotateAnim\]);

const spin = rotateAnim.interpolate({
inputRange: \[0, 1\],
outputRange: \['0deg', '360deg'\],
});

return (

style={\[\
styles.transformOriginView,\
{\
transform: \[{rotate: spin}\],\
},\
\]}

};

const styles = StyleSheet.create({
container: {
flex: 1,
alignItems: 'center',
justifyContent: 'center',
},
transformOriginWrapper: {
borderWidth: 1,
borderColor: 'rgba(0, 0, 0, 0.5)',
},
transformOriginView: {
backgroundColor: 'pink',
width: 100,
height: 100,
transformOrigin: 'top',
},
});

Animated.loop(
Animated.timing(rotateAnim, {
toValue: 1,
duration: 5000,
easing: Easing.linear,
useNativeDriver: true,
}),
).start();
}, [rotateAnim]);

const spin = rotateAnim.interpolate({
inputRange: [0, 1],
outputRange: ['0deg', '360deg'],
});

style={[\
styles.transformOriginView,\
{\
transform: [{rotate: spin}],\
},\
]}

const styles = StyleSheet.create({
container: {
flex: 1,
alignItems: 'center',
justifyContent: 'center',
},
transformOriginWrapper: {
borderWidth: 1,
borderColor: 'rgba(0, 0, 0, 0.5)',
},
transformOriginView: {
backgroundColor: 'pink',
width: 100,
height: 100,
transformOrigin: 'top',
},
});

### Values [​](https://reactnative.dev/docs/next/transforms\#values "Direct link to Values")

Transform origin supports `px`, `percentage` and keywords `top`, `left`, `right`, `bottom`, `center` values.

The `transformOrigin` property may be specified using one, two, or three values, where each value represents an offset.

#### One-value syntax: [​](https://reactnative.dev/docs/next/transforms\#one-value-syntax "Direct link to One-value syntax:")

- The value must be a `px`, a `percentage`, or one of the keywords `left`, `center`, `right`, `top`, and `bottom`.

```codeBlockLines_AclH
{
transformOrigin: '20px',
transformOrigin: 'bottom',
}

#### Two-value syntax: [​](https://reactnative.dev/docs/next/transforms\#two-value-syntax "Direct link to Two-value syntax:")

- First value (x-offset) must be a `px`, a `percentage`, or one of the keywords `left`, `center`, and `right`.
- The second value (y-offset) must be a `px`, a `percentage`, or one of the keywords `top`, `center`, and `bottom`.

```codeBlockLines_AclH
{
transformOrigin: '10px 2px',
transformOrigin: 'left top',
transformOrigin: 'top right',
}

#### Three-value syntax: [​](https://reactnative.dev/docs/next/transforms\#three-value-syntax "Direct link to Three-value syntax:")

- The first two values are the same as for the two-value syntax.
- The third value (z-offset) must be a `px`. It always represents the Z offset.

```codeBlockLines_AclH
{
transformOrigin: '2px 30% 10px',
transformOrigin: 'right bottom 20px',
}

#### Array syntax [​](https://reactnative.dev/docs/next/transforms\#array-syntax "Direct link to Array syntax")

`transformOrigin` also supports an array syntax. It makes it convenient to use it with Animated APIs. It also avoids string parsing, so should be more efficient.

```codeBlockLines_AclH
{
// Using numeric values
transformOrigin: [10, 30, 40],
// Mixing numeric and percentage values
transformOrigin: [10, '20%', 0],
}

You may refer to MDN's guide on [Transform origin](https://developer.mozilla.org/en-US/docs/Web/CSS/transform-origin) for additional information.

Is this page useful?

- [Example](https://reactnative.dev/docs/next/transforms#example)
- [Transform](https://reactnative.dev/docs/next/transforms#transform)
- [`decomposedMatrix`, `rotation`, `scaleX`, `scaleY`, `transformMatrix`, `translateX`, `translateY`](https://reactnative.dev/docs/next/transforms#decomposedmatrix-rotation-scalex-scaley-transformmatrix-translatex-translatey)
- [Transform Origin](https://reactnative.dev/docs/next/transforms#transform-origin)
- [Values](https://reactnative.dev/docs/next/transforms#values)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/publishing-to-app-store

[Skip to main content](https://reactnative.dev/docs/next/publishing-to-app-store#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/publishing-to-app-store)** (0.81).

Version: Next

On this page

The publishing process is the same as any other native iOS app, with some additional considerations to take into account.

info

If you are using Expo, read the Expo guide for [Deploying to App Stores](https://docs.expo.dev/distribution/app-stores/) to build and submit your app for the Apple App Store. This guide works with any React Native app to automate the deployment process.

### 1\. Configure release scheme [​](https://reactnative.dev/docs/next/publishing-to-app-store\#1-configure-release-scheme "Direct link to 1. Configure release scheme")

Building an app for distribution in the App Store requires using the `Release` scheme in Xcode. Apps built for `Release` will automatically disable the in-app Dev Menu, which will prevent your users from inadvertently accessing the menu in production. It will also bundle the JavaScript locally, so you can put the app on a device and test whilst not connected to the computer.

To configure your app to be built using the `Release` scheme, go to **Product** → **Scheme** → **Edit Scheme**. Select the **Run** tab in the sidebar, then set the Build Configuration dropdown to `Release`.

#### Pro Tips [​](https://reactnative.dev/docs/next/publishing-to-app-store\#pro-tips "Direct link to Pro Tips")

As your App Bundle grows in size, you may start to see a blank screen flash between your splash screen and the display of your root application view. If this is the case, you can add the following code to `AppDelegate.m` in order to keep your splash screen displayed during the transition.

objectivec

```codeBlockLines_AclH
// Place this code after "[self.window makeKeyAndVisible]" and before "return YES;"
UIStoryboard *sb = [UIStoryboard storyboardWithName:@"LaunchScreen" bundle:nil];
UIViewController *vc = [sb instantiateInitialViewController];
rootView.loadingView = vc.view;

The static bundle is built every time you target a physical device, even in Debug. If you want to save time, turn off bundle generation in Debug by adding the following to your shell script in the Xcode Build Phase `Bundle React Native code and images`:

shell

```codeBlockLines_AclH
if [ "${CONFIGURATION}" == "Debug" ]; then
export SKIP_BUNDLING=true
fi

### 2\. Build app for release [​](https://reactnative.dev/docs/next/publishing-to-app-store\#2-build-app-for-release "Direct link to 2. Build app for release")

You can now build your app for release by tapping `Cmd ⌘` \+ `B` or selecting **Product** → **Build** from the menu bar. Once built for release, you'll be able to distribute the app to beta testers and submit the app to the App Store.

You can also use the `React Native CLI` to perform this operation using the option `--mode` with the value `Release` (e.g. from the root of your project: `npm run ios -- --mode="Release"` or `yarn ios --mode Release`).

Once you are done with the testing and ready to publish to App Store, follow along with this guide.

- Launch your terminal, and navigate into the iOS folder of your app and type `open .`.
- Double click on YOUR\_APP\_NAME.xcworkspace. It should launch Xcode.
- Click on `Product` → `Archive`. Make sure to set the device to "Any iOS Device (arm64)".

note

Check your Bundle Identifier and make sure it is exactly same as the one you have created in the Identifiers in Apple Developer Dashboard.

- After the archive is completed, in the archive window, click on `Distribute App`.
- Click on `App Store Connect` now (if you want to publish in App Store).
- Click `Upload` → Make sure all the check boxes are selected, hit `Next`.
- Choose between `Automatically manage signing` and `Manually manage signing` based on your needs.
- Click on `Upload`.
- Now you can find it in the App Store Connect under TestFlight.

Now fill up the necessary information and in the Build Section, select the build of the app and click on `Save` → `Submit For Review`.

### 4\. Screenshots [​](https://reactnative.dev/docs/next/publishing-to-app-store\#4-screenshots "Direct link to 4. Screenshots")

The Apple Store requires you have screenshots for the latest devices. The reference for such devices would be found [here](https://developer.apple.com/help/app-store-connect/reference/screenshot-specifications/). Note that screenshots for some display sizes are not required if they are provided for other sizes.

Is this page useful?

- [1\. Configure release scheme](https://reactnative.dev/docs/next/publishing-to-app-store#1-configure-release-scheme)
- [2\. Build app for release](https://reactnative.dev/docs/next/publishing-to-app-store#2-build-app-for-release)
- [4\. Screenshots](https://reactnative.dev/docs/next/publishing-to-app-store#4-screenshots)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/pushnotificationios

[Skip to main content](https://reactnative.dev/docs/next/pushnotificationios#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/pushnotificationios)** (0.81).

Version: Next

On this page

Deprecated

Use one of the [community packages](https://reactnative.directory/?search=notification) instead.

### Projects with Native Code Only

The following section only applies to projects with native code exposed. If you are using the managed Expo workflow, see the guide on [Notifications](https://docs.expo.dev/versions/latest/sdk/notifications/) in the Expo documentation for the appropriate alternative.

Handle notifications for your app, including scheduling and permissions.

* * *

## Getting Started [​](https://reactnative.dev/docs/next/pushnotificationios\#getting-started "Direct link to Getting Started")

To enable push notifications, [configure your notifications with Apple](https://developer.apple.com/documentation/usernotifications/setting_up_a_remote_notification_server) and your server-side system.

Then, [enable remote notifications](https://developer.apple.com/documentation/usernotifications/setting_up_a_remote_notification_server/pushing_background_updates_to_your_app#2980038) in your project. This will automatically enable the required settings.

### Enable support for `register` events [​](https://reactnative.dev/docs/next/pushnotificationios\#enable-support-for-register-events "Direct link to enable-support-for-register-events")

In your `AppDelegate.m`, add:

objectivec

```codeBlockLines_AclH

Then implement the following in order to handle remote notification registration events:

```codeBlockLines_AclH
- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken
{
// This will trigger 'register' events on PushNotificationIOS
[RCTPushNotificationManager didRegisterForRemoteNotificationsWithDeviceToken:deviceToken];
}
- (void)application:(UIApplication *)application didFailToRegisterForRemoteNotificationsWithError:(NSError *)error
{
// This will trigger 'registrationError' events on PushNotificationIOS
[RCTPushNotificationManager didFailToRegisterForRemoteNotificationsWithError:error];
}

### Handle notifications [​](https://reactnative.dev/docs/next/pushnotificationios\#handle-notifications "Direct link to Handle notifications")

You'll need to implement `UNUserNotificationCenterDelegate` in your `AppDelegate`:

Set the delegate on app launch:

```codeBlockLines_AclH
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
...
UNUserNotificationCenter *center = [UNUserNotificationCenter currentNotificationCenter];
center.delegate = self;

return YES;
}

#### Foreground notifications [​](https://reactnative.dev/docs/next/pushnotificationios\#foreground-notifications "Direct link to Foreground notifications")

Implement `userNotificationCenter:willPresentNotification:withCompletionHandler:` to handle notifications that arrive when the app is in the foreground. Use the completionHandler to determine if the notification will be shown to the user and notify `RCTPushNotificationManager` accordingly:

```codeBlockLines_AclH
// Called when a notification is delivered to a foreground app.
- (void)userNotificationCenter:(UNUserNotificationCenter *)center
willPresentNotification:(UNNotification *)notification
withCompletionHandler:(void (^)(UNNotificationPresentationOptions options))completionHandler
{
// This will trigger 'notification' and 'localNotification' events on PushNotificationIOS
[RCTPushNotificationManager didReceiveNotification:notification];
// Decide if and how the notification will be shown to the user
completionHandler(UNNotificationPresentationOptionNone);
}

#### Background notifications [​](https://reactnative.dev/docs/next/pushnotificationios\#background-notifications "Direct link to Background notifications")

Implement `userNotificationCenter:didReceiveNotificationResponse:withCompletionHandler:` to handle when a notification is tapped, typically called for background notifications which the user taps to open the app. However, if you had set foreground notifications to be shown in `userNotificationCenter:willPresentNotification:withCompletionHandler:`, this method will also be invoked on foreground notifications when tapped. In this case, you should only notify `RCTPushNotificationManager` in one of these callbacks.

If the tapped notification resulted in app launch, call `setInitialNotification:`. If the notification was not previously handled by `userNotificationCenter:willPresentNotification:withCompletionHandler:`, call `didReceiveNotification:` as well:

```codeBlockLines_AclH
- (void) userNotificationCenter:(UNUserNotificationCenter *)center
didReceiveNotificationResponse:(UNNotificationResponse *)response
withCompletionHandler:(void (^)(void))completionHandler
{
// This condition passes if the notification was tapped to launch the app
if ([response.actionIdentifier isEqualToString:UNNotificationDefaultActionIdentifier]) {
// Allow the notification to be retrieved on the JS side using getInitialNotification()
[RCTPushNotificationManager setInitialNotification:response.notification];
}
// This will trigger 'notification' and 'localNotification' events on PushNotificationIOS
[RCTPushNotificationManager didReceiveNotification:response.notification];
completionHandler();
}

# Reference

## Methods [​](https://reactnative.dev/docs/next/pushnotificationios\#methods "Direct link to Methods")

### `presentLocalNotification()` [​](https://reactnative.dev/docs/next/pushnotificationios\#presentlocalnotification "Direct link to presentlocalnotification")

tsx

```codeBlockLines_AclH
static presentLocalNotification(details: PresentLocalNotificationDetails);

Schedules a local notification for immediate presentation.

**Parameters:**

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| details | object | Yes | See below. |

`details` is an object containing:

- `alertTitle` : The text displayed as the title of the notification alert.
- `alertBody` : The message displayed in the notification alert.
- `userInfo` : An object containing additional notification data (optional).
- `category` : The category of this notification, required for actionable notifications (optional). e.g. notifications with additional actions such as Reply or Like.
- `applicationIconBadgeNumber` The number to display as the app's icon badge. The default value of this property is 0, which means that no badge is displayed (optional).
- `isSilent` : If true, the notification will appear without sound (optional).
- `soundName` : The sound played when the notification is fired (optional).
- `alertAction` : DEPRECATED. This was used for iOS's legacy UILocalNotification.

### `scheduleLocalNotification()` [​](https://reactnative.dev/docs/next/pushnotificationios\#schedulelocalnotification "Direct link to schedulelocalnotification")

```codeBlockLines_AclH
static scheduleLocalNotification(details: ScheduleLocalNotificationDetails);

Schedules a local notification for future presentation.

- `alertTitle` : The text displayed as the title of the notification alert.
- `alertBody` : The message displayed in the notification alert.
- `fireDate` : When the notification will be fired. Schedule notifications using either `fireDate` or `fireIntervalSeconds`, with `fireDate` taking precedence.
- `fireIntervalSeconds` : Seconds from now to display the notification.
- `userInfo` : An object containing additional notification data (optional).
- `category` : The category of this notification, required for actionable notifications (optional). e.g. notifications with additional actions such as Reply or Like.
- `applicationIconBadgeNumber` The number to display as the app's icon badge. The default value of this property is 0, which means that no badge is displayed (optional).
- `isSilent` : If true, the notification will appear without sound (optional).
- `soundName` : The sound played when the notification is fired (optional).
- `alertAction` : DEPRECATED. This was used for iOS's legacy UILocalNotification.
- `repeatInterval` : DEPRECATED. Use `fireDate` or `fireIntervalSeconds` instead.

### `cancelAllLocalNotifications()` [​](https://reactnative.dev/docs/next/pushnotificationios\#cancelalllocalnotifications "Direct link to cancelalllocalnotifications")

```codeBlockLines_AclH
static cancelAllLocalNotifications();

Cancels all scheduled local notifications.

### `removeAllDeliveredNotifications()` [​](https://reactnative.dev/docs/next/pushnotificationios\#removealldeliverednotifications "Direct link to removealldeliverednotifications")

```codeBlockLines_AclH
static removeAllDeliveredNotifications();

Removes all delivered notifications from Notification Center.

### `getDeliveredNotifications()` [​](https://reactnative.dev/docs/next/pushnotificationios\#getdeliverednotifications "Direct link to getdeliverednotifications")

Provides a list of the app’s notifications that are currently displayed in Notification Center.

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| callback | function | Yes | Function which receives an array of delivered notifications. |

A delivered notification is an object containing:

- `identifier` : The identifier of this notification.
- `title` : The title of this notification.
- `body` : The body of this notification.
- `category` : The category of this notification (optional).
- `userInfo` : An object containing additional notification data (optional).
- `thread-id` : The thread identifier of this notification, if it has one.

### `removeDeliveredNotifications()` [​](https://reactnative.dev/docs/next/pushnotificationios\#removedeliverednotifications "Direct link to removedeliverednotifications")

```codeBlockLines_AclH
static removeDeliveredNotifications(identifiers: string[]);

Removes the specified notifications from Notification Center.

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| identifiers | array | Yes | Array of notification identifiers. |

### `setApplicationIconBadgeNumber()` [​](https://reactnative.dev/docs/next/pushnotificationios\#setapplicationiconbadgenumber "Direct link to setapplicationiconbadgenumber")

```codeBlockLines_AclH
static setApplicationIconBadgeNumber(num: number);

Sets the badge number for the app icon on the Home Screen.

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| number | number | Yes | Badge number for the app icon. |

### `getApplicationIconBadgeNumber()` [​](https://reactnative.dev/docs/next/pushnotificationios\#getapplicationiconbadgenumber "Direct link to getapplicationiconbadgenumber")

Gets the current badge number for the app icon on the Home Screen.

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| callback | function | Yes | Function which processes the current badge number. |

### `cancelLocalNotifications()` [​](https://reactnative.dev/docs/next/pushnotificationios\#cancellocalnotifications "Direct link to cancellocalnotifications")

```codeBlockLines_AclH
static cancelLocalNotifications(userInfo: Object);

Cancels any scheduled local notifications which match the fields in the provided `userInfo`.

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| userInfo | object | No | |

### `getScheduledLocalNotifications()` [​](https://reactnative.dev/docs/next/pushnotificationios\#getscheduledlocalnotifications "Direct link to getscheduledlocalnotifications")

```codeBlockLines_AclH
static getScheduledLocalNotifications(

);

Gets the list of local notifications that are currently scheduled.

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| callback | function | Yes | Function which processes an array of objects describing local notifications. |

### `addEventListener()` [​](https://reactnative.dev/docs/next/pushnotificationios\#addeventlistener "Direct link to addeventlistener")

```codeBlockLines_AclH
static addEventListener(
type: PushNotificationEventName,
handler:

Attaches a listener to notification events including local notifications, remote notifications, and notification registration results.

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| type | string | Yes | Event type to listen to. See below. |
| handler | function | Yes | Listener. |

Valid events types include:

- `notification` : Fired when a remote notification is received. The handler will be invoked with an instance of `PushNotificationIOS`. This will handle notifications that arrive in the foreground or were tapped to open the app from the background.
- `localNotification` : Fired when a local notification is received. The handler will be invoked with an instance of `PushNotificationIOS`. This will handle notifications that arrive in the foreground or were tapped to open the app from the background.
- `register`: Fired when the user registers successfully for remote notifications. The handler will be invoked with a hex string representing the deviceToken.
- `registrationError`: Fired when the user fails to register for remote notifications. Typically occurs due to APNS issues or if the device is a simulator. The handler will be invoked with `{message: string, code: number, details: any}`.

### `removeEventListener()` [​](https://reactnative.dev/docs/next/pushnotificationios\#removeeventlistener "Direct link to removeeventlistener")

```codeBlockLines_AclH
static removeEventListener(
type: PushNotificationEventName,
);

Removes the event listener. Do this in `componentWillUnmount` to prevent memory leaks.

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| type | string | Yes | Event type. See `addEventListener()` for options. |

### `requestPermissions()` [​](https://reactnative.dev/docs/next/pushnotificationios\#requestpermissions "Direct link to requestpermissions")

```codeBlockLines_AclH
static requestPermissions(permissions?: PushNotificationPermissions[]);

Requests notification permissions from iOS, prompting the user with a dialog box. By default, this will request all notification permissions, but you can optionally specify which permissions to request. The following permissions are supported:

- `alert`
- `badge`
- `sound`

If a map is provided to the method, only the permissions with truthy values will be requested.

This method returns a promise that will resolve when the user accepts or rejects the request, or if the permissions were previously rejected. The promise resolves to the state of the permissions after the request has been completed.

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| permissions | array | No | alert, badge, or sound |

### `abandonPermissions()` [​](https://reactnative.dev/docs/next/pushnotificationios\#abandonpermissions "Direct link to abandonpermissions")

```codeBlockLines_AclH
static abandonPermissions();

Unregister for all remote notifications received via Apple Push Notification service.

You should call this method in rare circumstances only, such as when a new version of the app removes support for all types of remote notifications. Users can temporarily prevent apps from receiving remote notifications through the Settings app. Apps unregistered through this method can always re-register.

### `checkPermissions()` [​](https://reactnative.dev/docs/next/pushnotificationios\#checkpermissions "Direct link to checkpermissions")

```codeBlockLines_AclH
static checkPermissions(

Check which push permissions are currently enabled.

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| callback | function | Yes | See below. |

`callback` will be invoked with a `permissions` object:

- `alert: boolean`
- `badge: boolean`
- `sound: boolean`

### `getInitialNotification()` [​](https://reactnative.dev/docs/next/pushnotificationios\#getinitialnotification "Direct link to getinitialnotification")

This method returns a promise. If the app was launched by a push notification, this promise resolves to an object of type `PushNotificationIOS` for the notification that was tapped. Otherwise, it resolves to `null`.

### `getAuthorizationStatus()` [​](https://reactnative.dev/docs/next/pushnotificationios\#getauthorizationstatus "Direct link to getauthorizationstatus")

This method returns a promise that resolves to the current notification authorization status. See [UNAuthorizationStatus](https://developer.apple.com/documentation/usernotifications/unauthorizationstatus?language=objc) for possible values.

### `finish()` [​](https://reactnative.dev/docs/next/pushnotificationios\#finish "Direct link to finish")

```codeBlockLines_AclH
finish(result: string);

This method is available for remote notifications that have been received via [`application:didReceiveRemoteNotification:fetchCompletionHandler:`](https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1623013-application?language=objc). However, this is superseded by `UNUserNotificationCenterDelegate` and will no longer be invoked if both `application:didReceiveRemoteNotification:fetchCompletionHandler:` and the newer handlers from `UNUserNotificationCenterDelegate` are implemented.

If for some reason you're still relying on `application:didReceiveRemoteNotification:fetchCompletionHandler:`, you'll need to set up event handling on the iOS side:

```codeBlockLines_AclH
- (void) application:(UIApplication *)application
didReceiveRemoteNotification:(NSDictionary *)userInfo
fetchCompletionHandler:(void (^)(UIBackgroundFetchResult result))handler
{
[RCTPushNotificationManager didReceiveRemoteNotification:userInfo fetchCompletionHandler:handler];
}

Call `finish()` to execute the native completion handlers once you're done handling the notification on the JS side. When calling this block, pass in the fetch result value that best describes the results of your operation. For a list of possible values, see `PushNotificationIOS.FetchResult`.

If you're using `application:didReceiveRemoteNotification:fetchCompletionHandler:`, you _must_ call this handler and should do so as soon as possible. See the [official documentation](https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1623013-application?language=objc) for more details.

### `getMessage()` [​](https://reactnative.dev/docs/next/pushnotificationios\#getmessage "Direct link to getmessage")

```codeBlockLines_AclH
getMessage(): string | Object;

An alias for `getAlert` to get the notification's main message string.

### `getSound()` [​](https://reactnative.dev/docs/next/pushnotificationios\#getsound "Direct link to getsound")

```codeBlockLines_AclH
getSound(): string;

Gets the sound string from the `aps` object. This will be `null` for local notifications.

### `getCategory()` [​](https://reactnative.dev/docs/next/pushnotificationios\#getcategory "Direct link to getcategory")

```codeBlockLines_AclH
getCategory(): string;

Gets the category string from the `aps` object.

### `getAlert()` [​](https://reactnative.dev/docs/next/pushnotificationios\#getalert "Direct link to getalert")

```codeBlockLines_AclH
getAlert(): string | Object;

Gets the notification's main message from the `aps` object. Also see the alias: `getMessage()`.

### `getContentAvailable()` [​](https://reactnative.dev/docs/next/pushnotificationios\#getcontentavailable "Direct link to getcontentavailable")

```codeBlockLines_AclH
getContentAvailable(): number;

Gets the content-available number from the `aps` object.

### `getBadgeCount()` [​](https://reactnative.dev/docs/next/pushnotificationios\#getbadgecount "Direct link to getbadgecount")

```codeBlockLines_AclH
getBadgeCount(): number;

Gets the badge count number from the `aps` object.

### `getData()` [​](https://reactnative.dev/docs/next/pushnotificationios\#getdata "Direct link to getdata")

```codeBlockLines_AclH
getData(): Object;

Gets the data object on the notification.

### `getThreadID()` [​](https://reactnative.dev/docs/next/pushnotificationios\#getthreadid "Direct link to getthreadid")

```codeBlockLines_AclH
getThreadID();

Gets the thread ID on the notification.

Is this page useful?

- [Getting Started](https://reactnative.dev/docs/next/pushnotificationios#getting-started)
- [Enable support for `register` events](https://reactnative.dev/docs/next/pushnotificationios#enable-support-for-register-events)
- [Handle notifications](https://reactnative.dev/docs/next/pushnotificationios#handle-notifications)
- [Methods](https://reactnative.dev/docs/next/pushnotificationios#methods)
- [`presentLocalNotification()`](https://reactnative.dev/docs/next/pushnotificationios#presentlocalnotification)
- [`scheduleLocalNotification()`](https://reactnative.dev/docs/next/pushnotificationios#schedulelocalnotification)
- [`cancelAllLocalNotifications()`](https://reactnative.dev/docs/next/pushnotificationios#cancelalllocalnotifications)
- [`removeAllDeliveredNotifications()`](https://reactnative.dev/docs/next/pushnotificationios#removealldeliverednotifications)
- [`getDeliveredNotifications()`](https://reactnative.dev/docs/next/pushnotificationios#getdeliverednotifications)
- [`removeDeliveredNotifications()`](https://reactnative.dev/docs/next/pushnotificationios#removedeliverednotifications)
- [`setApplicationIconBadgeNumber()`](https://reactnative.dev/docs/next/pushnotificationios#setapplicationiconbadgenumber)
- [`getApplicationIconBadgeNumber()`](https://reactnative.dev/docs/next/pushnotificationios#getapplicationiconbadgenumber)
- [`cancelLocalNotifications()`](https://reactnative.dev/docs/next/pushnotificationios#cancellocalnotifications)
- [`getScheduledLocalNotifications()`](https://reactnative.dev/docs/next/pushnotificationios#getscheduledlocalnotifications)
- [`addEventListener()`](https://reactnative.dev/docs/next/pushnotificationios#addeventlistener)
- [`removeEventListener()`](https://reactnative.dev/docs/next/pushnotificationios#removeeventlistener)
- [`requestPermissions()`](https://reactnative.dev/docs/next/pushnotificationios#requestpermissions)
- [`abandonPermissions()`](https://reactnative.dev/docs/next/pushnotificationios#abandonpermissions)
- [`checkPermissions()`](https://reactnative.dev/docs/next/pushnotificationios#checkpermissions)
- [`getInitialNotification()`](https://reactnative.dev/docs/next/pushnotificationios#getinitialnotification)
- [`getAuthorizationStatus()`](https://reactnative.dev/docs/next/pushnotificationios#getauthorizationstatus)
- [`finish()`](https://reactnative.dev/docs/next/pushnotificationios#finish)
- [`getMessage()`](https://reactnative.dev/docs/next/pushnotificationios#getmessage)
- [`getSound()`](https://reactnative.dev/docs/next/pushnotificationios#getsound)
- [`getCategory()`](https://reactnative.dev/docs/next/pushnotificationios#getcategory)
- [`getAlert()`](https://reactnative.dev/docs/next/pushnotificationios#getalert)
- [`getContentAvailable()`](https://reactnative.dev/docs/next/pushnotificationios#getcontentavailable)
- [`getBadgeCount()`](https://reactnative.dev/docs/next/pushnotificationios#getbadgecount)
- [`getData()`](https://reactnative.dev/docs/next/pushnotificationios#getdata)
- [`getThreadID()`](https://reactnative.dev/docs/next/pushnotificationios#getthreadid)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/text-nodes

[Skip to main content](https://reactnative.dev/docs/next/text-nodes#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

On this page

Text nodes represent raw text content on the tree (similar to [`Text`](https://developer.mozilla.org/en-US/docs/Web/API/Text) nodes on Web). They are not directly accessible via `refs`, but can be accessed using methods like [`childNodes`](https://developer.mozilla.org/en-US/docs/Web/API/Node/childNodes) on element refs.

Text instances example - Snack

# Text instances example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import \* as React from 'react';
import { SafeAreaView, StyleSheet, Text } from 'react-native';

const ref = React.useRef(null);
const \[viewInfo, setViewInfo\] = React.useState('');

// \`textElement\` is an object implementing the interface described here.
const textElement = ref.current;
const textNode = textElement.childNodes\[0\];
setViewInfo(
\`Text content is: ${textNode.nodeValue}\`,
);
}, \[\]);

return (

};

const styles = StyleSheet.create({
container: {
flex: 1,
},
content: {
padding: 10,
backgroundColor: 'gray',
},
});

export default TextWithRefs;

import * as React from 'react';
import { SafeAreaView, StyleSheet, Text } from 'react-native';

const ref = React.useRef(null);
const [viewInfo, setViewInfo] = React.useState('');

// `textElement` is an object implementing the interface described here.
const textElement = ref.current;
const textNode = textElement.childNodes[0];
setViewInfo(
`Text content is: ${textNode.nodeValue}`,
);
}, []);

const styles = StyleSheet.create({
container: {
flex: 1,
},
content: {
padding: 10,
backgroundColor: 'gray',
},
});

Snack

Hello world!

Text content is: Hello world!

Updating…

PreviewMy DeviceAndroidiOSWeb

* * *

## Reference [​](https://reactnative.dev/docs/next/text-nodes\#reference "Direct link to Reference")

### Web-compatible API [​](https://reactnative.dev/docs/next/text-nodes\#web-compatible-api "Direct link to Web-compatible API")

From [`CharacterData`](https://developer.mozilla.org/en-US/docs/Web/API/CharacterData):

- Properties
- [`data`](https://developer.mozilla.org/en-US/docs/Web/API/CharacterData/data)
- [`length`](https://developer.mozilla.org/en-US/docs/Web/API/CharacterData/length)
- [`nextElementSibling`](https://developer.mozilla.org/en-US/docs/Web/API/CharacterData/nextElementSibling)
- [`previousElementSibling`](https://developer.mozilla.org/en-US/docs/Web/API/CharacterData/previousElementSibling)
- Methods
- [`substringData()`](https://developer.mozilla.org/en-US/docs/Web/API/CharacterData/substringData)

From [`Node`](https://developer.mozilla.org/en-US/docs/Web/API/Node):

- Properties
- [`childNodes`](https://developer.mozilla.org/en-US/docs/Web/API/Node/childNodes)
- [`firstChild`](https://developer.mozilla.org/en-US/docs/Web/API/Node/firstChild)
- [`isConnected`](https://developer.mozilla.org/en-US/docs/Web/API/Node/isConnected)
- [`lastChild`](https://developer.mozilla.org/en-US/docs/Web/API/Node/lastChild)
- [`nextSibling`](https://developer.mozilla.org/en-US/docs/Web/API/Node/nextSibling)
- [`nodeName`](https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeName)
- [`nodeType`](https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType)
- [`nodeValue`](https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeValue)
- [`ownerDocument`](https://developer.mozilla.org/en-US/docs/Web/API/Node/ownerDocument)
- ℹ️ Will return the [document instance](https://reactnative.dev/docs/next/document-instances) where this component was rendered.
- [`parentElement`](https://developer.mozilla.org/en-US/docs/Web/API/Node/parentElement)
- [`parentNode`](https://developer.mozilla.org/en-US/docs/Web/API/Node/parentNode)
- [`previousSibling`](https://developer.mozilla.org/en-US/docs/Web/API/Node/previousSibling)
- [`textContent`](https://developer.mozilla.org/en-US/docs/Web/API/Node/textContent)
- Methods
- [`compareDocumentPosition()`](https://developer.mozilla.org/en-US/docs/Web/API/Node/compareDocumentPosition)
- [`contains()`](https://developer.mozilla.org/en-US/docs/Web/API/Node/contains)
- [`getRootNode()`](https://developer.mozilla.org/en-US/docs/Web/API/Node/getRootNode)
- ℹ️ Will return a reference to itself if the component is not mounted.
- [`hasChildNodes()`](https://developer.mozilla.org/en-US/docs/Web/API/Node/hasChildNodes)

Is this page useful?

- [Reference](https://reactnative.dev/docs/next/text-nodes#reference)
- [Web-compatible API](https://reactnative.dev/docs/next/text-nodes#web-compatible-api)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/security

[Skip to main content](https://reactnative.dev/docs/next/security#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/security)** (0.81).

Version: Next

On this page

Security is often overlooked when building apps. It is true that it is impossible to build software that is completely impenetrable—we’ve yet to invent a completely impenetrable lock (bank vaults do, after all, still get broken into). However, the probability of falling victim to a malicious attack or being exposed for a security vulnerability is inversely proportional to the effort you’re willing to put in to protecting your application against any such eventuality. Although an ordinary padlock is pickable, it is still much harder to get past than a cabinet hook!

In this guide, you will learn about best practices for storing sensitive information, authentication, network security, and tools that will help you secure your app. This is not a preflight checklist—it is a catalogue of options, each of which will help further protect your app and users.

## Storing Sensitive Info [​](https://reactnative.dev/docs/next/security\#storing-sensitive-info "Direct link to Storing Sensitive Info")

Never store sensitive API keys in your app code. Anything included in your code could be accessed in plain text by anyone inspecting the app bundle. Tools like [react-native-dotenv](https://github.com/goatandsheep/react-native-dotenv) and [react-native-config](https://github.com/luggit/react-native-config/) are great for adding environment-specific variables like API endpoints, but they should not be confused with server-side environment variables, which can often contain secrets and API keys.

If you must have an API key or a secret to access some resource from your app, the most secure way to handle this would be to build an orchestration layer between your app and the resource. This could be a serverless function (e.g. using AWS Lambda or Google Cloud Functions) which can forward the request with the required API key or secret. Secrets in server side code cannot be accessed by the API consumers the same way secrets in your app code can.

**For persisted user data, choose the right type of storage based on its sensitivity.** As your app is used, you’ll often find the need to save data on the device, whether to support your app being used offline, cut down on network requests or save your user’s access token between sessions so they wouldn’t have to re-authenticate each time they use the app.

info

**Persisted vs unpersisted** — persisted data is written to the device’s disk, which lets the data be read by your app across application launches without having to do another network request to fetch it or asking the user to re-enter it. But this also can make that data more vulnerable to being accessed by attackers. Unpersisted data is never written to disk—so there's no data to access!

### Async Storage [​](https://reactnative.dev/docs/next/security\#async-storage "Direct link to Async Storage")

[Async Storage](https://github.com/react-native-async-storage/async-storage) is a community-maintained module for React Native that provides an asynchronous, unencrypted, key-value store. Async Storage is not shared between apps: every app has its own sandbox environment and has no access to data from other apps.

| **Do** use async storage when... | **Don't** use async storage for... |
| --- | --- |
| Persisting non-sensitive data across app runs | Token storage |
| Persisting Redux state | Secrets |
| Persisting GraphQL state | |
| Storing global app-wide variables | |

#### Developer Notes [​](https://reactnative.dev/docs/next/security\#developer-notes "Direct link to Developer Notes")

- Web

note

Async Storage is the React Native equivalent of Local Storage from the web

### Secure Storage [​](https://reactnative.dev/docs/next/security\#secure-storage "Direct link to Secure Storage")

React Native does not come bundled with any way of storing sensitive data. However, there are pre-existing solutions for Android and iOS platforms.

#### iOS - Keychain Services [​](https://reactnative.dev/docs/next/security\#ios---keychain-services "Direct link to iOS - Keychain Services")

[Keychain Services](https://developer.apple.com/documentation/security/keychain_services) allows you to securely store small chunks of sensitive info for the user. This is an ideal place to store certificates, tokens, passwords, and any other sensitive information that doesn’t belong in Async Storage.

#### Android - Secure Shared Preferences [​](https://reactnative.dev/docs/next/security\#android---secure-shared-preferences "Direct link to Android - Secure Shared Preferences")

[Shared Preferences](https://developer.android.com/reference/android/content/SharedPreferences) is the Android equivalent for a persistent key-value data store. **Data in Shared Preferences is not encrypted by default**, but [Encrypted Shared Preferences](https://developer.android.com/topic/security/data) wraps the Shared Preferences class for Android, and automatically encrypts keys and values.

#### Android - Keystore [​](https://reactnative.dev/docs/next/security\#android---keystore "Direct link to Android - Keystore")

The [Android Keystore](https://developer.android.com/training/articles/keystore) system lets you store cryptographic keys in a container to make it more difficult to extract from the device.

In order to use iOS Keychain services or Android Secure Shared Preferences, you can either write a bridge yourself or use a library which wraps them for you and provides a unified API at your own risk. Some libraries to consider:

- [expo-secure-store](https://docs.expo.dev/versions/latest/sdk/securestore/)
- [react-native-keychain](https://github.com/oblador/react-native-keychain)

Caution

**Be mindful of unintentionally storing or exposing sensitive info.** This could happen accidentally, for example saving sensitive form data in redux state and persisting the whole state tree in Async Storage. Or sending user tokens and personal info to an application monitoring service such as Sentry or Crashlytics.

## Authentication and Deep Linking [​](https://reactnative.dev/docs/next/security\#authentication-and-deep-linking "Direct link to Authentication and Deep Linking")

Mobile apps have a unique vulnerability that is non-existent in the web: **deep linking**. Deep linking is a way of sending data directly to a native application from an outside source. A deep link looks like `app://` where `app` is your app scheme and anything following the // could be used internally to handle the request.

For example, if you were building an ecommerce app, you could use `app://products/1` to deep link to your app and open the product detail page for a product with id 1. You can think of these kind of like URLs on the web, but with one crucial distinction:

Deep links are not secure and you should never send any sensitive information in them.

The reason deep links are not secure is because there is no centralized method of registering URL schemes. As an application developer, you can use almost any url scheme you choose by [configuring it in Xcode](https://developer.apple.com/documentation/uikit/inter-process_communication/allowing_apps_and_websites_to_link_to_your_content/defining_a_custom_url_scheme_for_your_app) for iOS or [adding an intent on Android](https://developer.android.com/training/app-links/deep-linking).

There is nothing stopping a malicious application from hijacking your deep link by also registering to the same scheme and then obtaining access to the data your link contains. Sending something like `app://products/1` is not harmful, but sending tokens is a security concern.

When the operating system has two or more applications to choose from when opening a link, Android will show the user a [Disambiguation dialog](https://developer.android.com/training/basics/intents/sending#disambiguation-dialog) and ask them to choose which application to use to open the link. On iOS however, the operating system will make the choice for you, so the user will be blissfully unaware. Apple has made steps to address this issue in later iOS versions (iOS 11) where they instituted a first-come-first-served principle, although this vulnerability could still be exploited in different ways which you can read more about [here](https://thehackernews.com/2019/07/ios-custom-url-scheme.html). Using [universal links](https://developer.apple.com/ios/universal-links/) will allow linking to content within your app securely in iOS.

### OAuth2 and Redirects [​](https://reactnative.dev/docs/next/security\#oauth2-and-redirects "Direct link to OAuth2 and Redirects")

The OAuth2 authentication protocol is incredibly popular nowadays, prided as the most complete and secure protocol around. The OpenID Connect protocol is also based on this. In OAuth2, the user is asked to authenticate via a third party. On successful completion, this third party redirects . JWT is an open standard for securely transmitting information between parties on the web.

On the web, this redirect step is secure, because URLs on the web are guaranteed to be unique. This is not true for apps because, as mentioned earlier, there is no centralized method of registering URL schemes! In order to address this security concern, an additional check must be added in the form of PKCE.

[PKCE](https://oauth.net/2/pkce/), pronounced “Pixy” stands for Proof of Key Code Exchange, and is an extension to the OAuth 2 spec. This involves adding an additional layer of security which verifies that the authentication and token exchange requests come from the same client. PKCE uses the [SHA 256](https://www.movable-type.co.uk/scripts/sha256.html) Cryptographic Hash Algorithm. SHA 256 creates a unique “signature” for a text or file of any size, but it is:

- Always the same length regardless of the input file
- Guaranteed to always produce the same result for the same input
- One way (that is, you can’t reverse engineer it to reveal the original input)

Now you have two values:

- **code\_verifier** \- a large random string generated by the client
- **code\_challenge** \- the SHA 256 of the code\_verifier

During the initial `/authorize` request, the client also sends the `code_challenge` for the `code_verifier` it keeps in memory. After the authorize request has returned correctly, the client also sends the `code_verifier` that was used to generate the `code_challenge`. The IDP will then calculate the `code_challenge`, see if it matches what was set on the very first `/authorize` request, and only send the access token if the values match.

This guarantees that only the application that triggered the initial authorization flow would be able to successfully exchange the verification code for a JWT. So even if a malicious application gets access to the verification code, it will be useless on its own. To see this in action, check out [this example](https://aaronparecki.com/oauth-2-simplified/#mobile-apps).

A library to consider for native OAuth is [react-native-app-auth](https://github.com/FormidableLabs/react-native-app-auth). React-native-app-auth is an SDK for communicating with OAuth2 providers. It wraps the native [AppAuth-iOS](https://github.com/openid/AppAuth-iOS) and [AppAuth-Android](https://github.com/openid/AppAuth-Android) libraries and can support PKCE.

`react-native-app-auth` can support PKCE only if your Identity Provider supports it.

## Network Security [​](https://reactnative.dev/docs/next/security\#network-security "Direct link to Network Security")

Your APIs should always use [SSL encryption](https://www.ssl.com/faqs/faq-what-is-ssl/). SSL encryption protects against the requested data being read in plain text between when it leaves the server and before it reaches the client. You’ll know the endpoint is secure, because it starts with `https://` instead of `http://`.

### SSL Pinning [​](https://reactnative.dev/docs/next/security\#ssl-pinning "Direct link to SSL Pinning")

Using https endpoints could still leave your data vulnerable to interception. With https, the client will only trust the server if it can provide a valid certificate that is signed by a trusted Certificate Authority that is pre-installed on the client. An attacker could take advantage of this by installing a malicious root CA certificate to the user’s device, so the client would trust all certificates that are signed by the attacker. Thus, relying on certificates alone could still leave you vulnerable to a [man-in-the-middle attack](https://en.wikipedia.org/wiki/Man-in-the-middle_attack).

**SSL pinning** is a technique that can be used on the client side to avoid this attack. It works by embedding (or pinning) a list of trusted certificates to the client during development, so that only the requests signed with one of the trusted certificates will be accepted, and any self-signed certificates will not be.

When using SSL pinning, you should be mindful of certificate expiry. Certificates expire every 1-2 years and when one does, it’ll need to be updated in the app as well as on the server. As soon as the certificate on the server has been updated, any apps with the old certificate embedded in them will cease to work.

## Summary [​](https://reactnative.dev/docs/next/security\#summary "Direct link to Summary")

There is no bulletproof way to handle security, but with conscious effort and diligence, it is possible to significantly reduce the likelihood of a security breach in your application. Invest in security proportional to the sensitivity of the data stored in your application, the number of users, and the damage a hacker could do when gaining access to their account. And remember: it’s significantly harder to access information that was never requested in the first place.

Is this page useful?

- [Storing Sensitive Info](https://reactnative.dev/docs/next/security#storing-sensitive-info)
- [Async Storage](https://reactnative.dev/docs/next/security#async-storage)
- [Secure Storage](https://reactnative.dev/docs/next/security#secure-storage)
- [Authentication and Deep Linking](https://reactnative.dev/docs/next/security#authentication-and-deep-linking)
- [OAuth2 and Redirects](https://reactnative.dev/docs/next/security#oauth2-and-redirects)
- [Network Security](https://reactnative.dev/docs/next/security#network-security)
- [SSL Pinning](https://reactnative.dev/docs/next/security#ssl-pinning)
- [Summary](https://reactnative.dev/docs/next/security#summary)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/style

[Skip to main content](https://reactnative.dev/docs/next/style#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/style)** (0.81).

Version: Next

On this page

With React Native, you style your application using JavaScript. All of the core components accept a prop named `style`. The style names and [values](https://reactnative.dev/docs/next/colors) usually match how CSS works on the web, except names are written using camel casing, e.g. `backgroundColor` rather than `background-color`.

The `style` prop can be a plain old JavaScript object. That's what we usually use for example code. You can also pass an array of styles - the last style in the array has precedence, so you can use this to inherit styles.

As a component grows in complexity, it is often cleaner to use `StyleSheet.create` to define several styles in one place. Here's an example:

Style - Snack

# Style

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {StyleSheet, Text, View} from 'react-native';

return (

};

const styles = StyleSheet.create({
container: {
marginTop: 50,
},
bigBlue: {
color: 'blue',
fontWeight: 'bold',
fontSize: 30,
},
red: {
color: 'red',
},
});

export default LotsOfStyles;

const styles = StyleSheet.create({
container: {
marginTop: 50,
},
bigBlue: {
color: 'blue',
fontWeight: 'bold',
fontSize: 30,
},
red: {
color: 'red',
},
});

Snack

just red

just bigBlue

bigBlue, then red

red, then bigBlue

Updating…

PreviewMy DeviceAndroidiOSWeb

One common pattern is to make your component accept a `style` prop which in turn is used to style subcomponents. You can use this to make styles "cascade" the way they do in CSS.

There are a lot more ways to customize the text style. Check out the [Text component reference](https://reactnative.dev/docs/next/text) for a complete list.

Now you can make your text beautiful. The next step in becoming a style expert is to [learn how to control component size](https://reactnative.dev/docs/next/height-and-width).

## Known issues [​](https://reactnative.dev/docs/next/style\#known-issues "Direct link to Known issues")

- [react-native#29308](https://github.com/facebook/react-native/issues/29308#issuecomment-792864162): In some cases React Native does not match how CSS works on the web, for example the touch area never extends past the parent view bounds and on Android negative margin is not supported.

Is this page useful?

- [Known issues](https://reactnative.dev/docs/next/style#known-issues)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/layoutanimation

[Skip to main content](https://reactnative.dev/docs/next/layoutanimation#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/layoutanimation)** (0.81).

Version: Next

On this page

Automatically animates views to their new positions when the next layout happens.

A common way to use this API is to call it before updating the state hook in functional components and calling `setState` in class components.

Note that in order to get this to work on **Android** you need to set the following flags via `UIManager`:

js

```codeBlockLines_AclH
if (Platform.OS === 'android') {
if (UIManager.setLayoutAnimationEnabledExperimental) {
UIManager.setLayoutAnimationEnabledExperimental(true);
}
}

## Example [​](https://reactnative.dev/docs/next/layoutanimation\#example "Direct link to Example")

LayoutAnimation Example - Snack

# LayoutAnimation Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React, {useState} from 'react';
import {
LayoutAnimation,
Platform,
StyleSheet,
Text,
TouchableOpacity,
UIManager,
View,
} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

if (
Platform.OS === 'android' &&
UIManager.setLayoutAnimationEnabledExperimental
) {
UIManager.setLayoutAnimationEnabledExperimental(true);
}

const \[expanded, setExpanded\] = useState(false);

return (

LayoutAnimation.configureNext(LayoutAnimation.Presets.spring);
setExpanded(!expanded);

};

const style = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
alignItems: 'center',
gap: 16,
},
tile: {
backgroundColor: 'lightgrey',
borderWidth: 0.5,
borderColor: '#d6d7da',
padding: 4,
},
});

export default App;

import React, {useState} from 'react';
import {
LayoutAnimation,
Platform,
StyleSheet,
Text,
TouchableOpacity,
UIManager,
View,
} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

if (
Platform.OS === 'android' &&
UIManager.setLayoutAnimationEnabledExperimental
) {
UIManager.setLayoutAnimationEnabledExperimental(true);
}

const [expanded, setExpanded] = useState(false);

LayoutAnimation.configureNext(LayoutAnimation.Presets.spring);
setExpanded(!expanded);

const style = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
alignItems: 'center',
gap: 16,
},
tile: {
backgroundColor: 'lightgrey',
borderWidth: 0.5,
borderColor: '#d6d7da',
padding: 4,
},
});

### Download [Expo Go](https://expo.dev/client) and scan the QR code to get started.

exp://u.expo.dev/933fd9c0-1666-11e7-afca-d980795c5824?runtime-version=exposdk%3A53.0.0&channel-name=production&snack-channel=nc90NXxkX2

### Connected devices

0

[Log in](https://expo.dev/login) to open this Snack from Expo Go on your device or simulator.

PreviewMy DeviceAndroidiOS

* * *

# Reference

## Methods [​](https://reactnative.dev/docs/next/layoutanimation\#methods "Direct link to Methods")

### `configureNext()` [​](https://reactnative.dev/docs/next/layoutanimation\#configurenext "Direct link to configurenext")

tsx

```codeBlockLines_AclH
static configureNext(
config: LayoutAnimationConfig,

);

Schedules an animation to happen on the next layout.

#### Parameters: [​](https://reactnative.dev/docs/next/layoutanimation\#parameters "Direct link to Parameters:")

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| config | object | Yes | See config description below. |
| onAnimationDidEnd | function | No | Called when the animation finished. |
| onAnimationDidFail | function | No | Called when the animation failed. |

The `config` parameter is an object with the keys below. [`create`](https://reactnative.dev/docs/next/layoutanimation#create) returns a valid object for `config`, and the [`Presets`](https://reactnative.dev/docs/next/layoutanimation#presets) objects can also all be passed as the `config`.

- `duration` in milliseconds
- `create`, optional config for animating in new views
- `update`, optional config for animating views that have been updated
- `delete`, optional config for animating views as they are removed

The config that's passed to `create`, `update`, or `delete` has the following keys:

- `type`, the [animation type](https://reactnative.dev/docs/next/layoutanimation#types) to use
- `property`, the [layout property](https://reactnative.dev/docs/next/layoutanimation#properties) to animate (optional, but recommended for `create` and `delete`)
- `springDamping` (number, optional and only for use with `type: Type.spring`)
- `initialVelocity` (number, optional)
- `delay` (number, optional)
- `duration` (number, optional)

### `create()` [​](https://reactnative.dev/docs/next/layoutanimation\#create "Direct link to create")

```codeBlockLines_AclH
static create(duration, type, creationProp)

Helper that creates an object (with `create`, `update`, and `delete` fields) to pass into [`configureNext`](https://reactnative.dev/docs/next/layoutanimation#configurenext). The `type` parameter is an [animation type](https://reactnative.dev/docs/next/layoutanimation#types), and the `creationProp` parameter is a [layout property](https://reactnative.dev/docs/next/layoutanimation#properties).

**Example:**

LayoutAnimation - Snack

# LayoutAnimation

import React, {useState} from 'react';
import {
View,
Platform,
UIManager,
LayoutAnimation,
StyleSheet,
Button,
} from 'react-native';

const \[boxPosition, setBoxPosition\] = useState('left');

LayoutAnimation.configureNext({
duration: 500,
create: {type: 'linear', property: 'opacity'},
update: {type: 'spring', springDamping: 0.4},
delete: {type: 'linear', property: 'opacity'},
});
setBoxPosition(boxPosition === 'left' ? 'right' : 'left');
};

style={\[styles.box, boxPosition === 'left' ? null : styles.moveRight\]}

const styles = StyleSheet.create({
container: {
flex: 1,
alignItems: 'flex-start',
justifyContent: 'center',
},
box: {
height: 100,
width: 100,
borderRadius: 5,
margin: 8,
backgroundColor: 'blue',
},
moveRight: {
alignSelf: 'flex-end',
height: 200,
width: 200,
},
buttonContainer: {
alignSelf: 'center',
},
});

import React, {useState} from 'react';
import {
View,
Platform,
UIManager,
LayoutAnimation,
StyleSheet,
Button,
} from 'react-native';

const [boxPosition, setBoxPosition] = useState('left');

LayoutAnimation.configureNext({
duration: 500,
create: {type: 'linear', property: 'opacity'},
update: {type: 'spring', springDamping: 0.4},
delete: {type: 'linear', property: 'opacity'},
});
setBoxPosition(boxPosition === 'left' ? 'right' : 'left');
};

style={[styles.box, boxPosition === 'left' ? null : styles.moveRight]}

const styles = StyleSheet.create({
container: {
flex: 1,
alignItems: 'flex-start',
justifyContent: 'center',
},
box: {
height: 100,
width: 100,
borderRadius: 5,
margin: 8,
backgroundColor: 'blue',
},
moveRight: {
alignSelf: 'flex-end',
height: 200,
width: 200,
},
buttonContainer: {
alignSelf: 'center',
},
});

### Download [Expo Go](https://expo.dev/client) and scan the QR code to get started.

exp://u.expo.dev/933fd9c0-1666-11e7-afca-d980795c5824?runtime-version=exposdk%3A53.0.0&channel-name=production&snack-channel=aDnjGAggXG

### Connected devices

## Properties [​](https://reactnative.dev/docs/next/layoutanimation\#properties "Direct link to Properties")

### Types [​](https://reactnative.dev/docs/next/layoutanimation\#types "Direct link to Types")

An enumeration of animation types to be used in the [`create`](https://reactnative.dev/docs/next/layoutanimation#create) method, or in the `create`/ `update`/ `delete` configs for [`configureNext`](https://reactnative.dev/docs/next/layoutanimation#configurenext). (example usage: `LayoutAnimation.Types.easeIn`)

| Types |
| --- |
| spring |
| linear |
| easeInEaseOut |
| easeIn |
| easeOut |
| keyboard |

### Properties [​](https://reactnative.dev/docs/next/layoutanimation\#properties-1 "Direct link to Properties")

An enumeration of layout properties to be animated to be used in the [`create`](https://reactnative.dev/docs/next/layoutanimation#create) method, or in the `create`/ `update`/ `delete` configs for [`configureNext`](https://reactnative.dev/docs/next/layoutanimation#configurenext). (example usage: `LayoutAnimation.Properties.opacity`)

| Properties |
| --- |
| opacity |
| scaleX |
| scaleY |
| scaleXY |

### Presets [​](https://reactnative.dev/docs/next/layoutanimation\#presets "Direct link to Presets")

A set of predefined animation configs to pass into [`configureNext`](https://reactnative.dev/docs/next/layoutanimation#configurenext).

| Presets | Value |
| --- | --- |
| easeInEaseOut | `create(300, 'easeInEaseOut', 'opacity')` |
| linear | `create(500, 'linear', 'opacity')` |
| spring | `{duration: 700, create: {type: 'linear', property: 'opacity'}, update: {type: 'spring', springDamping: 0.4}, delete: {type: 'linear', property: 'opacity'} }` |

### `easeInEaseOut` [​](https://reactnative.dev/docs/next/layoutanimation\#easeineaseout "Direct link to easeineaseout")

Calls `configureNext()` with `Presets.easeInEaseOut`.

### `linear` [​](https://reactnative.dev/docs/next/layoutanimation\#linear "Direct link to linear")

Calls `configureNext()` with `Presets.linear`.

### `spring` [​](https://reactnative.dev/docs/next/layoutanimation\#spring "Direct link to spring")

Calls `configureNext()` with `Presets.spring`.

const \[firstBoxPosition, setFirstBoxPosition\] = useState('left');
const \[secondBoxPosition, setSecondBoxPosition\] = useState('left');
const \[thirdBoxPosition, setThirdBoxPosition\] = useState('left');

LayoutAnimation.configureNext(LayoutAnimation.Presets.easeInEaseOut);
setFirstBoxPosition(firstBoxPosition === 'left' ? 'right' : 'left');
};

LayoutAnimation.configureNext(LayoutAnimation.Presets.linear);
setSecondBoxPosition(secondBoxPosition === 'left' ? 'right' : 'left');
};

LayoutAnimation.configureNext(LayoutAnimation.Presets.spring);
setThirdBoxPosition(thirdBoxPosition === 'left' ? 'right' : 'left');
};

style={\[\
styles.box,\
firstBoxPosition === 'left' ? null : styles.moveRight,\
\]}

style={\[\
styles.box,\
secondBoxPosition === 'left' ? null : styles.moveRight,\
\]}

style={\[\
styles.box,\
thirdBoxPosition === 'left' ? null : styles.moveRight,\
\]}

const styles = StyleSheet.create({
container: {
flex: 1,
alignItems: 'flex-start',
justifyContent: 'center',
},
box: {
height: 100,
width: 100,
borderRadius: 5,
margin: 8,
backgroundColor: 'blue',
},
moveRight: {
alignSelf: 'flex-end',
},
buttonContainer: {
alignSelf: 'center',
},
});

const [firstBoxPosition, setFirstBoxPosition] = useState('left');
const [secondBoxPosition, setSecondBoxPosition] = useState('left');
const [thirdBoxPosition, setThirdBoxPosition] = useState('left');

LayoutAnimation.configureNext(LayoutAnimation.Presets.easeInEaseOut);
setFirstBoxPosition(firstBoxPosition === 'left' ? 'right' : 'left');
};

LayoutAnimation.configureNext(LayoutAnimation.Presets.linear);
setSecondBoxPosition(secondBoxPosition === 'left' ? 'right' : 'left');
};

LayoutAnimation.configureNext(LayoutAnimation.Presets.spring);
setThirdBoxPosition(thirdBoxPosition === 'left' ? 'right' : 'left');
};

style={[\
styles.box,\
firstBoxPosition === 'left' ? null : styles.moveRight,\
]}

style={[\
styles.box,\
secondBoxPosition === 'left' ? null : styles.moveRight,\
]}

style={[\
styles.box,\
thirdBoxPosition === 'left' ? null : styles.moveRight,\
]}

const styles = StyleSheet.create({
container: {
flex: 1,
alignItems: 'flex-start',
justifyContent: 'center',
},
box: {
height: 100,
width: 100,
borderRadius: 5,
margin: 8,
backgroundColor: 'blue',
},
moveRight: {
alignSelf: 'flex-end',
},
buttonContainer: {
alignSelf: 'center',
},
});

### Download [Expo Go](https://expo.dev/client) and scan the QR code to get started.

exp://u.expo.dev/933fd9c0-1666-11e7-afca-d980795c5824?runtime-version=exposdk%3A53.0.0&channel-name=production&snack-channel=N9frwZrZk8

### Connected devices

Is this page useful?

- [Example](https://reactnative.dev/docs/next/layoutanimation#example)
- [Methods](https://reactnative.dev/docs/next/layoutanimation#methods)
- [`configureNext()`](https://reactnative.dev/docs/next/layoutanimation#configurenext)
- [`create()`](https://reactnative.dev/docs/next/layoutanimation#create)
- [Properties](https://reactnative.dev/docs/next/layoutanimation#properties)
- [Types](https://reactnative.dev/docs/next/layoutanimation#types)
- [Properties](https://reactnative.dev/docs/next/layoutanimation#properties-1)
- [Presets](https://reactnative.dev/docs/next/layoutanimation#presets)
- [`easeInEaseOut`](https://reactnative.dev/docs/next/layoutanimation#easeineaseout)
- [`linear`](https://reactnative.dev/docs/next/layoutanimation#linear)
- [`spring`](https://reactnative.dev/docs/next/layoutanimation#spring)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/timers

[Skip to main content](https://reactnative.dev/docs/next/timers#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/timers)** (0.81).

Version: Next

On this page

Timers are an important part of an application and React Native implements the [browser timers](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous/Timeouts_and_intervals).

## Timers [​](https://reactnative.dev/docs/next/timers\#timers "Direct link to Timers")

- `setTimeout` and `clearTimeout`
- `setInterval` and `clearInterval`
- `setImmediate` and `clearImmediate`
- `requestAnimationFrame` and `cancelAnimationFrame`

`requestAnimationFrame(fn)` is not the same as `setTimeout(fn, 0)` \- the former will fire after all the frames have flushed, whereas the latter will fire as quickly as possible (over 1000x per second on a iPhone 5S).

`setImmediate` is executed at the end of the current JavaScript execution block, right before sending the batched response

Deprecated

The `InteractionManager` behavior has been changed to be the same as `setImmediate`, which should be used instead.

One reason why well-built native apps feel so smooth is by avoiding expensive operations during interactions and animations. In React Native, we currently have a limitation that there is only a single JS execution thread, but you can use `InteractionManager` to make sure long-running work is scheduled to start after any interactions/animations have completed.

Applications can schedule tasks to run after interactions with the following:

tsx

```codeBlockLines_AclH

// ...long-running synchronous task...
});

Compare this to other scheduling alternatives:

- requestAnimationFrame(): for code that animates a view over time.
- setImmediate/setTimeout/setInterval(): run code later, note this may delay animations.
- runAfterInteractions(): run code later, without delaying active animations.

The touch handling system considers one or more active touches to be an 'interaction' and will delay `runAfterInteractions()` callbacks until all touches have ended or been cancelled.

`InteractionManager` also allows applications to register animations by creating an interaction 'handle' on animation start, and clearing it upon completion:

```codeBlockLines_AclH
const handle = InteractionManager.createInteractionHandle();
// run animation... (`runAfterInteractions` tasks are queued)
// later, on animation completion:
InteractionManager.clearInteractionHandle(handle);
// queued tasks run if all handles were cleared

Is this page useful?

- [Timers](https://reactnative.dev/docs/next/timers#timers)
- [InteractionManager](https://reactnative.dev/docs/next/timers#interactionmanager)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/sectionlist

[Skip to main content](https://reactnative.dev/docs/next/sectionlist#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/sectionlist)** (0.81).

Version: Next

On this page

A performant interface for rendering sectioned lists, supporting the most handy features:

- Fully cross-platform.
- Configurable viewability callbacks.
- List header support.
- List footer support.
- Item separator support.
- Section header support.
- Section separator support.
- Heterogeneous data and item rendering support.
- Pull to Refresh.
- Scroll loading.

## Example [​](https://reactnative.dev/docs/next/sectionlist\#example "Direct link to Example")

SectionList Example - Snack

# SectionList Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {StyleSheet, Text, View, SectionList, StatusBar} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const DATA = \[\
{\
title: 'Main dishes',\
data: \['Pizza', 'Burger', 'Risotto'\],\
},\
{\
title: 'Sides',\
data: \['French Fries', 'Onion Rings', 'Fried Shrimps'\],\
},\
{\
title: 'Drinks',\
data: \['Water', 'Coke', 'Beer'\],\
},\
{\
title: 'Desserts',\
data: \['Cheese Cake', 'Ice Cream'\],\
},\
\];

sections={DATA}

const styles = StyleSheet.create({
container: {
flex: 1,
paddingTop: StatusBar.currentHeight,
marginHorizontal: 16,
},
item: {
backgroundColor: '#f9c2ff',
padding: 20,
marginVertical: 8,
},
header: {
fontSize: 32,
backgroundColor: '#fff',
},
title: {
fontSize: 24,
},
});

export default App;

const DATA = [\
{\
title: 'Main dishes',\
data: ['Pizza', 'Burger', 'Risotto'],\
},\
{\
title: 'Sides',\
data: ['French Fries', 'Onion Rings', 'Fried Shrimps'],\
},\
{\
title: 'Drinks',\
data: ['Water', 'Coke', 'Beer'],\
},\
{\
title: 'Desserts',\
data: ['Cheese Cake', 'Ice Cream'],\
},\
];

const styles = StyleSheet.create({
container: {
flex: 1,
paddingTop: StatusBar.currentHeight,
marginHorizontal: 16,
},
item: {
backgroundColor: '#f9c2ff',
padding: 20,
marginVertical: 8,
},
header: {
fontSize: 32,
backgroundColor: '#fff',
},
title: {
fontSize: 24,
},
});

Snack

Main dishes

Pizza

Burger

Risotto

Sides

French Fries

Onion Rings

Fried Shrimps

Drinks

Water

Coke

Updating…

PreviewMy DeviceAndroidiOSWeb

- Internal state is not preserved when content scrolls out of the render window. Make sure all your data is captured in the item data or external stores like Flux, Redux, or Relay.
- This is a `PureComponent` which means that it will not re-render if `props` remain shallow-equal. Make sure that everything your `renderItem` function depends on is passed as a prop (e.g. `extraData`) that is not `===` after updates, otherwise your UI may not update on changes. This includes the `data` prop and parent component state.
- In order to constrain memory and enable smooth scrolling, content is rendered asynchronously offscreen. This means it's possible to scroll faster than the fill rate and momentarily see blank content. This is a tradeoff that can be adjusted to suit the needs of each application, and we are working on improving it behind the scenes.
- By default, the list looks for a `key` prop on each item and uses that for the React key. Alternatively, you can provide a custom `keyExtractor` prop.

* * *

# Reference

## Props [​](https://reactnative.dev/docs/next/sectionlist\#props "Direct link to Props")

### [VirtualizedList Props](https://reactnative.dev/docs/next/virtualizedlist\#props) [​](https://reactnative.dev/docs/next/sectionlist\#virtualizedlist-props "Direct link to virtualizedlist-props")

Inherits [VirtualizedList Props](https://reactnative.dev/docs/next/virtualizedlist#props).

### Required **`renderItem`** [​](https://reactnative.dev/docs/next/sectionlist\#requiredrenderitem "Direct link to requiredrenderitem")

Default renderer for every item in every section. Can be over-ridden on a per-section basis. Should return a React element.

| Type |
| --- |
| function |

The render function will be passed an object with the following keys:

- 'item' (object) - the item object as specified in this section's `data` key
- 'index' (number) - Item's index within the section.
- 'section' (object) - The full section object as specified in `sections`.
- 'separators' (object) - An object with the following keys:

- 'select' (enum) - possible values are 'leading', 'trailing'
- 'newProps' (object)

### Required **`sections`** [​](https://reactnative.dev/docs/next/sectionlist\#requiredsections "Direct link to requiredsections")

The actual data to render, akin to the `data` prop in [`FlatList`](https://reactnative.dev/docs/next/flatlist).

| Type |
| --- |
| array of [Section](https://reactnative.dev/docs/next/sectionlist#section) s |

### `extraData` [​](https://reactnative.dev/docs/next/sectionlist\#extradata "Direct link to extradata")

A marker property for telling the list to re-render (since it implements `PureComponent`). If any of your `renderItem`, Header, Footer, etc. functions depend on anything outside of the `data` prop, stick it here and treat it immutably.

| Type |
| --- |
| any |

### `initialNumToRender` [​](https://reactnative.dev/docs/next/sectionlist\#initialnumtorender "Direct link to initialnumtorender")

How many items to render in the initial batch. This should be enough to fill the screen but not much more. Note these items will never be unmounted as part of the windowed rendering in order to improve perceived performance of scroll-to-top actions.

| Type | Default |
| --- | --- |
| number | `10` |

### `inverted` [​](https://reactnative.dev/docs/next/sectionlist\#inverted "Direct link to inverted")

Reverses the direction of scroll. Uses scale transforms of -1.

| Type | Default |
| --- | --- |
| boolean | `false` |

### `ItemSeparatorComponent` [​](https://reactnative.dev/docs/next/sectionlist\#itemseparatorcomponent "Direct link to itemseparatorcomponent")

| Type |
| --- |
| component, function, element |

### `keyExtractor` [​](https://reactnative.dev/docs/next/sectionlist\#keyextractor "Direct link to keyextractor")

Used to extract a unique key for a given item at the specified index. Key is used for caching and as the React key to track item re-ordering. The default extractor checks `item.key`, then `item.id`, and then falls

| Type |
| --- |
| component, element |

### `ListFooterComponent` [​](https://reactnative.dev/docs/next/sectionlist\#listfootercomponent "Direct link to listfootercomponent")

### `ListHeaderComponent` [​](https://reactnative.dev/docs/next/sectionlist\#listheadercomponent "Direct link to listheadercomponent")

### `onRefresh` [​](https://reactnative.dev/docs/next/sectionlist\#onrefresh "Direct link to onrefresh")

If provided, a standard RefreshControl will be added for "Pull to Refresh" functionality. Make sure to also set the `refreshing` prop correctly. To offset the RefreshControl from the top (e.g. by 100 pts), use `progressViewOffset={100}`.

### `onViewableItemsChanged` [​](https://reactnative.dev/docs/next/sectionlist\#onviewableitemschanged "Direct link to onviewableitemschanged")

Called when the viewability of rows changes, as defined by the `viewabilityConfig` prop.

| Type |
| --- |

### `refreshing` [​](https://reactnative.dev/docs/next/sectionlist\#refreshing "Direct link to refreshing")

Set this true while waiting for new data from a refresh.

### `removeClippedSubviews` [​](https://reactnative.dev/docs/next/sectionlist\#removeclippedsubviews "Direct link to removeclippedsubviews")

warning

Using this property may lead to bugs (missing content) in some circumstances - use at your own risk.

When `true`, offscreen child views are removed from their native backing superview when offscreen. This may improve scroll performance for large lists. On Android the default value is `true`.

| Type |
| --- |
| boolean |

### `renderSectionFooter` [​](https://reactnative.dev/docs/next/sectionlist\#rendersectionfooter "Direct link to rendersectionfooter")

Rendered at the bottom of each section.

### `renderSectionHeader` [​](https://reactnative.dev/docs/next/sectionlist\#rendersectionheader "Direct link to rendersectionheader")

Rendered at the top of each section. These stick to the top of the `ScrollView` by default on iOS. See `stickySectionHeadersEnabled`.

### `SectionSeparatorComponent` [​](https://reactnative.dev/docs/next/sectionlist\#sectionseparatorcomponent "Direct link to sectionseparatorcomponent")

Rendered at the top and bottom of each section (note this is different from `ItemSeparatorComponent` which is only rendered between items). These are intended to separate sections from the headers above and below and typically have the same highlight response as `ItemSeparatorComponent`. Also receives `highlighted`, `[leading/trailing][Item/Section]`, and any custom props from `separators.updateProps`.

### `stickySectionHeadersEnabled` [​](https://reactnative.dev/docs/next/sectionlist\#stickysectionheadersenabled "Direct link to stickysectionheadersenabled")

Makes section headers stick to the top of the screen until the next one pushes it off. Only enabled by default on iOS because that is the platform standard there.

| Type | Default |
| --- | --- |

## Methods [​](https://reactnative.dev/docs/next/sectionlist\#methods "Direct link to Methods")

### `flashScrollIndicators()` iOS [​](https://reactnative.dev/docs/next/sectionlist\#flashscrollindicators-ios "Direct link to flashscrollindicators-ios")

tsx

```codeBlockLines_AclH
flashScrollIndicators();

Displays the scroll indicators momentarily.

### `recordInteraction()` [​](https://reactnative.dev/docs/next/sectionlist\#recordinteraction "Direct link to recordinteraction")

```codeBlockLines_AclH
recordInteraction();

Tells the list an interaction has occurred, which should trigger viewability calculations, e.g. if `waitForInteractions` is true and the user has not scrolled. This is typically called by taps on items or by navigation actions.

### `scrollToLocation()` [​](https://reactnative.dev/docs/next/sectionlist\#scrolltolocation "Direct link to scrolltolocation")

```codeBlockLines_AclH
scrollToLocation(params: SectionListScrollParams);

Scrolls to the item at the specified `sectionIndex` and `itemIndex` (within the section) positioned in the viewable area such that `viewPosition` set to `0` places it at the top (and may be covered by a sticky header), `1` at the bottom, and `0.5` centered in the middle.

note

You cannot scroll to locations outside the render window without specifying the `getItemLayout` or `onScrollToIndexFailed` prop.

**Parameters:**

| Name | Type |
| --- | --- |

Valid `params` keys are:

- 'animated' (boolean) - Whether the list should do an animation while scrolling. Defaults to `true`.
- 'itemIndex' (number) - Index within section for the item to scroll to. Required.
- 'sectionIndex' (number) - Index for section that contains the item to scroll to. Required.
- 'viewOffset' (number) - A fixed number of pixels to offset the final target position, e.g. to compensate for sticky headers.
- 'viewPosition' (number) - A value of `0` places the item specified by index at the top, `1` at the bottom, and `0.5` centered in the middle.

## Type Definitions [​](https://reactnative.dev/docs/next/sectionlist\#type-definitions "Direct link to Type Definitions")

### Section [​](https://reactnative.dev/docs/next/sectionlist\#section "Direct link to Section")

An object that identifies the data to be rendered for a given section.

**Properties:**

| Name | Type | Description |
| --- | --- | --- |

| key | string | Optional key to keep track of section re-ordering. If you don't plan on re-ordering sections, the array index will be used by default. |
| renderItem | function | Optionally define an arbitrary item renderer for this section, overriding the default [`renderItem`](https://reactnative.dev/docs/next/sectionlist#renderitem) for the list. |
| ItemSeparatorComponent | component, element | Optionally define an arbitrary item separator for this section, overriding the default [`ItemSeparatorComponent`](https://reactnative.dev/docs/next/sectionlist#itemseparatorcomponent) for the list. |
| keyExtractor | function | Optionally define an arbitrary key extractor for this section, overriding the default [`keyExtractor`](https://reactnative.dev/docs/next/sectionlist#keyextractor). |

Is this page useful?

- [Example](https://reactnative.dev/docs/next/sectionlist#example)
- [Props](https://reactnative.dev/docs/next/sectionlist#props)
- [VirtualizedList Props](https://reactnative.dev/docs/next/sectionlist#virtualizedlist-props)
- [Required\\
**`renderItem`**](https://reactnative.dev/docs/next/sectionlist#requiredrenderitem)
- [Required\\
**`sections`**](https://reactnative.dev/docs/next/sectionlist#requiredsections)
- [`extraData`](https://reactnative.dev/docs/next/sectionlist#extradata)
- [`initialNumToRender`](https://reactnative.dev/docs/next/sectionlist#initialnumtorender)
- [`inverted`](https://reactnative.dev/docs/next/sectionlist#inverted)
- [`ItemSeparatorComponent`](https://reactnative.dev/docs/next/sectionlist#itemseparatorcomponent)
- [`keyExtractor`](https://reactnative.dev/docs/next/sectionlist#keyextractor)
- [`ListEmptyComponent`](https://reactnative.dev/docs/next/sectionlist#listemptycomponent)
- [`ListFooterComponent`](https://reactnative.dev/docs/next/sectionlist#listfootercomponent)
- [`ListHeaderComponent`](https://reactnative.dev/docs/next/sectionlist#listheadercomponent)
- [`onRefresh`](https://reactnative.dev/docs/next/sectionlist#onrefresh)
- [`onViewableItemsChanged`](https://reactnative.dev/docs/next/sectionlist#onviewableitemschanged)
- [`refreshing`](https://reactnative.dev/docs/next/sectionlist#refreshing)
- [`removeClippedSubviews`](https://reactnative.dev/docs/next/sectionlist#removeclippedsubviews)
- [`renderSectionFooter`](https://reactnative.dev/docs/next/sectionlist#rendersectionfooter)
- [`renderSectionHeader`](https://reactnative.dev/docs/next/sectionlist#rendersectionheader)
- [`SectionSeparatorComponent`](https://reactnative.dev/docs/next/sectionlist#sectionseparatorcomponent)
- [`stickySectionHeadersEnabled`](https://reactnative.dev/docs/next/sectionlist#stickysectionheadersenabled)
- [Methods](https://reactnative.dev/docs/next/sectionlist#methods)
- [`flashScrollIndicators()` \\
iOS](https://reactnative.dev/docs/next/sectionlist#flashscrollindicators-ios)
- [`recordInteraction()`](https://reactnative.dev/docs/next/sectionlist#recordinteraction)
- [`scrollToLocation()`](https://reactnative.dev/docs/next/sectionlist#scrolltolocation)
- [Type Definitions](https://reactnative.dev/docs/next/sectionlist#type-definitions)
- [Section](https://reactnative.dev/docs/next/sectionlist#section)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/systrace

[Skip to main content](https://reactnative.dev/docs/next/systrace#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/systrace)** (0.81).

Version: Next

On this page

`Systrace` is a standard Android marker-based profiling tool (and is installed when you install the Android platform-tools package). Profiled code blocks are surrounded by start/end markers which are then visualized in a colorful chart format. Both the Android SDK and React Native framework provide standard markers that you can visualize.

## Example [​](https://reactnative.dev/docs/next/systrace\#example "Direct link to Example")

`Systrace` allows you to mark JavaScript (JS) events with a tag and an integer value. Capture the non-Timed JS events in EasyProfiler.

Systrace Example - Snack

# Systrace Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {Button, Text, View, StyleSheet, Systrace} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

Systrace.setEnabled(true); // Call setEnabled to turn on the profiling.
Systrace.beginEvent('event\_label');
Systrace.counterEvent('event\_label', 10);
};

Systrace.endEvent();
};

return (

title="Capture the non-Timed JS events in EasyProfiler"

title="Stop capturing"

color="#FF0000"

};

const styles = StyleSheet.create({
container: {
flex: 1,
backgroundColor: '#fff',
alignItems: 'center',
justifyContent: 'center',
padding: 8,
gap: 16,
},
header: {
fontSize: 18,
fontWeight: 'bold',
textAlign: 'center',
},
paragraph: {
fontSize: 25,
textAlign: 'center',
},
buttonsColumn: {
gap: 16,
},
});

export default App;

Systrace.setEnabled(true); // Call setEnabled to turn on the profiling.
Systrace.beginEvent('event_label');
Systrace.counterEvent('event_label', 10);
};

Systrace.endEvent();
};

const styles = StyleSheet.create({
container: {
flex: 1,
backgroundColor: '#fff',
alignItems: 'center',
justifyContent: 'center',
padding: 8,
gap: 16,
},
header: {
fontSize: 18,
fontWeight: 'bold',
textAlign: 'center',
},
paragraph: {
fontSize: 25,
textAlign: 'center',
},
buttonsColumn: {
gap: 16,
},
});

Snack

React Native Systrace API

Capture the non-Timed JS events in EasyProfiler

Stop capturing

Updating…

PreviewMy DeviceAndroidiOSWeb

* * *

# Reference

## Methods [​](https://reactnative.dev/docs/next/systrace\#methods "Direct link to Methods")

### `isEnabled()` [​](https://reactnative.dev/docs/next/systrace\#isenabled "Direct link to isenabled")

tsx

```codeBlockLines_AclH
static isEnabled(): boolean;

### `beginEvent()` [​](https://reactnative.dev/docs/next/systrace\#beginevent "Direct link to beginevent")

```codeBlockLines_AclH

beginEvent/endEvent for starting and then ending a profile within the same call stack frame.

### `endEvent()` [​](https://reactnative.dev/docs/next/systrace\#endevent "Direct link to endevent")

```codeBlockLines_AclH
static endEvent(args?: EventArgs);

### `beginAsyncEvent()` [​](https://reactnative.dev/docs/next/systrace\#beginasyncevent "Direct link to beginasyncevent")

```codeBlockLines_AclH
static beginAsyncEvent(

args?: EventArgs,
): number;

beginAsyncEvent/endAsyncEvent for starting and then ending a profile where the end can either occur on another thread or out of the current stack frame, eg await the returned cookie variable should be used as input into the endAsyncEvent call to end the profile.

### `endAsyncEvent()` [​](https://reactnative.dev/docs/next/systrace\#endasyncevent "Direct link to endasyncevent")

```codeBlockLines_AclH
static endAsyncEvent(
eventName: EventName,
cookie: number,
args?: EventArgs,
);

### `counterEvent()` [​](https://reactnative.dev/docs/next/systrace\#counterevent "Direct link to counterevent")

Register the value to the profileName on the systrace timeline.

Is this page useful?

- [Example](https://reactnative.dev/docs/next/systrace#example)
- [Methods](https://reactnative.dev/docs/next/systrace#methods)
- [`isEnabled()`](https://reactnative.dev/docs/next/systrace#isenabled)
- [`beginEvent()`](https://reactnative.dev/docs/next/systrace#beginevent)
- [`endEvent()`](https://reactnative.dev/docs/next/systrace#endevent)
- [`beginAsyncEvent()`](https://reactnative.dev/docs/next/systrace#beginasyncevent)
- [`endAsyncEvent()`](https://reactnative.dev/docs/next/systrace#endasyncevent)
- [`counterEvent()`](https://reactnative.dev/docs/next/systrace#counterevent)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/the-new-architecture/fabric-component-native-commands

[Skip to main content](https://reactnative.dev/docs/next/the-new-architecture/fabric-component-native-commands#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/the-new-architecture/fabric-component-native-commands)** (0.81).

Version: Next

On this page

In the [base guide](https://reactnative.dev/docs/fabric-native-components-introduction) to write a new Native Component, you have explored how to create a new component, how to pass properties from the JS side to the native side, and how to emit events from native side to JS.

Custom components can also call some of the functions implemented in the native code imperatively, to achieve some more advanced functionalities, such as programmatically reload a web page.

In this guide you'll learn how to achieve this, by using a new concept: Native Commands.

This guide starts from the [Native Components](https://reactnative.dev/docs/fabric-native-components-introduction) guide and assumes that you are familiar with it and that you are familiar with [Codegen](https://reactnative.dev/docs/next/the-new-architecture/what-is-codegen).

## 1\. Update your component specs [​](https://reactnative.dev/docs/next/the-new-architecture/fabric-component-native-commands\#1-update-your-component-specs "Direct link to 1. Update your component specs")

The first step is to update the component spec to declare the `NativeCommand`.

- TypeScript
- Flow

Update the `WebViewNativeComponent.ts` as it follows:

Demo/specs/WebViewNativeComponent.ts

```codeBlockLines_AclH
import type {HostComponent, ViewProps} from 'react-native';
import type {BubblingEventHandler} from 'react-native/Libraries/Types/CodegenTypes';
import codegenNativeComponent from 'react-native/Libraries/Utilities/codegenNativeComponent';
+import codegenNativeCommands from 'react-native/Libraries/Utilities/codegenNativeCommands';

type WebViewScriptLoadedEvent = {
result: 'success' | 'error';
};

export interface NativeProps extends ViewProps {
sourceURL?: string;

}

+interface NativeCommands {
+ reload: (viewRef: React.ElementRef<HostComponent<NativeProps>>) => void;
+}

+ supportedCommands: ['reload'],
+});

'CustomWebView',

Update the `WebViewNativeComponent.js` as it follows:

Demo/specs/WebViewNativeComponent.js

```codeBlockLines_AclH
// @flow strict-local

import type {HostComponent, ViewProps} from 'react-native';
import type {BubblingEventHandler} from 'react-native/Libraries/Types/CodegenTypes';
import codegenNativeComponent from 'react-native/Libraries/Utilities/codegenNativeComponent';
+import codegenNativeCommands from 'react-native/Libraries/Utilities/codegenNativeCommands';

type WebViewScriptLoadedEvent = $ReadOnly<{|
result: "success" | "error",

type NativeProps = $ReadOnly<{|
...ViewProps,
sourceURL?: string;

These changes requires you to:

1. Import the `codegenNativeCommands` function from `react-native`. This instruct codegen that it has to generate the code for `NativeCommands`
2. Define an interface that contains the methods we want to invoke in native. All the Native Commands must have a first parameter of type `React.ElementRef`.
3. Export the `Commands` variable that is the result of the invocation of `codegenNativeCommands`, passing a list of the supported commands.

warning

In TypeScript, the `React.ElementRef` is deprecated. The correct type to use is actually `React.ComponentRef`. However, due to a bug in Codegen, using `ComponentRef` will crash the app. We have the fix already, but we need to release a new version of React Native to apply it.

## 2\. Update the App code to use the new command [​](https://reactnative.dev/docs/next/the-new-architecture/fabric-component-native-commands\#2-update-the-app-code-to-use-the-new-command "Direct link to 2. Update the App code to use the new command")

Now you can use the command in the the app.

Open the `App.tsx` file and modify it as it follows:

App.tsx

```codeBlockLines_AclH
import React from 'react';
-import {Alert, StyleSheet, View} from 'react-native';
-import WebView from '../specs/WebViewNativeComponent';
+import {Alert, StyleSheet, Pressable, Text, View} from 'react-native';
+import WebView, {Commands} from '../specs/WebViewNativeComponent';

function App(): React.JSX.Element {

+

+ if (webViewRef.current) {
+ Commands.reload(webViewRef.current);
+ }
+ };

return (

+ ref={webViewRef}
sourceURL="https://react.dev/"
style={styles.webview}

Alert.alert('Page Loaded');
}}

const styles = StyleSheet.create({
container: {
flex: 1,
alignItems: 'center',
alignContent: 'center',
},
webview: {
width: '100%',
- height: '100%',
+ height: '90%',
},
+ tabbar: {
+ flex: 1,
+ backgroundColor: 'gray',
+ width: '100%',
+ alignItems: 'center',
+ alignContent: 'center',
+ },
+ button: {
+ margin: 10,
+ },
+ buttonText: {
+ fontSize: 20,
+ fontWeight: 'bold',
+ color: '#00D6FF',
+ width: '100%',
+ },
+ buttonTextPressed: {
+ fontSize: 20,
+ fontWeight: 'bold',
+ color: '#00D6FF77',
+ width: '100%',
+ },
});

export default App;

App.jsx

The relevant changes here are the following:

1. Import the `Commands` const from the spec file. The Command is an object that let us call the methods we have in native.
2. Declare a ref to the `WebView` custom native component using `useRef`. You need to pass this ref to the native command.
3. Implement the `refresh` function. This function checks that the WebView's ref is not null and if not, it calls the command.
4. Add a pressable to call the command when the user taps on the button.

The remaining changes are regular React changes to add a `Pressable` and to style the view so it looks nicer.

## 3\. Rerun Codegen [​](https://reactnative.dev/docs/next/the-new-architecture/fabric-component-native-commands\#3-rerun-codegen "Direct link to 3. Rerun Codegen")

Now that the specs are updated and the code is ready to use the command, it is time to implement the Native code. However, before diving into writing native code, you have to rerun codegen, to let it generate the new types that are needed by the Native code.

- Android
- iOS

Codegen is executed through the `generateCodegenArtifactsFromSchema` Gradle task:

bash

```codeBlockLines_AclH
cd android
./gradlew generateCodegenArtifactsFromSchema

BUILD SUCCESSFUL in 837ms
14 actionable tasks: 3 executed, 11 up-to-date

This is automatically run when you build your Android application.

Codegen is run as part of the script phases that's automatically added to the project generated by CocoaPods.

```codeBlockLines_AclH
cd ios
bundle install
bundle exec pod install

The output will look like this:

shell

```codeBlockLines_AclH
...
Framework build type is static library
[Codegen] Adding script_phases to ReactCodegen.
[Codegen] Generating ./build/generated/ios/ReactCodegen.podspec.json
[Codegen] Analyzing /Users/me/src/TurboModuleExample/package.json
[Codegen] Searching for codegen-enabled libraries in the app.
[Codegen] Found TurboModuleExample
[Codegen] Searching for codegen-enabled libraries in the project dependencies.
[Codegen] Found react-native
...

## 4\. Implement the Native Code [​](https://reactnative.dev/docs/next/the-new-architecture/fabric-component-native-commands\#4-implement-the-native-code "Direct link to 4. Implement the Native Code")

Now it's time to implement the native changes that will enable your JS to directly invoke methods on your native view.

To let your view respond to the Native Command, you only have to modify the ReactWebViewManager.

If you try to build right now, the build will fail, because the current `ReactWebViewManager` does not implement the new `reload` method.
To fix the build error, let's modify the `ReactWebViewManager` to implement it.

- Java
- Kotlin

ReactWebViewManager.java

```codeBlockLines_AclH

//...
@ReactProp(name = "sourceUrl")
@Override
public void setSourceURL(ReactWebView view, String sourceURL) {
if (sourceURL == null) {
view.emitOnScriptLoaded(ReactWebView.OnScriptLoadedEventResult.error);
return;
}

+ @Override
+ public void reload(ReactWebView view) {
+ view.reload();
+ }

public static final String REACT_CLASS = "CustomWebView";
//...

ReactWebViewManager.kt

```codeBlockLines_AclH
@ReactProp(name = "sourceUrl")
override fun setSourceURL(view: ReactWebView, sourceURL: String?) {
if (sourceURL == null) {
view.emitOnScriptLoaded(ReactWebView.OnScriptLoadedEventResult.error)
return;
}
view.loadUrl(sourceURL, emptyMap())
}

+ override fun reload(view: ReactWebView) {
+ view.reload()
+ }

companion object {
const val REACT_CLASS = "CustomWebView"
}

In this case, it's enough to call directly the `view.reload()` method because our ReactWebView inherits from the Android's `WebView` and it has a reload method directly available. If you are implementing a custom function, that is not available in your custom view, you might also have to implement the required method in the Android's View that is managed by the React Native's `ViewManager`.

To let your view respond to the Native Command, we need to implement a couple of methods on iOS.

Let's open the `RCTWebView.mm` file and let's modify it as it follows:

RCTWebView.mm

```codeBlockLines_AclH
// Event emitter convenience method
- (const CustomWebViewEventEmitter &)eventEmitter
{

+ - (void)handleCommand:(const NSString *)commandName args:(const NSArray *)args
+ {
+ RCTCustomWebViewHandleCommand(self, commandName, args);
+ }
+
+ - (void)reload
+ {
+ [_webView reloadFromOrigin];
+ }

+ (ComponentDescriptorProvider)componentDescriptorProvider
{

To make your view respond to the Native Commands, you need to apply the following changes:

2. Implement the `reload` method. In this example, the `reload` method calls the `reloadFromOrigin` function of the WebKit's WebView.

## 5\. Run your app [​](https://reactnative.dev/docs/next/the-new-architecture/fabric-component-native-commands\#5-run-your-app "Direct link to 5. Run your app")

Finally, you can run your app with the usual commands. Once the app is running, you can tap on the refresh button to see the page getting reloaded.

| Android | iOS |
| --- | --- |
| ![](https://reactnative.dev/docs/assets/native-commands-android.gif) | ![](https://reactnative.dev/docs/assets/native-commands-ios.gif) |

Is this page useful?

- [1\. Update your component specs](https://reactnative.dev/docs/next/the-new-architecture/fabric-component-native-commands#1-update-your-component-specs)
- [2\. Update the App code to use the new command](https://reactnative.dev/docs/next/the-new-architecture/fabric-component-native-commands#2-update-the-app-code-to-use-the-new-command)
- [3\. Rerun Codegen](https://reactnative.dev/docs/next/the-new-architecture/fabric-component-native-commands#3-rerun-codegen)
- [4\. Implement the Native Code](https://reactnative.dev/docs/next/the-new-architecture/fabric-component-native-commands#4-implement-the-native-code)
- [5\. Run your app](https://reactnative.dev/docs/next/the-new-architecture/fabric-component-native-commands#5-run-your-app)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/legacy/native-modules-setup

[Skip to main content](https://reactnative.dev/docs/next/legacy/native-modules-setup#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/legacy/native-modules-setup)** (0.81).

Version: Next

info

Native Module and Native Components are our stable technologies used by the legacy architecture.
They will be deprecated in the future when the New Architecture will be stable. The New Architecture uses [Turbo Native Module](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/turbo-modules.md) and [Fabric Native Components](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/fabric-native-components.md) to achieve similar results.

Native modules are usually distributed as npm packages, except that on top of the usual JavaScript they will include some native code per platform. To understand more about npm packages you may find [this guide](https://docs.npmjs.com/packages-and-modules/contributing-packages-to-the-registry) useful.

To get set up with the basic project structure for a native module we will use the community tool called [create-react-native-library](https://callstack.github.io/react-native-builder-bob/create). You can go ahead further and dive deep into how that library works, but for our needs we will only execute the basic script:

shell

```codeBlockLines_AclH
npx create-react-native-library@latest react-native-awesome-module

Where `react-native-awesome-module` is the name you would like for the new module. After doing this you will navigate into `react-native-awesome-module` folder and bootstrap the example project by running:

```codeBlockLines_AclH
yarn

When the bootstrap is done, you will be able to start the example app by executing one of the following commands:

```codeBlockLines_AclH
# Android app
yarn example android
# iOS app
yarn example ios

When all steps above are done, you will be able to continue with [Android Native Modules](https://reactnative.dev/docs/next/legacy/native-modules-android) or [iOS Native Modules](https://reactnative.dev/docs/next/legacy/native-modules-ios) guides to add in some code.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/nodes

[Skip to main content](https://reactnative.dev/docs/next/nodes#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/getting-started)** (0.81).

Version: Next

React Native apps render a native view tree that represents the UI, similar to how React DOM does on Web (the DOM tree). React Native provides imperative access to this tree via [refs](https://react.dev/learn/manipulating-the-dom-with-refs), which are returned by all native components (including those rendered by built-in components like [`View`](https://reactnative.dev/docs/next/view)).

React Native provides 3 types of nodes:

- [Elements](https://reactnative.dev/docs/next/element-nodes): element nodes represent native components in the native view tree (similar to [Element](https://developer.mozilla.org/en-US/docs/Web/API/Element) nodes on Web). They are provided by all native components via refs.
- [Text](https://reactnative.dev/docs/next/text-nodes): text nodes represent raw text content on the tree (similar to [`Text`](https://developer.mozilla.org/en-US/docs/Web/API/Text) nodes on Web). They are not directly accessible via `refs`, but can be accessed using methods like [`childNodes`](https://developer.mozilla.org/en-US/docs/Web/API/Node/childNodes) on element refs.
- [Documents](https://reactnative.dev/docs/next/document-nodes): document nodes represent a complete native view tree (similar to [`Document`](https://developer.mozilla.org/en-US/docs/Web/API/Document) nodes on Web). Like text nodes, they can only be accessed through other nodes, using properties like [`ownerDocument`](https://developer.mozilla.org/en-US/docs/Web/API/Node/ownerDocument).

As on Web, these nodes can be used to traverse the rendered UI tree, access layout information or execute imperative operations like `focus`.

info

**Unlike on Web, these nodes do not allow mutation** (e.g.: [`node.appendChild`](https://developer.mozilla.org/en-US/docs/Web/API/Node/appendChild)), as the tree contents are fully managed by the React renderer.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/the-new-architecture/layout-measurements

[Skip to main content](https://reactnative.dev/docs/next/the-new-architecture/layout-measurements#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/the-new-architecture/layout-measurements)** (0.81).

Version: Next

On this page

Sometimes, you need to measure the current layout to apply some changes to the overall layout or to make decisions and call some specific logic.

React Native provides some native methods to know what are the measurements of the views.

The best way to invoke those methods is in a `useLayoutEffect` hook: this will give you the most recent values for those measurements and it will let you apply changes in the same frame when the measurements are computed.

Typical code will look like this:

tsx

```codeBlockLines_AclH
function AComponent(children) {
const targetRef = React.useRef(null)

//do something with the measurements
});
}, [ /* add dependencies here */]);

return (

}

note

The methods described here are available on most of the default components provided by React Native. However, they are _not_ available on composite components that aren't directly backed by a native view. This will generally include most components that you define in your own app.

## measure(callback) [​](https://reactnative.dev/docs/next/the-new-architecture/layout-measurements\#measurecallback "Direct link to measure(callback)")

Determines the location on screen ( `x` and `y`), `width`, and `height` in the viewport of the given view. Returns the values via an async callback. If successful, the callback will be called with the following arguments:

- `x`: the `x` coordinate of the origin (top-left corner) of the measured view in the viewport.
- `y`: the `y` coordinate of the origin (top-left corner) of the measured view in the viewport.
- `width`: the `width` of the view.
- `height`: the `height` of the view.
- `pageX`: the `x` coordinate of the view in the viewport (typically the whole screen).
- `pageY`: the `y` coordinate of the view in the viewport (typically the whole screen).

Also the `width` and `height` returned by `measure()` are the `width` and `height` of the component in the viewport.

## measureInWindow(callback) [​](https://reactnative.dev/docs/next/the-new-architecture/layout-measurements\#measureinwindowcallback "Direct link to measureInWindow(callback)")

Determines the location ( `x` and `y`) of the given view in the window and returns the values via an async callback. If the React root view is embedded in another native view, this will give you the absolute coordinates. If successful, the callback will be called with the following arguments:

- `x`: the `x` coordinate of the view in the current window.
- `y`: the `y` coordinate of the view in the current window.
- `width`: the `width` of the view.
- `height`: the `height` of the view.

Is this page useful?

- [measure(callback)](https://reactnative.dev/docs/next/the-new-architecture/layout-measurements#measurecallback)
- [measureInWindow(callback)](https://reactnative.dev/docs/next/the-new-architecture/layout-measurements#measureinwindowcallback)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/layoutevent

[Skip to main content](https://reactnative.dev/docs/next/layoutevent#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/layoutevent)** (0.81).

Version: Next

On this page

`LayoutEvent` object is returned in the callback as a result of component layout change, for example `onLayout` in [View](https://reactnative.dev/docs/next/view) component.

## Example [​](https://reactnative.dev/docs/next/layoutevent\#example "Direct link to Example")

js

```codeBlockLines_AclH
{
layout: {
width: 520,
height: 70.5,
x: 0,
y: 42.5
},
target: 1127
}

## Keys and values [​](https://reactnative.dev/docs/next/layoutevent\#keys-and-values "Direct link to Keys and values")

### `height` [​](https://reactnative.dev/docs/next/layoutevent\#height "Direct link to height")

Height of the component after the layout changes.

| Type | Optional |
| --- | --- |
| number | No |

### `width` [​](https://reactnative.dev/docs/next/layoutevent\#width "Direct link to width")

Width of the component after the layout changes.

### `x` [​](https://reactnative.dev/docs/next/layoutevent\#x "Direct link to x")

Component X coordinate inside the parent component.

### `y` [​](https://reactnative.dev/docs/next/layoutevent\#y "Direct link to y")

Component Y coordinate inside the parent component.

### `target` [​](https://reactnative.dev/docs/next/layoutevent\#target "Direct link to target")

The node id of the element receiving the LayoutEvent.

| Type | Optional |
| --- | --- |
| number, `null`, `undefined` | No |

## Used by [​](https://reactnative.dev/docs/next/layoutevent\#used-by "Direct link to Used by")

- [`Image`](https://reactnative.dev/docs/next/image)
- [`Pressable`](https://reactnative.dev/docs/next/pressable)
- [`ScrollView`](https://reactnative.dev/docs/next/scrollview)
- [`Text`](https://reactnative.dev/docs/next/text)
- [`TextInput`](https://reactnative.dev/docs/next/textinput)
- [`TouchableWithoutFeedback`](https://reactnative.dev/docs/next/touchablewithoutfeedback)
- [`View`](https://reactnative.dev/docs/next/view)

Is this page useful?

- [Example](https://reactnative.dev/docs/next/layoutevent#example)
- [Keys and values](https://reactnative.dev/docs/next/layoutevent#keys-and-values)
- [`height`](https://reactnative.dev/docs/next/layoutevent#height)
- [`width`](https://reactnative.dev/docs/next/layoutevent#width)
- [`x`](https://reactnative.dev/docs/next/layoutevent#x)
- [`y`](https://reactnative.dev/docs/next/layoutevent#y)
- [`target`](https://reactnative.dev/docs/next/layoutevent#target)
- [Used by](https://reactnative.dev/docs/next/layoutevent#used-by)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/statusbar

[Skip to main content](https://reactnative.dev/docs/next/statusbar#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/statusbar)** (0.81).

Version: Next

On this page

Component to control the app's status bar. The status bar is the zone, typically at the top of the screen, that displays the current time, Wi-Fi and cellular network information, battery level and/or other status icons.

### Usage with Navigator [​](https://reactnative.dev/docs/next/statusbar\#usage-with-navigator "Direct link to Usage with Navigator")

It is possible to have multiple `StatusBar` components mounted at the same time. The props will be merged in the order the `StatusBar` components were mounted.

- TypeScript
- JavaScript

StatusBar Component Example - Snack

# StatusBar Component Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React, {useState} from 'react';
import {
Button,
Platform,
StatusBar,
StyleSheet,
Text,
View,
} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const STYLES = \['default', 'dark-content', 'light-content'\];
const TRANSITIONS = \['fade', 'slide', 'none'\];

const \[hidden, setHidden\] = useState(false);
const \[statusBarStyle, setStatusBarStyle\] = useState(STYLES\[0\]);
const \[statusBarTransition, setStatusBarTransition\] = useState(
TRANSITIONS\[0\],
);

const styleId = STYLES.indexOf(statusBarStyle) + 1;
if (styleId === STYLES.length) {
setStatusBarStyle(STYLES\[0\]);
} else {
setStatusBarStyle(STYLES\[styleId\]);
}
};

const transition = TRANSITIONS.indexOf(statusBarTransition) + 1;
if (transition === TRANSITIONS.length) {
setStatusBarTransition(TRANSITIONS\[0\]);
} else {
setStatusBarTransition(TRANSITIONS\[transition\]);
}
};

return (

animated={true}
backgroundColor="#61dafb"
barStyle={statusBarStyle}
showHideTransition={statusBarTransition}
hidden={hidden}

{hidden ? 'Hidden' : 'Visible'}

{statusBarStyle}

{statusBarTransition}

title="Toggle StatusBar"
onPress={changeStatusBarVisibility}

title="Change StatusBar Style"
onPress={changeStatusBarStyle}

<Button
title="Change StatusBar Transition"
onPress={changeStatusBarTransition}

};

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
backgroundColor: '#ECF0F1',
},
buttonsContainer: {
padding: 10,
},
textStyle: {
textAlign: 'center',
marginBottom: 8,
},
});

export default App;

import React, {useState} from 'react';
import {
Button,
Platform,
StatusBar,
StyleSheet,
Text,
View,
} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const STYLES = ['default', 'dark-content', 'light-content'];
const TRANSITIONS = ['fade', 'slide', 'none'];

const [hidden, setHidden] = useState(false);
const [statusBarStyle, setStatusBarStyle] = useState(STYLES[0]);
const [statusBarTransition, setStatusBarTransition] = useState(
TRANSITIONS[0],
);

const styleId = STYLES.indexOf(statusBarStyle) + 1;
if (styleId === STYLES.length) {
setStatusBarStyle(STYLES[0]);
} else {
setStatusBarStyle(STYLES[styleId]);
}
};

const transition = TRANSITIONS.indexOf(statusBarTransition) + 1;
if (transition === TRANSITIONS.length) {
setStatusBarTransition(TRANSITIONS[0]);
} else {
setStatusBarTransition(TRANSITIONS[transition]);
}
};

animated={true}
backgroundColor="#61dafb"
barStyle={statusBarStyle}
showHideTransition={statusBarTransition}
hidden={hidden}

title="Toggle StatusBar"
onPress={changeStatusBarVisibility}

title="Change StatusBar Style"
onPress={changeStatusBarStyle}

<Button
title="Change StatusBar Transition"
onPress={changeStatusBarTransition}

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
backgroundColor: '#ECF0F1',
},
buttonsContainer: {
padding: 10,
},
textStyle: {
textAlign: 'center',
marginBottom: 8,
},
});

### Download [Expo Go](https://expo.dev/client) and scan the QR code to get started.

exp://u.expo.dev/933fd9c0-1666-11e7-afca-d980795c5824?runtime-version=exposdk%3A53.0.0&channel-name=production&snack-channel=yTdbJjN2UG

### Connected devices

0

[Log in](https://expo.dev/login) to open this Snack from Expo Go on your device or simulator.

PreviewMy DeviceAndroidiOS

import React, {useState} from 'react';
import {
Button,
Platform,
StatusBar,
StyleSheet,
Text,
View,
StatusBarStyle,
} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const STYLES = \['default', 'dark-content', 'light-content'\] as const;
const TRANSITIONS = \['fade', 'slide', 'none'\] as const;

const \[hidden, setHidden\] = useState(false);

STYLES\[0\],
);
const \[statusBarTransition, setStatusBarTransition\] = useState<

import React, {useState} from 'react';
import {
Button,
Platform,
StatusBar,
StyleSheet,
Text,
View,
StatusBarStyle,
} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const STYLES = ['default', 'dark-content', 'light-content'] as const;
const TRANSITIONS = ['fade', 'slide', 'none'] as const;

const [hidden, setHidden] = useState(false);

STYLES[0],
);
const [statusBarTransition, setStatusBarTransition] = useState<

### Download [Expo Go](https://expo.dev/client) and scan the QR code to get started.

exp://u.expo.dev/933fd9c0-1666-11e7-afca-d980795c5824?runtime-version=exposdk%3A53.0.0&channel-name=production&snack-channel=YSKdFcnSHW

### Connected devices

### Imperative API [​](https://reactnative.dev/docs/next/statusbar\#imperative-api "Direct link to Imperative API")

For cases where using a component is not ideal, there is also an imperative API exposed as static functions on the component. It is however not recommended to use the static API and the component for the same prop because any value set by the static API will get overridden by the one set by the component in the next render.

* * *

# Reference

## Constants [​](https://reactnative.dev/docs/next/statusbar\#constants "Direct link to Constants")

### `currentHeight` Android [​](https://reactnative.dev/docs/next/statusbar\#currentheight-android "Direct link to currentheight-android")

The height of the status bar, which includes the notch height, if present.

## Props [​](https://reactnative.dev/docs/next/statusbar\#props "Direct link to Props")

### `animated` [​](https://reactnative.dev/docs/next/statusbar\#animated "Direct link to animated")

If the transition between status bar property changes should be animated. Supported for `backgroundColor`, `barStyle` and `hidden` properties.

| Type | Required | Default |
| --- | --- | --- |
| boolean | No | `false` |

### `backgroundColor` Android [​](https://reactnative.dev/docs/next/statusbar\#backgroundcolor-android "Direct link to backgroundcolor-android")

The background color of the status bar.

warning

Due to edge-to-edge enforcement introduced in Android 15, setting background color of the status bar is deprecated in API level 35 and setting it will have no effect. You can read more about our [edge-to-edge recommendations here](https://github.com/react-native-community/discussions-and-proposals/discussions/827).

| Type | Required | Default |
| --- | --- | --- |
| [color](https://reactnative.dev/docs/next/colors) | No | default system StatusBar background color, or `'black'` if not defined |

### `barStyle` [​](https://reactnative.dev/docs/next/statusbar\#barstyle "Direct link to barstyle")

Sets the color of the status bar text.

On Android, this will only have an impact on API versions 23 and above.

| Type | Required | Default |
| --- | --- | --- |
| [StatusBarStyle](https://reactnative.dev/docs/next/statusbar#statusbarstyle) | No | `'default'` |

### `hidden` [​](https://reactnative.dev/docs/next/statusbar\#hidden "Direct link to hidden")

If the status bar is hidden.

### `networkActivityIndicatorVisible` iOS [​](https://reactnative.dev/docs/next/statusbar\#networkactivityindicatorvisible-ios "Direct link to networkactivityindicatorvisible-ios")

If the network activity indicator should be visible.

| Type | Default |
| --- | --- |
| boolean | `false` |

### `showHideTransition` iOS [​](https://reactnative.dev/docs/next/statusbar\#showhidetransition-ios "Direct link to showhidetransition-ios")

The transition effect when showing and hiding the status bar using the `hidden` prop.

| Type | Default |
| --- | --- |
| [StatusBarAnimation](https://reactnative.dev/docs/next/statusbar#statusbaranimation) | `'fade'` |

### `translucent` Android [​](https://reactnative.dev/docs/next/statusbar\#translucent-android "Direct link to translucent-android")

If the status bar is translucent. When translucent is set to `true`, the app will draw under the status bar. This is useful when using a semi transparent status bar color.

Due to edge-to-edge enforcement introduced in Android 15, setting the status bar as translucent is deprecated in API level 35 and setting it will have no effect. You can read more about our [edge-to-edge recommendations here](https://github.com/react-native-community/discussions-and-proposals/discussions/827).

## Methods [​](https://reactnative.dev/docs/next/statusbar\#methods "Direct link to Methods")

### `popStackEntry()` [​](https://reactnative.dev/docs/next/statusbar\#popstackentry "Direct link to popstackentry")

tsx

```codeBlockLines_AclH
static popStackEntry(entry: StatusBarProps);

Get and remove the last StatusBar entry from the stack.

**Parameters:**

| Name | Type | Description |
| --- | --- | --- |

### `pushStackEntry()` [​](https://reactnative.dev/docs/next/statusbar\#pushstackentry "Direct link to pushstackentry")

```codeBlockLines_AclH
static pushStackEntry(props: StatusBarProps): StatusBarProps;

Push a StatusBar entry onto the stack. The return value should be passed to `popStackEntry` when complete.

### `replaceStackEntry()` [​](https://reactnative.dev/docs/next/statusbar\#replacestackentry "Direct link to replacestackentry")

```codeBlockLines_AclH
static replaceStackEntry(
entry: StatusBarProps,
props: StatusBarProps
): StatusBarProps;

Replace an existing StatusBar stack entry with new props.

### `setBackgroundColor()` Android [​](https://reactnative.dev/docs/next/statusbar\#setbackgroundcolor-android "Direct link to setbackgroundcolor-android")

```codeBlockLines_AclH
static setBackgroundColor(color: ColorValue, animated?: boolean);

Set the background color for the status bar.

| animated | boolean | Animate the style change. |

### `setBarStyle()` [​](https://reactnative.dev/docs/next/statusbar\#setbarstyle "Direct link to setbarstyle")

```codeBlockLines_AclH
static setBarStyle(style: StatusBarStyle, animated?: boolean);

Set the status bar style.

### `setHidden()` [​](https://reactnative.dev/docs/next/statusbar\#sethidden "Direct link to sethidden")

```codeBlockLines_AclH
static setHidden(hidden: boolean, animation?: StatusBarAnimation);

Show or hide the status bar.

### `setNetworkActivityIndicatorVisible()` iOS [​](https://reactnative.dev/docs/next/statusbar\#setnetworkactivityindicatorvisible-ios "Direct link to setnetworkactivityindicatorvisible-ios")

```codeBlockLines_AclH
static setNetworkActivityIndicatorVisible(visible: boolean);

Control the visibility of the network activity indicator.

### `setTranslucent()` Android [​](https://reactnative.dev/docs/next/statusbar\#settranslucent-android "Direct link to settranslucent-android")

```codeBlockLines_AclH
static setTranslucent(translucent: boolean);

Control the translucency of the status bar.

## Type Definitions [​](https://reactnative.dev/docs/next/statusbar\#type-definitions "Direct link to Type Definitions")

### StatusBarAnimation [​](https://reactnative.dev/docs/next/statusbar\#statusbaranimation "Direct link to StatusBarAnimation")

Status bar animation type for transitions on the iOS.

| Type |
| --- |
| enum |

**Constants:**

| Value | Type | Description |
| --- | --- | --- |
| `'fade'` | string | Fade animation |
| `'slide'` | string | Slide animation |
| `'none'` | string | No animation |

### StatusBarStyle [​](https://reactnative.dev/docs/next/statusbar\#statusbarstyle "Direct link to StatusBarStyle")

Status bar style type.

| Value | Type | Description |
| --- | --- | --- |
| `'default'` | string | Default status bar style (dark for iOS, light for Android) |
| `'light-content'` | string | White texts and icons |

Is this page useful?

- [Usage with Navigator](https://reactnative.dev/docs/next/statusbar#usage-with-navigator)
- [Imperative API](https://reactnative.dev/docs/next/statusbar#imperative-api)
- [Constants](https://reactnative.dev/docs/next/statusbar#constants)
- [`currentHeight` \\
Android](https://reactnative.dev/docs/next/statusbar#currentheight-android)
- [Props](https://reactnative.dev/docs/next/statusbar#props)
- [`animated`](https://reactnative.dev/docs/next/statusbar#animated)
- [`backgroundColor` \\
Android](https://reactnative.dev/docs/next/statusbar#backgroundcolor-android)
- [`barStyle`](https://reactnative.dev/docs/next/statusbar#barstyle)
- [`hidden`](https://reactnative.dev/docs/next/statusbar#hidden)
- [`networkActivityIndicatorVisible` \\
iOS](https://reactnative.dev/docs/next/statusbar#networkactivityindicatorvisible-ios)
- [`showHideTransition` \\
iOS](https://reactnative.dev/docs/next/statusbar#showhidetransition-ios)
- [`translucent` \\
Android](https://reactnative.dev/docs/next/statusbar#translucent-android)
- [Methods](https://reactnative.dev/docs/next/statusbar#methods)
- [`popStackEntry()`](https://reactnative.dev/docs/next/statusbar#popstackentry)
- [`pushStackEntry()`](https://reactnative.dev/docs/next/statusbar#pushstackentry)
- [`replaceStackEntry()`](https://reactnative.dev/docs/next/statusbar#replacestackentry)
- [`setBackgroundColor()` \\
Android](https://reactnative.dev/docs/next/statusbar#setbackgroundcolor-android)
- [`setBarStyle()`](https://reactnative.dev/docs/next/statusbar#setbarstyle)
- [`setHidden()`](https://reactnative.dev/docs/next/statusbar#sethidden)
- [`setNetworkActivityIndicatorVisible()` \\
iOS](https://reactnative.dev/docs/next/statusbar#setnetworkactivityindicatorvisible-ios)
- [`setTranslucent()` \\
Android](https://reactnative.dev/docs/next/statusbar#settranslucent-android)
- [Type Definitions](https://reactnative.dev/docs/next/statusbar#type-definitions)
- [StatusBarAnimation](https://reactnative.dev/docs/next/statusbar#statusbaranimation)
- [StatusBarStyle](https://reactnative.dev/docs/next/statusbar#statusbarstyle)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/keyboard

[Skip to main content](https://reactnative.dev/docs/next/keyboard#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/keyboard)** (0.81).

Version: Next

On this page

`Keyboard` module to control keyboard events.

### Usage [​](https://reactnative.dev/docs/next/keyboard\#usage "Direct link to Usage")

The Keyboard module allows you to listen for native events and react to them, as well as make changes to the keyboard, like dismissing it.

Keyboard Example - Snack

# Keyboard Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React, {useState, useEffect} from 'react';
import {Keyboard, Text, TextInput, StyleSheet} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const \[keyboardStatus, setKeyboardStatus\] = useState('Keyboard Hidden');

setKeyboardStatus('Keyboard Shown');
});

setKeyboardStatus('Keyboard Hidden');
});

showSubscription.remove();
hideSubscription.remove();
};
}, \[\]);

return (

style={style.input}
placeholder="Click here…"
onSubmitEditing={Keyboard.dismiss}

};

const style = StyleSheet.create({
container: {
flex: 1,
padding: 36,
},
input: {
padding: 10,
borderWidth: 0.5,
borderRadius: 4,
},
status: {
padding: 16,
textAlign: 'center',
},
});

export default Example;

const [keyboardStatus, setKeyboardStatus] = useState('Keyboard Hidden');

setKeyboardStatus('Keyboard Shown');
});

setKeyboardStatus('Keyboard Hidden');
});

showSubscription.remove();
hideSubscription.remove();
};
}, []);

style={style.input}
placeholder="Click here…"
onSubmitEditing={Keyboard.dismiss}

const style = StyleSheet.create({
container: {
flex: 1,
padding: 36,
},
input: {
padding: 10,
borderWidth: 0.5,
borderRadius: 4,
},
status: {
padding: 16,
textAlign: 'center',
},
});

### Download [Expo Go](https://expo.dev/client) and scan the QR code to get started.

exp://u.expo.dev/933fd9c0-1666-11e7-afca-d980795c5824?runtime-version=exposdk%3A53.0.0&channel-name=production&snack-channel=GpHmi2Klwn

### Connected devices

0

[Log in](https://expo.dev/login) to open this Snack from Expo Go on your device or simulator.

PreviewMy DeviceAndroidiOS

* * *

# Reference

## Methods [​](https://reactnative.dev/docs/next/keyboard\#methods "Direct link to Methods")

### `addListener()` [​](https://reactnative.dev/docs/next/keyboard\#addlistener "Direct link to addlistener")

tsx

```codeBlockLines_AclH
static addListener: (
eventType: KeyboardEventName,
listener: KeyboardEventListener,

The `addListener` function connects a JavaScript function to an identified native keyboard notification event.

This function then returns the reference to the listener.

**Parameters:**

| Name | Type | Description |
| --- | --- | --- |

**`eventName`**

This can be any of the following:

- `keyboardWillShow`
- `keyboardDidShow`
- `keyboardWillHide`
- `keyboardDidHide`
- `keyboardWillChangeFrame`
- `keyboardDidChangeFrame`

note

Only `keyboardDidShow` and `keyboardDidHide` events are available on Android. The events will not be fired when using Android 10 or below if your activity has `android:windowSoftInputMode` set to `adjustResize` or `adjustNothing`.

### `dismiss()` [​](https://reactnative.dev/docs/next/keyboard\#dismiss "Direct link to dismiss")

```codeBlockLines_AclH
static dismiss();

Dismisses the active keyboard and removes focus.

### `scheduleLayoutAnimation` [​](https://reactnative.dev/docs/next/keyboard\#schedulelayoutanimation "Direct link to schedulelayoutanimation")

```codeBlockLines_AclH
static scheduleLayoutAnimation(event: KeyboardEvent);

Useful for syncing TextInput (or other keyboard accessory view) size of position changes with keyboard movements.

### `isVisible()` [​](https://reactnative.dev/docs/next/keyboard\#isvisible "Direct link to isvisible")

```codeBlockLines_AclH
static isVisible(): boolean;

Whether the keyboard is last known to be visible.

### `metrics()` [​](https://reactnative.dev/docs/next/keyboard\#metrics "Direct link to metrics")

```codeBlockLines_AclH
static metrics(): KeyboardMetrics | undefined;

Return the metrics of the soft-keyboard if visible.

Is this page useful?

- [Usage](https://reactnative.dev/docs/next/keyboard#usage)
- [Methods](https://reactnative.dev/docs/next/keyboard#methods)
- [`addListener()`](https://reactnative.dev/docs/next/keyboard#addlistener)
- [`dismiss()`](https://reactnative.dev/docs/next/keyboard#dismiss)
- [`scheduleLayoutAnimation`](https://reactnative.dev/docs/next/keyboard#schedulelayoutanimation)
- [`isVisible()`](https://reactnative.dev/docs/next/keyboard#isvisible)
- [`metrics()`](https://reactnative.dev/docs/next/keyboard#metrics)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/libraries

[Skip to main content](https://reactnative.dev/docs/next/libraries#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/libraries)** (0.81).

Version: Next

On this page

React Native provides a set of built-in [Core Components and APIs](https://reactnative.dev/docs/next/components-and-apis) ready to use in your app. You're not limited to the components and APIs bundled with React Native. React Native has a community of thousands of developers. If the Core Components and APIs don't have what you are looking for, you may be able to find and install a library from the community to add the functionality to your app.

## Selecting a Package Manager [​](https://reactnative.dev/docs/next/libraries\#selecting-a-package-manager "Direct link to Selecting a Package Manager")

React Native libraries are typically installed from the [npm registry](https://www.npmjs.com/) using a Node.js package manager such as [npm CLI](https://docs.npmjs.com/cli/npm) or [Yarn Classic](https://classic.yarnpkg.com/en/).

If you have Node.js installed on your computer then you already have the npm CLI installed. Some developers prefer to use Yarn Classic for slightly faster install times and additional advanced features like Workspaces. Both tools work great with React Native. We will assume npm for the rest of this guide for simplicity of explanation.

note

The terms "library" and "package" are used interchangeably in the JavaScript community.

## Installing a Library [​](https://reactnative.dev/docs/next/libraries\#installing-a-library "Direct link to Installing a Library")

To install a library in your project, navigate to your project directory in your terminal and run the installation command. Let's try this with `react-native-webview`:

- npm
- Yarn

shell

```codeBlockLines_AclH
npm install react-native-webview

```codeBlockLines_AclH
yarn add react-native-webview

The library that we installed includes native code, and we need to link to our app before we use it.

## Linking Native Code on iOS [​](https://reactnative.dev/docs/next/libraries\#linking-native-code-on-ios "Direct link to Linking Native Code on iOS")

React Native uses CocoaPods to manage iOS project dependencies and most React Native libraries follow this same convention. If a library you are using does not, then please refer to their README for additional instruction. In most cases, the following instructions will apply.

Run `pod install` in our `ios` directory in order to link it to our native iOS project. A shortcut for doing this without switching to the `ios` directory is to run `npx pod-install`.

bash

```codeBlockLines_AclH
npx pod-install

Once this is complete, re-build the app binary to start using your new library:

```codeBlockLines_AclH
npm run ios

```codeBlockLines_AclH
yarn ios

## Linking Native Code on Android [​](https://reactnative.dev/docs/next/libraries\#linking-native-code-on-android "Direct link to Linking Native Code on Android")

React Native uses Gradle to manage Android project dependencies. After you install a library with native dependencies, you will need to re-build the app binary to use your new library:

```codeBlockLines_AclH
npm run android

```codeBlockLines_AclH
yarn android

## Finding Libraries [​](https://reactnative.dev/docs/next/libraries\#finding-libraries "Direct link to Finding Libraries")

[React Native Directory](https://reactnative.directory/) is a searchable database of libraries built specifically for React Native. This is the first place to look for a library for your React Native app.

Many of the libraries you will find on the directory are from [React Native Community](https://github.com/react-native-community/) or [Expo](https://docs.expo.dev/versions/latest/).

Libraries built by the React Native Community are driven by volunteers and individuals at companies that depend on React Native. They often support iOS, tvOS, Android, Windows, but this varies across projects. Many of the libraries in this organization were once React Native Core Components and APIs.

Libraries built by Expo are all written in TypeScript and support iOS, Android, and `react-native-web` wherever possible.

After React Native Directory, the [npm registry](https://www.npmjs.com/) is the next best place if you can't find a library specifically for React Native on the directory. The npm registry is the definitive source for JavaScript libraries, but the libraries that it lists may not all be compatible with React Native. React Native is one of many JavaScript programming environments, including Node.js, web browsers, Electron, and more, and npm includes libraries that work for all of these environments.

## Determining Library Compatibility [​](https://reactnative.dev/docs/next/libraries\#determining-library-compatibility "Direct link to Determining Library Compatibility")

### Does it work with React Native? [​](https://reactnative.dev/docs/next/libraries\#does-it-work-with-react-native "Direct link to Does it work with React Native?")

Usually libraries built _specifically for other platforms_ will not work with React Native. Examples include `react-select` which is built for the web and specifically targets `react-dom`, and `rimraf` which is built for Node.js and interacts with your computer file system. Other libraries like `lodash` use only JavaScript language features and work in any environment. You will gain a sense for this over time, but until then the easiest way to find out is to try it yourself. You can remove packages using `npm uninstall` if it turns out that it does not work in React Native.

### Does it work for the platforms that my app supports? [​](https://reactnative.dev/docs/next/libraries\#does-it-work-for-the-platforms-that-my-app-supports "Direct link to Does it work for the platforms that my app supports?")

[React Native Directory](https://reactnative.directory/) allows you to filter by platform compatibility, such as iOS, Android, Web, and Windows. If the library you would like to use is not currently listed there, refer to the README for the library to learn more.

### Does it work with my app version of React Native? [​](https://reactnative.dev/docs/next/libraries\#does-it-work-with-my-app-version-of-react-native "Direct link to Does it work with my app version of React Native?")

Is this page useful?

- [Selecting a Package Manager](https://reactnative.dev/docs/next/libraries#selecting-a-package-manager)
- [Installing a Library](https://reactnative.dev/docs/next/libraries#installing-a-library)
- [Linking Native Code on iOS](https://reactnative.dev/docs/next/libraries#linking-native-code-on-ios)
- [Linking Native Code on Android](https://reactnative.dev/docs/next/libraries#linking-native-code-on-android)
- [Finding Libraries](https://reactnative.dev/docs/next/libraries#finding-libraries)
- [Determining Library Compatibility](https://reactnative.dev/docs/next/libraries#determining-library-compatibility)
- [Does it work with React Native?](https://reactnative.dev/docs/next/libraries#does-it-work-with-react-native)
- [Does it work for the platforms that my app supports?](https://reactnative.dev/docs/next/libraries#does-it-work-for-the-platforms-that-my-app-supports)
- [Does it work with my app version of React Native?](https://reactnative.dev/docs/next/libraries#does-it-work-with-my-app-version-of-react-native)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/timepickerandroid

[Skip to main content](https://reactnative.dev/docs/next/timepickerandroid#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/timepickerandroid)** (0.81).

Version: Next

Removed from React Native

Use one of the [community packages](https://reactnative.directory/?search=timepicker) instead.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/legacy/native-modules-android

[Skip to main content](https://reactnative.dev/docs/next/legacy/native-modules-android#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/legacy/native-modules-android)** (0.81).

Version: Next

On this page

info

Native Module and Native Components are our stable technologies used by the legacy architecture.
They will be deprecated in the future when the New Architecture will be stable. The New Architecture uses [Turbo Native Module](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/turbo-modules.md) and [Fabric Native Components](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/fabric-native-components.md) to achieve similar results.

Welcome to Native Modules for Android. Please start by reading the [Native Modules Intro](https://reactnative.dev/docs/next/legacy/native-modules-intro) for an intro to what native modules are.

## Create a Calendar Native Module [​](https://reactnative.dev/docs/next/legacy/native-modules-android\#create-a-calendar-native-module "Direct link to Create a Calendar Native Module")

In the following guide you will create a native module, `CalendarModule`, that will allow you to access Android’s calendar APIs from JavaScript. By the end, you will be able to call `CalendarModule.createCalendarEvent('Dinner Party', 'My House');` from JavaScript, invoking a Java/Kotlin method that creates a calendar event.

### Setup [​](https://reactnative.dev/docs/next/legacy/native-modules-android\#setup "Direct link to Setup")

To get started, open up the Android project within your React Native application in Android Studio. You can find your Android project here within a React Native app:

We recommend using Android Studio to write your native code. Android studio is an IDE built for Android development and using it will help you resolve minor issues like code syntax errors quickly.

We also recommend enabling [Gradle Daemon](https://docs.gradle.org/2.9/userguide/gradle_daemon.html) to speed up builds as you iterate on Java/Kotlin code.

### Create A Custom Native Module File [​](https://reactnative.dev/docs/next/legacy/native-modules-android\#create-a-custom-native-module-file "Direct link to Create A Custom Native Module File")

The first step is to create the ( `CalendarModule.java` or `CalendarModule.kt`) Java/Kotlin file inside `android/app/src/main/java/com/your-app-name/` folder (the folder is the same for both Kotlin and Java). This Java/Kotlin file will contain your native module Java/Kotlin class.

Then add the following content:

- Java
- Kotlin

java

```codeBlockLines_AclH
package com.your-apps-package-name; // replace your-apps-package-name with your app’s package name
import com.facebook.react.bridge.NativeModule;
import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.bridge.ReactContext;
import com.facebook.react.bridge.ReactContextBaseJavaModule;
import com.facebook.react.bridge.ReactMethod;
import java.util.Map;
import java.util.HashMap;

public class CalendarModule extends ReactContextBaseJavaModule {
CalendarModule(ReactApplicationContext context) {
super(context);
}
}

kotlin

```codeBlockLines_AclH
package com.your-apps-package-name; // replace your-apps-package-name with your app’s package name
import com.facebook.react.bridge.NativeModule
import com.facebook.react.bridge.ReactApplicationContext
import com.facebook.react.bridge.ReactContext
import com.facebook.react.bridge.ReactContextBaseJavaModule
import com.facebook.react.bridge.ReactMethod

class CalendarModule(reactContext: ReactApplicationContext) : ReactContextBaseJavaModule(reactContext) {...}

As you can see, your `CalendarModule` class extends the `ReactContextBaseJavaModule` class. For Android, Java/Kotlin native modules are written as classes that extend `ReactContextBaseJavaModule` and implement the functionality required by JavaScript.

note

It is worth noting that technically Java/Kotlin classes only need to extend the `BaseJavaModule` class or implement the `NativeModule` interface to be considered a Native Module by React Native.

However we recommend that you use `ReactContextBaseJavaModule`, as shown above. `ReactContextBaseJavaModule` gives access to the `ReactApplicationContext` (RAC), which is useful for Native Modules that need to hook into activity lifecycle methods. Using `ReactContextBaseJavaModule` will also make it easier to make your native module type-safe in the future. For native module type-safety, which is coming in future releases, React Native looks at each native module's JavaScript spec and generates an abstract base class that extends `ReactContextBaseJavaModule`.

### Module Name [​](https://reactnative.dev/docs/next/legacy/native-modules-android\#module-name "Direct link to Module Name")

All Java/Kotlin native modules in Android need to implement the `getName()` method. This method returns a string, which represents the name of the native module. The native module can then be accessed in JavaScript using its name. For example, in the below code snippet, `getName()` returns `"CalendarModule"`.

```codeBlockLines_AclH
// add to CalendarModule.java
@Override
public String getName() {
return "CalendarModule";
}

```codeBlockLines_AclH
// add to CalendarModule.kt
override fun getName() = "CalendarModule"

The native module can then be accessed in JS like this:

tsx

```codeBlockLines_AclH
const {CalendarModule} = ReactNative.NativeModules;

### Export a Native Method to JavaScript [​](https://reactnative.dev/docs/next/legacy/native-modules-android\#export-a-native-method-to-javascript "Direct link to Export a Native Method to JavaScript")

Next you will need to add a method to your native module that will create calendar events and can be invoked in JavaScript. All native module methods meant to be invoked from JavaScript must be annotated with `@ReactMethod`.

Set up a method `createCalendarEvent()` for `CalendarModule` that can be invoked in JS through `CalendarModule.createCalendarEvent()`. For now, the method will take in a name and location as strings. Argument type options will be covered shortly.

```codeBlockLines_AclH
@ReactMethod
public void createCalendarEvent(String name, String location) {
}

```codeBlockLines_AclH
@ReactMethod fun createCalendarEvent(name: String, location: String) {}

Add a debug log in the method to confirm it has been invoked when you call it from your application. Below is an example of how you can import and use the [Log](https://developer.android.com/reference/android/util/Log) class from the Android util package:

```codeBlockLines_AclH
import android.util.Log;

@ReactMethod
public void createCalendarEvent(String name, String location) {
Log.d("CalendarModule", "Create event called with name: " + name
+ " and location: " + location);
}

```codeBlockLines_AclH
import android.util.Log

@ReactMethod
fun createCalendarEvent(name: String, location: String) {
Log.d("CalendarModule", "Create event called with name: $name and location: $location")
}

Once you finish implementing the native module and hook it up in JavaScript, you can follow [these steps](https://developer.android.com/studio/debug/am-logcat.html) to view the logs from your app.

### Synchronous Methods [​](https://reactnative.dev/docs/next/legacy/native-modules-android\#synchronous-methods "Direct link to Synchronous Methods")

You can pass `isBlockingSynchronousMethod = true` to a native method to mark it as a synchronous method.

```codeBlockLines_AclH
@ReactMethod(isBlockingSynchronousMethod = true)

At the moment, we do not recommend this, since calling methods synchronously can have strong performance penalties and introduce threading-related bugs to your native modules. Additionally, please note that if you choose to enable `isBlockingSynchronousMethod`, your app can no longer use the Google Chrome debugger. This is because synchronous methods require the JS VM to share memory with the app. For the Google Chrome debugger, React Native runs inside the JS VM in Google Chrome, and communicates asynchronously with the mobile devices via WebSockets.

### Register the Module (Android Specific) [​](https://reactnative.dev/docs/next/legacy/native-modules-android\#register-the-module-android-specific "Direct link to Register the Module (Android Specific)")

Once a native module is written, it needs to be registered with React Native. In order to do so, you need to add your native module to a `ReactPackage` and register the `ReactPackage` with React Native. During initialization, React Native will loop over all packages, and for each `ReactPackage`, register each native module within.

React Native invokes the method `createNativeModules()` on a `ReactPackage` in order to get the list of native modules to register. For Android, if a module is not instantiated and returned in createNativeModules it will not be available from JavaScript.

To add your Native Module to `ReactPackage`, first create a new Java/Kotlin Class named ( `MyAppPackage.java` or `MyAppPackage.kt`) that implements `ReactPackage` inside the `android/app/src/main/java/com/your-app-name/` folder:

```codeBlockLines_AclH
package com.your-app-name; // replace your-app-name with your app’s name
import com.facebook.react.ReactPackage;
import com.facebook.react.bridge.NativeModule;
import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.uimanager.ViewManager;

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

public class MyAppPackage implements ReactPackage {

@Override

return Collections.emptyList();
}

ReactApplicationContext reactContext) {

modules.add(new CalendarModule(reactContext));

return modules;
}

}

```codeBlockLines_AclH
package com.your-app-name // replace your-app-name with your app’s name

import android.view.View
import com.facebook.react.ReactPackage
import com.facebook.react.bridge.NativeModule
import com.facebook.react.bridge.ReactApplicationContext
import com.facebook.react.uimanager.ReactShadowNode
import com.facebook.react.uimanager.ViewManager

class MyAppPackage : ReactPackage {

override fun createViewManagers(
reactContext: ReactApplicationContext
): MutableList<ViewManager<View, ReactShadowNode<*>>> = mutableListOf()

override fun createNativeModules(
reactContext: ReactApplicationContext

This file imports the native module you created, `CalendarModule`. It then instantiates `CalendarModule` within the `createNativeModules()` function and returns it as a list of `NativeModules` to register. If you add more native modules down the line, you can also instantiate them and add them to the list returned here.

It is worth noting that this way of registering native modules eagerly initializes all native modules when the application starts, which adds to the startup time of an application. You can use [TurboReactPackage](https://github.com/facebook/react-native/blob/main/packages/react-native/ReactAndroid/src/main/java/com/facebook/react/TurboReactPackage.kt) as an alternative. Instead of `createNativeModules`, which return a list of instantiated native module objects, TurboReactPackage implements a `getModule(String name, ReactApplicationContext rac)` method that creates the native module object, when required. TurboReactPackage is a bit more complicated to implement at the moment. In addition to implementing a `getModule()` method, you have to implement a `getReactModuleInfoProvider()` method, which returns a list of all the native modules the package can instantiate along with a function that instantiates them, example [here](https://github.com/facebook/react-native/blob/8ac467c51b94c82d81930b4802b2978c85539925/ReactAndroid/src/main/java/com/facebook/react/CoreModulesPackage.java#L86-L165). Again, using TurboReactPackage will allow your application to have a faster startup time, but it is currently a bit cumbersome to write. So proceed with caution if you choose to use TurboReactPackages.

To register the `CalendarModule` package, you must add `MyAppPackage` to the list of packages returned in ReactNativeHost's `getPackages()` method. Open up your `MainApplication.java` or `MainApplication.kt` file, which can be found in the following path: `android/app/src/main/java/com/your-app-name/`.

Locate ReactNativeHost’s `getPackages()` method and add your package to the packages list `getPackages()` returns:

```codeBlockLines_AclH
@Override

// Packages that cannot be autolinked yet can be added manually here, for example:
// packages.add(new MyReactNativePackage());
packages.add(new MyAppPackage());
return packages;
}

```codeBlockLines_AclH

PackageList(this).packages.apply {
// Packages that cannot be autolinked yet can be added manually here, for example:
// add(MyReactNativePackage())
add(MyAppPackage())
}

You have now successfully registered your native module for Android!

### Test What You Have Built [​](https://reactnative.dev/docs/next/legacy/native-modules-android\#test-what-you-have-built "Direct link to Test What You Have Built")

At this point, you have set up the basic scaffolding for your native module in Android. Test that out by accessing the native module and invoking its exported method in JavaScript.

Find a place in your application where you would like to add a call to the native module’s `createCalendarEvent()` method. Below is an example of a component, `NewModuleButton` you can add in your app. You can invoke the native module inside `NewModuleButton`'s `onPress()` function.

```codeBlockLines_AclH
import React from 'react';
import {NativeModules, Button} from 'react-native';

console.log('We will invoke the native module here!');
};

return (
<Button
title="Click to invoke your native module!"
color="#841584"
onPress={onPress}

};

export default NewModuleButton;

In order to access your native module from JavaScript you need to first import `NativeModules` from React Native:

```codeBlockLines_AclH
import {NativeModules} from 'react-native';

You can then access the `CalendarModule` native module off of `NativeModules`.

```codeBlockLines_AclH
const {CalendarModule} = NativeModules;

Now that you have the CalendarModule native module available, you can invoke your native method `createCalendarEvent()`. Below it is added to the `onPress()` method in `NewModuleButton`:

CalendarModule.createCalendarEvent('testName', 'testLocation');
};

The final step is to rebuild the React Native app so that you can have the latest native code (with your new native module!) available. In your command line, where the react native application is located, run the following:

- npm
- Yarn

shell

```codeBlockLines_AclH
npm run android

```codeBlockLines_AclH
yarn android

### Building as You Iterate [​](https://reactnative.dev/docs/next/legacy/native-modules-android\#building-as-you-iterate "Direct link to Building as You Iterate")

As you work through these guides and iterate on your native module, you will need to do a native rebuild of your application to access your most recent changes from JavaScript. This is because the code that you are writing sits within the native part of your application. While React Native’s metro bundler can watch for changes in JavaScript and rebuild on the fly for you, it will not do so for native code. So if you want to test your latest native changes you need to rebuild by using the above command.

### Recap✨ [​](https://reactnative.dev/docs/next/legacy/native-modules-android\#recap "Direct link to Recap✨")

You should now be able to invoke your `createCalendarEvent()` method on your native module in the app. In our example this occurs by pressing the `NewModuleButton`. You can confirm this by viewing the log you set up in your `createCalendarEvent()` method. You can follow [these steps](https://developer.android.com/studio/debug/am-logcat.html) to view ADB logs in your app. You should then be able to search for your `Log.d` message (in our example “Create event called with name: testName and location: testLocation”) and see your message logged each time you invoke your native module method.

At this point you have created an Android native module and invoked its native method from JavaScript in your React Native application. You can read on to learn more about things like argument types available to a native module method and how to setup callbacks and promises.

## Beyond a Calendar Native Module [​](https://reactnative.dev/docs/next/legacy/native-modules-android\#beyond-a-calendar-native-module "Direct link to Beyond a Calendar Native Module")

### Better Native Module Export [​](https://reactnative.dev/docs/next/legacy/native-modules-android\#better-native-module-export "Direct link to Better Native Module Export")

Importing your native module by pulling it off of `NativeModules` like above is a bit clunky.

To save consumers of your native module from needing to do that each time they want to access your native module, you can create a JavaScript wrapper for the module. Create a new JavaScript file named `CalendarModule.js` with the following content:

```codeBlockLines_AclH
/**
* This exposes the native CalendarModule module as a JS module. This has a
* function 'createCalendarEvent' which takes the following parameters:

* 1. String name: A string representing the name of the event
* 2. String location: A string representing the location of the event
*/
import {NativeModules} from 'react-native';
const {CalendarModule} = NativeModules;
export default CalendarModule;

This JavaScript file also becomes a good location for you to add any JavaScript side functionality. For example, if you use a type system like TypeScript you can add type annotations for your native module here. While React Native does not yet support Native to JS type safety, all your JS code will be type safe. Doing so will also make it easier for you to switch to type-safe native modules down the line. Below is an example of adding type safety to the CalendarModule:

```codeBlockLines_AclH
/**
* This exposes the native CalendarModule module as a JS module. This has a
* function 'createCalendarEvent' which takes the following parameters:

* 1. String name: A string representing the name of the event
* 2. String location: A string representing the location of the event
*/
import {NativeModules} from 'react-native';
const {CalendarModule} = NativeModules;
interface CalendarInterface {
createCalendarEvent(name: string, location: string): void;
}
export default CalendarModule as CalendarInterface;

In your other JavaScript files you can access the native module and invoke its method like this:

```codeBlockLines_AclH
import CalendarModule from './CalendarModule';
CalendarModule.createCalendarEvent('foo', 'bar');

This assumes that the place you are importing `CalendarModule` is in the same hierarchy as `CalendarModule.js`. Please update the relative import as necessary.

### Argument Types [​](https://reactnative.dev/docs/next/legacy/native-modules-android\#argument-types "Direct link to Argument Types")

When a native module method is invoked in JavaScript, React Native converts the arguments from JS objects to their Java/Kotlin object analogues. So for example, if your Java Native Module method accepts a double, in JS you need to call the method with a number. React Native will handle the conversion for you. Below is a list of the argument types supported for native module methods and the JavaScript equivalents they map to.

| Java | Kotlin | JavaScript |
| --- | --- | --- |
| Boolean | Boolean | ?boolean |
| boolean | | boolean |
| Double | Double | ?number |
| double | | number |
| String | String | string |
| Callback | Callback | Function |
| Promise | Promise | Promise |
| ReadableMap | ReadableMap | Object |
| ReadableArray | ReadableArray | Array |

The following types are currently supported but will not be supported in TurboModules. Please avoid using them:

For argument types not listed above, you will need to handle the conversion yourself. For example, in Android, `Date` conversion is not supported out of the box. You can handle the conversion to the `Date` type within the native method yourself like so:

```codeBlockLines_AclH
String dateFormat = "yyyy-MM-dd";
SimpleDateFormat sdf = new SimpleDateFormat(dateFormat);
Calendar eStartDate = Calendar.getInstance();
try {
eStartDate.setTime(sdf.parse(startDate));
}

```codeBlockLines_AclH
val dateFormat = "yyyy-MM-dd"
val sdf = SimpleDateFormat(dateFormat, Locale.US)
val eStartDate = Calendar.getInstance()
try {
sdf.parse(startDate)?.let {
eStartDate.time = it
}
}

### Exporting Constants [​](https://reactnative.dev/docs/next/legacy/native-modules-android\#exporting-constants "Direct link to Exporting Constants")

A native module can export constants by implementing the native method `getConstants()`, which is available in JS. Below you will implement `getConstants()` and return a Map that contains a `DEFAULT_EVENT_NAME` constant you can access in JavaScript:

constants.put("DEFAULT_EVENT_NAME", "New Event");
return constants;
}

hashMapOf("DEFAULT_EVENT_NAME" to "New Event")

The constant can then be accessed by invoking `getConstants` on the native module in JS:

```codeBlockLines_AclH
const {DEFAULT_EVENT_NAME} = CalendarModule.getConstants();
console.log(DEFAULT_EVENT_NAME);

Technically it is possible to access constants exported in `getConstants()` directly off the native module object. This will no longer be supported with TurboModules, so we encourage the community to switch to the above approach to avoid necessary migration down the line.

That currently constants are exported only at initialization time, so if you change getConstants values at runtime it won't affect the JavaScript environment. This will change with Turbomodules. With Turbomodules, `getConstants()` will become a regular native module method, and each invocation will hit the native side.

### Callbacks [​](https://reactnative.dev/docs/next/legacy/native-modules-android\#callbacks "Direct link to Callbacks")

Native modules also support a unique kind of argument: a callback. Callbacks are used to pass data from Java/Kotlin to JavaScript for asynchronous methods. They can also be used to asynchronously execute JavaScript from the native side.

In order to create a native module method with a callback, first import the `Callback` interface, and then add a new parameter to your native module method of type `Callback`. There are a couple of nuances with callback arguments that will soon be lifted with TurboModules. First off, you can only have two callbacks in your function arguments- a successCallback and a failureCallback. In addition, the last argument to a native module method call, if it's a function, is treated as the successCallback, and the second to last argument to a native module method call, if it's a function, is treated as the failure callback.

```codeBlockLines_AclH
import com.facebook.react.bridge.Callback;

@ReactMethod
public void createCalendarEvent(String name, String location, Callback callBack) {
}

```codeBlockLines_AclH
import com.facebook.react.bridge.Callback

@ReactMethod fun createCalendarEvent(name: String, location: String, callback: Callback) {}

You can invoke the callback in your Java/Kotlin method, providing whatever data you want to pass to JavaScript. Please note that you can only pass serializable data from native code to JavaScript. If you need to pass back a native object you can use `WriteableMaps`, if you need to use a collection use `WritableArrays`. It is also important to highlight that the callback is not invoked immediately after the native function completes. Below the ID of an event created in an earlier call is passed to the callback.

```codeBlockLines_AclH
@ReactMethod
public void createCalendarEvent(String name, String location, Callback callBack) {
Integer eventId = ...
callBack.invoke(eventId);
}

```codeBlockLines_AclH
@ReactMethod
fun createCalendarEvent(name: String, location: String, callback: Callback) {
val eventId = ...
callback.invoke(eventId)
}

This method could then be accessed in JavaScript using:

CalendarModule.createCalendarEvent(
'Party',
'My House',

console.log(`Created a new event with id ${eventId}`);
},
);
};

Another important detail to note is that a native module method can only invoke one callback, one time. This means that you can either call a success callback or a failure callback, but not both, and each callback can only be invoked at most one time. A native module can, however, store the callback and invoke it later.

There are two approaches to error handling with callbacks. The first is to follow Node’s convention and treat the first argument passed to the callback as an error object.

```codeBlockLines_AclH
@ReactMethod
public void createCalendarEvent(String name, String location, Callback callBack) {
Integer eventId = ...
callBack.invoke(null, eventId);
}

```codeBlockLines_AclH
@ReactMethod
fun createCalendarEvent(name: String, location: String, callback: Callback) {
val eventId = ...
callback.invoke(null, eventId)
}

In JavaScript, you can then check the first argument to see if an error was passed through:

CalendarModule.createCalendarEvent(
'testName',
'testLocation',

if (error) {
console.error(`Error found! ${error}`);
}
console.log(`event id ${eventId} returned`);
},
);
};

Another option is to use an onSuccess and onFailure callback:

```codeBlockLines_AclH
@ReactMethod
public void createCalendarEvent(String name, String location, Callback myFailureCallback, Callback mySuccessCallback) {
}

```codeBlockLines_AclH
@ReactMethod
fun createCalendarEvent(
name: String,
location: String,
myFailureCallback: Callback,
mySuccessCallback: Callback
) {}

Then in JavaScript you can add a separate callback for error and success responses:

console.error(`Error found! ${error}`);
},

console.log(`event id ${eventId} returned`);
},
);
};

### Promises [​](https://reactnative.dev/docs/next/legacy/native-modules-android\#promises "Direct link to Promises")

Native modules can also fulfill a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise), which can simplify your JavaScript, especially when using ES2016's [async/await](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function) syntax. When the last parameter of a native module Java/Kotlin method is a Promise, its corresponding JS method will return a JS Promise object.

Refactoring the above code to use a promise instead of callbacks looks like this:

```codeBlockLines_AclH
import com.facebook.react.bridge.Promise;

@ReactMethod
public void createCalendarEvent(String name, String location, Promise promise) {
try {
Integer eventId = ...
promise.resolve(eventId);
} catch(Exception e) {
promise.reject("Create Event Error", e);
}
}

```codeBlockLines_AclH
import com.facebook.react.bridge.Promise

@ReactMethod
fun createCalendarEvent(name: String, location: String, promise: Promise) {
try {
val eventId = ...
promise.resolve(eventId)
} catch (e: Throwable) {
promise.reject("Create Event Error", e)
}
}

Similar to callbacks, a native module method can either reject or resolve a promise (but not both) and can do so at most once. This means that you can either call a success callback or a failure callback, but not both, and each callback can only be invoked at most one time. A native module can, however, store the callback and invoke it later.

The JavaScript counterpart of this method returns a Promise. This means you can use the `await` keyword within an async function to call it and wait for its result:

try {
const eventId = await CalendarModule.createCalendarEvent(
'Party',
'My House',
);
console.log(`Created a new event with id ${eventId}`);
} catch (e) {
console.error(e);
}
};

The reject method takes different combinations of the following arguments:

```codeBlockLines_AclH
String code, String message, WritableMap userInfo, Throwable throwable

```codeBlockLines_AclH
code: String, message: String, userInfo: WritableMap, throwable: Throwable

For more detail, you can find the `Promise.java` interface [here](https://github.com/facebook/react-native/blob/main/packages/react-native/ReactAndroid/src/main/java/com/facebook/react/bridge/Promise.kt). If `userInfo` is not provided, ReactNative will set it to null. For the rest of the parameters React Native will use a default value. The `message` argument provides the error `message` shown at the top of an error call stack. Below is an example of the error message shown in JavaScript from the following reject call in Java/Kotlin.

Java/Kotlin reject call:

```codeBlockLines_AclH
promise.reject("Create Event error", "Error parsing date", e);

```codeBlockLines_AclH
promise.reject("Create Event error", "Error parsing date", e)

Error message in React Native App when promise is rejected:

### Sending Events to JavaScript [​](https://reactnative.dev/docs/next/legacy/native-modules-android\#sending-events-to-javascript "Direct link to Sending Events to JavaScript")

Native modules can signal events to JavaScript without being invoked directly. For example, you might want to signal to JavaScript a reminder that a calendar event from the native Android calendar app will occur soon. The easiest way to do this is to use the `RCTDeviceEventEmitter` which can be obtained from the `ReactContext` as in the code snippet below.

```codeBlockLines_AclH
...
import com.facebook.react.modules.core.DeviceEventManagerModule;
import com.facebook.react.bridge.WritableMap;
import com.facebook.react.bridge.Arguments;
...
private void sendEvent(ReactContext reactContext,
String eventName,
@Nullable WritableMap params) {
reactContext
.getJSModule(DeviceEventManagerModule.RCTDeviceEventEmitter.class)
.emit(eventName, params);
}

private int listenerCount = 0;

@ReactMethod
public void addListener(String eventName) {
if (listenerCount == 0) {
// Set up any upstream listeners or background tasks as necessary
}

listenerCount += 1;
}

@ReactMethod
public void removeListeners(Integer count) {
listenerCount -= count;
if (listenerCount == 0) {
// Remove upstream listeners, stop unnecessary background tasks
}
}
...
WritableMap params = Arguments.createMap();
params.putString("eventProperty", "someValue");
...
sendEvent(reactContext, "EventReminder", params);

```codeBlockLines_AclH
...
import com.facebook.react.bridge.WritableMap
import com.facebook.react.bridge.Arguments
import com.facebook.react.modules.core.DeviceEventManagerModule
...

private fun sendEvent(reactContext: ReactContext, eventName: String, params: WritableMap?) {
reactContext
.getJSModule(DeviceEventManagerModule.RCTDeviceEventEmitter::class.java)
.emit(eventName, params)
}

private var listenerCount = 0

@ReactMethod
fun addListener(eventName: String) {
if (listenerCount == 0) {
// Set up any upstream listeners or background tasks as necessary
}

listenerCount += 1
}

@ReactMethod
fun removeListeners(count: Int) {
listenerCount -= count
if (listenerCount == 0) {
// Remove upstream listeners, stop unnecessary background tasks
}
}
...
val params = Arguments.createMap().apply {
putString("eventProperty", "someValue")
}
...
sendEvent(reactContext, "EventReminder", params)

JavaScript modules can then register to receive events by `addListener` on the [NativeEventEmitter](https://github.com/facebook/react-native/blob/main/packages/react-native/Libraries/EventEmitter/NativeEventEmitter.js) class.

```codeBlockLines_AclH
import {NativeEventEmitter, NativeModules} from 'react-native';
...

const eventEmitter = new NativeEventEmitter(NativeModules.ToastExample);

console.log(event.eventProperty) // "someValue"
});

// Removes the listener once unmounted

eventListener.remove();
};
}, []);

### Getting Activity Result from startActivityForResult [​](https://reactnative.dev/docs/next/legacy/native-modules-android\#getting-activity-result-from-startactivityforresult "Direct link to Getting Activity Result from startActivityForResult")

You'll need to listen to `onActivityResult` if you want to get results from an activity you started with `startActivityForResult`. To do this, you must extend `BaseActivityEventListener` or implement `ActivityEventListener`. The former is preferred as it is more resilient to API changes. Then, you need to register the listener in the module's constructor like so:

```codeBlockLines_AclH
reactContext.addActivityEventListener(mActivityResultListener);

Now you can listen to `onActivityResult` by implementing the following method:

```codeBlockLines_AclH
@Override
public void onActivityResult(
final Activity activity,
final int requestCode,
final int resultCode,
final Intent intent) {
// Your logic here
}

```codeBlockLines_AclH
override fun onActivityResult(
activity: Activity?,
requestCode: Int,
resultCode: Int,
intent: Intent?
) {
// Your logic here
}

Let's implement a basic image picker to demonstrate this. The image picker will expose the method `pickImage` to JavaScript, which will return the path of the image when called.

```codeBlockLines_AclH
public class ImagePickerModule extends ReactContextBaseJavaModule {

private static final int IMAGE_PICKER_REQUEST = 1;
private static final String E_ACTIVITY_DOES_NOT_EXIST = "E_ACTIVITY_DOES_NOT_EXIST";
private static final String E_PICKER_CANCELLED = "E_PICKER_CANCELLED";
private static final String E_FAILED_TO_SHOW_PICKER = "E_FAILED_TO_SHOW_PICKER";
private static final String E_NO_IMAGE_DATA_FOUND = "E_NO_IMAGE_DATA_FOUND";

private Promise mPickerPromise;

private final ActivityEventListener mActivityEventListener = new BaseActivityEventListener() {

@Override
public void onActivityResult(Activity activity, int requestCode, int resultCode, Intent intent) {
if (requestCode == IMAGE_PICKER_REQUEST) {
if (mPickerPromise != null) {
if (resultCode == Activity.RESULT_CANCELED) {
mPickerPromise.reject(E_PICKER_CANCELLED, "Image picker was cancelled");
} else if (resultCode == Activity.RESULT_OK) {
Uri uri = intent.getData();

if (uri == null) {
mPickerPromise.reject(E_NO_IMAGE_DATA_FOUND, "No image data found");
} else {
mPickerPromise.resolve(uri.toString());
}
}

mPickerPromise = null;
}
}
}
};

ImagePickerModule(ReactApplicationContext reactContext) {
super(reactContext);

// Add the listener for `onActivityResult`
reactContext.addActivityEventListener(mActivityEventListener);
}

@Override
public String getName() {
return "ImagePickerModule";
}

@ReactMethod
public void pickImage(final Promise promise) {
Activity currentActivity = getCurrentActivity();

if (currentActivity == null) {
promise.reject(E_ACTIVITY_DOES_NOT_EXIST, "Activity doesn't exist");
return;
}

// Store the promise to resolve/reject when picker returns data
mPickerPromise = promise;

try {
final Intent galleryIntent = new Intent(Intent.ACTION_PICK);

galleryIntent.setType("image/*");

final Intent chooserIntent = Intent.createChooser(galleryIntent, "Pick an image");

currentActivity.startActivityForResult(chooserIntent, IMAGE_PICKER_REQUEST);
} catch (Exception e) {
mPickerPromise.reject(E_FAILED_TO_SHOW_PICKER, e);
mPickerPromise = null;
}
}
}

```codeBlockLines_AclH
class ImagePickerModule(reactContext: ReactApplicationContext) :
ReactContextBaseJavaModule(reactContext) {

private var pickerPromise: Promise? = null

private val activityEventListener =
object : BaseActivityEventListener() {
override fun onActivityResult(
activity: Activity?,
requestCode: Int,
resultCode: Int,
intent: Intent?
) {
if (requestCode == IMAGE_PICKER_REQUEST) {

val uri = intent?.data

uri?.let { promise.resolve(uri.toString())}
?: promise.reject(E_NO_IMAGE_DATA_FOUND, "No image data found")
}
}

pickerPromise = null
}
}
}
}

init {
reactContext.addActivityEventListener(activityEventListener)
}

override fun getName() = "ImagePickerModule"

@ReactMethod
fun pickImage(promise: Promise) {
val activity = currentActivity

if (activity == null) {
promise.reject(E_ACTIVITY_DOES_NOT_EXIST, "Activity doesn't exist")
return
}

pickerPromise = promise

try {
val galleryIntent = Intent(Intent.ACTION_PICK).apply { type = "image\/*" }

val chooserIntent = Intent.createChooser(galleryIntent, "Pick an image")

activity.startActivityForResult(chooserIntent, IMAGE_PICKER_REQUEST)
} catch (t: Throwable) {
pickerPromise?.reject(E_FAILED_TO_SHOW_PICKER, t)
pickerPromise = null
}
}

companion object {
const val IMAGE_PICKER_REQUEST = 1
const val E_ACTIVITY_DOES_NOT_EXIST = "E_ACTIVITY_DOES_NOT_EXIST"
const val E_PICKER_CANCELLED = "E_PICKER_CANCELLED"
const val E_FAILED_TO_SHOW_PICKER = "E_FAILED_TO_SHOW_PICKER"
const val E_NO_IMAGE_DATA_FOUND = "E_NO_IMAGE_DATA_FOUND"
}
}

### Listening to Lifecycle Events [​](https://reactnative.dev/docs/next/legacy/native-modules-android\#listening-to-lifecycle-events "Direct link to Listening to Lifecycle Events")

Listening to the activity's LifeCycle events such as `onResume`, `onPause` etc. is very similar to how `ActivityEventListener` was implemented. The module must implement `LifecycleEventListener`. Then, you need to register a listener in the module's constructor like so:

```codeBlockLines_AclH
reactContext.addLifecycleEventListener(this);

```codeBlockLines_AclH
reactContext.addLifecycleEventListener(this)

Now you can listen to the activity's LifeCycle events by implementing the following methods:

```codeBlockLines_AclH
@Override
public void onHostResume() {
// Activity `onResume`
}
@Override
public void onHostPause() {
// Activity `onPause`
}
@Override
public void onHostDestroy() {
// Activity `onDestroy`
}

```codeBlockLines_AclH
override fun onHostResume() {
// Activity `onResume`
}

override fun onHostPause() {
// Activity `onPause`
}

override fun onHostDestroy() {
// Activity `onDestroy`
}

### Threading [​](https://reactnative.dev/docs/next/legacy/native-modules-android\#threading "Direct link to Threading")

To date, on Android, all native module async methods execute on one thread. Native modules should not have any assumptions about what thread they are being called on, as the current assignment is subject to change in the future. If a blocking call is required, the heavy work should be dispatched to an internally managed worker thread, and any callbacks distributed from there.

Is this page useful?

- [Create a Calendar Native Module](https://reactnative.dev/docs/next/legacy/native-modules-android#create-a-calendar-native-module)
- [Setup](https://reactnative.dev/docs/next/legacy/native-modules-android#setup)
- [Create A Custom Native Module File](https://reactnative.dev/docs/next/legacy/native-modules-android#create-a-custom-native-module-file)
- [Module Name](https://reactnative.dev/docs/next/legacy/native-modules-android#module-name)
- [Export a Native Method to JavaScript](https://reactnative.dev/docs/next/legacy/native-modules-android#export-a-native-method-to-javascript)
- [Synchronous Methods](https://reactnative.dev/docs/next/legacy/native-modules-android#synchronous-methods)
- [Register the Module (Android Specific)](https://reactnative.dev/docs/next/legacy/native-modules-android#register-the-module-android-specific)
- [Test What You Have Built](https://reactnative.dev/docs/next/legacy/native-modules-android#test-what-you-have-built)
- [Building as You Iterate](https://reactnative.dev/docs/next/legacy/native-modules-android#building-as-you-iterate)
- [Recap✨](https://reactnative.dev/docs/next/legacy/native-modules-android#recap)
- [Beyond a Calendar Native Module](https://reactnative.dev/docs/next/legacy/native-modules-android#beyond-a-calendar-native-module)
- [Better Native Module Export](https://reactnative.dev/docs/next/legacy/native-modules-android#better-native-module-export)
- [Argument Types](https://reactnative.dev/docs/next/legacy/native-modules-android#argument-types)
- [Exporting Constants](https://reactnative.dev/docs/next/legacy/native-modules-android#exporting-constants)
- [Callbacks](https://reactnative.dev/docs/next/legacy/native-modules-android#callbacks)
- [Promises](https://reactnative.dev/docs/next/legacy/native-modules-android#promises)
- [Sending Events to JavaScript](https://reactnative.dev/docs/next/legacy/native-modules-android#sending-events-to-javascript)
- [Getting Activity Result from startActivityForResult](https://reactnative.dev/docs/next/legacy/native-modules-android#getting-activity-result-from-startactivityforresult)
- [Listening to Lifecycle Events](https://reactnative.dev/docs/next/legacy/native-modules-android#listening-to-lifecycle-events)
- [Threading](https://reactnative.dev/docs/next/legacy/native-modules-android#threading)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/running-on-simulator-ios

[Skip to main content](https://reactnative.dev/docs/next/running-on-simulator-ios#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/running-on-simulator-ios)** (0.81).

Version: Next

On this page

## Starting the simulator [​](https://reactnative.dev/docs/next/running-on-simulator-ios\#starting-the-simulator "Direct link to Starting the simulator")

Once you have your React Native project initialized, you can run the following command inside the newly created project directory.

- npm
- Yarn

shell

```codeBlockLines_AclH
npm run ios

```codeBlockLines_AclH
yarn ios

If everything is set up correctly, you should see your new app running in the iOS Simulator shortly.

## Specifying a device [​](https://reactnative.dev/docs/next/running-on-simulator-ios\#specifying-a-device "Direct link to Specifying a device")

You can specify the device the simulator should run with the `--simulator` flag, followed by the device name as a string. The default is `"iPhone 14"`. If you wish to run your app on an iPhone SE (3rd generation), run the following command:

```codeBlockLines_AclH
npm run ios -- --simulator="iPhone SE (3rd generation)"

```codeBlockLines_AclH
yarn ios --simulator "iPhone SE (3rd generation)"

The device names correspond to the list of devices available in Xcode. You can check your available devices by running `xcrun simctl list devices` from the console.

### Specifying a version of device [​](https://reactnative.dev/docs/next/running-on-simulator-ios\#specifying-a-version-of-device "Direct link to Specifying a version of device")

If you have multiple iOS versions installed, you also need to specify its appropriate version. E.g. To run your app on an iPhone 14 Pro (16.0) run the following command:

```codeBlockLines_AclH
npm run ios -- --simulator="iPhone 14 Pro (16.0)"

```codeBlockLines_AclH
yarn ios --simulator "iPhone 14 Pro (16.0)"

## Specifying an UDID [​](https://reactnative.dev/docs/next/running-on-simulator-ios\#specifying-an-udid "Direct link to Specifying an UDID")

You can specify the device UDID returned from `xcrun simctl list devices` command. E.g. To run your app with UDID `AAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA` run the following command:

```codeBlockLines_AclH
npm run ios -- --udid="AAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA"

```codeBlockLines_AclH
yarn ios --udid "AAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA"

Is this page useful?

- [Starting the simulator](https://reactnative.dev/docs/next/running-on-simulator-ios#starting-the-simulator)
- [Specifying a device](https://reactnative.dev/docs/next/running-on-simulator-ios#specifying-a-device)
- [Specifying a version of device](https://reactnative.dev/docs/next/running-on-simulator-ios#specifying-a-version-of-device)
- [Specifying an UDID](https://reactnative.dev/docs/next/running-on-simulator-ios#specifying-an-udid)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/toastandroid

[Skip to main content](https://reactnative.dev/docs/next/toastandroid#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/toastandroid)** (0.81).

Version: Next

On this page

React Native's ToastAndroid API exposes the Android platform's ToastAndroid module as a JS module. It provides the method `show(message, duration)` which takes the following parameters:

- _message_ A string with the text to toast
- _duration_ The duration of the toast—either `ToastAndroid.SHORT` or `ToastAndroid.LONG`

You can alternatively use `showWithGravity(message, duration, gravity)` to specify where the toast appears in the screen's layout. May be `ToastAndroid.TOP`, `ToastAndroid.BOTTOM` or `ToastAndroid.CENTER`.

The `showWithGravityAndOffset(message, duration, gravity, xOffset, yOffset)` method adds the ability to specify an offset with in pixels.

note

Starting with Android 11 (API level 30), setting the gravity has no effect on text toasts. Read about the changes [here](https://developer.android.com/about/versions/11/behavior-changes-11#text-toast-api-changes).

Toast Android API Example - Snack

# Toast Android API Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {StyleSheet, ToastAndroid, Button, StatusBar} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

ToastAndroid.show('A pikachu appeared nearby !', ToastAndroid.SHORT);
};

ToastAndroid.showWithGravity(
'All Your Base Are Belong To Us',
ToastAndroid.SHORT,
ToastAndroid.CENTER,
);
};

ToastAndroid.showWithGravityAndOffset(
'A wild toast appeared!',
ToastAndroid.LONG,
ToastAndroid.BOTTOM,
25,
50,
);
};

return (

title="Toggle Toast With Gravity"

title="Toggle Toast With Gravity & Offset"

};

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
paddingTop: StatusBar.currentHeight,
backgroundColor: '#888888',
padding: 8,
},
});

export default App;

ToastAndroid.show('A pikachu appeared nearby !', ToastAndroid.SHORT);
};

ToastAndroid.showWithGravity(
'All Your Base Are Belong To Us',
ToastAndroid.SHORT,
ToastAndroid.CENTER,
);
};

ToastAndroid.showWithGravityAndOffset(
'A wild toast appeared!',
ToastAndroid.LONG,
ToastAndroid.BOTTOM,
25,
50,
);
};

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
paddingTop: StatusBar.currentHeight,
backgroundColor: '#888888',
padding: 8,
},
});

### Download [Expo Go](https://expo.dev/client) and scan the QR code to get started.

exp://u.expo.dev/933fd9c0-1666-11e7-afca-d980795c5824?runtime-version=exposdk%3A53.0.0&channel-name=production&snack-channel=5nsc5u29Ur

### Connected devices

0

[Log in](https://expo.dev/login) to open this Snack from Expo Go on your device or simulator.

PreviewMy DeviceAndroid

* * *

# Reference

## Methods [​](https://reactnative.dev/docs/next/toastandroid\#methods "Direct link to Methods")

### `show()` [​](https://reactnative.dev/docs/next/toastandroid\#show "Direct link to show")

tsx

```codeBlockLines_AclH
static show(message: string, duration: number);

### `showWithGravity()` [​](https://reactnative.dev/docs/next/toastandroid\#showwithgravity "Direct link to showwithgravity")

This property will only work on Android API 29 and below. For similar functionality on higher Android APIs, consider using snackbar or notification.

```codeBlockLines_AclH
static showWithGravity(message: string, duration: number, gravity: number);

### `showWithGravityAndOffset()` [​](https://reactnative.dev/docs/next/toastandroid\#showwithgravityandoffset "Direct link to showwithgravityandoffset")

```codeBlockLines_AclH
static showWithGravityAndOffset(
message: string,
duration: number,
gravity: number,
xOffset: number,
yOffset: number,
);

## Properties [​](https://reactnative.dev/docs/next/toastandroid\#properties "Direct link to Properties")

### `SHORT` [​](https://reactnative.dev/docs/next/toastandroid\#short "Direct link to short")

Indicates the duration on the screen.

```codeBlockLines_AclH
static SHORT: number;

### `LONG` [​](https://reactnative.dev/docs/next/toastandroid\#long "Direct link to long")

```codeBlockLines_AclH
static LONG: number;

### `TOP` [​](https://reactnative.dev/docs/next/toastandroid\#top "Direct link to top")

Indicates the position on the screen.

```codeBlockLines_AclH
static TOP: number;

### `BOTTOM` [​](https://reactnative.dev/docs/next/toastandroid\#bottom "Direct link to bottom")

```codeBlockLines_AclH
static BOTTOM: number;

### `CENTER` [​](https://reactnative.dev/docs/next/toastandroid\#center "Direct link to center")

```codeBlockLines_AclH
static CENTER: number;

Is this page useful?

- [Methods](https://reactnative.dev/docs/next/toastandroid#methods)
- [`show()`](https://reactnative.dev/docs/next/toastandroid#show)
- [`showWithGravity()`](https://reactnative.dev/docs/next/toastandroid#showwithgravity)
- [`showWithGravityAndOffset()`](https://reactnative.dev/docs/next/toastandroid#showwithgravityandoffset)
- [Properties](https://reactnative.dev/docs/next/toastandroid#properties)
- [`SHORT`](https://reactnative.dev/docs/next/toastandroid#short)
- [`LONG`](https://reactnative.dev/docs/next/toastandroid#long)
- [`TOP`](https://reactnative.dev/docs/next/toastandroid#top)
- [`BOTTOM`](https://reactnative.dev/docs/next/toastandroid#bottom)
- [`CENTER`](https://reactnative.dev/docs/next/toastandroid#center)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/permissionsandroid

[Skip to main content](https://reactnative.dev/docs/next/permissionsandroid#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/permissionsandroid)** (0.81).

Version: Next

On this page

### Project with Native Code Required

The following section only applies to projects with native code exposed. If you are using the managed Expo workflow, see the guide on [Permissions](https://docs.expo.dev/guides/permissions/) in the Expo documentation for the appropriate alternative.

`PermissionsAndroid` provides access to Android M's new permissions model. The so-called "normal" permissions are granted by default when the application is installed as long as they appear in `AndroidManifest.xml`. However, "dangerous" permissions require a dialog prompt. You should use this module for those permissions.

On devices before SDK version 23, the permissions are automatically granted if they appear in the manifest, so `check` should always result to `true` and `request` should always resolve to `PermissionsAndroid.RESULTS.GRANTED`.

If a user has previously turned off a permission that you prompt for, the OS will advise your app to show a rationale for needing the permission. The optional `rationale` argument will show a dialog prompt only if necessary - otherwise the normal permission prompt will appear.

### Example [​](https://reactnative.dev/docs/next/permissionsandroid\#example "Direct link to Example")

PermissionsAndroid Example - Snack

# PermissionsAndroid Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {
Button,
PermissionsAndroid,
StatusBar,
StyleSheet,
Text,
} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

try {
const granted = await PermissionsAndroid.request(
PermissionsAndroid.PERMISSIONS.CAMERA,
{
title: 'Cool Photo App Camera Permission',
message:
'Cool Photo App needs access to your camera ' +
'so you can take awesome pictures.',
buttonNeutral: 'Ask Me Later',
buttonNegative: 'Cancel',
buttonPositive: 'OK',
},
);
if (granted === PermissionsAndroid.RESULTS.GRANTED) {
console.log('You can use the camera');
} else {
console.log('Camera permission denied');
}
} catch (err) {
console.warn(err);
}
};

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
paddingTop: StatusBar.currentHeight,
backgroundColor: '#ecf0f1',
padding: 8,
},
item: {
margin: 24,
fontSize: 18,
fontWeight: 'bold',
textAlign: 'center',
},
});

export default App;

import React from 'react';
import {
Button,
PermissionsAndroid,
StatusBar,
StyleSheet,
Text,
} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

try {
const granted = await PermissionsAndroid.request(
PermissionsAndroid.PERMISSIONS.CAMERA,
{
title: 'Cool Photo App Camera Permission',
message:
'Cool Photo App needs access to your camera ' +
'so you can take awesome pictures.',
buttonNeutral: 'Ask Me Later',
buttonNegative: 'Cancel',
buttonPositive: 'OK',
},
);
if (granted === PermissionsAndroid.RESULTS.GRANTED) {
console.log('You can use the camera');
} else {
console.log('Camera permission denied');
}
} catch (err) {
console.warn(err);
}
};

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
paddingTop: StatusBar.currentHeight,
backgroundColor: '#ecf0f1',
padding: 8,
},
item: {
margin: 24,
fontSize: 18,
fontWeight: 'bold',
textAlign: 'center',
},
});

### Download [Expo Go](https://expo.dev/client) and scan the QR code to get started.

exp://u.expo.dev/933fd9c0-1666-11e7-afca-d980795c5824?runtime-version=exposdk%3A53.0.0&channel-name=production&snack-channel=yil8W8mRPB

### Connected devices

0

[Log in](https://expo.dev/login) to open this Snack from Expo Go on your device or simulator.

PreviewMy DeviceAndroid

### Permissions that require prompting the user [​](https://reactnative.dev/docs/next/permissionsandroid\#permissions-that-require-prompting-the-user "Direct link to Permissions that require prompting the user")

Available as constants under `PermissionsAndroid.PERMISSIONS`:

- `READ_CALENDAR`: 'android.permission.READ\_CALENDAR'
- `WRITE_CALENDAR`: 'android.permission.WRITE\_CALENDAR'
- `CAMERA`: 'android.permission.CAMERA'
- `READ_CONTACTS`: 'android.permission.READ\_CONTACTS'
- `WRITE_CONTACTS`: 'android.permission.WRITE\_CONTACTS'
- `GET_ACCOUNTS`: 'android.permission.GET\_ACCOUNTS'
- `ACCESS_FINE_LOCATION`: 'android.permission.ACCESS\_FINE\_LOCATION'
- `ACCESS_COARSE_LOCATION`: 'android.permission.ACCESS\_COARSE\_LOCATION'
- `ACCESS_BACKGROUND_LOCATION`: 'android.permission.ACCESS\_BACKGROUND\_LOCATION'
- `RECORD_AUDIO`: 'android.permission.RECORD\_AUDIO'
- `READ_PHONE_STATE`: 'android.permission.READ\_PHONE\_STATE'
- `CALL_PHONE`: 'android.permission.CALL\_PHONE'
- `READ_CALL_LOG`: 'android.permission.READ\_CALL\_LOG'
- `WRITE_CALL_LOG`: 'android.permission.WRITE\_CALL\_LOG'
- `ADD_VOICEMAIL`: 'com.android.voicemail.permission.ADD\_VOICEMAIL'
- `USE_SIP`: 'android.permission.USE\_SIP'
- `PROCESS_OUTGOING_CALLS`: 'android.permission.PROCESS\_OUTGOING\_CALLS'
- `BODY_SENSORS`: 'android.permission.BODY\_SENSORS'
- `SEND_SMS`: 'android.permission.SEND\_SMS'
- `RECEIVE_SMS`: 'android.permission.RECEIVE\_SMS'
- `READ_SMS`: 'android.permission.READ\_SMS'
- `RECEIVE_WAP_PUSH`: 'android.permission.RECEIVE\_WAP\_PUSH'
- `RECEIVE_MMS`: 'android.permission.RECEIVE\_MMS'
- `READ_EXTERNAL_STORAGE`: 'android.permission.READ\_EXTERNAL\_STORAGE'
- `WRITE_EXTERNAL_STORAGE`: 'android.permission.WRITE\_EXTERNAL\_STORAGE'
- `BLUETOOTH_CONNECT`: 'android.permission.BLUETOOTH\_CONNECT'
- `BLUETOOTH_SCAN`: 'android.permission.BLUETOOTH\_SCAN'
- `BLUETOOTH_ADVERTISE`: 'android.permission.BLUETOOTH\_ADVERTISE'
- `ACCESS_MEDIA_LOCATION`: 'android.permission.ACCESS\_MEDIA\_LOCATION'
- `ACCEPT_HANDOVER`: 'android.permission.ACCEPT\_HANDOVER'
- `ACTIVITY_RECOGNITION`: 'android.permission.ACTIVITY\_RECOGNITION'
- `ANSWER_PHONE_CALLS`: 'android.permission.ANSWER\_PHONE\_CALLS'
- `READ_PHONE_NUMBERS`: 'android.permission.READ\_PHONE\_NUMBERS'
- `UWB_RANGING`: 'android.permission.UWB\_RANGING'
- `BODY_SENSORS_BACKGROUND`: 'android.permission.BODY\_SENSORS\_BACKGROUND'
- `READ_MEDIA_IMAGES`: 'android.permission.READ\_MEDIA\_IMAGES'
- `READ_MEDIA_VIDEO`: 'android.permission.READ\_MEDIA\_VIDEO'
- `READ_MEDIA_AUDIO`: 'android.permission.READ\_MEDIA\_AUDIO'
- `POST_NOTIFICATIONS`: 'android.permission.POST\_NOTIFICATIONS'
- `NEARBY_WIFI_DEVICES`: 'android.permission.NEARBY\_WIFI\_DEVICES'
- `READ_VOICEMAIL`: 'com.android.voicemail.permission.READ\_VOICEMAIL',
- `WRITE_VOICEMAIL`: 'com.android.voicemail.permission.WRITE\_VOICEMAIL',

### Result strings for requesting permissions [​](https://reactnative.dev/docs/next/permissionsandroid\#result-strings-for-requesting-permissions "Direct link to Result strings for requesting permissions")

Available as constants under `PermissionsAndroid.RESULTS`:

- `GRANTED`: 'granted'
- `DENIED`: 'denied'
- `NEVER_ASK_AGAIN`: 'never\_ask\_again'

* * *

# Reference

## Methods [​](https://reactnative.dev/docs/next/permissionsandroid\#methods "Direct link to Methods")

### `check()` [​](https://reactnative.dev/docs/next/permissionsandroid\#check "Direct link to check")

tsx

```codeBlockLines_AclH

Returns a promise resolving to a boolean value as to whether the specified permissions has been granted.

**Parameters:**

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| permission | string | Yes | The permission to check for. |

### `request()` [​](https://reactnative.dev/docs/next/permissionsandroid\#request "Direct link to request")

```codeBlockLines_AclH
static request(
permission: Permission,
rationale?: Rationale,

Prompts the user to enable a permission and returns a promise resolving to a string value (see result strings above) indicating whether the user allowed or denied the request or does not want to be asked again.

If `rationale` is provided, this function checks with the OS whether it is necessary to show a dialog explaining why the permission is needed ( [https://developer.android.com/training/permissions/requesting.html#explain](https://developer.android.com/training/permissions/requesting.html#explain)) and then shows the system permission dialog.

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| permission | string | Yes | The permission to request. |
| rationale | object | No | See `rationale` below. |

**Rationale:**

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| title | string | Yes | The title of the dialog. |
| message | string | Yes | The message of the dialog. |
| buttonPositive | string | Yes | The text of the positive button. |
| buttonNegative | string | No | The text of the negative button. |
| buttonNeutral | string | No | The text of the neutral button. |

### `requestMultiple()` [​](https://reactnative.dev/docs/next/permissionsandroid\#requestmultiple "Direct link to requestmultiple")

```codeBlockLines_AclH
static requestMultiple(
permissions: Permission[],

Prompts the user to enable multiple permissions in the same dialog and returns an object with the permissions as keys and strings as values (see result strings above) indicating whether the user allowed or denied the request or does not want to be asked again.

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| permissions | array | Yes | Array of permissions to request. |

Is this page useful?

- [Example](https://reactnative.dev/docs/next/permissionsandroid#example)
- [Permissions that require prompting the user](https://reactnative.dev/docs/next/permissionsandroid#permissions-that-require-prompting-the-user)
- [Result strings for requesting permissions](https://reactnative.dev/docs/next/permissionsandroid#result-strings-for-requesting-permissions)
- [Methods](https://reactnative.dev/docs/next/permissionsandroid#methods)
- [`check()`](https://reactnative.dev/docs/next/permissionsandroid#check)
- [`request()`](https://reactnative.dev/docs/next/permissionsandroid#request)
- [`requestMultiple()`](https://reactnative.dev/docs/next/permissionsandroid#requestmultiple)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/panresponder

[Skip to main content](https://reactnative.dev/docs/next/panresponder#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/panresponder)** (0.81).

Version: Next

On this page

`PanResponder` reconciles several touches into a single gesture. It makes single-touch gestures resilient to extra touches, and can be used to recognize basic multi-touch gestures.

By default, `PanResponder` holds an `InteractionManager` handle to block long-running JS events from interrupting active gestures.

It provides a predictable wrapper of the responder handlers provided by the [gesture responder system](https://reactnative.dev/docs/next/gesture-responder-system). For each handler, it provides a new `gestureState` object alongside the native event object:

```codeBlockLines_AclH

A native event is a synthetic touch event with form of [PressEvent](https://reactnative.dev/docs/next/pressevent).

A `gestureState` object has the following:

- `stateID` \- ID of the gestureState- persisted as long as there's at least one touch on screen
- `moveX` \- the latest screen coordinates of the recently-moved touch
- `moveY` \- the latest screen coordinates of the recently-moved touch
- `x0` \- the screen coordinates of the responder grant
- `y0` \- the screen coordinates of the responder grant
- `dx` \- accumulated distance of the gesture since the touch started
- `dy` \- accumulated distance of the gesture since the touch started
- `vx` \- current velocity of the gesture
- `vy` \- current velocity of the gesture
- `numberActiveTouches` \- Number of touches currently on screen

## Usage Pattern [​](https://reactnative.dev/docs/next/panresponder\#usage-pattern "Direct link to Usage Pattern")

tsx

const panResponder = React.useRef(
PanResponder.create({
// Ask to be the responder:

// The gesture has started. Show visual feedback so the user knows
// what is happening!
// gestureState.d{x,y} will be set to zero now
},

// The most recent move distance is gestureState.move{X,Y}
// The accumulated gesture distance since becoming responder is
// gestureState.d{x,y}
},

// The user has released all touches while this view is the
// responder. This typically means a gesture has succeeded
},

// Another component has become the responder, so this gesture
// should be cancelled
},

// Returns whether this component should block native components from becoming the JS
// responder. Returns true by default. Is currently only supported on android.
return true;
},
}),
).current;

};

## Example [​](https://reactnative.dev/docs/next/panresponder\#example "Direct link to Example")

`PanResponder` works with `Animated` API to help build complex gestures in the UI. The following example contains an animated `View` component which can be dragged freely across the screen

PanResponder - Snack

# PanResponder

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React, {useRef} from 'react';
import {Animated, View, StyleSheet, PanResponder, Text} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const pan = useRef(new Animated.ValueXY()).current;

const panResponder = useRef(
PanResponder.create({

onPanResponderMove: Animated.event(\[null, {dx: pan.x, dy: pan.y}\]),

pan.extractOffset();
},
}),
).current;

return (

style={{
transform: \[{translateX: pan.x}, {translateY: pan.y}\],
}}

const styles = StyleSheet.create({
container: {
flex: 1,
alignItems: 'center',
justifyContent: 'center',
},
titleText: {
fontSize: 14,
lineHeight: 24,
fontWeight: 'bold',
},
box: {
height: 150,
width: 150,
backgroundColor: 'blue',
borderRadius: 5,
},
});

export default App;

const panResponder = useRef(
PanResponder.create({

onPanResponderMove: Animated.event([null, {dx: pan.x, dy: pan.y}]),

pan.extractOffset();
},
}),
).current;

style={{
transform: [{translateX: pan.x}, {translateY: pan.y}],
}}

const styles = StyleSheet.create({
container: {
flex: 1,
alignItems: 'center',
justifyContent: 'center',
},
titleText: {
fontSize: 14,
lineHeight: 24,
fontWeight: 'bold',
},
box: {
height: 150,
width: 150,
backgroundColor: 'blue',
borderRadius: 5,
},
});

Snack

Drag this box!

Updating…

PreviewMy DeviceAndroidiOSWeb

Try the [PanResponder example in RNTester](https://github.com/facebook/react-native/blob/main/packages/rn-tester/js/examples/PanResponder/PanResponderExample.js).

* * *

# Reference

## Methods [​](https://reactnative.dev/docs/next/panresponder\#methods "Direct link to Methods")

### `create()` [​](https://reactnative.dev/docs/next/panresponder\#create "Direct link to create")

```codeBlockLines_AclH
static create(config: PanResponderCallbacks): PanResponderInstance;

**Parameters:**

| Name | Type | Description |
| --- | --- | --- |

The `config` object provides enhanced versions of all of the responder callbacks that provide not only the [`PressEvent`](https://reactnative.dev/docs/next/pressevent), but also the `PanResponder` gesture state, by replacing the word `Responder` with `PanResponder` in each of the typical `onResponder*` callbacks. For example, the `config` object would look like:

In general, for events that have capture equivalents, we update the gestureState once in the capture phase and can use it in the bubble phase as well.

Be careful with `onStartShould*` callbacks. They only reflect updated `gestureState` for start/end events that bubble/capture to the Node. Once the node is the responder, you can rely on every start/end event being processed by the gesture and `gestureState` being updated accordingly. (numberActiveTouches) may not be totally accurate unless you are the responder.

Is this page useful?

- [Usage Pattern](https://reactnative.dev/docs/next/panresponder#usage-pattern)
- [Example](https://reactnative.dev/docs/next/panresponder#example)
- [Methods](https://reactnative.dev/docs/next/panresponder#methods)
- [`create()`](https://reactnative.dev/docs/next/panresponder#create)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/statusbarios

[Skip to main content](https://reactnative.dev/docs/next/statusbarios#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/statusbarios)** (0.81).

Version: Next

Removed from React Native

Use [`StatusBar`](https://reactnative.dev/docs/next/statusbar) for mutating the status bar.

* * *

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/layout-props

[Skip to main content](https://reactnative.dev/docs/next/layout-props#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/layout-props)** (0.81).

Version: Next

On this page

info

More detailed examples about those properties can be found on the [Layout with Flexbox](https://reactnative.dev/docs/next/flexbox) page.

### Example [​](https://reactnative.dev/docs/next/layout-props\#example "Direct link to Example")

The following example shows how different properties can affect or shape a React Native layout. You can try for example to add or remove squares from the UI while changing the values of the property `flexWrap`.

- TypeScript
- JavaScript

LayoutProps Example - Snack

# LayoutProps Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React, {useState} from 'react';
import {Button, ScrollView, StyleSheet, Text, View} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const \[flexDirection, setFlexDirection\] = useState(0);
const \[justifyContent, setJustifyContent\] = useState(0);
const \[alignItems, setAlignItems\] = useState(0);
const \[direction, setDirection\] = useState(0);
const \[wrap, setWrap\] = useState(0);

const hookedStyles = {
flexDirection: flexDirections\[flexDirection\],
justifyContent: justifyContents\[justifyContent\],
alignItems: alignItemsArr\[alignItems\],
direction: directions\[direction\],
flexWrap: wraps\[wrap\],
};

if (value === options.length - 1) {
setterFunction(0);
return;
}
setterFunction(value + 1);
};

return (

title="Change Flex Direction"

}

title="Change Justify Content"

justifyContent,
justifyContents,
setJustifyContent,
)
}

title="Change Align Items"

title="Change Direction"

title="Change Flex Wrap"

title="Add Square"

title="Delete Square"

};

const flexDirections = \['row', 'row-reverse', 'column', 'column-reverse'\];
const justifyContents = \[\
'flex-start',\
'flex-end',\
'center',\
'space-between',\
'space-around',\
'space-evenly',\
\];
const alignItemsArr = \[\
'flex-start',\
'flex-end',\
'center',\
'stretch',\
'baseline',\
\];
const wraps = \['nowrap', 'wrap', 'wrap-reverse'\];
const directions = \['inherit', 'ltr', 'rtl'\];

const styles = StyleSheet.create({
container: {
flex: 1,
},
layoutContainer: {
flex: 0.5,
},
playingSpace: {
backgroundColor: 'white',
borderColor: 'blue',
borderWidth: 3,
overflow: 'hidden',
},
controlSpace: {
flexDirection: 'row',
flexWrap: 'wrap',
},
buttonView: {
width: '50%',
padding: 10,
},
text: {
textAlign: 'center',
},
});

<View
style={{
width: 50,
height: 50,
backgroundColor: randomHexColor(),
}}

return Math.round(Math.random() \* 14).toString(16);
});
};

export default App;

const [flexDirection, setFlexDirection] = useState(0);
const [justifyContent, setJustifyContent] = useState(0);
const [alignItems, setAlignItems] = useState(0);
const [direction, setDirection] = useState(0);
const [wrap, setWrap] = useState(0);

const hookedStyles = {
flexDirection: flexDirections[flexDirection],
justifyContent: justifyContents[justifyContent],
alignItems: alignItemsArr[alignItems],
direction: directions[direction],
flexWrap: wraps[wrap],
};

if (value === options.length - 1) {
setterFunction(0);
return;
}
setterFunction(value + 1);
};

justifyContent,
justifyContents,
setJustifyContent,
)
}

const flexDirections = ['row', 'row-reverse', 'column', 'column-reverse'];
const justifyContents = [\
'flex-start',\
'flex-end',\
'center',\
'space-between',\
'space-around',\
'space-evenly',\
];
const alignItemsArr = [\
'flex-start',\
'flex-end',\
'center',\
'stretch',\
'baseline',\
];
const wraps = ['nowrap', 'wrap', 'wrap-reverse'];
const directions = ['inherit', 'ltr', 'rtl'];

const styles = StyleSheet.create({
container: {
flex: 1,
},
layoutContainer: {
flex: 0.5,
},
playingSpace: {
backgroundColor: 'white',
borderColor: 'blue',
borderWidth: 3,
overflow: 'hidden',
},
controlSpace: {
flexDirection: 'row',
flexWrap: 'wrap',
},
buttonView: {
width: '50%',
padding: 10,
},
text: {
textAlign: 'center',
},
});

<View
style={{
width: 50,
height: 50,
backgroundColor: randomHexColor(),
}}

return Math.round(Math.random() * 14).toString(16);
});
};

Snack

Change Flex Direction

row

Change Justify Content

flex-start

Change Align Items

Change Direction

inherit

Change Flex Wrap

nowrap

Add Square

Delete Square

Updating…

PreviewMy DeviceAndroidiOSWeb

import React, {useState} from 'react';
import {
Button,
ScrollView,
StyleSheet,
Text,
View,
FlexAlignType,
FlexStyle,
} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const hookedStyles = {
flexDirection: flexDirections\[flexDirection\],
justifyContent: justifyContents\[justifyContent\],
alignItems: alignItemsArr\[alignItems\],
direction: directions\[direction\],
flexWrap: wraps\[wrap\],
} as FlexStyle;

const changeSetting = (
value: number,
options: any\[\],

const flexDirections = \[\
'row',\
'row-reverse',\
'column',\
'column-reverse',\
\] as FlexStyle\['flexDirection'\]\[\];
const justifyContents = \[\
'flex-start',\
'flex-end',\
'center',\
'space-between',\
'space-around',\
'space-evenly',\
\] as FlexStyle\['justifyContent'\]\[\];
const alignItemsArr = \[\
'flex-start',\
'flex-end',\
'center',\
'stretch',\
'baseline',\
\] as FlexAlignType\[\];
const wraps = \['nowrap', 'wrap', 'wrap-reverse'\];
const directions = \['inherit', 'ltr', 'rtl'\];

import React, {useState} from 'react';
import {
Button,
ScrollView,
StyleSheet,
Text,
View,
FlexAlignType,
FlexStyle,
} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const hookedStyles = {
flexDirection: flexDirections[flexDirection],
justifyContent: justifyContents[justifyContent],
alignItems: alignItemsArr[alignItems],
direction: directions[direction],
flexWrap: wraps[wrap],
} as FlexStyle;

const changeSetting = (
value: number,
options: any[],

const flexDirections = [\
'row',\
'row-reverse',\
'column',\
'column-reverse',\
] as FlexStyle['flexDirection'][];
const justifyContents = [\
'flex-start',\
'flex-end',\
'center',\
'space-between',\
'space-around',\
'space-evenly',\
] as FlexStyle['justifyContent'][];
const alignItemsArr = [\
'flex-start',\
'flex-end',\
'center',\
'stretch',\
'baseline',\
] as FlexAlignType[];
const wraps = ['nowrap', 'wrap', 'wrap-reverse'];
const directions = ['inherit', 'ltr', 'rtl'];

* * *

# Reference

## Props [​](https://reactnative.dev/docs/next/layout-props\#props "Direct link to Props")

### `alignContent` [​](https://reactnative.dev/docs/next/layout-props\#aligncontent "Direct link to aligncontent")

`alignContent` controls how rows align in the cross direction, overriding the `alignContent` of the parent. See [https://developer.mozilla.org/en-US/docs/Web/CSS/align-content](https://developer.mozilla.org/en-US/docs/Web/CSS/align-content) for more details.

| Type | Required |
| --- | --- |
| enum('flex-start', 'flex-end', 'center', 'stretch', 'space-between', 'space-around', 'space-evenly') | No |

### `alignItems` [​](https://reactnative.dev/docs/next/layout-props\#alignitems "Direct link to alignitems")

`alignItems` aligns children in the cross direction. For example, if children are flowing vertically, `alignItems` controls how they align horizontally. It works like `align-items` in CSS (default: stretch). See [https://developer.mozilla.org/en-US/docs/Web/CSS/align-items](https://developer.mozilla.org/en-US/docs/Web/CSS/align-items) for more details.

| Type | Required |
| --- | --- |
| enum('flex-start', 'flex-end', 'center', 'stretch', 'baseline') | No |

### `alignSelf` [​](https://reactnative.dev/docs/next/layout-props\#alignself "Direct link to alignself")

`alignSelf` controls how a child aligns in the cross direction, overriding the `alignItems` of the parent. It works like `align-self` in CSS (default: auto). See [https://developer.mozilla.org/en-US/docs/Web/CSS/align-self](https://developer.mozilla.org/en-US/docs/Web/CSS/align-self) for more details.

| Type | Required |
| --- | --- |
| enum('auto', 'flex-start', 'flex-end', 'center', 'stretch', 'baseline') | No |

### `aspectRatio` [​](https://reactnative.dev/docs/next/layout-props\#aspectratio "Direct link to aspectratio")

Aspect ratio controls the size of the undefined dimension of a node. See [https://developer.mozilla.org/en-US/docs/Web/CSS/aspect-ratio](https://developer.mozilla.org/en-US/docs/Web/CSS/aspect-ratio) for more details.

- On a node with a set width/height, aspect ratio controls the size of the unset dimension
- On a node with a set flex basis, aspect ratio controls the size of the node in the cross axis if unset
- On a node with a measure function, aspect ratio works as though the measure function measures the flex basis
- On a node with flex grow/shrink, aspect ratio controls the size of the node in the cross axis if unset
- Aspect ratio takes min/max dimensions into account

| Type | Required |
| --- | --- |
| number, string | No |

### `borderBottomWidth` [​](https://reactnative.dev/docs/next/layout-props\#borderbottomwidth "Direct link to borderbottomwidth")

`borderBottomWidth` works like `border-bottom-width` in CSS. See [https://developer.mozilla.org/en-US/docs/Web/CSS/border-bottom-width](https://developer.mozilla.org/en-US/docs/Web/CSS/border-bottom-width) for more details.

| Type | Required |
| --- | --- |
| number | No |

### `borderEndWidth` [​](https://reactnative.dev/docs/next/layout-props\#borderendwidth "Direct link to borderendwidth")

When direction is `ltr`, `borderEndWidth` is equivalent to `borderRightWidth`. When direction is `rtl`, `borderEndWidth` is equivalent to `borderLeftWidth`.

### `borderLeftWidth` [​](https://reactnative.dev/docs/next/layout-props\#borderleftwidth "Direct link to borderleftwidth")

`borderLeftWidth` works like `border-left-width` in CSS. See [https://developer.mozilla.org/en-US/docs/Web/CSS/border-left-width](https://developer.mozilla.org/en-US/docs/Web/CSS/border-left-width) for more details.

### `borderRightWidth` [​](https://reactnative.dev/docs/next/layout-props\#borderrightwidth "Direct link to borderrightwidth")

`borderRightWidth` works like `border-right-width` in CSS. See [https://developer.mozilla.org/en-US/docs/Web/CSS/border-right-width](https://developer.mozilla.org/en-US/docs/Web/CSS/border-right-width) for more details.

### `borderStartWidth` [​](https://reactnative.dev/docs/next/layout-props\#borderstartwidth "Direct link to borderstartwidth")

When direction is `ltr`, `borderStartWidth` is equivalent to `borderLeftWidth`. When direction is `rtl`, `borderStartWidth` is equivalent to `borderRightWidth`.

### `borderTopWidth` [​](https://reactnative.dev/docs/next/layout-props\#bordertopwidth "Direct link to bordertopwidth")

`borderTopWidth` works like `border-top-width` in CSS. See [https://developer.mozilla.org/en-US/docs/Web/CSS/border-top-width](https://developer.mozilla.org/en-US/docs/Web/CSS/border-top-width) for more details.

### `borderWidth` [​](https://reactnative.dev/docs/next/layout-props\#borderwidth "Direct link to borderwidth")

`borderWidth` works like `border-width` in CSS. See [https://developer.mozilla.org/en-US/docs/Web/CSS/border-width](https://developer.mozilla.org/en-US/docs/Web/CSS/border-width) for more details.

### `bottom` [​](https://reactnative.dev/docs/next/layout-props\#bottom "Direct link to bottom")

`bottom` is the number of logical pixels to offset the bottom edge of this component.

It works similarly to `bottom` in CSS, but in React Native you must use points or percentages. Ems and other units are not supported.

See [https://developer.mozilla.org/en-US/docs/Web/CSS/bottom](https://developer.mozilla.org/en-US/docs/Web/CSS/bottom) for more details of how `bottom` affects layout.

### `boxSizing` [​](https://reactnative.dev/docs/next/layout-props\#boxsizing "Direct link to boxsizing")

`boxSizing` defines how the element's various sizing props ( `width`, `height`, `minWidth`, `minHeight`, etc.) are computed. If `boxSizing` is `border-box`, these sizes apply to the border box of the element. If it is `content-box`, they apply to the content box of the element. The default value is `border-box`. The [web documentation](https://developer.mozilla.org/en-US/docs/Web/CSS/box-sizing) is a good source of information if you wish to learn more about how this prop works.

| Type | Required |
| --- | --- |
| enum('border-box', 'content-box') | No |

### `columnGap` [​](https://reactnative.dev/docs/next/layout-props\#columngap "Direct link to columngap")

`columnGap` works like `column-gap` in CSS. Only pixel units are supported in React Native. See [https://developer.mozilla.org/en-US/docs/Web/CSS/column-gap](https://developer.mozilla.org/en-US/docs/Web/CSS/column-gap) for more details.

### `direction` [​](https://reactnative.dev/docs/next/layout-props\#direction "Direct link to direction")

`direction` specifies the directional flow of the user interface. The default is `inherit`, except for root node which will have value based on the current locale. See [https://www.yogalayout.dev/docs/styling/layout-direction](https://www.yogalayout.dev/docs/styling/layout-direction) for more details.

| Type | Required | Platform |
| --- | --- | --- |
| enum('inherit', 'ltr', 'rtl') | No | iOS |

### `display` [​](https://reactnative.dev/docs/next/layout-props\#display "Direct link to display")

`display` sets the display type of this component.

It works similarly to `display` in CSS but only supports the values 'flex', 'none', and 'contents'. The default is `flex`.

| Type | Required |
| --- | --- |
| enum('none', 'flex', 'contents') | No |

### `end` [​](https://reactnative.dev/docs/next/layout-props\#end "Direct link to end")

When the direction is `ltr`, `end` is equivalent to `right`. When the direction is `rtl`, `end` is equivalent to `left`.

This style takes precedence over the `left` and `right` styles.

### `flex` [​](https://reactnative.dev/docs/next/layout-props\#flex "Direct link to flex")

In React Native `flex` does not work the same way that it does in CSS. `flex` is a number rather than a string, and it works according to the [Yoga](https://github.com/facebook/yoga) layout engine.

When `flex` is 0, the component is sized according to `width` and `height`, and it is inflexible.

When `flex` is -1, the component is normally sized according to `width` and `height`. However, if there's not enough space, the component will shrink to its `minWidth` and `minHeight`.

`flexGrow`, `flexShrink`, and `flexBasis` work the same as in CSS.

### `flexBasis` [​](https://reactnative.dev/docs/next/layout-props\#flexbasis "Direct link to flexbasis")

`flexBasis` is an axis-independent way of providing the default size of an item along the main axis. Setting the `flexBasis` of a child is similar to setting the `width` of that child if its parent is a container with `flexDirection: row` or setting the `height` of a child if its parent is a container with `flexDirection: column`. The `flexBasis` of an item is the default size of that item, the size of the item before any `flexGrow` and `flexShrink` calculations are performed.

### `flexDirection` [​](https://reactnative.dev/docs/next/layout-props\#flexdirection "Direct link to flexdirection")

`flexDirection` controls which directions children of a container go. `row` goes left to right, `column` goes top to bottom, and you may be able to guess what the other two do. It works like `flex-direction` in CSS, except the default is `column`. See [https://developer.mozilla.org/en-US/docs/Web/CSS/flex-direction](https://developer.mozilla.org/en-US/docs/Web/CSS/flex-direction) for more details.

| Type | Required |
| --- | --- |
| enum('row', 'row-reverse', 'column', 'column-reverse') | No |

### `flexGrow` [​](https://reactnative.dev/docs/next/layout-props\#flexgrow "Direct link to flexgrow")

`flexGrow` describes how any space within a container should be distributed among its children along the main axis. After laying out its children, a container will distribute any remaining space according to the flex grow values specified by its children.

### `flexShrink` [​](https://reactnative.dev/docs/next/layout-props\#flexshrink "Direct link to flexshrink")

[`flexShrink`](https://reactnative.dev/docs/next/layout-props#flexshrink) describes how to shrink children along the main axis in the case in which the total size of the children overflows the size of the container on the main axis. `flexShrink` is very similar to `flexGrow` and can be thought of in the same way if any overflowing size is considered to be negative remaining space. These two properties also work well together by allowing children to grow and shrink as needed.

### `flexWrap` [​](https://reactnative.dev/docs/next/layout-props\#flexwrap "Direct link to flexwrap")

`flexWrap` controls whether children can wrap around after they hit the end of a flex container. It works like `flex-wrap` in CSS (default: nowrap). See [https://developer.mozilla.org/en-US/docs/Web/CSS/flex-wrap](https://developer.mozilla.org/en-US/docs/Web/CSS/flex-wrap) for more details. Note it does not work anymore with `alignItems: stretch` (the default), so you may want to use `alignItems: flex-start` for example (breaking change details: [https://github.com/facebook/react-native/releases/tag/v0.28.0](https://github.com/facebook/react-native/releases/tag/v0.28.0)).

| Type | Required |
| --- | --- |
| enum('wrap', 'nowrap', 'wrap-reverse') | No |

### `gap` [​](https://reactnative.dev/docs/next/layout-props\#gap "Direct link to gap")

`gap` works like `gap` in CSS. Only pixel units are supported in React Native. See [https://developer.mozilla.org/en-US/docs/Web/CSS/gap](https://developer.mozilla.org/en-US/docs/Web/CSS/gap) for more details.

### `height` [​](https://reactnative.dev/docs/next/layout-props\#height "Direct link to height")

`height` sets the height of this component.

It works similarly to `height` in CSS, but in React Native you must use points or percentages. Ems and other units are not supported. See [https://developer.mozilla.org/en-US/docs/Web/CSS/height](https://developer.mozilla.org/en-US/docs/Web/CSS/height) for more details.

### `isolation` [​](https://reactnative.dev/docs/next/layout-props\#isolation "Direct link to isolation")

`isolation` lets you form a [stacking context](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_positioned_layout/Stacking_context). This prop is only available on the [New Architecture](https://reactnative.dev/architecture/landing-page).

There are two values:

- `auto` (default): Does nothing.
- `isolate`: Forms a stacking context.

| Type | Required |
| --- | --- |
| enum('auto', 'isolate') | No |

### `justifyContent` [​](https://reactnative.dev/docs/next/layout-props\#justifycontent "Direct link to justifycontent")

`justifyContent` aligns children in the main direction. For example, if children are flowing vertically, `justifyContent` controls how they align vertically. It works like `justify-content` in CSS (default: flex-start). See [https://developer.mozilla.org/en-US/docs/Web/CSS/justify-content](https://developer.mozilla.org/en-US/docs/Web/CSS/justify-content) for more details.

| Type | Required |
| --- | --- |
| enum('flex-start', 'flex-end', 'center', 'space-between', 'space-around', 'space-evenly') | No |

### `left` [​](https://reactnative.dev/docs/next/layout-props\#left "Direct link to left")

`left` is the number of logical pixels to offset the left edge of this component.

It works similarly to `left` in CSS, but in React Native you must use points or percentages. Ems and other units are not supported.

See [https://developer.mozilla.org/en-US/docs/Web/CSS/left](https://developer.mozilla.org/en-US/docs/Web/CSS/left) for more details of how `left` affects layout.

### `margin` [​](https://reactnative.dev/docs/next/layout-props\#margin "Direct link to margin")

Setting `margin` has the same effect as setting each of `marginTop`, `marginLeft`, `marginBottom`, and `marginRight`. See [https://developer.mozilla.org/en-US/docs/Web/CSS/margin](https://developer.mozilla.org/en-US/docs/Web/CSS/margin) for more details.

### `marginBottom` [​](https://reactnative.dev/docs/next/layout-props\#marginbottom "Direct link to marginbottom")

`marginBottom` works like `margin-bottom` in CSS. See [https://developer.mozilla.org/en-US/docs/Web/CSS/margin-bottom](https://developer.mozilla.org/en-US/docs/Web/CSS/margin-bottom) for more details.

### `marginEnd` [​](https://reactnative.dev/docs/next/layout-props\#marginend "Direct link to marginend")

When direction is `ltr`, `marginEnd` is equivalent to `marginRight`. When direction is `rtl`, `marginEnd` is equivalent to `marginLeft`.

### `marginHorizontal` [​](https://reactnative.dev/docs/next/layout-props\#marginhorizontal "Direct link to marginhorizontal")

Setting `marginHorizontal` has the same effect as setting both `marginLeft` and `marginRight`.

### `marginLeft` [​](https://reactnative.dev/docs/next/layout-props\#marginleft "Direct link to marginleft")

`marginLeft` works like `margin-left` in CSS. See [https://developer.mozilla.org/en-US/docs/Web/CSS/margin-left](https://developer.mozilla.org/en-US/docs/Web/CSS/margin-left) for more details.

### `marginRight` [​](https://reactnative.dev/docs/next/layout-props\#marginright "Direct link to marginright")

`marginRight` works like `margin-right` in CSS. See [https://developer.mozilla.org/en-US/docs/Web/CSS/margin-right](https://developer.mozilla.org/en-US/docs/Web/CSS/margin-right) for more details.

### `marginStart` [​](https://reactnative.dev/docs/next/layout-props\#marginstart "Direct link to marginstart")

When direction is `ltr`, `marginStart` is equivalent to `marginLeft`. When direction is `rtl`, `marginStart` is equivalent to `marginRight`.

### `marginTop` [​](https://reactnative.dev/docs/next/layout-props\#margintop "Direct link to margintop")

`marginTop` works like `margin-top` in CSS. See [https://developer.mozilla.org/en-US/docs/Web/CSS/margin-top](https://developer.mozilla.org/en-US/docs/Web/CSS/margin-top) for more details.

### `marginVertical` [​](https://reactnative.dev/docs/next/layout-props\#marginvertical "Direct link to marginvertical")

Setting `marginVertical` has the same effect as setting both `marginTop` and `marginBottom`.

### `maxHeight` [​](https://reactnative.dev/docs/next/layout-props\#maxheight "Direct link to maxheight")

`maxHeight` is the maximum height for this component, in logical pixels.

It works similarly to `max-height` in CSS, but in React Native you must use points or percentages. Ems and other units are not supported.

See [https://developer.mozilla.org/en-US/docs/Web/CSS/max-height](https://developer.mozilla.org/en-US/docs/Web/CSS/max-height) for more details.

### `maxWidth` [​](https://reactnative.dev/docs/next/layout-props\#maxwidth "Direct link to maxwidth")

`maxWidth` is the maximum width for this component, in logical pixels.

It works similarly to `max-width` in CSS, but in React Native you must use points or percentages. Ems and other units are not supported.

See [https://developer.mozilla.org/en-US/docs/Web/CSS/max-width](https://developer.mozilla.org/en-US/docs/Web/CSS/max-width) for more details.

### `minHeight` [​](https://reactnative.dev/docs/next/layout-props\#minheight "Direct link to minheight")

`minHeight` is the minimum height for this component, in logical pixels.

It works similarly to `min-height` in CSS, but in React Native you must use points or percentages. Ems and other units are not supported.

See [https://developer.mozilla.org/en-US/docs/Web/CSS/min-height](https://developer.mozilla.org/en-US/docs/Web/CSS/min-height) for more details.

### `minWidth` [​](https://reactnative.dev/docs/next/layout-props\#minwidth "Direct link to minwidth")

`minWidth` is the minimum width for this component, in logical pixels.

It works similarly to `min-width` in CSS, but in React Native you must use points or percentages. Ems and other units are not supported.

See [https://developer.mozilla.org/en-US/docs/Web/CSS/min-width](https://developer.mozilla.org/en-US/docs/Web/CSS/min-width) for more details.

### `overflow` [​](https://reactnative.dev/docs/next/layout-props\#overflow "Direct link to overflow")

`overflow` controls how children are measured and displayed. `overflow: hidden` causes views to be clipped while `overflow: scroll` causes views to be measured independently of their parents' main axis. It works like `overflow` in CSS (default: visible). See [https://developer.mozilla.org/en/docs/Web/CSS/overflow](https://developer.mozilla.org/en/docs/Web/CSS/overflow) for more details.

| Type | Required |
| --- | --- |
| enum('visible', 'hidden', 'scroll') | No |

### `padding` [​](https://reactnative.dev/docs/next/layout-props\#padding "Direct link to padding")

Setting `padding` has the same effect as setting each of `paddingTop`, `paddingBottom`, `paddingLeft`, and `paddingRight`. See [https://developer.mozilla.org/en-US/docs/Web/CSS/padding](https://developer.mozilla.org/en-US/docs/Web/CSS/padding) for more details.

### `paddingBottom` [​](https://reactnative.dev/docs/next/layout-props\#paddingbottom "Direct link to paddingbottom")

`paddingBottom` works like `padding-bottom` in CSS. See [https://developer.mozilla.org/en-US/docs/Web/CSS/padding-bottom](https://developer.mozilla.org/en-US/docs/Web/CSS/padding-bottom) for more details.

### `paddingEnd` [​](https://reactnative.dev/docs/next/layout-props\#paddingend "Direct link to paddingend")

When direction is `ltr`, `paddingEnd` is equivalent to `paddingRight`. When direction is `rtl`, `paddingEnd` is equivalent to `paddingLeft`.

### `paddingHorizontal` [​](https://reactnative.dev/docs/next/layout-props\#paddinghorizontal "Direct link to paddinghorizontal")

Setting `paddingHorizontal` is like setting both of `paddingLeft` and `paddingRight`.

### `paddingLeft` [​](https://reactnative.dev/docs/next/layout-props\#paddingleft "Direct link to paddingleft")

`paddingLeft` works like `padding-left` in CSS. See [https://developer.mozilla.org/en-US/docs/Web/CSS/padding-left](https://developer.mozilla.org/en-US/docs/Web/CSS/padding-left) for more details.

### `paddingRight` [​](https://reactnative.dev/docs/next/layout-props\#paddingright "Direct link to paddingright")

`paddingRight` works like `padding-right` in CSS. See [https://developer.mozilla.org/en-US/docs/Web/CSS/padding-right](https://developer.mozilla.org/en-US/docs/Web/CSS/padding-right) for more details.

### `paddingStart` [​](https://reactnative.dev/docs/next/layout-props\#paddingstart "Direct link to paddingstart")

When direction is `ltr`, `paddingStart` is equivalent to `paddingLeft`. When direction is `rtl`, `paddingStart` is equivalent to `paddingRight`.

### `paddingTop` [​](https://reactnative.dev/docs/next/layout-props\#paddingtop "Direct link to paddingtop")

`paddingTop` works like `padding-top` in CSS. See [https://developer.mozilla.org/en-US/docs/Web/CSS/padding-top](https://developer.mozilla.org/en-US/docs/Web/CSS/padding-top) for more details.

| Type | Required |
| --- | --- |
| number, ,string | No |

### `paddingVertical` [​](https://reactnative.dev/docs/next/layout-props\#paddingvertical "Direct link to paddingvertical")

Setting `paddingVertical` is like setting both of `paddingTop` and `paddingBottom`.

### `position` [​](https://reactnative.dev/docs/next/layout-props\#position "Direct link to position")

`position` in React Native is similar to [regular CSS](https://developer.mozilla.org/en-US/docs/Web/CSS/position), but everything is set to `relative` by default.

`relative` will position an element according to the normal flow of the layout. Insets ( `top`, `bottom`, `left`, `right`) will offset relative to this layout.

`absolute` takes the element out of the normal flow of the layout. Insets will offset relative to its [containing block](https://reactnative.dev/docs/next/flexbox#the-containing-block).

`static` will position an element according to the normal flow of the layout. Insets will have no effect.
`static` elements do not form a containing block for absolute descendants.

For more information, see the [Layout with Flexbox docs](https://reactnative.dev/docs/next/flexbox#position). Also, [the Yoga documentation](https://www.yogalayout.dev/docs/styling/position) has more details on how `position` differs between React Native and CSS.

| Type | Required |
| --- | --- |
| enum('absolute', 'relative', 'static') | No |

### `right` [​](https://reactnative.dev/docs/next/layout-props\#right "Direct link to right")

`right` is the number of logical pixels to offset the right edge of this component.

It works similarly to `right` in CSS, but in React Native you must use points or percentages. Ems and other units are not supported.

See [https://developer.mozilla.org/en-US/docs/Web/CSS/right](https://developer.mozilla.org/en-US/docs/Web/CSS/right) for more details of how `right` affects layout.

### `rowGap` [​](https://reactnative.dev/docs/next/layout-props\#rowgap "Direct link to rowgap")

`rowGap` works like `row-gap` in CSS. Only pixel units are supported in React Native. See [https://developer.mozilla.org/en-US/docs/Web/CSS/row-gap](https://developer.mozilla.org/en-US/docs/Web/CSS/row-gap) for more details.

### `start` [​](https://reactnative.dev/docs/next/layout-props\#start "Direct link to start")

When the direction is `ltr`, `start` is equivalent to `left`. When the direction is `rtl`, `start` is equivalent to `right`.

This style takes precedence over the `left`, `right`, and `end` styles.

### `top` [​](https://reactnative.dev/docs/next/layout-props\#top "Direct link to top")

`top` is the number of logical pixels to offset the top edge of this component.

It works similarly to `top` in CSS, but in React Native you must use points or percentages. Ems and other units are not supported.

See [https://developer.mozilla.org/en-US/docs/Web/CSS/top](https://developer.mozilla.org/en-US/docs/Web/CSS/top) for more details of how `top` affects layout.

### `width` [​](https://reactnative.dev/docs/next/layout-props\#width "Direct link to width")

`width` sets the width of this component.

It works similarly to `width` in CSS, but in React Native you must use points or percentages. Ems and other units are not supported. See [https://developer.mozilla.org/en-US/docs/Web/CSS/width](https://developer.mozilla.org/en-US/docs/Web/CSS/width) for more details.

### `zIndex` [​](https://reactnative.dev/docs/next/layout-props\#zindex "Direct link to zindex")

`zIndex` controls which components display on top of others. Normally, you don't use `zIndex`. Components render according to their order in the document tree, so later components draw over earlier ones. `zIndex` may be useful if you have animations or custom modal interfaces where you don't want this behavior.

It works like the CSS `z-index` property - components with a larger `zIndex` will render on top. Think of the z-direction like it's pointing from the phone into your eyeball. See [https://developer.mozilla.org/en-US/docs/Web/CSS/z-index](https://developer.mozilla.org/en-US/docs/Web/CSS/z-index) for more details.

On iOS, `zIndex` may require `View` s to be siblings of each other for it to work as expected.

Is this page useful?

- [Example](https://reactnative.dev/docs/next/layout-props#example)
- [Props](https://reactnative.dev/docs/next/layout-props#props)
- [`alignContent`](https://reactnative.dev/docs/next/layout-props#aligncontent)
- [`alignItems`](https://reactnative.dev/docs/next/layout-props#alignitems)
- [`alignSelf`](https://reactnative.dev/docs/next/layout-props#alignself)
- [`aspectRatio`](https://reactnative.dev/docs/next/layout-props#aspectratio)
- [`borderBottomWidth`](https://reactnative.dev/docs/next/layout-props#borderbottomwidth)
- [`borderEndWidth`](https://reactnative.dev/docs/next/layout-props#borderendwidth)
- [`borderLeftWidth`](https://reactnative.dev/docs/next/layout-props#borderleftwidth)
- [`borderRightWidth`](https://reactnative.dev/docs/next/layout-props#borderrightwidth)
- [`borderStartWidth`](https://reactnative.dev/docs/next/layout-props#borderstartwidth)
- [`borderTopWidth`](https://reactnative.dev/docs/next/layout-props#bordertopwidth)
- [`borderWidth`](https://reactnative.dev/docs/next/layout-props#borderwidth)
- [`bottom`](https://reactnative.dev/docs/next/layout-props#bottom)
- [`boxSizing`](https://reactnative.dev/docs/next/layout-props#boxsizing)
- [`columnGap`](https://reactnative.dev/docs/next/layout-props#columngap)
- [`direction`](https://reactnative.dev/docs/next/layout-props#direction)
- [`display`](https://reactnative.dev/docs/next/layout-props#display)
- [`end`](https://reactnative.dev/docs/next/layout-props#end)
- [`flex`](https://reactnative.dev/docs/next/layout-props#flex)
- [`flexBasis`](https://reactnative.dev/docs/next/layout-props#flexbasis)
- [`flexDirection`](https://reactnative.dev/docs/next/layout-props#flexdirection)
- [`flexGrow`](https://reactnative.dev/docs/next/layout-props#flexgrow)
- [`flexShrink`](https://reactnative.dev/docs/next/layout-props#flexshrink)
- [`flexWrap`](https://reactnative.dev/docs/next/layout-props#flexwrap)
- [`gap`](https://reactnative.dev/docs/next/layout-props#gap)
- [`height`](https://reactnative.dev/docs/next/layout-props#height)
- [`isolation`](https://reactnative.dev/docs/next/layout-props#isolation)
- [`justifyContent`](https://reactnative.dev/docs/next/layout-props#justifycontent)
- [`left`](https://reactnative.dev/docs/next/layout-props#left)
- [`margin`](https://reactnative.dev/docs/next/layout-props#margin)
- [`marginBottom`](https://reactnative.dev/docs/next/layout-props#marginbottom)
- [`marginEnd`](https://reactnative.dev/docs/next/layout-props#marginend)
- [`marginHorizontal`](https://reactnative.dev/docs/next/layout-props#marginhorizontal)
- [`marginLeft`](https://reactnative.dev/docs/next/layout-props#marginleft)
- [`marginRight`](https://reactnative.dev/docs/next/layout-props#marginright)
- [`marginStart`](https://reactnative.dev/docs/next/layout-props#marginstart)
- [`marginTop`](https://reactnative.dev/docs/next/layout-props#margintop)
- [`marginVertical`](https://reactnative.dev/docs/next/layout-props#marginvertical)
- [`maxHeight`](https://reactnative.dev/docs/next/layout-props#maxheight)
- [`maxWidth`](https://reactnative.dev/docs/next/layout-props#maxwidth)
- [`minHeight`](https://reactnative.dev/docs/next/layout-props#minheight)
- [`minWidth`](https://reactnative.dev/docs/next/layout-props#minwidth)
- [`overflow`](https://reactnative.dev/docs/next/layout-props#overflow)
- [`padding`](https://reactnative.dev/docs/next/layout-props#padding)
- [`paddingBottom`](https://reactnative.dev/docs/next/layout-props#paddingbottom)
- [`paddingEnd`](https://reactnative.dev/docs/next/layout-props#paddingend)
- [`paddingHorizontal`](https://reactnative.dev/docs/next/layout-props#paddinghorizontal)
- [`paddingLeft`](https://reactnative.dev/docs/next/layout-props#paddingleft)
- [`paddingRight`](https://reactnative.dev/docs/next/layout-props#paddingright)
- [`paddingStart`](https://reactnative.dev/docs/next/layout-props#paddingstart)
- [`paddingTop`](https://reactnative.dev/docs/next/layout-props#paddingtop)
- [`paddingVertical`](https://reactnative.dev/docs/next/layout-props#paddingvertical)
- [`position`](https://reactnative.dev/docs/next/layout-props#position)
- [`right`](https://reactnative.dev/docs/next/layout-props#right)
- [`rowGap`](https://reactnative.dev/docs/next/layout-props#rowgap)
- [`start`](https://reactnative.dev/docs/next/layout-props#start)
- [`top`](https://reactnative.dev/docs/next/layout-props#top)
- [`width`](https://reactnative.dev/docs/next/layout-props#width)
- [`zIndex`](https://reactnative.dev/docs/next/layout-props#zindex)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/out-of-tree-platforms

[Skip to main content](https://reactnative.dev/docs/next/out-of-tree-platforms#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/out-of-tree-platforms)** (0.81).

Version: Next

On this page

React Native is not only for Android and iOS devices - our partners and the community maintain projects that bring React Native to other platforms, such as:

**From Partners**

- [React Native macOS](https://github.com/microsoft/react-native-macos) \- React Native for macOS and Cocoa.
- [React Native Windows](https://github.com/microsoft/react-native-windows) \- React Native for Microsoft's Universal Windows Platform (UWP).
- [React Native visionOS](https://github.com/callstack/react-native-visionos) \- React Native for Apple's visionOS.

**From Community**

- [React Native tvOS](https://github.com/react-native-tvos/react-native-tvos) \- React Native for Apple TV and Android TV devices.
- [React Native Web](https://github.com/necolas/react-native-web) \- React Native on the web using React DOM.
- [React Native Skia](https://github.com/react-native-skia/react-native-skia) \- React Native using [Skia](https://skia.org/) as a renderer. Currently supports Linux and macOS.

## Creating your own React Native platform [​](https://reactnative.dev/docs/next/out-of-tree-platforms\#creating-your-own-react-native-platform "Direct link to Creating your own React Native platform")

Right now the process of creating a React Native platform from scratch is not very well documented - one of the goals of the upcoming re-architecture ( [Fabric](https://reactnative.dev/blog/2018/06/14/state-of-react-native-2018)) is to make maintaining a platform easier.

### Bundling [​](https://reactnative.dev/docs/next/out-of-tree-platforms\#bundling "Direct link to Bundling")

As of React Native 0.57 you can now register your React Native platform with React Native's JavaScript bundler, [Metro](https://metrobundler.dev/). This means you can pass `--platform example` to `npx react-native bundle`, and it will look for JavaScript files with the `.example.js` suffix.

To register your platform with RNPM, your module's name must match one of these patterns:

- `react-native-example` \- It will search all top-level modules that start with `react-native-`
- `@org/react-native-example` \- It will search for modules that start with `react-native-` under any scope
- `@react-native-example/module` \- It will search in all modules under scopes with names starting with `@react-native-`

You must also have an entry in your `package.json` like this:

json

```codeBlockLines_AclH
{
"rnpm": {
"haste": {
"providesModuleNodeModules": ["react-native-example"],
"platforms": ["example"]
}
}
}

`"providesModuleNodeModules"` is an array of modules that will get added to the Haste module search path, and `"platforms"` is an array of platform suffixes that will be added as valid platforms.

Is this page useful?

- [Creating your own React Native platform](https://reactnative.dev/docs/next/out-of-tree-platforms#creating-your-own-react-native-platform)
- [Bundling](https://reactnative.dev/docs/next/out-of-tree-platforms#bundling)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/progressbarandroid

[Skip to main content](https://reactnative.dev/docs/next/progressbarandroid#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/progressbarandroid)** (0.81).

Version: Next

On this page

Deprecated

Use one of the [community packages](https://reactnative.directory/?search=progressbar) instead.

Android-only React component used to indicate that the app is loading or there is some activity in the app.

### Example [​](https://reactnative.dev/docs/next/progressbarandroid\#example "Direct link to Example")

ProgressBarAndroid - Snack

# ProgressBarAndroid

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {View, StyleSheet, ProgressBarAndroid, Text} from 'react-native';

return (

styleAttr="Horizontal"
indeterminate={false}
progress={0.5}

};

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
alignItems: 'center',
},
example: {
marginVertical: 24,
},
});

export default App;

styleAttr="Horizontal"
indeterminate={false}
progress={0.5}

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
alignItems: 'center',
},
example: {
marginVertical: 24,
},
});

### Download [Expo Go](https://expo.dev/client) and scan the QR code to get started.

exp://u.expo.dev/933fd9c0-1666-11e7-afca-d980795c5824?runtime-version=exposdk%3A53.0.0&channel-name=production&snack-channel=KgbrWwWXaL

### Connected devices

0

[Log in](https://expo.dev/login) to open this Snack from Expo Go on your device or simulator.

PreviewMy DeviceAndroid

* * *

# Reference

## Props [​](https://reactnative.dev/docs/next/progressbarandroid\#props "Direct link to Props")

Inherits [View Props](https://reactnative.dev/docs/next/view#props).

### `animating` [​](https://reactnative.dev/docs/next/progressbarandroid\#animating "Direct link to animating")

Whether to show the ProgressBar (true, the default) or hide it (false).

| Type | Required |
| --- | --- |
| bool | No |

### `color` [​](https://reactnative.dev/docs/next/progressbarandroid\#color "Direct link to color")

Color of the progress bar.

| Type | Required |
| --- | --- |
| [color](https://reactnative.dev/docs/next/colors) | No |

### `indeterminate` [​](https://reactnative.dev/docs/next/progressbarandroid\#indeterminate "Direct link to indeterminate")

If the progress bar will show indeterminate progress. Note that this can only be false if styleAttr is Horizontal, and requires a `progress` value.

| Type | Required |
| --- | --- |
| indeterminateType | No |

### `progress` [​](https://reactnative.dev/docs/next/progressbarandroid\#progress "Direct link to progress")

The progress value (between 0 and 1).

| Type | Required |
| --- | --- |
| number | No |

### `styleAttr` [​](https://reactnative.dev/docs/next/progressbarandroid\#styleattr "Direct link to styleattr")

Style of the ProgressBar. One of:

- Horizontal
- Normal (default)
- Small
- Large
- Inverse
- SmallInverse
- LargeInverse

| Type | Required |
| --- | --- |
| enum('Horizontal', 'Normal', 'Small', 'Large', 'Inverse', 'SmallInverse', 'LargeInverse') | No |

### `testID` [​](https://reactnative.dev/docs/next/progressbarandroid\#testid "Direct link to testid")

Used to locate this view in end-to-end tests.

| Type | Required |
| --- | --- |
| string | No |

Is this page useful?

- [Example](https://reactnative.dev/docs/next/progressbarandroid#example)
- [Props](https://reactnative.dev/docs/next/progressbarandroid#props)
- [`animating`](https://reactnative.dev/docs/next/progressbarandroid#animating)
- [`color`](https://reactnative.dev/docs/next/progressbarandroid#color)
- [`indeterminate`](https://reactnative.dev/docs/next/progressbarandroid#indeterminate)
- [`progress`](https://reactnative.dev/docs/next/progressbarandroid#progress)
- [`styleAttr`](https://reactnative.dev/docs/next/progressbarandroid#styleattr)
- [`testID`](https://reactnative.dev/docs/next/progressbarandroid#testid)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/modal

[Skip to main content](https://reactnative.dev/docs/next/modal#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/modal)** (0.81).

Version: Next

On this page

The Modal component is a basic way to present content above an enclosing view.

## Example [​](https://reactnative.dev/docs/next/modal\#example "Direct link to Example")

Modal - Snack

# Modal

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React, {useState} from 'react';
import {Alert, Modal, StyleSheet, Text, Pressable, View} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const \[modalVisible, setModalVisible\] = useState(false);
return (

animationType="slide"
transparent={true}
visible={modalVisible}

Alert.alert('Modal has been closed.');
setModalVisible(!modalVisible);

style={\[styles.button, styles.buttonClose\]}

style={\[styles.button, styles.buttonOpen\]}

};

const styles = StyleSheet.create({
centeredView: {
flex: 1,
justifyContent: 'center',
alignItems: 'center',
},
modalView: {
margin: 20,
backgroundColor: 'white',
borderRadius: 20,
padding: 35,
alignItems: 'center',
shadowColor: '#000',
shadowOffset: {
width: 0,
height: 2,
},
shadowOpacity: 0.25,
shadowRadius: 4,
elevation: 5,
},
button: {
borderRadius: 20,
padding: 10,
elevation: 2,
},
buttonOpen: {
backgroundColor: '#F194FF',
},
buttonClose: {
backgroundColor: '#2196F3',
},
textStyle: {
color: 'white',
fontWeight: 'bold',
textAlign: 'center',
},
modalText: {
marginBottom: 15,
textAlign: 'center',
},
});

export default App;

const [modalVisible, setModalVisible] = useState(false);
return (

animationType="slide"
transparent={true}
visible={modalVisible}

Alert.alert('Modal has been closed.');
setModalVisible(!modalVisible);

style={[styles.button, styles.buttonClose]}

style={[styles.button, styles.buttonOpen]}

const styles = StyleSheet.create({
centeredView: {
flex: 1,
justifyContent: 'center',
alignItems: 'center',
},
modalView: {
margin: 20,
backgroundColor: 'white',
borderRadius: 20,
padding: 35,
alignItems: 'center',
shadowColor: '#000',
shadowOffset: {
width: 0,
height: 2,
},
shadowOpacity: 0.25,
shadowRadius: 4,
elevation: 5,
},
button: {
borderRadius: 20,
padding: 10,
elevation: 2,
},
buttonOpen: {
backgroundColor: '#F194FF',
},
buttonClose: {
backgroundColor: '#2196F3',
},
textStyle: {
color: 'white',
fontWeight: 'bold',
textAlign: 'center',
},
modalText: {
marginBottom: 15,
textAlign: 'center',
},
});

### Download [Expo Go](https://expo.dev/client) and scan the QR code to get started.

exp://u.expo.dev/933fd9c0-1666-11e7-afca-d980795c5824?runtime-version=exposdk%3A53.0.0&channel-name=production&snack-channel=pO6ZlnB737

### Connected devices

0

[Log in](https://expo.dev/login) to open this Snack from Expo Go on your device or simulator.

PreviewMy DeviceAndroidiOS

* * *

# Reference

## Props [​](https://reactnative.dev/docs/next/modal\#props "Direct link to Props")

### [View Props](https://reactnative.dev/docs/next/view\#props) [​](https://reactnative.dev/docs/next/modal\#view-props "Direct link to view-props")

Inherits [View Props](https://reactnative.dev/docs/next/view#props).

### `animated` [​](https://reactnative.dev/docs/next/modal\#animated "Direct link to animated")

Deprecated

Use the [`animationType`](https://reactnative.dev/docs/next/modal#animationtype) prop instead.

### `animationType` [​](https://reactnative.dev/docs/next/modal\#animationtype "Direct link to animationtype")

The `animationType` prop controls how the modal animates.

Possible values:

- `slide` slides in from the bottom
- `fade` fades into view
- `none` appears without an animation

| Type | Default |
| --- | --- |
| enum( `'none'`, `'slide'`, `'fade'`) | `none` |

### `backdropColor` [​](https://reactnative.dev/docs/next/modal\#backdropcolor "Direct link to backdropcolor")

The `backdropColor` of the modal (or background color of the modal's container.) Defaults to `white` if not provided and transparent is `false`. Ignored if `transparent` is `true`.

| Type | Default |
| --- | --- |
| [color](https://reactnative.dev/docs/next/colors) | white |

### `hardwareAccelerated` Android [​](https://reactnative.dev/docs/next/modal\#hardwareaccelerated-android "Direct link to hardwareaccelerated-android")

The `hardwareAccelerated` prop controls whether to force hardware acceleration for the underlying window.

| Type | Default |
| --- | --- |
| bool | `false` |

### `navigationBarTranslucent` Android [​](https://reactnative.dev/docs/next/modal\#navigationbartranslucent-android "Direct link to navigationbartranslucent-android")

The `navigationBarTranslucent` prop determines whether your modal should go under the system navigation bar. However, `statusBarTranslucent` also needs to be set to `true` to make navigation bar translucent.

### `onDismiss` iOS [​](https://reactnative.dev/docs/next/modal\#ondismiss-ios "Direct link to ondismiss-ios")

The `onDismiss` prop allows passing a function that will be called once the modal has been dismissed.

| Type |
| --- |
| function |

### `onOrientationChange` iOS [​](https://reactnative.dev/docs/next/modal\#onorientationchange-ios "Direct link to onorientationchange-ios")

The `onOrientationChange` callback is called when the orientation changes while the modal is being displayed. The orientation provided is only 'portrait' or 'landscape'. This callback is also called on initial render, regardless of the current orientation.

### `allowSwipeDismissal` iOS [​](https://reactnative.dev/docs/next/modal\#allowswipedismissal-ios "Direct link to allowswipedismissal-ios")

Controls whether the modal can be dismissed by swiping down on iOS.
This requires you to implement the `onRequestClose` prop to handle the dismissal.

### `ref` [​](https://reactnative.dev/docs/next/modal\#ref "Direct link to ref")

A ref setter that will be assigned an [element node](https://reactnative.dev/docs/next/element-nodes) when mounted.

### `onRequestClose` [​](https://reactnative.dev/docs/next/modal\#onrequestclose "Direct link to onrequestclose")

The `onRequestClose` callback is called when the user taps the hardware back button on Android or the menu button on Apple TV. Because of this required prop, be aware that `BackHandler` events will not be emitted as long as the modal is open.
On iOS, this callback is called when a Modal is being dismissed using a drag gesture when `presentationStyle` is `pageSheet or formSheet`. When `allowSwipeDismissal` is enabled this callback will be called after dismissing the modal.

| Type |
| --- |

### `onShow` [​](https://reactnative.dev/docs/next/modal\#onshow "Direct link to onshow")

The `onShow` prop allows passing a function that will be called once the modal has been shown.

### `presentationStyle` iOS [​](https://reactnative.dev/docs/next/modal\#presentationstyle-ios "Direct link to presentationstyle-ios")

The `presentationStyle` prop controls how the modal appears (generally on larger devices such as iPad or plus-sized iPhones). See [https://developer.apple.com/reference/uikit/uimodalpresentationstyle](https://developer.apple.com/reference/uikit/uimodalpresentationstyle) for details.

- `fullScreen` covers the screen completely
- `pageSheet` covers portrait-width view centered (only on larger devices)
- `formSheet` covers narrow-width view centered (only on larger devices)
- `overFullScreen` covers the screen completely, but allows transparency

| Type | Default |
| --- | --- |

### `statusBarTranslucent` Android [​](https://reactnative.dev/docs/next/modal\#statusbartranslucent-android "Direct link to statusbartranslucent-android")

The `statusBarTranslucent` prop determines whether your modal should go under the system statusbar.

### `supportedOrientations` iOS [​](https://reactnative.dev/docs/next/modal\#supportedorientations-ios "Direct link to supportedorientations-ios")

The `supportedOrientations` prop allows the modal to be rotated to any of the specified orientations. On iOS, the modal is still restricted by what's specified in your app's Info.plist's UISupportedInterfaceOrientations field.

note

When using `presentationStyle` of `pageSheet` or `formSheet`, this property will be ignored on iOS.

| Type | Default |
| --- | --- |
| array of enums( `'portrait'`, `'portrait-upside-down'`, `'landscape'`, `'landscape-left'`, `'landscape-right'`) | `['portrait']` |

### `transparent` [​](https://reactnative.dev/docs/next/modal\#transparent "Direct link to transparent")

The `transparent` prop determines whether your modal will fill the entire view. Setting this to `true` will render the modal over a transparent background.

### `visible` [​](https://reactnative.dev/docs/next/modal\#visible "Direct link to visible")

The `visible` prop determines whether your modal is visible.

| Type | Default |
| --- | --- |
| bool | `true` |

Is this page useful?

- [Example](https://reactnative.dev/docs/next/modal#example)
- [Props](https://reactnative.dev/docs/next/modal#props)
- [View Props](https://reactnative.dev/docs/next/modal#view-props)
- [`animated`](https://reactnative.dev/docs/next/modal#animated)
- [`animationType`](https://reactnative.dev/docs/next/modal#animationtype)
- [`backdropColor`](https://reactnative.dev/docs/next/modal#backdropcolor)
- [`hardwareAccelerated` \\
Android](https://reactnative.dev/docs/next/modal#hardwareaccelerated-android)
- [`navigationBarTranslucent` \\
Android](https://reactnative.dev/docs/next/modal#navigationbartranslucent-android)
- [`onDismiss` \\
iOS](https://reactnative.dev/docs/next/modal#ondismiss-ios)
- [`onOrientationChange` \\
iOS](https://reactnative.dev/docs/next/modal#onorientationchange-ios)
- [`allowSwipeDismissal` \\
iOS](https://reactnative.dev/docs/next/modal#allowswipedismissal-ios)
- [`ref`](https://reactnative.dev/docs/next/modal#ref)
- [`onRequestClose`](https://reactnative.dev/docs/next/modal#onrequestclose)
- [`onShow`](https://reactnative.dev/docs/next/modal#onshow)
- [`presentationStyle` \\
iOS](https://reactnative.dev/docs/next/modal#presentationstyle-ios)
- [`statusBarTranslucent` \\
Android](https://reactnative.dev/docs/next/modal#statusbartranslucent-android)
- [`supportedOrientations` \\
iOS](https://reactnative.dev/docs/next/modal#supportedorientations-ios)
- [`transparent`](https://reactnative.dev/docs/next/modal#transparent)
- [`visible`](https://reactnative.dev/docs/next/modal#visible)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/turbo-native-modules-android

[Skip to main content](https://reactnative.dev/docs/next/turbo-native-modules-android#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/turbo-native-modules-android)** (0.81).

Version: Next

Now it's time to write some Android platform code to make sure `localStorage` survives after the application is closed.

The first step is to implement the generated `NativeLocalStorageSpec` interface:

- Java
- Kotlin

android/app/src/main/java/com/nativelocalstorage/NativeLocalStorageModule.java

```codeBlockLines_AclH
package com.nativelocalstorage;

import android.content.Context;
import android.content.SharedPreferences;
import com.nativelocalstorage.NativeLocalStorageSpec;
import com.facebook.react.bridge.ReactApplicationContext;

public class NativeLocalStorageModule extends NativeLocalStorageSpec {

public static final String NAME = "NativeLocalStorage";

public NativeLocalStorageModule(ReactApplicationContext reactContext) {
super(reactContext);
}

@Override
public String getName() {
return NAME;
}

@Override
public void setItem(String value, String key) {
SharedPreferences sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE);
SharedPreferences.Editor editor = sharedPref.edit();
editor.putString(key, value);
editor.apply();
}

@Override
public String getItem(String key) {
SharedPreferences sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE);
String username = sharedPref.getString(key, null);
return username;
}

@Override
public void removeItem(String key) {
SharedPreferences sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE);
sharedPref.edit().remove(key).apply();
}
}

android/app/src/main/java/com/nativelocalstorage/NativeLocalStorageModule.kt

```codeBlockLines_AclH
package com.nativelocalstorage

import android.content.Context
import android.content.SharedPreferences
import com.nativelocalstorage.NativeLocalStorageSpec
import com.facebook.react.bridge.ReactApplicationContext

class NativeLocalStorageModule(reactContext: ReactApplicationContext) : NativeLocalStorageSpec(reactContext) {

override fun getName() = NAME

override fun setItem(value: String, key: String) {
val sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE)
val editor = sharedPref.edit()
editor.putString(key, value)
editor.apply()
}

override fun getItem(key: String): String? {
val sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE)
val username = sharedPref.getString(key, null)
return username.toString()
}

override fun removeItem(key: String) {
val sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE)
val editor = sharedPref.edit()
editor.remove(key)
editor.apply()
}

override fun clear() {
val sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE)
val editor = sharedPref.edit()
editor.clear()
editor.apply()
}

companion object {
const val NAME = "NativeLocalStorage"
}
}

Next we need to create `NativeLocalStoragePackage`. It provides an object to register our Module in the React Native runtime, by wrapping it as a Base Native Package:

android/app/src/main/java/com/nativelocalstorage/NativeLocalStoragePackage.java

import com.facebook.react.BaseReactPackage;
import com.facebook.react.bridge.NativeModule;
import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.module.model.ReactModuleInfo;
import com.facebook.react.module.model.ReactModuleInfoProvider;

import java.util.HashMap;
import java.util.Map;

public class NativeLocalStoragePackage extends BaseReactPackage {

@Override
public NativeModule getModule(String name, ReactApplicationContext reactContext) {
if (name.equals(NativeLocalStorageModule.NAME)) {
return new NativeLocalStorageModule(reactContext);
} else {
return null;
}
}

@Override
public ReactModuleInfoProvider getReactModuleInfoProvider() {
return new ReactModuleInfoProvider() {
@Override

map.put(NativeLocalStorageModule.NAME, new ReactModuleInfo(
NativeLocalStorageModule.NAME, // name
NativeLocalStorageModule.NAME, // className
false, // canOverrideExistingModule
false, // needsEagerInit
false, // isCXXModule
true // isTurboModule
));
return map;
}
};
}
}

android/app/src/main/java/com/nativelocalstorage/NativeLocalStoragePackage.kt

import com.facebook.react.BaseReactPackage
import com.facebook.react.bridge.NativeModule
import com.facebook.react.bridge.ReactApplicationContext
import com.facebook.react.module.model.ReactModuleInfo
import com.facebook.react.module.model.ReactModuleInfoProvider

class NativeLocalStoragePackage : BaseReactPackage() {

override fun getModule(name: String, reactContext: ReactApplicationContext): NativeModule? =
if (name == NativeLocalStorageModule.NAME) {
NativeLocalStorageModule(reactContext)
} else {
null
}

override fun getReactModuleInfoProvider() = ReactModuleInfoProvider {
mapOf(
NativeLocalStorageModule.NAME to ReactModuleInfo(
name = NativeLocalStorageModule.NAME,
className = NativeLocalStorageModule.NAME,
canOverrideExistingModule = false,
needsEagerInit = false,
isCxxModule = false,
isTurboModule = true
)
)
}
}

Finally, we need to tell the React Native in our main application how to find this `Package`. We call this "registering" the package in React Native.

In this case, you add it to be returned by the [getPackages](https://github.com/facebook/react-native/blob/8d8b8c343e62115a5509e1aed62047053c2f6e39/packages/react-native/ReactAndroid/src/main/java/com/facebook/react/ReactNativeHost.java#L233) method.

info

Later you’ll learn how to distribute your Native Modules as [npm packages](https://reactnative.dev/docs/next/the-new-architecture/create-module-library#publish-the-library-on-npm), which our build tooling will autolink for you.

android/app/src/main/java/com/turobmoduleexample/MainApplication.java

```codeBlockLines_AclH
package com.inappmodule;

import android.app.Application;
import com.facebook.react.PackageList;
import com.facebook.react.ReactApplication;
import com.facebook.react.ReactHost;
import com.facebook.react.ReactNativeHost;
import com.facebook.react.ReactPackage;
import com.facebook.react.defaults.DefaultNewArchitectureEntryPoint;
import com.facebook.react.defaults.DefaultReactHost;
import com.facebook.react.defaults.DefaultReactNativeHost;
import com.facebook.soloader.SoLoader;
import com.nativelocalstorage.NativeLocalStoragePackage;

import java.util.ArrayList;
import java.util.List;

public class MainApplication extends Application implements ReactApplication {

private final ReactNativeHost reactNativeHost = new DefaultReactNativeHost(this) {
@Override

// Packages that cannot be autolinked yet can be added manually here, for example:
// packages.add(new MyReactNativePackage());
packages.add(new NativeLocalStoragePackage());
return packages;
}

@Override
public String getJSMainModuleName() {
return "index";
}

@Override
public boolean getUseDeveloperSupport() {
return BuildConfig.DEBUG;
}

@Override
public boolean isNewArchEnabled() {
return BuildConfig.IS_NEW_ARCHITECTURE_ENABLED;
}

@Override
public boolean isHermesEnabled() {
return BuildConfig.IS_HERMES_ENABLED;
}
};

@Override
public ReactHost getReactHost() {
return DefaultReactHost.getDefaultReactHost(getApplicationContext(), reactNativeHost);
}

@Override
public void onCreate() {
super.onCreate();
SoLoader.init(this, false);
if (BuildConfig.IS_NEW_ARCHITECTURE_ENABLED) {
// If you opted-in for the New Architecture, we load the native entry point for this app.
DefaultNewArchitectureEntryPoint.load();
}
}
}

android/app/src/main/java/com/turobmoduleexample/MainApplication.kt

```codeBlockLines_AclH
package com.inappmodule

import android.app.Application
import com.facebook.react.PackageList
import com.facebook.react.ReactApplication
import com.facebook.react.ReactHost
import com.facebook.react.ReactNativeHost
import com.facebook.react.ReactPackage
import com.facebook.react.defaults.DefaultNewArchitectureEntryPoint.load
import com.facebook.react.defaults.DefaultReactHost.getDefaultReactHost
import com.facebook.react.defaults.DefaultReactNativeHost
import com.facebook.soloader.SoLoader
import com.nativelocalstorage.NativeLocalStoragePackage

class MainApplication : Application(), ReactApplication {

override val reactNativeHost: ReactNativeHost =
object : DefaultReactNativeHost(this) {

PackageList(this).packages.apply {
// Packages that cannot be autolinked yet can be added manually here, for example:
// add(MyReactNativePackage())
add(NativeLocalStoragePackage())
}

override fun getJSMainModuleName(): String = "index"

override fun getUseDeveloperSupport(): Boolean = BuildConfig.DEBUG

override val isNewArchEnabled: Boolean = BuildConfig.IS_NEW_ARCHITECTURE_ENABLED
override val isHermesEnabled: Boolean = BuildConfig.IS_HERMES_ENABLED
}

override val reactHost: ReactHost
get() = getDefaultReactHost(applicationContext, reactNativeHost)

override fun onCreate() {
super.onCreate()
SoLoader.init(this, false)
if (BuildConfig.IS_NEW_ARCHITECTURE_ENABLED) {
// If you opted-in for the New Architecture, we load the native entry point for this app.
load()
}
}
}

You can now build and run your code on an emulator:

- npm
- Yarn

bash

```codeBlockLines_AclH
npm run android

```codeBlockLines_AclH
yarn run android

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/react-native-devtools

[Skip to main content](https://reactnative.dev/docs/next/react-native-devtools#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/react-native-devtools)** (0.81).

Version: Next

On this page

React Native DevTools is our modern debugging experience for React Native. Purpose-built from the ground up, it aims to be fundamentally more integrated, correct, and reliable than previous debugging methods.

React Native DevTools is designed for debugging React app concerns, and not to replace native tools. If you want to inspect React Native’s underlying platform layers (for example, while developing a Native Module), please use the debugging tools available in Android Studio and Xcode (see [Debugging Native Code](https://reactnative.dev/docs/debugging-native-code)).

**💡 Compatibility** — released in 0.76

React Native DevTools supports all React Native apps running Hermes. It replaces the previous Flipper, Experimental Debugger, and Hermes debugger (Chrome) frontends.

It is not possible to set up React Native DevTools with any older versions of React Native.

- **Chrome Browser DevTools — unsupported**
- Connecting to React Native via `chrome://inspect` is no longer supported. Features may not work correctly, as the latest versions of Chrome DevTools (which are built to match the latest browser capabilities and APIs) have not been tested, and this frontend lacks our customisations. Instead, we ship a supported version with React Native DevTools.
- **Visual Studio Code — unsupported** (pre-existing)
- Third party extensions such as [Expo Tools](https://github.com/expo/vscode-expo) and [Radon IDE](https://ide.swmansion.com/) may have improved compatibility, but are not directly supported by the React team.

**💡 Feedback & FAQs**

We want the tooling you use to debug React across all platforms to be reliable, familiar, simple, and cohesive. All the features described on this page are built with these principles in mind, and we also want to offer more capabilities in future.

We are actively iterating on the future of React Native DevTools, and have created a centralized [GitHub discussion](https://github.com/react-native-community/discussions-and-proposals/discussions/819) to keep track of issues, frequently asked questions, and feedback.

## Core features [​](https://reactnative.dev/docs/next/react-native-devtools\#core-features "Direct link to Core features")

React Native DevTools is based on the Chrome DevTools frontend. If you have a web development background, its features should be familiar. As a starting point, we recommend browsing the [Chrome DevTools docs](https://developer.chrome.com/docs/devtools) which contain full guides as well as video resources.

### Console [​](https://reactnative.dev/docs/next/react-native-devtools\#console "Direct link to Console")

The Console panel allows you to view and filter messages, evaluate JavaScript, inspect object properties, and more.

[Console features reference \| Chrome DevTools](https://developer.chrome.com/docs/devtools/console/reference)

#### Useful tips [​](https://reactnative.dev/docs/next/react-native-devtools\#useful-tips "Direct link to Useful tips")

- If your app has a lot of logs, use the filter box or change the log levels that are shown.
- Watch values over time with [Live Expressions](https://developer.chrome.com/docs/devtools/console/live-expressions).
- Persist messages across reloads with [Preserve Logs](https://developer.chrome.com/docs/devtools/console/reference#persist).
- Use `Ctrl` \+ `L` to clear the console view.

### Sources & breakpoints [​](https://reactnative.dev/docs/next/react-native-devtools\#sources--breakpoints "Direct link to Sources & breakpoints")

The Sources panel allows you to view the source files in your app and register breakpoints. Use a breakpoint to define a line of code where your app should pause — allowing you to inspect the live state of the program and incrementally step through code.

[Pause your code with breakpoints \| Chrome DevTools](https://developer.chrome.com/docs/devtools/javascript/breakpoints)

tip

#### Mini-guide [​](https://reactnative.dev/docs/next/react-native-devtools\#mini-guide "Direct link to Mini-guide")

Breakpoints are a fundamental tool in your debugging toolkit!

1. Navigate to a source file using the sidebar or `Cmd ⌘` + `P` / `Ctrl` + `P`.
2. Click in the line number column next to a line of code to add a breakpoint.
3. Use the navigation controls at the top right to [step through code](https://developer.chrome.com/docs/devtools/javascript/reference#stepping) when paused.

#### Useful tips [​](https://reactnative.dev/docs/next/react-native-devtools\#useful-tips-1 "Direct link to Useful tips")

- A "Paused in Debugger" overlay will appear when your app is paused. Tap it to resume.
- Pay attention to the right hand side panels when on a breakpoint, which allow you to inspect the current scope and call stack, and set watch expressions.
- Use a `debugger;` statement to quickly set a breakpoint from your text editor. This will reach the device immediately via Fast Refresh.
- There are multiple kinds of breakpoints! For example, [Conditional Breakpoints and Logpoints](https://developer.chrome.com/docs/devtools/javascript/breakpoints#overview).

### Memory [​](https://reactnative.dev/docs/next/react-native-devtools\#memory "Direct link to Memory")

The Memory panel allows you to take a heap snapshot and view the memory usage of your JavaScript code over time.

[Record heap snapshots \| Chrome DevTools](https://developer.chrome.com/docs/devtools/memory-problems/heap-snapshots)

#### Useful tips [​](https://reactnative.dev/docs/next/react-native-devtools\#useful-tips-2 "Direct link to Useful tips")

- Use `Cmd ⌘` + `F` / `Ctrl` + `F` to filter for specific objects in the heap.
- Taking an [allocation timeline report](https://developer.chrome.com/docs/devtools/memory-problems/allocation-profiler) can be useful to see memory usage over time as a graph, to identify possible memory leaks.

## React DevTools features [​](https://reactnative.dev/docs/next/react-native-devtools\#react-devtools-features "Direct link to React DevTools features")

In the integrated Components and Profiler panels, you'll find all the features of the [React DevTools](https://react.dev/learn/react-developer-tools) browser extension. These work seamlessly in React Native DevTools.

### React Components [​](https://reactnative.dev/docs/next/react-native-devtools\#react-components "Direct link to React Components")

The React Components panel allows you to inspect and update the rendered React component tree.

- Hover or select an element in DevTools to highlight it on device.
- To locate an element in DevTools, click the top-left "Select element" button, then tap any element in the app.

#### Useful tips [​](https://reactnative.dev/docs/next/react-native-devtools\#useful-tips-3 "Direct link to Useful tips")

- Props and state on a component can be viewed and modified at runtime using the right hand panel.
- Components optimized with [React Compiler](https://react.dev/learn/react-compiler) will be annotated with a "Memo ✨" badge.

#### Protip: Highlight re-renders [​](https://reactnative.dev/docs/next/react-native-devtools\#protip-highlight-re-renders "Direct link to Protip: Highlight re-renders")

Re-renders can be a significant contributor to performance issues in React apps. DevTools can highlight component re-renders as they happen.

- To enable, click the View Settings ( `⚙︎`) icon and check "Highlight updates when components render".

### React Profiler [​](https://reactnative.dev/docs/next/react-native-devtools\#react-profiler "Direct link to React Profiler")

The React Profiler panel allows you to record performance profiles to understand the timing of component renders and React commits.

For more info, see the [original 2018 guide](https://legacy.reactjs.org/blog/2018/09/10/introducing-the-react-profiler.html#reading-performance-data) (note that parts of this may be outdated).

## Reconnecting DevTools [​](https://reactnative.dev/docs/next/react-native-devtools\#reconnecting-devtools "Direct link to Reconnecting DevTools")

Occasionally, DevTools might disconnect from the target device. This can happen if:

- The app is closed.
- The app is rebuilt (a new native build is installed).
- The app has crashed on the native side.
- The dev server (Metro) is quit.
- A physical device is disconnected.

On disconnect, a dialog will be shown with the message "Debugging connection was closed".

From here, you can either:

- **Dismiss**: Select the close ( `×`) icon or click outside the dialog to
- [Console](https://reactnative.dev/docs/next/react-native-devtools#console)
- [Sources & breakpoints](https://reactnative.dev/docs/next/react-native-devtools#sources--breakpoints)
- [Memory](https://reactnative.dev/docs/next/react-native-devtools#memory)
- [React DevTools features](https://reactnative.dev/docs/next/react-native-devtools#react-devtools-features)
- [React Components](https://reactnative.dev/docs/next/react-native-devtools#react-components)
- [React Profiler](https://reactnative.dev/docs/next/react-native-devtools#react-profiler)
- [Reconnecting DevTools](https://reactnative.dev/docs/next/react-native-devtools#reconnecting-devtools)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/the-new-architecture/advanced-topics-components

[Skip to main content](https://reactnative.dev/docs/next/the-new-architecture/advanced-topics-components#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/the-new-architecture/advanced-topics-components)** (0.81).

Version: Next

This document contains a set of advanced topics to implement more complex functionalities of Native Components. It is recommended to first read the [Codegen](https://reactnative.dev/docs/the-new-architecture/what-is-codegen) section and the guides on [Native Components](https://reactnative.dev/docs/fabric-native-components-introduction).

This guide will cover the following topics:

- [Direct Manipulation](https://reactnative.dev/docs/the-new-architecture/direct-manipulation-new-architecture)
- [Measuring the Layout](https://reactnative.dev/docs/the-new-architecture/layout-measurements)
- [Invoking native functions on your native component](https://reactnative.dev/docs/next/the-new-architecture/fabric-component-native-commands)

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/legacy/local-library-setup

[Skip to main content](https://reactnative.dev/docs/next/legacy/local-library-setup#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/legacy/local-library-setup)** (0.81).

Version: Next

On this page

A local library is a library containing views or modules that's local to your app and not published to a registry. This is different from the traditional setup for view and modules in the sense that a local library is decoupled from your app's native code.

The local library is created outside of the `android/` and `ios/` folders and makes use of autolinking to integrate with your app. The structure with a local library may look like this:

plaintext

```codeBlockLines_AclH
MyApp
├── node_modules
├── modules <-- folder for your local libraries
│ └── awesome-module <-- your local library
├── android
├── ios
├── src
├── index.js
└── package.json

Since a local library's code exists outside of `android/` and `ios/` folders, it makes it easier to upgrade React Native versions in the future, copy to other projects etc.

To create local library we will use [create-react-native-library](https://callstack.github.io/react-native-builder-bob/create). This tool contains all the necessary templates.

### Getting Started [​](https://reactnative.dev/docs/next/legacy/local-library-setup\#getting-started "Direct link to Getting Started")

Inside your React Native application's root folder, run the following command:

shell

```codeBlockLines_AclH
npx create-react-native-library@latest awesome-module

Where `awesome-module` is the name you would like for the new module. After going through the prompts, you will have a new folder called `modules` in your project's root directory which contains the new module.

### Linking [​](https://reactnative.dev/docs/next/legacy/local-library-setup\#linking "Direct link to Linking")

By default, the generated library is automatically linked to the project using `link:` protocol when using Yarn and `file:` when using npm:

- npm
- Yarn

json

```codeBlockLines_AclH
"dependencies": {
"awesome-module": "file:./modules/awesome-module"
}

```codeBlockLines_AclH
"dependencies": {
"awesome-module": "link:./modules/awesome-module"
}

This creates a symlink to the library under `node_modules` which makes autolinking work.

### Installing dependencies [​](https://reactnative.dev/docs/next/legacy/local-library-setup\#installing-dependencies "Direct link to Installing dependencies")

To link the module you need to install dependencies:

```codeBlockLines_AclH
npm install

```codeBlockLines_AclH
yarn install

### Using module inside your app [​](https://reactnative.dev/docs/next/legacy/local-library-setup\#using-module-inside-your-app "Direct link to Using module inside your app")

To use the module inside your app, you can import it by its name:

js

```codeBlockLines_AclH
import {multiply} from 'awesome-module';

Is this page useful?

- [Getting Started](https://reactnative.dev/docs/next/legacy/local-library-setup#getting-started)
- [Linking](https://reactnative.dev/docs/next/legacy/local-library-setup#linking)
- [Installing dependencies](https://reactnative.dev/docs/next/legacy/local-library-setup#installing-dependencies)
- [Using module inside your app](https://reactnative.dev/docs/next/legacy/local-library-setup#using-module-inside-your-app)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/touchablewithoutfeedback

[Skip to main content](https://reactnative.dev/docs/next/touchablewithoutfeedback#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/touchablewithoutfeedback)** (0.81).

Version: Next

On this page

tip

If you're looking for a more extensive and future-proof way to handle touch-based input, check out the [Pressable](https://reactnative.dev/docs/next/pressable) API.

Do not use unless you have a very good reason. All elements that respond to press should have a visual feedback when touched.

`TouchableWithoutFeedback` supports only one child. If you wish to have several child components, wrap them in a View. Importantly, `TouchableWithoutFeedback` works by cloning its child and applying responder props to it. It is therefore required that any intermediary components pass through those props to the underlying React Native component.

## Usage Pattern [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#usage-pattern "Direct link to Usage Pattern")

tsx

```codeBlockLines_AclH
function MyComponent(props: MyComponentProps) {
return (

}

## Example [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#example "Direct link to Example")

TouchableWithoutFeedback - Snack

# TouchableWithoutFeedback

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React, {useState} from 'react';
import {StyleSheet, TouchableWithoutFeedback, Text, View} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const \[count, setCount\] = useState(0);

setCount(count + 1);
};

return (

};

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
paddingHorizontal: 10,
},
button: {
alignItems: 'center',
backgroundColor: '#DDDDDD',
padding: 10,
},
countContainer: {
alignItems: 'center',
padding: 10,
},
countText: {
color: '#FF00FF',
},
});

export default TouchableWithoutFeedbackExample;

const [count, setCount] = useState(0);

setCount(count + 1);
};

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
paddingHorizontal: 10,
},
button: {
alignItems: 'center',
backgroundColor: '#DDDDDD',
padding: 10,
},
countContainer: {
alignItems: 'center',
padding: 10,
},
countText: {
color: '#FF00FF',
},
});

Snack

Count: 0

Touch Here

Updating…

PreviewMy DeviceAndroidiOSWeb

* * *

# Reference

## Props [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#props "Direct link to Props")

### `accessibilityIgnoresInvertColors` iOS [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#accessibilityignoresinvertcolors-ios "Direct link to accessibilityignoresinvertcolors-ios")

A value indicating this view should or should not be inverted when color inversion is turned on. A value of `true` will tell the view to not be inverted even if color inversion is turned on.

See the [Accessibility guide](https://reactnative.dev/docs/next/accessibility#accessibilityignoresinvertcolors) for more information.

| Type |
| --- |
| Boolean |

### `accessible` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#accessible "Direct link to accessible")

When `true`, indicates that the view is an accessibility element. By default, all the touchable elements are accessible.

| Type |
| --- |
| bool |

### `accessibilityLabel` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#accessibilitylabel "Direct link to accessibilitylabel")

Overrides the text that's read by the screen reader when the user interacts with the element. By default, the label is constructed by traversing all the children and accumulating all the `Text` nodes separated by space.

| Type |
| --- |
| string |

### `accessibilityLanguage` iOS [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#accessibilitylanguage-ios "Direct link to accessibilitylanguage-ios")

A value indicating which language should be used by the screen reader when the user interacts with the element. It should follow the [BCP 47 specification](https://www.rfc-editor.org/info/bcp47).

See the [iOS `accessibilityLanguage` doc](https://developer.apple.com/documentation/objectivec/nsobject/1615192-accessibilitylanguage) for more information.

### `accessibilityHint` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#accessibilityhint "Direct link to accessibilityhint")

An accessibility hint helps users understand what will happen when they perform an action on the accessibility element when that result is not clear from the accessibility label.

### `accessibilityRole` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#accessibilityrole "Direct link to accessibilityrole")

`accessibilityRole` communicates the purpose of a component to the user of an assistive technology.

`accessibilityRole` can be one of the following:

- `'none'` \- Used when the element has no role.
- `'button'` \- Used when the element should be treated as a button.
- `'link'` \- Used when the element should be treated as a link.
- `'search'` \- Used when the text field element should also be treated as a search field.
- `'image'` \- Used when the element should be treated as an image. Can be combined with button or link, for example.
- `'keyboardkey'` \- Used when the element acts as a keyboard key.
- `'text'` \- Used when the element should be treated as static text that cannot change.
- `'adjustable'` \- Used when an element can be "adjusted" (e.g. a slider).
- `'imagebutton'` \- Used when the element should be treated as a button and is also an image.
- `'header'` \- Used when an element acts as a header for a content section (e.g. the title of a navigation bar).
- `'summary'` \- Used when an element can be used to provide a quick summary of current conditions in the app when the app first launches.
- `'alert'` \- Used when an element contains important text to be presented to the user.
- `'checkbox'` \- Used when an element represents a checkbox which can be checked, unchecked, or have mixed checked state.
- `'combobox'` \- Used when an element represents a combo box, which allows the user to select among several choices.
- `'menu'` \- Used when the component is a menu of choices.
- `'menubar'` \- Used when a component is a container of multiple menus.
- `'menuitem'` \- Used to represent an item within a menu.
- `'progressbar'` \- Used to represent a component which indicates progress of a task.
- `'radio'` \- Used to represent a radio button.
- `'radiogroup'` \- Used to represent a group of radio buttons.
- `'scrollbar'` \- Used to represent a scroll bar.
- `'spinbutton'` \- Used to represent a button which opens a list of choices.
- `'switch'` \- Used to represent a switch which can be turned on and off.
- `'tab'` \- Used to represent a tab.
- `'tablist'` \- Used to represent a list of tabs.
- `'timer'` \- Used to represent a timer.
- `'toolbar'` \- Used to represent a tool bar (a container of action buttons or components).

### `accessibilityState` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#accessibilitystate "Direct link to accessibilitystate")

Describes the current state of a component to the user of an assistive technology.

See the [Accessibility guide](https://reactnative.dev/docs/next/accessibility#accessibilitystate-ios-android) for more information.

| Type |
| --- |
| object: `{disabled: bool, selected: bool, checked: bool or 'mixed', busy: bool, expanded: bool}` |

### `accessibilityActions` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#accessibilityactions "Direct link to accessibilityactions")

Accessibility actions allow an assistive technology to programmatically invoke the actions of a component. The `accessibilityActions` property should contain a list of action objects. Each action object should contain the field name and label.

See the [Accessibility guide](https://reactnative.dev/docs/next/accessibility#accessibility-actions) for more information.

| Type |
| --- |
| array |

### `aria-busy` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#aria-busy "Direct link to aria-busy")

Indicates an element is being modified and that assistive technologies may want to wait until the changes are complete before informing the user about the update.

| Type | Default |
| --- | --- |
| boolean | false |

### `aria-checked` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#aria-checked "Direct link to aria-checked")

Indicates the state of a checkable element. This field can either take a boolean or the "mixed" string to represent mixed checkboxes.

| Type | Default |
| --- | --- |
| boolean, 'mixed' | false |

### `aria-disabled` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#aria-disabled "Direct link to aria-disabled")

Indicates that the element is perceivable but disabled, so it is not editable or otherwise operable.

### `aria-expanded` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#aria-expanded "Direct link to aria-expanded")

Indicates whether an expandable element is currently expanded or collapsed.

### `aria-hidden` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#aria-hidden "Direct link to aria-hidden")

Indicates whether the element is hidden from assistive technologies.

For example, in a window that contains sibling views `A` and `B`, setting `aria-hidden` to `true` on view `B` causes VoiceOver to ignore the `B` element and its children.

### `aria-label` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#aria-label "Direct link to aria-label")

Defines a string value that labels an interactive element.

### `aria-live` Android [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#aria-live-android "Direct link to aria-live-android")

Indicates that an element will be updated, and describes the types of updates the user agents, assistive technologies, and user can expect from the live region.

- **off** Accessibility services should not announce changes to this view.
- **polite** Accessibility services should announce changes to this view.
- **assertive** Accessibility services should interrupt ongoing speech to immediately announce changes to this view.

| Type | Default |
| --- | --- |
| enum( `'assertive'`, `'off'`, `'polite'`) | `'off'` |

### `aria-modal` iOS [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#aria-modal-ios "Direct link to aria-modal-ios")

Boolean value indicating whether VoiceOver should ignore the elements within views that are siblings of the receiver. Has precedence over the [`accessibilityViewIsModal`](https://reactnative.dev/docs/next/touchablewithoutfeedback#accessibilityviewismodal-ios) prop.

### `aria-selected` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#aria-selected "Direct link to aria-selected")

Indicates whether a selectable element is currently selected or not.

| Type |
| --- |
| boolean |

### `onAccessibilityAction` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#onaccessibilityaction "Direct link to onaccessibilityaction")

Invoked when the user performs the accessibility actions. The only argument to this function is an event containing the name of the action to perform.

| Type |
| --- |
| function |

### `accessibilityValue` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#accessibilityvalue "Direct link to accessibilityvalue")

Represents the current value of a component. It can be a textual description of a component's value, or for range-based components, such as sliders and progress bars, it contains range information (minimum, current, and maximum).

See the [Accessibility guide](https://reactnative.dev/docs/next/accessibility#accessibilityvalue-ios-android) for more information.

| Type |
| --- |
| object: `{min: number, max: number, now: number, text: string}` |

### `aria-valuemax` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#aria-valuemax "Direct link to aria-valuemax")

Represents the maximum value for range-based components, such as sliders and progress bars. Has precedence over the `max` value in the `accessibilityValue` prop.

| Type |
| --- |
| number |

### `aria-valuemin` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#aria-valuemin "Direct link to aria-valuemin")

Represents the minimum value for range-based components, such as sliders and progress bars. Has precedence over the `min` value in the `accessibilityValue` prop.

### `aria-valuenow` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#aria-valuenow "Direct link to aria-valuenow")

Represents the current value for range-based components, such as sliders and progress bars. Has precedence over the `now` value in the `accessibilityValue` prop.

### `aria-valuetext` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#aria-valuetext "Direct link to aria-valuetext")

Represents the textual description of the component. Has precedence over the `text` value in the `accessibilityValue` prop.

### `delayLongPress` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#delaylongpress "Direct link to delaylongpress")

Duration (in milliseconds) from `onPressIn` before `onLongPress` is called.

### `delayPressIn` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#delaypressin "Direct link to delaypressin")

Duration (in milliseconds), from the start of the touch, before `onPressIn` is called.

### `delayPressOut` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#delaypressout "Direct link to delaypressout")

Duration (in milliseconds), from the release of the touch, before `onPressOut` is called.

### `disabled` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#disabled "Direct link to disabled")

If true, disable all interactions for this component.

### `hitSlop` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#hitslop "Direct link to hitslop")

This defines how far your touch can start away from the button. This is added to `pressRetentionOffset` when moving off of the button.

note

The touch area never extends past the parent view bounds and the Z-index of sibling views always takes precedence if a touch hits two overlapping views.

| Type |
| --- |
| [Rect](https://reactnative.dev/docs/next/rect) or number |

### `id` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#id "Direct link to id")

Used to locate this view from native code. Has precedence over `nativeID` prop.

### `onBlur` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#onblur "Direct link to onblur")

Invoked when the item loses focus.

| Type |
| --- |

### `onFocus` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#onfocus "Direct link to onfocus")

Invoked when the item receives focus.

### `onLayout` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#onlayout "Direct link to onlayout")

Invoked on mount and on layout changes.

### `onLongPress` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#onlongpress "Direct link to onlongpress")

Called if the time after `onPressIn` lasts longer than 370 milliseconds. This time period can be customized with [`delayLongPress`](https://reactnative.dev/docs/next/touchablewithoutfeedback#delaylongpress).

### `onPress` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#onpress "Direct link to onpress")

Called when the touch is released, but not if cancelled (e.g. by a scroll that steals the responder lock). The first function argument is an event in form of [PressEvent](https://reactnative.dev/docs/next/pressevent).

### `onPressIn` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#onpressin "Direct link to onpressin")

Called as soon as the touchable element is pressed and invoked even before onPress. This can be useful when making network requests. The first function argument is an event in form of [PressEvent](https://reactnative.dev/docs/next/pressevent).

### `onPressOut` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#onpressout "Direct link to onpressout")

Called as soon as the touch is released even before onPress. The first function argument is an event in form of [PressEvent](https://reactnative.dev/docs/next/pressevent).

### `pressRetentionOffset` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#pressretentionoffset "Direct link to pressretentionoffset")

When the scroll view is disabled, this defines how far your touch may move off of the button, before deactivating the button. Once deactivated, try moving it back and you'll see that the button is once again reactivated! Move it back and forth several times while the scroll view is disabled. Ensure you pass in a constant to reduce memory allocations.

### `nativeID` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#nativeid "Direct link to nativeid")

### `testID` [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#testid "Direct link to testid")

Used to locate this view in end-to-end tests.

### `touchSoundDisabled` Android [​](https://reactnative.dev/docs/next/touchablewithoutfeedback\#touchsounddisabled-android "Direct link to touchsounddisabled-android")

If true, doesn't play a system sound on touch.

Is this page useful?

- [Usage Pattern](https://reactnative.dev/docs/next/touchablewithoutfeedback#usage-pattern)
- [Example](https://reactnative.dev/docs/next/touchablewithoutfeedback#example)
- [Props](https://reactnative.dev/docs/next/touchablewithoutfeedback#props)
- [`accessibilityIgnoresInvertColors` \\
iOS](https://reactnative.dev/docs/next/touchablewithoutfeedback#accessibilityignoresinvertcolors-ios)
- [`accessible`](https://reactnative.dev/docs/next/touchablewithoutfeedback#accessible)
- [`accessibilityLabel`](https://reactnative.dev/docs/next/touchablewithoutfeedback#accessibilitylabel)
- [`accessibilityLanguage` \\
iOS](https://reactnative.dev/docs/next/touchablewithoutfeedback#accessibilitylanguage-ios)
- [`accessibilityHint`](https://reactnative.dev/docs/next/touchablewithoutfeedback#accessibilityhint)
- [`accessibilityRole`](https://reactnative.dev/docs/next/touchablewithoutfeedback#accessibilityrole)
- [`accessibilityState`](https://reactnative.dev/docs/next/touchablewithoutfeedback#accessibilitystate)
- [`accessibilityActions`](https://reactnative.dev/docs/next/touchablewithoutfeedback#accessibilityactions)
- [`aria-busy`](https://reactnative.dev/docs/next/touchablewithoutfeedback#aria-busy)
- [`aria-checked`](https://reactnative.dev/docs/next/touchablewithoutfeedback#aria-checked)
- [`aria-disabled`](https://reactnative.dev/docs/next/touchablewithoutfeedback#aria-disabled)
- [`aria-expanded`](https://reactnative.dev/docs/next/touchablewithoutfeedback#aria-expanded)
- [`aria-hidden`](https://reactnative.dev/docs/next/touchablewithoutfeedback#aria-hidden)
- [`aria-label`](https://reactnative.dev/docs/next/touchablewithoutfeedback#aria-label)
- [`aria-live` \\
Android](https://reactnative.dev/docs/next/touchablewithoutfeedback#aria-live-android)
- [`aria-modal` \\
iOS](https://reactnative.dev/docs/next/touchablewithoutfeedback#aria-modal-ios)
- [`aria-selected`](https://reactnative.dev/docs/next/touchablewithoutfeedback#aria-selected)
- [`onAccessibilityAction`](https://reactnative.dev/docs/next/touchablewithoutfeedback#onaccessibilityaction)
- [`accessibilityValue`](https://reactnative.dev/docs/next/touchablewithoutfeedback#accessibilityvalue)
- [`aria-valuemax`](https://reactnative.dev/docs/next/touchablewithoutfeedback#aria-valuemax)
- [`aria-valuemin`](https://reactnative.dev/docs/next/touchablewithoutfeedback#aria-valuemin)
- [`aria-valuenow`](https://reactnative.dev/docs/next/touchablewithoutfeedback#aria-valuenow)
- [`aria-valuetext`](https://reactnative.dev/docs/next/touchablewithoutfeedback#aria-valuetext)
- [`delayLongPress`](https://reactnative.dev/docs/next/touchablewithoutfeedback#delaylongpress)
- [`delayPressIn`](https://reactnative.dev/docs/next/touchablewithoutfeedback#delaypressin)
- [`delayPressOut`](https://reactnative.dev/docs/next/touchablewithoutfeedback#delaypressout)
- [`disabled`](https://reactnative.dev/docs/next/touchablewithoutfeedback#disabled)
- [`hitSlop`](https://reactnative.dev/docs/next/touchablewithoutfeedback#hitslop)
- [`id`](https://reactnative.dev/docs/next/touchablewithoutfeedback#id)
- [`onBlur`](https://reactnative.dev/docs/next/touchablewithoutfeedback#onblur)
- [`onFocus`](https://reactnative.dev/docs/next/touchablewithoutfeedback#onfocus)
- [`onLayout`](https://reactnative.dev/docs/next/touchablewithoutfeedback#onlayout)
- [`onLongPress`](https://reactnative.dev/docs/next/touchablewithoutfeedback#onlongpress)
- [`onPress`](https://reactnative.dev/docs/next/touchablewithoutfeedback#onpress)
- [`onPressIn`](https://reactnative.dev/docs/next/touchablewithoutfeedback#onpressin)
- [`onPressOut`](https://reactnative.dev/docs/next/touchablewithoutfeedback#onpressout)
- [`pressRetentionOffset`](https://reactnative.dev/docs/next/touchablewithoutfeedback#pressretentionoffset)
- [`nativeID`](https://reactnative.dev/docs/next/touchablewithoutfeedback#nativeid)
- [`testID`](https://reactnative.dev/docs/next/touchablewithoutfeedback#testid)
- [`touchSoundDisabled` \\
Android](https://reactnative.dev/docs/next/touchablewithoutfeedback#touchsounddisabled-android)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/legacy/native-modules-intro

[Skip to main content](https://reactnative.dev/docs/next/legacy/native-modules-intro#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/legacy/native-modules-intro)** (0.81).

Version: Next

On this page

info

Native Module and Native Components are our stable technologies used by the legacy architecture.
They will be deprecated in the future when the New Architecture will be stable. The New Architecture uses [Turbo Native Module](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/turbo-modules.md) and [Fabric Native Components](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/fabric-native-components.md) to achieve similar results.

Sometimes a React Native app needs to access a native platform API that is not available by default in JavaScript, for example the native APIs to access Apple or Google Pay. Maybe you want to reuse some existing Objective-C, Swift, Java or C++ libraries without having to reimplement it in JavaScript, or write some high performance, multi-threaded code for things like image processing.

The NativeModule system exposes instances of Java/Objective-C/C++ (native) classes to JavaScript (JS) as JS objects, thereby allowing you to execute arbitrary native code from within JS. While we don't expect this feature to be part of the usual development process, it is essential that it exists. If React Native doesn't export a native API that your JS app needs you should be able to export it yourself!

## Native Module Setup [​](https://reactnative.dev/docs/next/legacy/native-modules-intro\#native-module-setup "Direct link to Native Module Setup")

There are different ways to write a native module for your React Native application:

1. Creating a local library that can be imported in your React Native application. Read [Creating local libraries](https://reactnative.dev/docs/next/legacy/local-library-setup) guide to learn more.
2. Directly within your React Native application's iOS/Android projects
3. As an NPM package that can be installed as a dependency by your/other React Native applications.

This guide will first walk you through implementing a native module directly within a React Native application. However the native module you build in the following guide can be distributed as an NPM package. Check out the [Setting Up a Native Module as an NPM Package](https://reactnative.dev/docs/next/legacy/native-modules-setup) guide if you are interested in doing so.

## Getting Started [​](https://reactnative.dev/docs/next/legacy/native-modules-intro\#getting-started "Direct link to Getting Started")

In the following sections we will walk you through guides on how to build a native module directly within a React Native application. As a prerequisite, you will need a React Native application to work within. You can follow the steps [here](https://reactnative.dev/docs/next/getting-started) to setup a React Native application if you do not already have one.

Imagine that you want to access the iOS/Android native calendar APIs from JavaScript within a React Native application in order to create calendar events. React Native does not expose a JavaScript API to communicate with the native calendar libraries. However, through native modules, you can write native code that communicates with native calendar APIs. Then you can invoke that native code through JavaScript in your React Native application.

In the following sections you will create such a Calendar native module for both [Android](https://reactnative.dev/docs/next/legacy/native-modules-android) and [iOS](https://reactnative.dev/docs/next/legacy/native-modules-ios).

Is this page useful?

- [Native Module Setup](https://reactnative.dev/docs/next/legacy/native-modules-intro#native-module-setup)
- [Getting Started](https://reactnative.dev/docs/next/legacy/native-modules-intro#getting-started)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/profiling

[Skip to main content](https://reactnative.dev/docs/next/profiling#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/profiling)** (0.81).

Version: Next

On this page

Profiling is the process of analyzing an app's performance, resource usage, and behavior to identify potential bottlenecks or inefficiencies. It's worth making use of profiling tools to ensure your app works smoothly across different devices and conditions.

For iOS, Instruments is an invaluable tool, and on Android you should learn to use the [Android Studio Profiler](https://reactnative.dev/docs/next/profiling#profiling-android-ui-performance-with-system-tracing).

But first, [**make sure that Development Mode is OFF!**](https://reactnative.dev/docs/next/performance#running-in-development-mode-devtrue).

## Profiling Android UI Performance with System Tracing [​](https://reactnative.dev/docs/next/profiling\#profiling-android-ui-performance-with-system-tracing "Direct link to Profiling Android UI Performance with System Tracing")

Android supports 10k+ different phones and is generalized to support software rendering: the framework architecture and need to generalize across many hardware targets unfortunately means you get less for free relative to iOS. But sometimes, there are things you can improve -- and many times it's not native code's fault at all!

The first step for debugging this jank is to answer the fundamental question of where your time is being spent during each 16ms frame. For that, we'll be using the [built-in System Tracing profiler in the Android Studio](https://developer.android.com/studio/profile).

### 1\. Collecting a trace [​](https://reactnative.dev/docs/next/profiling\#1-collecting-a-trace "Direct link to 1. Collecting a trace")

First, connect a device that exhibits the stuttering you want to investigate to your computer via USB. Open your project's `android` folder in Android Studio, select your device in the top right pane, and [run your project as profileable](https://developer.android.com/studio/profile#build-and-run).

When your app is built as profileable and is running on the device, get your app to the point right before the navigation/animation you want to profile and start the ["Capture System Activities" task](https://developer.android.com/studio/profile#start-profiling) in the Android Studio Profiler pane.

Once the trace starts collecting, perform the animation or interaction you care about. Then press "Stop recording". You can now [inspect the trace directly in the Android Studio](https://developer.android.com/studio/profile/jank-detection). Alternatively, you can select it in the "Past Recordings" pane, press "Export recording", and open it in a tool like [Perfetto](https://perfetto.dev/).

### 2\. Reading the trace [​](https://reactnative.dev/docs/next/profiling\#2-reading-the-trace "Direct link to 2. Reading the trace")

After opening the trace in Android Studio or Perfetto, you should see something like this:

Hint

Use the WASD keys to strafe and zoom.

The exact UI might be different but the instructions below will apply regardless of the tool you're using.

Enable VSync highlighting

Check this checkbox at the top right of the screen to highlight the 16ms frame boundaries:

You should see zebra stripes as in the screenshot above. If you don't, try profiling on a different device: Samsung has been known to have issues displaying vsyncs while the Nexus series is generally pretty reliable.

### 3\. Find your process [​](https://reactnative.dev/docs/next/profiling\#3-find-your-process "Direct link to 3. Find your process")

Scroll until you see (part of) the name of your package. In this case, I was profiling `com.facebook.adsmanager`, which shows up as `book.adsmanager` because of silly thread name limits in the kernel.

On the left side, you'll see a set of threads which correspond to the timeline rows on the right. There are a few threads we care about for our purposes: the UI thread (which has your package name or the name UI Thread), `mqt_js`, and `mqt_native_modules`. If you're running on Android 5+, we also care about the Render Thread.

- **UI Thread.** This is where standard android measure/layout/draw happens. The thread name on the right will be your package name (in my case book.adsmanager) or UI Thread. The events that you see on this thread should look something like this and have to do with `Choreographer`, `traversals`, and `DispatchUI`:

## Identifying a culprit [​](https://reactnative.dev/docs/next/profiling\#identifying-a-culprit "Direct link to Identifying a culprit")

A smooth animation should look something like the following:

Each change in color is a frame -- remember that in order to display a frame, all our UI work needs to be done by the end of that 16ms period. Notice that no thread is working close to the frame boundary. An application rendering like this is rendering at 60 FPS.

If you noticed chop, however, you might see something like this:

Notice that the JS thread is executing almost all the time, and across frame boundaries! This app is not rendering at 60 FPS. In this case, **the problem lies in JS**.

You might also see something like this:

In this case, the UI and render threads are the ones that have work crossing frame boundaries. The UI that we're trying to render on each frame is requiring too much work to be done. In this case, **the problem lies in the native views being rendered**.

At this point, you'll have some very helpful information to inform your next steps.

## Resolving JavaScript issues [​](https://reactnative.dev/docs/next/profiling\#resolving-javascript-issues "Direct link to Resolving JavaScript issues")

If you identified a JS problem, look for clues in the specific JS that you're executing. In the scenario above, we see `RCTEventEmitter` being called multiple times per frame. Here's a zoom-in of the JS thread from the trace above:

This doesn't seem right. Why is it being called so often? Are they actually different events? The answers to these questions will probably depend on your product code. And many times, you'll want to look into [shouldComponentUpdate](https://react.dev/reference/react/Component#shouldcomponentupdate).

## Resolving native UI Issues [​](https://reactnative.dev/docs/next/profiling\#resolving-native-ui-issues "Direct link to Resolving native UI Issues")

If you identified a native UI problem, there are usually two scenarios:

1. the UI you're trying to draw each frame involves too much work on the GPU, or
2. You're constructing new UI during the animation/interaction (e.g. loading in new content during a scroll).

### Too much GPU work [​](https://reactnative.dev/docs/next/profiling\#too-much-gpu-work "Direct link to Too much GPU work")

In the first scenario, you'll see a trace that has the UI thread and/or Render Thread looking like this:

Notice the long amount of time spent in `DrawFrame` that crosses frame boundaries. This is time spent waiting for the GPU to drain its command buffer from the previous frame.

To mitigate this, you should:

- investigate using `renderToHardwareTextureAndroid` for complex, static content that is being animated/transformed (e.g. the `Navigator` slide/alpha animations)
- make sure that you are **not** using `needsOffscreenAlphaCompositing`, which is disabled by default, as it greatly increases the per-frame load on the GPU in most cases.

### Creating new views on the UI thread [​](https://reactnative.dev/docs/next/profiling\#creating-new-views-on-the-ui-thread "Direct link to Creating new views on the UI thread")

In the second scenario, you'll see something more like this:

Notice that first the JS thread thinks for a bit, then you see some work done on the native modules thread, followed by an expensive traversal on the UI thread.

There isn't a quick way to mitigate this unless you're able to postpone creating new UI until after the interaction, or you are able to simplify the UI you're creating. The react native team is working on an infrastructure level solution for this that will allow new UI to be created and configured off the main thread, allowing the interaction to continue smoothly.

### Finding native CPU hotspots [​](https://reactnative.dev/docs/next/profiling\#finding-native-cpu-hotspots "Direct link to Finding native CPU hotspots")

If the problem seems to be on the native side, you can use the [CPU hotspot profiler](https://developer.android.com/studio/profile/record-java-kotlin-methods) to get more details on what's happening. Open the Android Studio Profiler panel and select "Find CPU Hotspots (Java/Kotlin Method Recording)".

Choose the Java/Kotlin recording

Make sure you select "Find CPU Hotspots **(Java/Kotlin Recording)**" rather than "Find CPU Hotspots (Callstack Sample)". They have similar icons but do different things.

Perform the interactions and press "Stop recording". Recording is resource-intensive, so keep the interaction short. You can then either inspect the resulting trace in the Android Studio or export it and open it in an online tool like [Firefox Profiler](https://profiler.firefox.com/).

Unlike System Trace, CPU hotspot profiling is slow so it won't give you accurate measurements. However, it should give you an idea of what native methods are being called, and where the time is being spent proportionally during each frame.

Is this page useful?

- [Profiling Android UI Performance with System Tracing](https://reactnative.dev/docs/next/profiling#profiling-android-ui-performance-with-system-tracing)
- [1\. Collecting a trace](https://reactnative.dev/docs/next/profiling#1-collecting-a-trace)
- [2\. Reading the trace](https://reactnative.dev/docs/next/profiling#2-reading-the-trace)
- [3\. Find your process](https://reactnative.dev/docs/next/profiling#3-find-your-process)
- [Identifying a culprit](https://reactnative.dev/docs/next/profiling#identifying-a-culprit)
- [Resolving JavaScript issues](https://reactnative.dev/docs/next/profiling#resolving-javascript-issues)
- [Resolving native UI Issues](https://reactnative.dev/docs/next/profiling#resolving-native-ui-issues)
- [Too much GPU work](https://reactnative.dev/docs/next/profiling#too-much-gpu-work)
- [Creating new views on the UI thread](https://reactnative.dev/docs/next/profiling#creating-new-views-on-the-ui-thread)
- [Finding native CPU hotspots](https://reactnative.dev/docs/next/profiling#finding-native-cpu-hotspots)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/the-new-architecture/what-is-codegen

[Skip to main content](https://reactnative.dev/docs/next/the-new-architecture/what-is-codegen#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/the-new-architecture/what-is-codegen)** (0.81).

Version: Next

On this page

**Codegen** is a tool to avoid writing a lot of repetitive code. Using Codegen **is not mandatory**: you can write all the generated code manually. However, Codegen generates scaffolding code that could save you a lot of time.

React Native invokes Codegen automatically every time an iOS or Android app is built. Occasionally, you would like to manually run the Codegen scripts to know which types and files are actually generated: this is a common scenario when developing [Turbo Native Modules](https://reactnative.dev/docs/turbo-native-modules-introduction) and Fabric Native Components.

## How Codegen Works [​](https://reactnative.dev/docs/next/the-new-architecture/what-is-codegen\#how-codegen-works "Direct link to How Codegen Works")

**Codegen** is a process that is tightly coupled with a React Native app. The Codegen scripts live inside the `react-native` NPM package and the apps call those scripts at build time.

Codegen crawls the folders in your project, starting from a directory you specify in your `package.json`, looking for some specific JS files that contain the specification (or specs) for your custom modules and components. Spec files are JS files written in a typed dialect: React Native currently supports Flow and TypeScript.

Every time Codegen finds a spec file, it generates boilerplate code associated with it. Codegen generates some C++ glue-code and then it generates platform-specific code, using Java for Android and Objective-C++ for iOS.

Is this page useful?

- [How Codegen Works](https://reactnative.dev/docs/next/the-new-architecture/what-is-codegen#how-codegen-works)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/running-on-device

[Skip to main content](https://reactnative.dev/docs/next/running-on-device#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/running-on-device)** (0.81).

Version: Next

It's always a good idea to test your app on an actual device before releasing it to your users. This document will guide you through the necessary steps to run your React Native app on a device and to get it ready for production.

tip

If you used `create-expo-app` to set up your project, you can run your app on a device in Expo Go by scanning the QR code that is displayed when you run `npm start`. Refer to the Expo guide for [running your project on your device](https://docs.expo.dev/get-started/expo-go/) for more information.

- Android
- iOS

## Running your app on Android devices [​](https://reactnative.dev/docs/next/running-on-device\#running-your-app-on-android-devices "Direct link to Running your app on Android devices")

#### Development OS [​](https://reactnative.dev/docs/next/running-on-device\#development-os "Direct link to Development OS")

- macOS
- Windows
- Linux

### 1\. Enable Debugging over USB [​](https://reactnative.dev/docs/next/running-on-device\#1-enable-debugging-over-usb "Direct link to 1. Enable Debugging over USB")

Most Android devices can only install and run apps downloaded from Google Play, by default. You will need to enable USB Debugging on your device in order to install your app during development.

To enable USB debugging on your device, you will first need to enable the "Developer options" menu by going to **Settings** → **About phone** → **Software information** and then tapping the `Build number` row at the bottom seven times. You can then go

Let's now set up an Android device to run our React Native projects. Go ahead and plug in your device via USB to your development machine.

Now check that your device is properly connecting to ADB, the Android Debug Bridge, by running `adb devices`.

shell

```codeBlockLines_AclH
$ adb devices
List of devices attached
emulator-5554 offline # Google emulator
14ed2fcc device # Physical device

Seeing `device` in the right column means the device is connected. You must have **only one device connected** at a time.

note

If you see `unauthorized` in the list you will need to run `adb reverse tcp:8081 tcp:8081` and press allow USB debugging on the device.

### 3\. Run your app [​](https://reactnative.dev/docs/next/running-on-device\#3-run-your-app "Direct link to 3. Run your app")

From the root of your project; type the following in your command prompt to install and launch your app on the device:

- npm
- Yarn

```codeBlockLines_AclH
npm run android

```codeBlockLines_AclH
yarn android

If you get a "bridge configuration isn't available" error, see [Using adb reverse](https://reactnative.dev/docs/next/running-on-device#method-1-using-adb-reverse-recommended).

You can also use the `React Native CLI` to generate and run a `release` build (e.g. from the root of your project: `yarn android --mode release`).

## Connecting to the development server

You can also iterate quickly on a device by connecting to the development server running on your development machine. There are several ways of accomplishing this, depending on whether you have access to a USB cable or a Wi-Fi network.

### Method 1: Using adb reverse (recommended) [​](https://reactnative.dev/docs/next/running-on-device\#method-1-using-adb-reverse-recommended "Direct link to Method 1: Using adb reverse (recommended)")

You can use this method if your device is running Android 5.0 (Lollipop) or newer, it has USB debugging enabled, and it is connected via USB to your development machine.

Run the following in a command prompt:

```codeBlockLines_AclH

To find the device name, run the following adb command:

```codeBlockLines_AclH
$ adb devices

You can now enable Fast Refresh from the [Dev Menu](https://reactnative.dev/docs/next/debugging#opening-the-dev-menu). Your app will reload whenever your JavaScript code has changed.

### Method 2: Connect via Wi-Fi [​](https://reactnative.dev/docs/next/running-on-device\#method-2-connect-via-wi-fi "Direct link to Method 2: Connect via Wi-Fi")

You can also connect to the development server over Wi-Fi. You'll first need to install the app on your device using a USB cable, but once that has been done you can debug wirelessly by following these instructions. You'll need your development machine's current IP address before proceeding.

You can find the IP address in **System Settings (or System Preferences)** → **Network**.

1. Make sure your laptop and your phone are on the **same** Wi-Fi network.
2. Open your React Native app on your device.
3. You'll see a [red screen with an error](https://reactnative.dev/docs/next/debugging#logbox). This is OK. The following steps will fix that.
4. Open the in-app [Dev Menu](https://reactnative.dev/docs/next/debugging#opening-the-dev-menu).
5. Go to **Dev Settings** → **Debug server host & port for device**.
6. Type in your machine's IP address and the port of the local dev server (e.g. `10.0.1.1:8081`).
7. Go . Your app will reload whenever your JavaScript code has changed.

## Building your app for production [​](https://reactnative.dev/docs/next/running-on-device\#building-your-app-for-production "Direct link to Building your app for production")

You have built a great app using React Native, and you are now itching to release it in the Play Store. The process is the same as any other native Android app, with some additional considerations to take into account. Follow the guide for [generating a signed APK](https://reactnative.dev/docs/next/signed-apk-android) to learn more.

### 1\. Enable Debugging over USB [​](https://reactnative.dev/docs/next/running-on-device\#1-enable-debugging-over-usb-1 "Direct link to 1. Enable Debugging over USB")

### 3\. Run your app [​](https://reactnative.dev/docs/next/running-on-device\#3-run-your-app-1 "Direct link to 3. Run your app")

From the root of your project, run the following in your command prompt to install and launch your app on the device:

### Method 1: Using adb reverse (recommended) [​](https://reactnative.dev/docs/next/running-on-device\#method-1-using-adb-reverse-recommended-1 "Direct link to Method 1: Using adb reverse (recommended)")

### Method 2: Connect via Wi-Fi [​](https://reactnative.dev/docs/next/running-on-device\#method-2-connect-via-wi-fi-1 "Direct link to Method 2: Connect via Wi-Fi")

Open the command prompt and type `ipconfig` to find your machine's IP address ( [more info](https://windows.microsoft.com/en-us/windows/using-command-line-tools-networking-information)).

## Building your app for production [​](https://reactnative.dev/docs/next/running-on-device\#building-your-app-for-production-1 "Direct link to Building your app for production")

### 1\. Enable Debugging over USB [​](https://reactnative.dev/docs/next/running-on-device\#1-enable-debugging-over-usb-2 "Direct link to 1. Enable Debugging over USB")

Next, check the manufacturer code by using `lsusb` (on mac, you must first [install lsusb](https://github.com/jlhonora/lsusb)). `lsusb` should output something like this:

bash

```codeBlockLines_AclH
$ lsusb
Bus 002 Device 002: ID 8087:0024 Intel Corp. Integrated Rate Matching Hub
Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 001 Device 003: ID 22b8:2e76 Motorola PCS
Bus 001 Device 002: ID 8087:0024 Intel Corp. Integrated Rate Matching Hub
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 004 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
Bus 003 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub

These lines represent the USB devices currently connected to your machine.

You want the line that represents your phone. If you're in doubt, try unplugging your phone and running the command again:

```codeBlockLines_AclH
$ lsusb
Bus 002 Device 002: ID 8087:0024 Intel Corp. Integrated Rate Matching Hub
Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 001 Device 002: ID 8087:0024 Intel Corp. Integrated Rate Matching Hub
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 004 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
Bus 003 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub

You'll see that after removing the phone, the line which has the phone model ("Motorola PCS" in this case) disappeared from the list. This is the line that we care about.

`Bus 001 Device 003: ID 22b8:2e76 Motorola PCS`

From the above line, you want to grab the first four digits from the device ID:

`22b8:2e76`

In this case, it's `22b8`. That's the identifier for Motorola.

You'll need to input this into your udev rules in order to get up and running:

```codeBlockLines_AclH
echo 'SUBSYSTEM=="usb", ATTR{idVendor}=="22b8", MODE="0666", GROUP="plugdev"' | sudo tee /etc/udev/rules.d/51-android-usb.rules

Make sure that you replace `22b8` with the identifier you get in the above command.

### 3\. Run your app [​](https://reactnative.dev/docs/next/running-on-device\#3-run-your-app-2 "Direct link to 3. Run your app")

From the root of your project, type the following in your command prompt to install and launch your app on the device:

### Method 1: Using adb reverse (recommended) [​](https://reactnative.dev/docs/next/running-on-device\#method-1-using-adb-reverse-recommended-2 "Direct link to Method 1: Using adb reverse (recommended)")

### Method 2: Connect via Wi-Fi [​](https://reactnative.dev/docs/next/running-on-device\#method-2-connect-via-wi-fi-2 "Direct link to Method 2: Connect via Wi-Fi")

Open a terminal and type `/sbin/ifconfig` to find your machine's IP address.

## Building your app for production [​](https://reactnative.dev/docs/next/running-on-device\#building-your-app-for-production-2 "Direct link to Building your app for production")

## Running your app on iOS devices [​](https://reactnative.dev/docs/next/running-on-device\#running-your-app-on-ios-devices "Direct link to Running your app on iOS devices")

#### Development OS [​](https://reactnative.dev/docs/next/running-on-device\#development-os-1 "Direct link to Development OS")

### 1\. Plug in your device via USB [​](https://reactnative.dev/docs/next/running-on-device\#1-plug-in-your-device-via-usb "Direct link to 1. Plug in your device via USB")

Connect your iOS device to your Mac using a USB to Lightning or USB-C cable. Navigate to the `ios` folder in your project, then open the `.xcodeproj` file, or if you are using CocoaPods open `.xcworkspace`, within it using Xcode.

If this is your first time running an app on your iOS device, you may need to register your device for development. Open the **Product** menu from Xcode's menubar, then go to **Destination**. Look for and select your device from the list. Xcode will then register your device for development.

### 2\. Configure code signing [​](https://reactnative.dev/docs/next/running-on-device\#2-configure-code-signing "Direct link to 2. Configure code signing")

Register for an [Apple developer account](https://developer.apple.com/) if you don't have one yet.

Select your project in the Xcode Project Navigator, then select your main target (it should share the same name as your project). Look for the "General" tab. Go to "Signing" and make sure your Apple developer account or team is selected under the Team dropdown. Do the same for the tests target (it ends with Tests, and is below your main target).

**Repeat** this step for the **Tests** target in your project.

### 3\. Build and Run your app [​](https://reactnative.dev/docs/next/running-on-device\#3-build-and-run-your-app "Direct link to 3. Build and Run your app")

If everything is set up correctly, your device will be listed as the build target in the Xcode toolbar, and it will also appear in the Devices pane ( `Shift ⇧` \+ `Cmd ⌘` \+ `2`). You can now press the **Build and run** button ( `Cmd ⌘` \+ `R`) or select **Run** from the **Product** menu. Your app will launch on your device shortly.

If you run into any issues, please take a look at Apple's [Launching Your App on a Device](https://developer.apple.com/library/content/documentation/IDEs/Conceptual/AppDistributionGuide/LaunchingYourApponDevices/LaunchingYourApponDevices.html#//apple_ref/doc/uid/TP40012582-CH27-SW4) docs.

You can also iterate quickly on a device using the development server. You only have to be on the same Wi-Fi network as your computer. Shake your device to open the [Dev Menu](https://reactnative.dev/docs/next/debugging#opening-the-dev-menu), then enable Fast Refresh. Your app will reload whenever your JavaScript code has changed.

### Troubleshooting [​](https://reactnative.dev/docs/next/running-on-device\#troubleshooting "Direct link to Troubleshooting")

If you have any issues, ensure that your Mac and device are on the same network and can reach each other. Many open wireless networks with captive portals are configured to prevent devices from reaching other devices on the network. You may use your device's Personal Hotspot feature in this case. You may also share your internet (Wi-Fi/Ethernet) connection from your Mac to your device via USB and connect to the bundler through this tunnel for very high transfer speeds.

When trying to connect to the development server you might get a [red screen with an error](https://reactnative.dev/docs/next/debugging#logbox) saying:

Connection to `http://localhost:8081/debugger-proxy?role=client` timed out. Are you running node proxy? If you are running on the device, check if you have the right IP address in `RCTWebSocketExecutor.m`.

To solve this issue check the following points.

#### 1\. Wi-Fi network. [​](https://reactnative.dev/docs/next/running-on-device\#1-wi-fi-network "Direct link to 1. Wi-Fi network.")

Make sure your laptop and your phone are on the **same** Wi-Fi network.

#### 2\. IP address [​](https://reactnative.dev/docs/next/running-on-device\#2-ip-address "Direct link to 2. IP address")

Make sure that the build script detected the IP address of your machine correctly (e.g. `10.0.1.123`).

Open the **Report navigator** tab, select the last **Build** and search for `IP=` followed by an IP address. The IP address which gets embedded in the app should match your machines IP address.

## Building your app for production [​](https://reactnative.dev/docs/next/running-on-device\#building-your-app-for-production-3 "Direct link to Building your app for production")

You have built a great app using React Native, and you are now itching to release it in the App Store. The process is the same as any other native iOS app, with some additional considerations to take into account. Follow the guide for [publishing to the Apple App Store](https://reactnative.dev/docs/next/publishing-to-app-store) to learn more.

info

A Mac is required in order to build your app for iOS devices. Alternatively, you can refer to our [environment setup guide](https://reactnative.dev/docs/next/environment-setup) to learn how to build your app using Expo CLI, which will allow you to run your app using the Expo client app.

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/textinput

[Skip to main content](https://reactnative.dev/docs/next/textinput#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/textinput)** (0.81).

Version: Next

On this page

A foundational component for inputting text into the app via a keyboard. Props provide configurability for several features, such as auto-correction, auto-capitalization, placeholder text, and different keyboard types, such as a numeric keypad.

The most basic use case is to plop down a `TextInput` and subscribe to the `onChangeText` events to read the user input. There are also other events, such as `onSubmitEditing` and `onFocus` that can be subscribed to. A minimal example:

TextInput Example - Snack

# TextInput Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {StyleSheet, TextInput} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const \[text, onChangeText\] = React.useState('Useless Text');
const \[number, onChangeNumber\] = React.useState('');

return (

style={styles.input}
onChangeText={onChangeText}
value={text}

style={styles.input}
onChangeText={onChangeNumber}
value={number}
placeholder="useless placeholder"
keyboardType="numeric"

};

const styles = StyleSheet.create({
input: {
height: 40,
margin: 12,
borderWidth: 1,
padding: 10,
},
});

export default TextInputExample;

const [text, onChangeText] = React.useState('Useless Text');
const [number, onChangeNumber] = React.useState('');

style={styles.input}
onChangeText={onChangeText}
value={text}

style={styles.input}
onChangeText={onChangeNumber}
value={number}
placeholder="useless placeholder"
keyboardType="numeric"

const styles = StyleSheet.create({
input: {
height: 40,
margin: 12,
borderWidth: 1,
padding: 10,
},
});

Snack

Updating…

PreviewMy DeviceAndroidiOSWeb

Two methods exposed via the native element are `.focus()` and `.blur()` that will focus or blur the TextInput programmatically.

Note that some props are only available with `multiline={true/false}`. Additionally, border styles that apply to only one side of the element (e.g., `borderBottomColor`, `borderLeftWidth`, etc.) will not be applied if `multiline=true`. To achieve the same effect, you can wrap your `TextInput` in a `View`:

Multiline TextInput Example - Snack

# Multiline TextInput Example

import React from 'react';
import {TextInput, StyleSheet} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const \[value, onChangeText\] = React.useState('Useless Multiline Placeholder');

// If you type something in the text box that is a color,
// the background will change to that color.
return (

style={{
flex: 1,
backgroundColor: value.toLowerCase(),

editable
multiline
numberOfLines={4}
maxLength={40}

value={value}
style={styles.textInput}

const styles = StyleSheet.create({
textInput: {
padding: 10,
borderColor: '#000',
borderWidth: 1,
margin: 12,
},
});

export default MultilineTextInputExample;

const [value, onChangeText] = React.useState('Useless Multiline Placeholder');

// If you type something in the text box that is a color,
// the background will change to that color.
return (

style={{
flex: 1,
backgroundColor: value.toLowerCase(),

editable
multiline
numberOfLines={4}
maxLength={40}

value={value}
style={styles.textInput}

const styles = StyleSheet.create({
textInput: {
padding: 10,
borderColor: '#000',
borderWidth: 1,
margin: 12,
},
});

Useless Multiline Placeholder

`TextInput` has a border at the bottom of its view by default. This border has its padding set by the background image provided by the system, and it cannot be changed. Solutions to avoid this are to either not set height explicitly, in which case the system will take care of displaying the border in the correct position, or to not display the border by setting `underlineColorAndroid` to transparent.

Note that on Android performing text selection in an input can change the app's activity `windowSoftInputMode` param to `adjustResize`. This may cause issues with components that have position: 'absolute' while the keyboard is active. To avoid this behavior either specify `windowSoftInputMode` in AndroidManifest.xml ( [https://developer.android.com/guide/topics/manifest/activity-element.html](https://developer.android.com/guide/topics/manifest/activity-element.html) ) or control this param programmatically with native code.

* * *

# Reference

## Props [​](https://reactnative.dev/docs/next/textinput\#props "Direct link to Props")

### [View Props](https://reactnative.dev/docs/next/view\#props) [​](https://reactnative.dev/docs/next/textinput\#view-props "Direct link to view-props")

Inherits [View Props](https://reactnative.dev/docs/next/view#props).

### `allowFontScaling` [​](https://reactnative.dev/docs/next/textinput\#allowfontscaling "Direct link to allowfontscaling")

Specifies whether fonts should scale to respect Text Size accessibility settings. The default is `true`.

| Type |
| --- |
| bool |

### `autoCapitalize` [​](https://reactnative.dev/docs/next/textinput\#autocapitalize "Direct link to autocapitalize")

Tells `TextInput` to automatically capitalize certain characters. This property is not supported by some keyboard types such as `name-phone-pad`.

- `characters`: all characters.
- `words`: first letter of each word.
- `sentences`: first letter of each sentence ( _default_).
- `none`: don't auto capitalize anything.

| Type |
| --- |
| enum('none', 'sentences', 'words', 'characters') |

### `autoComplete` [​](https://reactnative.dev/docs/next/textinput\#autocomplete "Direct link to autocomplete")

Specifies autocomplete hints for the system, so it can provide autofill. On Android, the system will always attempt to offer autofill by using heuristics to identify the type of content. To disable autocomplete, set `autoComplete` to `off`.

The following values work across platforms:

- `additional-name`
- `address-line1`
- `address-line2`
- `birthdate-day` ()
- `birthdate-full` ()
- `birthdate-month` ()
- `birthdate-year` ()
- `cc-csc` ()
- `cc-exp` ()
- `cc-exp-day` ()
- `cc-exp-month` ()
- `cc-exp-year` ()
- `cc-number`
- `country`
- `current-password`
- `email`
- `family-name`
- `given-name`
- `honorific-prefix`
- `honorific-suffix`
- `name`
- `new-password`
- `off`
- `one-time-code`
- `postal-code`
- `street-address`
- `tel`
- `username`

iOS

The following values work on iOS only:

- `cc-family-name` ()
- `cc-given-name` ()
- `cc-middle-name` ()
- `cc-name` ()
- `cc-type` ()
- `nickname`
- `organization`
- `organization-title`
- `url`

Android

The following values work on Android only:

- `gender`
- `name-family`
- `name-given`
- `name-middle`
- `name-middle-initial`
- `name-prefix`
- `name-suffix`
- `password`
- `password-new`
- `postal-address`
- `postal-address-country`
- `postal-address-extended`
- `postal-address-extended-postal-code`
- `postal-address-locality`
- `postal-address-region`
- `sms-otp`
- `tel-country-code`
- `tel-device`
- `tel-national`
- `username-new`

| Type |
| --- |
| enum('additional-name', 'address-line1', 'address-line2', 'birthdate-day', 'birthdate-full', 'birthdate-month', 'birthdate-year', 'cc-csc', 'cc-exp', 'cc-exp-day', 'cc-exp-month', 'cc-exp-year', 'cc-number', 'country', 'current-password', 'email', 'family-name', 'given-name', 'honorific-prefix', 'honorific-suffix', 'name', 'new-password', 'off', 'one-time-code', 'postal-code', 'street-address', 'tel', 'username', 'cc-family-name', 'cc-given-name', 'cc-middle-name', 'cc-name', 'cc-type', 'nickname', 'organization', 'organization-title', 'url', 'gender', 'name-family', 'name-given', 'name-middle', 'name-middle-initial', 'name-prefix', 'name-suffix', 'password', 'password-new', 'postal-address', 'postal-address-country', 'postal-address-extended', 'postal-address-extended-postal-code', 'postal-address-locality', 'postal-address-region', 'sms-otp', 'tel-country-code', 'tel-device', 'tel-national', 'username-new') |

### `autoCorrect` [​](https://reactnative.dev/docs/next/textinput\#autocorrect "Direct link to autocorrect")

If `false`, disables auto-correct. The default value is `true`.

### `autoFocus` [​](https://reactnative.dev/docs/next/textinput\#autofocus "Direct link to autofocus")

If `true`, focuses the input. The default value is `false`.

### `blurOnSubmit` [​](https://reactnative.dev/docs/next/textinput\#bluronsubmit "Direct link to bluronsubmit")

Deprecated

Note that `submitBehavior` now takes the place of `blurOnSubmit` and will override any behavior defined by `blurOnSubmit`. See [submitBehavior](https://reactnative.dev/docs/next/textinput#submitbehavior).

If `true`, the text field will blur when submitted. The default value is true for single-line fields and false for multiline fields. Note that for multiline fields, setting `blurOnSubmit` to `true` means that pressing return will blur the field and trigger the `onSubmitEditing` event instead of inserting a newline into the field.

### `caretHidden` [​](https://reactnative.dev/docs/next/textinput\#carethidden "Direct link to carethidden")

If `true`, caret is hidden. The default value is `false`.

### `clearButtonMode` iOS [​](https://reactnative.dev/docs/next/textinput\#clearbuttonmode-ios "Direct link to clearbuttonmode-ios")

When the clear button should appear on the right side of the text view. This property is supported only for single-line TextInput component. The default value is `never`.

| Type |
| --- |
| enum('never', 'while-editing', 'unless-editing', 'always') |

### `clearTextOnFocus` iOS [​](https://reactnative.dev/docs/next/textinput\#cleartextonfocus-ios "Direct link to cleartextonfocus-ios")

If `true`, clears the text field automatically when editing begins.

### `contextMenuHidden` [​](https://reactnative.dev/docs/next/textinput\#contextmenuhidden "Direct link to contextmenuhidden")

If `true`, context menu is hidden. The default value is `false`.

### `dataDetectorTypes` iOS [​](https://reactnative.dev/docs/next/textinput\#datadetectortypes-ios "Direct link to datadetectortypes-ios")

Determines the types of data converted to clickable URLs in the text input. Only valid if `multiline={true}` and `editable={false}`. By default no data types are detected.

You can provide one type or an array of many types.

Possible values for `dataDetectorTypes` are:

- `'phoneNumber'`
- `'link'`
- `'address'`
- `'calendarEvent'`
- `'none'`
- `'all'`

| Type |
| --- |
| enum('phoneNumber', 'link', 'address', 'calendarEvent', 'none', 'all'), ,array of enum('phoneNumber', 'link', 'address', 'calendarEvent', 'none', 'all') |

### `defaultValue` [​](https://reactnative.dev/docs/next/textinput\#defaultvalue "Direct link to defaultvalue")

Provides an initial value that will change when the user starts typing. Useful for use-cases where you do not want to deal with listening to events and updating the value prop to keep the controlled state in sync.

| Type |
| --- |
| string |

### `disableKeyboardShortcuts` iOS [​](https://reactnative.dev/docs/next/textinput\#disablekeyboardshortcuts-ios "Direct link to disablekeyboardshortcuts-ios")

If `true`, the keyboard shortcuts (undo/redo and copy buttons) are disabled.

| Type | Default |
| --- | --- |
| bool | `false` |

### `cursorColor` Android [​](https://reactnative.dev/docs/next/textinput\#cursorcolor-android "Direct link to cursorcolor-android")

When provided it will set the color of the cursor (or "caret") in the component. Unlike the behavior of `selectionColor` the cursor color will be set independently from the color of the text selection box.

| Type |
| --- |
| [color](https://reactnative.dev/docs/next/colors) |

### `disableFullscreenUI` Android [​](https://reactnative.dev/docs/next/textinput\#disablefullscreenui-android "Direct link to disablefullscreenui-android")

When `false`, if there is a small amount of space available around a text input (e.g. landscape orientation on a phone), the OS may choose to have the user edit the text inside of a full screen text input mode. When `true`, this feature is disabled and users will always edit the text directly inside of the text input. Defaults to `false`.

### `editable` [​](https://reactnative.dev/docs/next/textinput\#editable "Direct link to editable")

If `false`, text is not editable. The default value is `true`.

### `enablesReturnKeyAutomatically` iOS [​](https://reactnative.dev/docs/next/textinput\#enablesreturnkeyautomatically-ios "Direct link to enablesreturnkeyautomatically-ios")

If `true`, the keyboard disables the return key when there is no text and automatically enables it when there is text. The default value is `false`.

### `enterKeyHint` [​](https://reactnative.dev/docs/next/textinput\#enterkeyhint "Direct link to enterkeyhint")

Determines what text should be shown to the return key. Has precedence over the `returnKeyType` prop.

- `done`
- `next`
- `search`
- `send`
- `go`

_Android Only_

- `previous`

_iOS Only_

- `enter`

| Type |
| --- |
| enum('enter', 'done', 'next', 'previous', 'search', 'send', 'go') |

### `importantForAutofill` Android [​](https://reactnative.dev/docs/next/textinput\#importantforautofill-android "Direct link to importantforautofill-android")

Tells the operating system whether the individual fields in your app should be included in a view structure for autofill purposes on Android API Level 26+. Possible values are `auto`, `no`, `noExcludeDescendants`, `yes`, and `yesExcludeDescendants`. The default value is `auto`.

- `auto`: Let the Android System use its heuristics to determine if the view is important for autofill.
- `no`: This view isn't important for autofill.
- `noExcludeDescendants`: This view and its children aren't important for autofill.
- `yes`: This view is important for autofill.
- `yesExcludeDescendants`: This view is important for autofill, but its children aren't important for autofill.

| Type |
| --- |
| enum('auto', 'no', 'noExcludeDescendants', 'yes', 'yesExcludeDescendants') |

### `inlineImageLeft` Android [​](https://reactnative.dev/docs/next/textinput\#inlineimageleft-android "Direct link to inlineimageleft-android")

If defined, the provided image resource will be rendered on the left. The image resource must be inside `/android/app/src/main/res/drawable` and referenced like

```codeBlockLines_AclH
<TextInput
inlineImageLeft='search_icon'

### `inlineImagePadding` Android [​](https://reactnative.dev/docs/next/textinput\#inlineimagepadding-android "Direct link to inlineimagepadding-android")

Padding between the inline image, if any, and the text input itself.

| Type |
| --- |
| number |

### `inputAccessoryViewID` iOS [​](https://reactnative.dev/docs/next/textinput\#inputaccessoryviewid-ios "Direct link to inputaccessoryviewid-ios")

An optional identifier which links a custom [InputAccessoryView](https://reactnative.dev/docs/next/inputaccessoryview) to this text input. The InputAccessoryView is rendered above the keyboard when this text input is focused.

### `inputAccessoryViewButtonLabel` iOS [​](https://reactnative.dev/docs/next/textinput\#inputaccessoryviewbuttonlabel-ios "Direct link to inputaccessoryviewbuttonlabel-ios")

An optional label that overrides the default [InputAccessoryView](https://reactnative.dev/docs/next/inputaccessoryview) button label.

By default, the default button label is not localized. Use this property to provide a localized version.

### `inputMode` [​](https://reactnative.dev/docs/next/textinput\#inputmode "Direct link to inputmode")

Works like the `inputmode` attribute in HTML, it determines which keyboard to open, e.g. `numeric` and has precedence over `keyboardType`.

Support the following values:

- `none`
- `text`
- `decimal`
- `numeric`
- `tel`
- `search`
- `email`
- `url`

| Type |
| --- |
| enum('decimal', 'email', 'none', 'numeric', 'search', 'tel', 'text', 'url') |

### `keyboardAppearance` iOS [​](https://reactnative.dev/docs/next/textinput\#keyboardappearance-ios "Direct link to keyboardappearance-ios")

Determines the color of the keyboard.

| Type |
| --- |
| enum('default', 'light', 'dark') |

### `keyboardType` [​](https://reactnative.dev/docs/next/textinput\#keyboardtype "Direct link to keyboardtype")

Determines which keyboard to open, e.g. `numeric`.

See screenshots of all the types [here](https://davidl.fr/blog/keyboard-react-native-ios-android#all-react-native-keyboard-type-examples-i-os-on-the-left-android-on-the-right).

- `default`
- `number-pad`
- `decimal-pad`
- `numeric`
- `email-address`
- `phone-pad`
- `url`

- `ascii-capable`
- `numbers-and-punctuation`
- `name-phone-pad`
- `twitter`
- `web-search`

- `visible-password`

| Type |
| --- |
| enum('default', 'email-address', 'numeric', 'phone-pad', 'ascii-capable', 'numbers-and-punctuation', 'url', 'number-pad', 'name-phone-pad', 'decimal-pad', 'twitter', 'web-search', 'visible-password') |

### `lineBreakStrategyIOS` iOS [​](https://reactnative.dev/docs/next/textinput\#linebreakstrategyios-ios "Direct link to linebreakstrategyios-ios")

Set line break strategy on . Possible values are `none`, `standard`, `hangul-word` and `push-out`.

| Type | Default |
| --- | --- |
| enum( `'none'`, `'standard'`, `'hangul-word'`, `'push-out'`) | `'none'` |

### `lineBreakModeIOS` iOS [​](https://reactnative.dev/docs/next/textinput\#linebreakmodeios-ios "Direct link to linebreakmodeios-ios")

Set line break mode on iOS. Possible values are `wordWrapping`, `char`, `clip`, `head`, `middle` and `tail`.

| Type | Default |
| --- | --- |
| enum( `'wordWrapping'`, `'char'`, `'clip'`, `'head'`, `'middle'`, `'tail'`) | `'wordWrapping'` |

### `maxFontSizeMultiplier` [​](https://reactnative.dev/docs/next/textinput\#maxfontsizemultiplier "Direct link to maxfontsizemultiplier")

Specifies largest possible scale a font can reach when `allowFontScaling` is enabled. Possible values:

- `null/undefined` (default): inherit from the parent node or the global default (0)
- `0`: no max, ignore parent/global default

### `maxLength` [​](https://reactnative.dev/docs/next/textinput\#maxlength "Direct link to maxlength")

Limits the maximum number of characters that can be entered. Use this instead of implementing the logic in JS to avoid flicker.

### `multiline` [​](https://reactnative.dev/docs/next/textinput\#multiline "Direct link to multiline")

If `true`, the text input can be multiple lines. The default value is `false`.

note

It is important to note that this aligns the text to the top on iOS, and centers it on Android. Use with `textAlignVertical` set to `top` for the same behavior in both platforms.

### `numberOfLines` [​](https://reactnative.dev/docs/next/textinput\#numberoflines "Direct link to numberoflines")

`numberOfLines` on iOS is only available on the [New Architecture](https://reactnative.dev/architecture/landing-page)

Sets the maximum number of lines for a `TextInput`. Use it with multiline set to `true` to be able to fill the lines.

### `onBlur` [​](https://reactnative.dev/docs/next/textinput\#onblur "Direct link to onblur")

Callback that is called when the text input is blurred.

If you are attempting to access the `text` value from `nativeEvent` keep in mind that the resulting value you get can be `undefined` which can cause unintended errors. If you are trying to find the last value of TextInput, you can use the [`onEndEditing`](https://reactnative.dev/docs/next/textinput#onendediting) event, which is fired upon completion of editing.

| Type |
| --- |

### `onChange` [​](https://reactnative.dev/docs/next/textinput\#onchange "Direct link to onchange")

Callback that is called when the text input's text changes.

### `onChangeText` [​](https://reactnative.dev/docs/next/textinput\#onchangetext "Direct link to onchangetext")

Callback that is called when the text input's text changes. Changed text is passed as a single string argument to the callback handler.

| Type |
| --- |
| function |

### `onContentSizeChange` [​](https://reactnative.dev/docs/next/textinput\#oncontentsizechange "Direct link to oncontentsizechange")

Callback that is called when the text input's content size changes.

Only called for multiline text inputs.

### `onEndEditing` [​](https://reactnative.dev/docs/next/textinput\#onendediting "Direct link to onendediting")

Callback that is called when text input ends.

### `onPressIn` [​](https://reactnative.dev/docs/next/textinput\#onpressin "Direct link to onpressin")

Callback that is called when a touch is engaged.

### `onPressOut` [​](https://reactnative.dev/docs/next/textinput\#onpressout "Direct link to onpressout")

Callback that is called when a touch is released.

### `onFocus` [​](https://reactnative.dev/docs/next/textinput\#onfocus "Direct link to onfocus")

Callback that is called when the text input is focused.

### `onKeyPress` [​](https://reactnative.dev/docs/next/textinput\#onkeypress "Direct link to onkeypress")

Callback that is called when a key is pressed. This will be called with object where `keyValue` is `'Enter'` or `'Backspace'` for respective keys and the typed-in character otherwise including `' '` for space. Fires before `onChange` callbacks. Note: on Android only the inputs from soft keyboard are handled, not the hardware keyboard inputs.

### `onLayout` [​](https://reactnative.dev/docs/next/textinput\#onlayout "Direct link to onlayout")

Invoked on mount and on layout changes.

### `onScroll` [​](https://reactnative.dev/docs/next/textinput\#onscroll "Direct link to onscroll")

Invoked on content scroll. May also contain other properties from `ScrollEvent` but on Android `contentSize` is not provided for performance reasons.

### `onSelectionChange` [​](https://reactnative.dev/docs/next/textinput\#onselectionchange "Direct link to onselectionchange")

Callback that is called when the text input selection is changed.

### `onSubmitEditing` [​](https://reactnative.dev/docs/next/textinput\#onsubmitediting "Direct link to onsubmitediting")

Callback that is called when the text input's submit button is pressed.

Note that on iOS this method isn't called when using `keyboardType="phone-pad"`.

### `placeholder` [​](https://reactnative.dev/docs/next/textinput\#placeholder "Direct link to placeholder")

The string that will be rendered before text input has been entered.

### `placeholderTextColor` [​](https://reactnative.dev/docs/next/textinput\#placeholdertextcolor "Direct link to placeholdertextcolor")

The text color of the placeholder string.

### `readOnly` [​](https://reactnative.dev/docs/next/textinput\#readonly "Direct link to readonly")

If `true`, text is not editable. The default value is `false`.

### `returnKeyLabel` Android [​](https://reactnative.dev/docs/next/textinput\#returnkeylabel-android "Direct link to returnkeylabel-android")

Sets the return key to the label. Use it instead of `returnKeyType`.

### `returnKeyType` [​](https://reactnative.dev/docs/next/textinput\#returnkeytype "Direct link to returnkeytype")

Determines how the return key should look. On Android you can also use `returnKeyLabel`.

_Cross platform_

- `done`
- `go`
- `next`
- `search`
- `send`

- `none`
- `previous`

- `default`
- `emergency-call`
- `google`
- `join`
- `route`
- `yahoo`

| Type |
| --- |
| enum('done', 'go', 'next', 'search', 'send', 'none', 'previous', 'default', 'emergency-call', 'google', 'join', 'route', 'yahoo') |

### `rejectResponderTermination` iOS [​](https://reactnative.dev/docs/next/textinput\#rejectrespondertermination-ios "Direct link to rejectrespondertermination-ios")

If `true`, allows TextInput to pass touch events to the parent component. This allows components such as SwipeableListView to be swipeable from the TextInput on iOS, as is the case on Android by default. If `false`, TextInput always asks to handle the input (except when disabled). The default value is `true`.

### `rows` Android [​](https://reactnative.dev/docs/next/textinput\#rows-android "Direct link to rows-android")

Sets the number of lines for a `TextInput`. Use it with multiline set to `true` to be able to fill the lines.

### `scrollEnabled` iOS [​](https://reactnative.dev/docs/next/textinput\#scrollenabled-ios "Direct link to scrollenabled-ios")

If `false`, scrolling of the text view will be disabled. The default value is `true`. Only works with `multiline={true}`.

### `secureTextEntry` [​](https://reactnative.dev/docs/next/textinput\#securetextentry "Direct link to securetextentry")

If `true`, the text input obscures the text entered so that sensitive text like passwords stay secure. The default value is `false`. Does not work with `multiline={true}`.

### `selection` [​](https://reactnative.dev/docs/next/textinput\#selection "Direct link to selection")

The start and end of the text input's selection. Set start and end to the same value to position the cursor.

| Type |
| --- |
| object: `{start: number,end: number}` |

### `selectionColor` [​](https://reactnative.dev/docs/next/textinput\#selectioncolor "Direct link to selectioncolor")

The highlight, selection handle and cursor color of the text input.

### `selectionHandleColor` Android [​](https://reactnative.dev/docs/next/textinput\#selectionhandlecolor-android "Direct link to selectionhandlecolor-android")

Sets the color of the selection handle. Unlike `selectionColor`, it allows the selection handle color to be customized independently of the selection's color.

### `selectTextOnFocus` [​](https://reactnative.dev/docs/next/textinput\#selecttextonfocus "Direct link to selecttextonfocus")

If `true`, all text will automatically be selected on focus.

### `showSoftInputOnFocus` [​](https://reactnative.dev/docs/next/textinput\#showsoftinputonfocus "Direct link to showsoftinputonfocus")

When `false`, it will prevent the soft keyboard from showing when the field is focused. The default value is `true`.

### `smartInsertDelete` iOS [​](https://reactnative.dev/docs/next/textinput\#smartinsertdelete-ios "Direct link to smartinsertdelete-ios")

If `false`, the iOS system will not insert an extra space after a paste operation neither delete one or two spaces after a cut or delete operation.

| Type | Default |
| --- | --- |
| bool | `true` |

### `spellCheck` iOS [​](https://reactnative.dev/docs/next/textinput\#spellcheck-ios "Direct link to spellcheck-ios")

If `false`, disables spell-check style (i.e. red underlines). The default value is inherited from `autoCorrect`.

### `submitBehavior` [​](https://reactnative.dev/docs/next/textinput\#submitbehavior "Direct link to submitbehavior")

When the return key is pressed,

For single line inputs:

- `'newline'` defaults to `'blurAndSubmit'`
- `undefined` defaults to `'blurAndSubmit'`

For multiline inputs:

- `'newline'` adds a newline
- `undefined` defaults to `'newline'`

For both single line and multiline inputs:

- `'submit'` will only send a submit event and not blur the input
- `'blurAndSubmit`' will both blur the input and send a submit event

| Type |
| --- |
| enum('submit', 'blurAndSubmit', 'newline') |

### `textAlign` [​](https://reactnative.dev/docs/next/textinput\#textalign "Direct link to textalign")

Align the input text to the left, center, or right sides of the input field.

Possible values for `textAlign` are:

- `left`
- `center`
- `right`

| Type |
| --- |
| enum('left', 'center', 'right') |

### `textContentType` iOS [​](https://reactnative.dev/docs/next/textinput\#textcontenttype-ios "Direct link to textcontenttype-ios")

Give the keyboard and the system information about the expected semantic meaning for the content that users enter.

[`autoComplete`](https://reactnative.dev/docs/next/textinput#autocomplete), provides the same functionality and is available for all platforms. You can use [`Platform.select`](https://reactnative.dev/docs/next/platform#select) for differing platform behaviors.

Avoid using both `textContentType` and `autoComplete`. For backwards compatibility, `textContentType` takes precedence when both properties are set.

You can set `textContentType` to `username` or `password` to enable autofill of login details from the device keychain.

`newPassword` can be used to indicate a new password input the user may want to save in the keychain, and `oneTimeCode` can be used to indicate that a field can be autofilled by a code arriving in an SMS.

To disable autofill, set `textContentType` to `none`.

Possible values for `textContentType` are:

- `none`
- `addressCity`
- `addressCityAndState`
- `addressState`
- `birthdate` ()
- `birthdateDay` ()
- `birthdateMonth` ()
- `birthdateYear` ()
- `countryName`
- `creditCardExpiration` ()
- `creditCardExpirationMonth` ()
- `creditCardExpirationYear` ()
- `creditCardFamilyName` ()
- `creditCardGivenName` ()
- `creditCardMiddleName` ()
- `creditCardName` ()
- `creditCardNumber`
- `creditCardSecurityCode` ()
- `creditCardType` ()
- `emailAddress`
- `familyName`
- `fullStreetAddress`
- `givenName`
- `jobTitle`
- `location`
- `middleName`
- `name`
- `namePrefix`
- `nameSuffix`
- `newPassword`
- `nickname`
- `oneTimeCode`
- `organizationName`
- `password`
- `postalCode`
- `streetAddressLine1`
- `streetAddressLine2`
- `sublocality`
- `telephoneNumber`
- `URL`
- `username`

| Type |
| --- |
| enum('none', 'addressCity', 'addressCityAndState', 'addressState', 'birthdate', 'birthdateDay', 'birthdateMonth', 'birthdateYear', 'countryName', 'creditCardExpiration', 'creditCardExpirationMonth', 'creditCardExpirationYear', 'creditCardFamilyName', 'creditCardGivenName', 'creditCardMiddleName', 'creditCardName', 'creditCardNumber', 'creditCardSecurityCode', 'creditCardType', 'emailAddress', 'familyName', 'fullStreetAddress', 'givenName', 'jobTitle', 'location', 'middleName', 'name', 'namePrefix', 'nameSuffix', 'newPassword', 'nickname', 'oneTimeCode', 'organizationName', 'password', 'postalCode', 'streetAddressLine1', 'streetAddressLine2', 'sublocality', 'telephoneNumber', 'URL', 'username') |

### `passwordRules` iOS [​](https://reactnative.dev/docs/next/textinput\#passwordrules-ios "Direct link to passwordrules-ios")

When using `textContentType` as `newPassword` on iOS we can let the OS know the minimum requirements of the password so that it can generate one that will satisfy them. In order to create a valid string for `PasswordRules` take a look to the [Apple Docs](https://developer.apple.com/password-rules/).

tip

If passwords generation dialog doesn't appear please make sure that:

- AutoFill is enabled: **Settings** → **Passwords & Accounts** → toggle "On" the **AutoFill Passwords**,
- iCloud Keychain is used: **Settings** → **Apple ID** → **iCloud** → **Keychain** → toggle "On" the **iCloud Keychain**.

### `style` [​](https://reactnative.dev/docs/next/textinput\#style "Direct link to style")

Note that not all Text styles are supported, an incomplete list of what is not supported includes:

- `borderLeftWidth`
- `borderTopWidth`
- `borderRightWidth`
- `borderBottomWidth`
- `borderTopLeftRadius`
- `borderTopRightRadius`
- `borderBottomRightRadius`
- `borderBottomLeftRadius`

[Styles](https://reactnative.dev/docs/next/style)

| Type |
| --- |
| [Text](https://reactnative.dev/docs/next/text#style) |

### `textBreakStrategy` Android [​](https://reactnative.dev/docs/next/textinput\#textbreakstrategy-android "Direct link to textbreakstrategy-android")

Set text break strategy on Android API Level 23+, possible values are `simple`, `highQuality`, `balanced` The default value is `highQuality`.

| Type |
| --- |
| enum('simple', 'highQuality', 'balanced') |

### `underlineColorAndroid` Android [​](https://reactnative.dev/docs/next/textinput\#underlinecolorandroid-android "Direct link to underlinecolorandroid-android")

The color of the `TextInput` underline.

### `value` [​](https://reactnative.dev/docs/next/textinput\#value "Direct link to value")

The value to show for the text input. `TextInput` is a controlled component, which means the native value will be forced to match this value prop if provided. For most uses, this works great, but in some cases this may cause flickering - one common cause is preventing edits by keeping value the same. In addition to setting the same value, either set `editable={false}`, or set/update `maxLength` to prevent unwanted edits without flicker.

## Methods [​](https://reactnative.dev/docs/next/textinput\#methods "Direct link to Methods")

### `.focus()` [​](https://reactnative.dev/docs/next/textinput\#focus "Direct link to focus")

tsx

```codeBlockLines_AclH
focus();

Makes the native input request focus.

### `.blur()` [​](https://reactnative.dev/docs/next/textinput\#blur "Direct link to blur")

```codeBlockLines_AclH
blur();

Makes the native input lose focus.

### `clear()` [​](https://reactnative.dev/docs/next/textinput\#clear "Direct link to clear")

```codeBlockLines_AclH
clear();

Removes all text from the `TextInput`.

### `isFocused()` [​](https://reactnative.dev/docs/next/textinput\#isfocused "Direct link to isfocused")

```codeBlockLines_AclH
isFocused(): boolean;

Returns `true` if the input is currently focused; `false` otherwise.

# Known issues

- [react-native#19096](https://github.com/facebook/react-native/issues/19096): Doesn't support Android's `onKeyPreIme`.
- [react-native#19366](https://github.com/facebook/react-native/issues/19366): Calling .focus() after closing Android's keyboard via back button doesn't bring keyboard up again.
- [react-native#26799](https://github.com/facebook/react-native/issues/26799): Doesn't support Android's `secureTextEntry` when `keyboardType="email-address"` or `keyboardType="phone-pad"`.

Is this page useful?

- [Props](https://reactnative.dev/docs/next/textinput#props)
- [View Props](https://reactnative.dev/docs/next/textinput#view-props)
- [`allowFontScaling`](https://reactnative.dev/docs/next/textinput#allowfontscaling)
- [`autoCapitalize`](https://reactnative.dev/docs/next/textinput#autocapitalize)
- [`autoComplete`](https://reactnative.dev/docs/next/textinput#autocomplete)
- [`autoCorrect`](https://reactnative.dev/docs/next/textinput#autocorrect)
- [`autoFocus`](https://reactnative.dev/docs/next/textinput#autofocus)
- [`blurOnSubmit`](https://reactnative.dev/docs/next/textinput#bluronsubmit)
- [`caretHidden`](https://reactnative.dev/docs/next/textinput#carethidden)
- [`clearButtonMode` \\
iOS](https://reactnative.dev/docs/next/textinput#clearbuttonmode-ios)
- [`clearTextOnFocus` \\
iOS](https://reactnative.dev/docs/next/textinput#cleartextonfocus-ios)
- [`contextMenuHidden`](https://reactnative.dev/docs/next/textinput#contextmenuhidden)
- [`dataDetectorTypes` \\
iOS](https://reactnative.dev/docs/next/textinput#datadetectortypes-ios)
- [`defaultValue`](https://reactnative.dev/docs/next/textinput#defaultvalue)
- [`disableKeyboardShortcuts` \\
iOS](https://reactnative.dev/docs/next/textinput#disablekeyboardshortcuts-ios)
- [`cursorColor` \\
Android](https://reactnative.dev/docs/next/textinput#cursorcolor-android)
- [`disableFullscreenUI` \\
Android](https://reactnative.dev/docs/next/textinput#disablefullscreenui-android)
- [`editable`](https://reactnative.dev/docs/next/textinput#editable)
- [`enablesReturnKeyAutomatically` \\
iOS](https://reactnative.dev/docs/next/textinput#enablesreturnkeyautomatically-ios)
- [`enterKeyHint`](https://reactnative.dev/docs/next/textinput#enterkeyhint)
- [`importantForAutofill` \\
Android](https://reactnative.dev/docs/next/textinput#importantforautofill-android)
- [`inlineImageLeft` \\
Android](https://reactnative.dev/docs/next/textinput#inlineimageleft-android)
- [`inlineImagePadding` \\
Android](https://reactnative.dev/docs/next/textinput#inlineimagepadding-android)
- [`inputAccessoryViewID` \\
iOS](https://reactnative.dev/docs/next/textinput#inputaccessoryviewid-ios)
- [`inputAccessoryViewButtonLabel` \\
iOS](https://reactnative.dev/docs/next/textinput#inputaccessoryviewbuttonlabel-ios)
- [`inputMode`](https://reactnative.dev/docs/next/textinput#inputmode)
- [`keyboardAppearance` \\
iOS](https://reactnative.dev/docs/next/textinput#keyboardappearance-ios)
- [`keyboardType`](https://reactnative.dev/docs/next/textinput#keyboardtype)
- [`lineBreakStrategyIOS` \\
iOS](https://reactnative.dev/docs/next/textinput#linebreakstrategyios-ios)
- [`lineBreakModeIOS` \\
iOS](https://reactnative.dev/docs/next/textinput#linebreakmodeios-ios)
- [`maxFontSizeMultiplier`](https://reactnative.dev/docs/next/textinput#maxfontsizemultiplier)
- [`maxLength`](https://reactnative.dev/docs/next/textinput#maxlength)
- [`multiline`](https://reactnative.dev/docs/next/textinput#multiline)
- [`numberOfLines`](https://reactnative.dev/docs/next/textinput#numberoflines)
- [`onBlur`](https://reactnative.dev/docs/next/textinput#onblur)
- [`onChange`](https://reactnative.dev/docs/next/textinput#onchange)
- [`onChangeText`](https://reactnative.dev/docs/next/textinput#onchangetext)
- [`onContentSizeChange`](https://reactnative.dev/docs/next/textinput#oncontentsizechange)
- [`onEndEditing`](https://reactnative.dev/docs/next/textinput#onendediting)
- [`onPressIn`](https://reactnative.dev/docs/next/textinput#onpressin)
- [`onPressOut`](https://reactnative.dev/docs/next/textinput#onpressout)
- [`onFocus`](https://reactnative.dev/docs/next/textinput#onfocus)
- [`onKeyPress`](https://reactnative.dev/docs/next/textinput#onkeypress)
- [`onLayout`](https://reactnative.dev/docs/next/textinput#onlayout)
- [`onScroll`](https://reactnative.dev/docs/next/textinput#onscroll)
- [`onSelectionChange`](https://reactnative.dev/docs/next/textinput#onselectionchange)
- [`onSubmitEditing`](https://reactnative.dev/docs/next/textinput#onsubmitediting)
- [`placeholder`](https://reactnative.dev/docs/next/textinput#placeholder)
- [`placeholderTextColor`](https://reactnative.dev/docs/next/textinput#placeholdertextcolor)
- [`readOnly`](https://reactnative.dev/docs/next/textinput#readonly)
- [`returnKeyLabel` \\
Android](https://reactnative.dev/docs/next/textinput#returnkeylabel-android)
- [`returnKeyType`](https://reactnative.dev/docs/next/textinput#returnkeytype)
- [`rejectResponderTermination` \\
iOS](https://reactnative.dev/docs/next/textinput#rejectrespondertermination-ios)
- [`rows` \\
Android](https://reactnative.dev/docs/next/textinput#rows-android)
- [`scrollEnabled` \\
iOS](https://reactnative.dev/docs/next/textinput#scrollenabled-ios)
- [`secureTextEntry`](https://reactnative.dev/docs/next/textinput#securetextentry)
- [`selection`](https://reactnative.dev/docs/next/textinput#selection)
- [`selectionColor`](https://reactnative.dev/docs/next/textinput#selectioncolor)
- [`selectionHandleColor` \\
Android](https://reactnative.dev/docs/next/textinput#selectionhandlecolor-android)
- [`selectTextOnFocus`](https://reactnative.dev/docs/next/textinput#selecttextonfocus)
- [`showSoftInputOnFocus`](https://reactnative.dev/docs/next/textinput#showsoftinputonfocus)
- [`smartInsertDelete` \\
iOS](https://reactnative.dev/docs/next/textinput#smartinsertdelete-ios)
- [`spellCheck` \\
iOS](https://reactnative.dev/docs/next/textinput#spellcheck-ios)
- [`submitBehavior`](https://reactnative.dev/docs/next/textinput#submitbehavior)
- [`textAlign`](https://reactnative.dev/docs/next/textinput#textalign)
- [`textContentType` \\
iOS](https://reactnative.dev/docs/next/textinput#textcontenttype-ios)
- [`passwordRules` \\
iOS](https://reactnative.dev/docs/next/textinput#passwordrules-ios)
- [`style`](https://reactnative.dev/docs/next/textinput#style)
- [`textBreakStrategy` \\
Android](https://reactnative.dev/docs/next/textinput#textbreakstrategy-android)
- [`underlineColorAndroid` \\
Android](https://reactnative.dev/docs/next/textinput#underlinecolorandroid-android)
- [`value`](https://reactnative.dev/docs/next/textinput#value)
- [Methods](https://reactnative.dev/docs/next/textinput#methods)
- [`.focus()`](https://reactnative.dev/docs/next/textinput#focus)
- [`.blur()`](https://reactnative.dev/docs/next/textinput#blur)
- [`clear()`](https://reactnative.dev/docs/next/textinput#clear)
- [`isFocused()`](https://reactnative.dev/docs/next/textinput#isfocused)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/set-up-your-environment

[Skip to main content](https://reactnative.dev/docs/next/set-up-your-environment#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/set-up-your-environment)** (0.81).

Version: Next

In this guide, you'll learn how to set up your environment, so that you can run your project with Android Studio and Xcode. This will allow you to develop with Android emulators and iOS simulators, build your app locally, and more.

info

This guide requires Android Studio or Xcode. If you already have one of these programs installed, you should be able to get up and running within a few minutes. If they are not installed, you should expect to spend about an hour installing and configuring them.

Is setting up my environment required?

Setting up your environment is not required if you're using a [Framework](https://reactnative.dev/architecture/glossary#react-native-framework). With a React Native Framework, you don't need to setup Android Studio or Xcode as a Framework will take care of building the native app for you.

If you have constraints that prevent you from using a Framework, or you'd like to write your own Framework, then setting up your local environment is a requirement. After your environment is set up, learn how to [get started without a framework](https://reactnative.dev/docs/next/getting-started-without-a-framework).

#### Development OS [​](https://reactnative.dev/docs/next/set-up-your-environment\#development-os "Direct link to Development OS")

- macOS
- Windows
- Linux

#### Target OS [​](https://reactnative.dev/docs/next/set-up-your-environment\#target-os "Direct link to Target OS")

- Android
- iOS

## Installing dependencies [​](https://reactnative.dev/docs/next/set-up-your-environment\#installing-dependencies "Direct link to Installing dependencies")

You will need Node, Watchman, the React Native command line interface, a JDK, and Android Studio.

While you can use any editor of your choice to develop your app, you will need to install Android Studio in order to set up the necessary tooling to build your React Native app for Android.

### Node & Watchman

We recommend installing Node and Watchman using [Homebrew](https://brew.sh/). Run the following commands in a Terminal after installing Homebrew:

shell

```codeBlockLines_AclH
brew install node
brew install watchman

If you have already installed Node on your system, make sure it is Node 20.19.4 or newer.

[Watchman](https://facebook.github.io/watchman) is a tool by Facebook for watching changes in the filesystem. It is highly recommended you install it for better performance.

### Java Development Kit

We recommend installing the OpenJDK distribution called Azul **Zulu** using [Homebrew](https://brew.sh/). Run the following commands in a Terminal after installing Homebrew:

```codeBlockLines_AclH
brew install --cask zulu@17

# Get path to where cask was installed to find the JDK installer
brew info --cask zulu@17

# Installed

# Installed using the formulae.brew.sh API on 2024-06-06 at 10:00:00

# Navigate to the folder

After opening Finder, double click the `Double-Click to Install Azul Zulu JDK 17.pkg` package to install the JDK.

After the JDK installation, add or update your `JAVA_HOME` environment variable in `~/.zshrc` (or in `~/.bash_profile`).

If you used above steps, JDK will likely be located at `/Library/Java/JavaVirtualMachines/zulu-17.jdk/Contents/Home`:

```codeBlockLines_AclH
export JAVA_HOME=/Library/Java/JavaVirtualMachines/zulu-17.jdk/Contents/Home

The Zulu OpenJDK distribution offers JDKs for **both Intel and M1 Macs**. This will make sure your builds are faster on M1 Macs compared to using an Intel-based JDK.

If you have already installed JDK on your system, we recommend JDK 17. You may encounter problems using higher JDK versions.

### Android development environment

Setting up your development environment can be somewhat tedious if you're new to Android development. If you're already familiar with Android development, there are a few things you may need to configure. In either case, please make sure to carefully follow the next few steps.

#### 1\. Install Android Studio

[Download and install Android Studio](https://developer.android.com/studio). While on Android Studio installation wizard, make sure the boxes next to all of the following items are checked:

- `Android SDK`
- `Android SDK Platform`
- `Android Virtual Device`

Then, click "Next" to install all of these components.

note

If the checkboxes are grayed out, you will have a chance to install these components later on.

Once setup has finalized and you're presented with the Welcome screen, proceed to the next step.

#### 2\. Install the Android SDK

Android Studio installs the latest Android SDK by default. Building a React Native app with native code, however, requires the `Android 15 (VanillaIceCream)` SDK in particular. Additional Android SDKs can be installed through the SDK Manager in Android Studio.

To do that, open Android Studio, click on "More Actions" button and select "SDK Manager".

tip

The SDK Manager can also be found within the Android Studio "Settings" dialog, under **Languages & Frameworks** → **Android SDK**.

Select the "SDK Platforms" tab from within the SDK Manager, then check the box next to "Show Package Details" in the bottom right corner. Look for and expand the `Android 15 (VanillaIceCream)` entry, then make sure the following items are checked:

- `Android SDK Platform 35`
- `Intel x86 Atom_64 System Image` or `Google APIs Intel x86 Atom System Image` or (for Apple M1 Silicon) `Google APIs ARM 64 v8a System Image`

Next, select the "SDK Tools" tab and check the box next to "Show Package Details" here as well. Look for and expand the "Android SDK Build-Tools" entry, then make sure that `35.0.0` is selected.

Finally, click "Apply" to download and install the Android SDK and related build tools.

#### 3\. Configure the ANDROID\_HOME environment variable

The React Native tools require some environment variables to be set up in order to build apps with native code.

Add the following lines to your `~/.zprofile` or `~/.zshrc` (if you are using `bash`, then `~/.bash_profile` or `~/.bashrc`) config file:

```codeBlockLines_AclH
export ANDROID_HOME=$HOME/Library/Android/sdk
export PATH=$PATH:$ANDROID_HOME/emulator
export PATH=$PATH:$ANDROID_HOME/platform-tools

Run `source ~/.zprofile` (or `source ~/.bash_profile` for `bash`) to load the config into your current shell. Verify that ANDROID\_HOME has been set by running `echo $ANDROID_HOME` and the appropriate directories have been added to your path by running `echo $PATH`.

Please make sure you use the correct Android SDK path. You can find the actual location of the SDK in the Android Studio "Settings" dialog, under **Languages & Frameworks** → **Android SDK**.

## Preparing the Android device

You will need an Android device to run your React Native Android app. This can be either a physical Android device, or more commonly, you can use an Android Virtual Device which allows you to emulate an Android device on your computer.

Either way, you will need to prepare the device to run Android apps for development.

### Using a physical device

If you have a physical Android device, you can use it for development in place of an AVD by plugging it in to your computer using a USB cable and following the instructions [here](https://reactnative.dev/docs/next/running-on-device).

### Using a virtual device

If you use Android Studio to open `./AwesomeProject/android`, you can see the list of available Android Virtual Devices (AVDs) by opening the "AVD Manager" from within Android Studio. Look for an icon that looks like this:

If you have recently installed Android Studio, you will likely need to [create a new AVD](https://developer.android.com/studio/run/managing-avds.html). Select "Create Virtual Device...", then pick any Phone from the list and click "Next", then select the **VanillaIceCream** API Level 35 image.

Click "Next" then "Finish" to create your AVD. At this point you should be able to click on the green triangle button next to your AVD to launch it.

### That's it!

Congratulations! You successfully set up your development environment.

## Now what?

- If you want to add this new React Native code to an existing application, check out the [Integration guide](https://reactnative.dev/docs/next/integration-with-existing-apps).
- If you're curious to learn more about React Native, check out the [Introduction to React Native](https://reactnative.dev/docs/next/getting-started).

You will need Node, Watchman, the React Native command line interface, Xcode and CocoaPods.

While you can use any editor of your choice to develop your app, you will need to install Xcode in order to set up the necessary tooling to build your React Native app for iOS.

### Node & Watchman [​](https://reactnative.dev/docs/next/set-up-your-environment\#node--watchman "Direct link to Node & Watchman")

### Xcode [​](https://reactnative.dev/docs/next/set-up-your-environment\#xcode "Direct link to Xcode")

Please use the **latest version** of Xcode.

The easiest way to install Xcode is via the [Mac App Store](https://itunes.apple.com/us/app/xcode/id497799835?mt=12). Installing Xcode will also install the iOS Simulator and all the necessary tools to build your iOS app.

#### Command Line Tools [​](https://reactnative.dev/docs/next/set-up-your-environment\#command-line-tools "Direct link to Command Line Tools")

You will also need to install the Xcode Command Line Tools. Open Xcode, then choose **Settings... (or Preferences...)** from the Xcode menu. Go to the Locations panel and install the tools by selecting the most recent version in the Command Line Tools dropdown.

#### CocoaPods [​](https://reactnative.dev/docs/next/set-up-your-environment\#cocoapods "Direct link to CocoaPods")

[CocoaPods](https://cocoapods.org/) is one of the dependency management system available for iOS. CocoaPods is a Ruby [gem](https://en.wikipedia.org/wiki/RubyGems). You can install CocoaPods using the version of Ruby that ships with the latest version of macOS.

For more information, please visit [CocoaPods Getting Started guide](https://guides.cocoapods.org/using/getting-started.html).

### \[Optional\] Configuring your environment [​](https://reactnative.dev/docs/next/set-up-your-environment\#optional-configuring-your-environment "Direct link to [Optional] Configuring your environment")

Starting from React Native version 0.69, it is possible to configure the Xcode environment using the `.xcode.env` file provided by the template.

The `.xcode.env` file contains an environment variable to export the path to the `node` executable in the `NODE_BINARY` variable.
This is the **suggested approach** to decouple the build infrastructure from the system version of `node`. You should customize this variable with your own path or your own `node` version manager, if it differs from the default.

On top of this, it's possible to add any other environment variable and to source the `.xcode.env` file in your build script phases. If you need to run script that requires some specific environment, this is the **suggested approach**: it allows to decouple the build phases from a specific environment.

If you are already using [NVM](https://nvm.sh/) (a command which helps you install and switch between versions of Node.js) and [zsh](https://ohmyz.sh/), you might want to move the code that initialize NVM from your `~/.zshrc` into a `~/.zshenv` file to help Xcode find your Node executable:

zsh

```codeBlockLines_AclH
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh" # This loads nvm

You might also want to ensure that all "shell script build phase" of your Xcode project, is using `/bin/zsh` as its shell.

### That's it!

#### Target OS [​](https://reactnative.dev/docs/next/set-up-your-environment\#target-os-1 "Direct link to Target OS")

## Installing dependencies

You will need Node, the React Native command line interface, a JDK, and Android Studio.

### Node, JDK

We recommend installing Node via [Chocolatey](https://chocolatey.org/install), a popular package manager for Windows.

It is recommended to use an LTS version of Node. If you want to be able to switch between different versions, you might want to install Node via [nvm-windows](https://github.com/coreybutler/nvm-windows), a Node version manager for Windows.

React Native also requires [Java SE Development Kit (JDK)](https://openjdk.java.net/projects/jdk/17/), which can be installed using Chocolatey as well.

Open an Administrator Command Prompt (right click Command Prompt and select "Run as Administrator"), then run the following command:

powershell

```codeBlockLines_AclH
choco install -y nodejs-lts microsoft-openjdk17

If you have already installed Node on your system, make sure it is Node 18 or newer. If you already have a JDK on your system, we recommend JDK17. You may encounter problems using higher JDK versions.

You can find additional installation options on [Node's Downloads page](https://nodejs.org/en/download/).

If you're using the latest version of Java Development Kit, you'll need to change the Gradle version of your project so it can recognize the JDK. You can do that by going to `{project root folder}\android\gradle\wrapper\gradle-wrapper.properties` and changing the `distributionUrl` value to upgrade the Gradle version. You can check out [here the latest releases of Gradle](https://gradle.org/releases/).

### Android development environment

#### 1\. Install Android Studio

- `Android SDK`
- `Android SDK Platform`
- `Android Virtual Device`
- If you are not already using Hyper-V: `Performance (Intel HAXM)` ( [See here for AMD or Hyper-V](https://android-developers.googleblog.com/2018/07/android-emulator-amd-processor-hyper-v.html))

#### 2\. Install the Android SDK

- `Android SDK Platform 35`
- `Intel x86 Atom_64 System Image` or `Google APIs Intel x86 Atom System Image`

Next, select the "SDK Tools" tab and check the box next to "Show Package Details" here as well. Look for and expand the `Android SDK Build-Tools` entry, then make sure that `35.0.0` is selected.

#### 3\. Configure the ANDROID\_HOME environment variable

1. Open the **Windows Control Panel.**
2. Click on **User Accounts,** then click **User Accounts** again
3. Click on **Change my environment variables**
4. Click on **New...** to create a new `ANDROID_HOME` user variable that points to the path to your Android SDK:

The SDK is installed, by default, at the following location:

```codeBlockLines_AclH
%LOCALAPPDATA%\Android\Sdk

You can find the actual location of the SDK in the Android Studio "Settings" dialog, under **Languages & Frameworks** → **Android SDK**.

Open a new Command Prompt window to ensure the new environment variable is loaded before proceeding to the next step.

1. Open powershell
2. Copy and paste **Get-ChildItem -Path Env:\** into powershell
3. Verify `ANDROID_HOME` has been added

#### 4\. Add platform-tools to Path

1. Open the **Windows Control Panel.**
2. Click on **User Accounts,** then click **User Accounts** again
3. Click on **Change my environment variables**
4. Select the **Path** variable.
5. Click **Edit.**
6. Click **New** and add the path to platform-tools to the list.

The default location for this folder is:

```codeBlockLines_AclH
%LOCALAPPDATA%\Android\Sdk\platform-tools

### Using a physical device

### Using a virtual device

If you don't have HAXM installed, click on "Install HAXM" or follow [these instructions](https://github.com/intel/haxm/wiki/Installation-Instructions-on-Windows) to set it up, then go

## Unsupported [​](https://reactnative.dev/docs/next/set-up-your-environment\#unsupported "Direct link to Unsupported")

A Mac is required to build projects with native code for iOS. You can use [Expo Go](https://expo.dev/go) from [Expo](https://reactnative.dev/docs/next/environment-setup#start-a-new-react-native-project-with-expo) to develop your app on your iOS device.

#### Target OS [​](https://reactnative.dev/docs/next/set-up-your-environment\#target-os-2 "Direct link to Target OS")

### Node

Follow the [installation instructions for your Linux distribution](https://nodejs.org/en/download/package-manager/) to install Node 20.19.4 or newer.

### Java Development Kit

React Native currently recommends version 17 of the Java SE Development Kit (JDK). You may encounter problems using higher JDK versions. You may download and install [OpenJDK](https://openjdk.java.net/) from [AdoptOpenJDK](https://adoptopenjdk.net/) or your system packager.

### Android development environment

#### 1\. Install Android Studio

#### 2\. Install the Android SDK

To do that, open Android Studio, click on "Configure" button and select "SDK Manager".

#### 3\. Configure the ANDROID\_HOME environment variable

Add the following lines to your `$HOME/.bash_profile` or `$HOME/.bashrc` (if you are using `zsh` then `~/.zprofile` or `~/.zshrc`) config file:

```codeBlockLines_AclH
export ANDROID_HOME=$HOME/Android/Sdk
export PATH=$PATH:$ANDROID_HOME/emulator
export PATH=$PATH:$ANDROID_HOME/platform-tools

`.bash_profile` is specific to `bash`. If you're using another shell, you will need to edit the appropriate shell-specific config file.

Type `source $HOME/.bash_profile` for `bash` or `source $HOME/.zprofile` to load the config into your current shell. Verify that ANDROID\_HOME has been set by running `echo $ANDROID_HOME` and the appropriate directories have been added to your path by running `echo $PATH`.

### Watchman

Follow the [Watchman installation guide](https://facebook.github.io/watchman/docs/install#buildinstall) to compile and install Watchman from source.

[Watchman](https://facebook.github.io/watchman/docs/install) is a tool by Facebook for watching changes in the filesystem. It is highly recommended you install it for better performance and increased compatibility in certain edge cases (translation: you may be able to get by without installing this, but your mileage may vary; installing this now may save you from a headache later).

### Using a physical device

### Using a virtual device

We recommend configuring [VM acceleration](https://developer.android.com/studio/run/emulator-acceleration.html#vm-linux) on your system to improve performance. Once you've followed those instructions, go

## Unsupported [​](https://reactnative.dev/docs/next/set-up-your-environment\#unsupported-1 "Direct link to Unsupported")

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/pressevent

[Skip to main content](https://reactnative.dev/docs/next/pressevent#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/pressevent)** (0.81).

Version: Next

On this page

`PressEvent` object is returned in the callback as a result of user press interaction, for example `onPress` in [Button](https://reactnative.dev/docs/next/button) component.

## Example [​](https://reactnative.dev/docs/next/pressevent\#example "Direct link to Example")

js

```codeBlockLines_AclH
{
changedTouches: [PressEvent],
identifier: 1,
locationX: 8,
locationY: 4.5,
pageX: 24,
pageY: 49.5,
target: 1127,
timestamp: 85131876.58868201,
touches: []
}

## Keys and values [​](https://reactnative.dev/docs/next/pressevent\#keys-and-values "Direct link to Keys and values")

### `changedTouches` [​](https://reactnative.dev/docs/next/pressevent\#changedtouches "Direct link to changedtouches")

Array of all PressEvents that have changed since the last event.

| Type | Optional |
| --- | --- |
| array of PressEvents | No |

### `force` iOS [​](https://reactnative.dev/docs/next/pressevent\#force-ios "Direct link to force-ios")

Amount of force used during the 3D Touch press. Returns the float value in range from `0.0` to `1.0`.

| Type | Optional |
| --- | --- |
| number | Yes |

### `identifier` [​](https://reactnative.dev/docs/next/pressevent\#identifier "Direct link to identifier")

Unique numeric identifier assigned to the event.

| Type | Optional |
| --- | --- |
| number | No |

### `locationX` [​](https://reactnative.dev/docs/next/pressevent\#locationx "Direct link to locationx")

Touch origin X coordinate inside touchable area (relative to the element).

### `locationY` [​](https://reactnative.dev/docs/next/pressevent\#locationy "Direct link to locationy")

Touch origin Y coordinate inside touchable area (relative to the element).

### `pageX` [​](https://reactnative.dev/docs/next/pressevent\#pagex "Direct link to pagex")

Touch origin X coordinate on the screen (relative to the root view).

### `pageY` [​](https://reactnative.dev/docs/next/pressevent\#pagey "Direct link to pagey")

Touch origin Y coordinate on the screen (relative to the root view).

### `target` [​](https://reactnative.dev/docs/next/pressevent\#target "Direct link to target")

The node id of the element receiving the PressEvent.

| Type | Optional |
| --- | --- |
| number, `null`, `undefined` | No |

### `timestamp` [​](https://reactnative.dev/docs/next/pressevent\#timestamp "Direct link to timestamp")

Timestamp value when a PressEvent occurred. Value is represented in milliseconds.

### `touches` [​](https://reactnative.dev/docs/next/pressevent\#touches "Direct link to touches")

Array of all current PressEvents on the screen.

## Used by [​](https://reactnative.dev/docs/next/pressevent\#used-by "Direct link to Used by")

- [`Button`](https://reactnative.dev/docs/next/button)
- [`PanResponder`](https://reactnative.dev/docs/next/panresponder)
- [`Pressable`](https://reactnative.dev/docs/next/pressable)
- [`ScrollView`](https://reactnative.dev/docs/next/scrollview)
- [`Text`](https://reactnative.dev/docs/next/text)
- [`TextInput`](https://reactnative.dev/docs/next/textinput)
- [`TouchableHighlight`](https://reactnative.dev/docs/next/touchablenativefeedback)
- [`TouchableOpacity`](https://reactnative.dev/docs/next/touchablewithoutfeedback)
- [`TouchableNativeFeedback`](https://reactnative.dev/docs/next/touchablenativefeedback)
- [`TouchableWithoutFeedback`](https://reactnative.dev/docs/next/touchablewithoutfeedback)
- [`View`](https://reactnative.dev/docs/next/view)

Is this page useful?

- [Example](https://reactnative.dev/docs/next/pressevent#example)
- [Keys and values](https://reactnative.dev/docs/next/pressevent#keys-and-values)
- [`changedTouches`](https://reactnative.dev/docs/next/pressevent#changedtouches)
- [`force` \\
iOS](https://reactnative.dev/docs/next/pressevent#force-ios)
- [`identifier`](https://reactnative.dev/docs/next/pressevent#identifier)
- [`locationX`](https://reactnative.dev/docs/next/pressevent#locationx)
- [`locationY`](https://reactnative.dev/docs/next/pressevent#locationy)
- [`pageX`](https://reactnative.dev/docs/next/pressevent#pagex)
- [`pageY`](https://reactnative.dev/docs/next/pressevent#pagey)
- [`target`](https://reactnative.dev/docs/next/pressevent#target)
- [`timestamp`](https://reactnative.dev/docs/next/pressevent#timestamp)
- [`touches`](https://reactnative.dev/docs/next/pressevent#touches)
- [Used by](https://reactnative.dev/docs/next/pressevent#used-by)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/javascript-environment

[Skip to main content](https://reactnative.dev/docs/next/javascript-environment#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/javascript-environment)** (0.81).

Version: Next

On this page

## JavaScript Runtime [​](https://reactnative.dev/docs/next/javascript-environment\#javascript-runtime "Direct link to JavaScript Runtime")

When using React Native, you're going to be running your JavaScript code in up to three environments:

- In most cases, React Native will use [Hermes](https://reactnative.dev/docs/next/hermes), an open-source JavaScript engine optimized for React Native.
- If Hermes is disabled, React Native will use [JavaScriptCore](https://trac.webkit.org/wiki/JavaScriptCore), the JavaScript engine that powers Safari. Note that on iOS, JavaScriptCore does not use JIT due to the absence of writable executable memory in iOS apps.
- When using Chrome debugging, all JavaScript code runs within Chrome itself, communicating with native code via WebSockets. Chrome uses [V8](https://v8.dev/) as its JavaScript engine.

While these environments are very similar, you may end up hitting some inconsistencies. It is best to avoid relying on specifics of any runtime.

## JavaScript Syntax Transformers [​](https://reactnative.dev/docs/next/javascript-environment\#javascript-syntax-transformers "Direct link to JavaScript Syntax Transformers")

Syntax transformers make writing code more enjoyable by allowing you to use new JavaScript syntax without having to wait for support on all interpreters.

React Native ships with the [Babel JavaScript compiler](https://babeljs.io/). Check [Babel documentation](https://babeljs.io/docs/plugins/#transform-plugins) on its supported transformations for more details.

A full list of React Native's enabled transformations can be found in [@react-native/babel-preset](https://github.com/facebook/react-native/tree/main/packages/react-native-babel-preset).

| Transformation | Code |
| --- | --- |
| ECMAScript 5 |

| ECMAScript 2015 (ES6) |

| ECMAScript 2016 (ES7) |

| ECMAScript 2017 (ES8) |

| ECMAScript 2018 (ES9) |

| ECMAScript 2019 (ES10) |

| ECMAScript 2020 (ES11) |

| ECMAScript 2022 (ES13) |

| Stage 1 Proposal |

| Miscellaneous |

## Polyfills [​](https://reactnative.dev/docs/next/javascript-environment\#polyfills "Direct link to Polyfills")

Many standard functions are also available on all the supported JavaScript runtimes.

#### Browser [​](https://reactnative.dev/docs/next/javascript-environment\#browser "Direct link to Browser")

- [CommonJS `require`](https://nodejs.org/docs/latest/api/modules.html)
- `[console.{log, warn, error, info, debug, trace, table, group, groupCollapsed, groupEnd}](https://developer.chrome.com/devtools/docs/console-api)`
- [`XMLHttpRequest`, `fetch`](https://reactnative.dev/docs/next/network#content)
- [`{set, clear}{Timeout, Interval, Immediate}, {request, cancel}AnimationFrame`](https://reactnative.dev/docs/next/timers#content)

#### ECMAScript 2015 (ES6) [​](https://reactnative.dev/docs/next/javascript-environment\#ecmascript-2015-es6 "Direct link to ECMAScript 2015 (ES6)")

- [`Array.from`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from)
- `Array.prototype.{ [find](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find), [findIndex](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex)}`
- [`Object.assign`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)
- `String.prototype.{ [startsWith](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith), [endsWith](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith), [repeat](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/repeat), [includes](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes)}`

#### ECMAScript 2016 (ES7) [​](https://reactnative.dev/docs/next/javascript-environment\#ecmascript-2016-es7 "Direct link to ECMAScript 2016 (ES7)")

- `Array.prototype. [includes](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/includes)`

#### ECMAScript 2017 (ES8) [​](https://reactnative.dev/docs/next/javascript-environment\#ecmascript-2017-es8 "Direct link to ECMAScript 2017 (ES8)")

- `Object.{ [entries](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/entries), [values](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/values)}`

#### Specific [​](https://reactnative.dev/docs/next/javascript-environment\#specific "Direct link to Specific")

- `__DEV__`

Is this page useful?

- [JavaScript Runtime](https://reactnative.dev/docs/next/javascript-environment#javascript-runtime)
- [JavaScript Syntax Transformers](https://reactnative.dev/docs/next/javascript-environment#javascript-syntax-transformers)
- [Polyfills](https://reactnative.dev/docs/next/javascript-environment#polyfills)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/optimizing-flatlist-configuration

[Skip to main content](https://reactnative.dev/docs/next/optimizing-flatlist-configuration#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/optimizing-flatlist-configuration)** (0.81).

Version: Next

On this page

## Terms [​](https://reactnative.dev/docs/next/optimizing-flatlist-configuration\#terms "Direct link to Terms")

- **VirtualizedList:** The component behind `FlatList` (React Native's implementation of the [`Virtual List`](https://bvaughn.github.io/react-virtualized/#/components/List) concept.)

- **Memory consumption:** How much information about your list is being stored in memory, which could lead to an app crash.

- **Responsiveness:** Application ability to respond to interactions. Low responsiveness, for instance, is when you touch on a component and it waits a bit to respond, instead of responding immediately as expected.

- **Blank areas:** When `VirtualizedList` can't render your items fast enough, you may enter a part of your list with non-rendered components that appear as blank space.

- **Viewport:** The visible area of content that is rendered to pixels.

- **Window:** The area in which items should be mounted, which is generally much larger than the viewport.

## Props [​](https://reactnative.dev/docs/next/optimizing-flatlist-configuration\#props "Direct link to Props")

Here are a list of props that can help to improve `FlatList` performance:

### `removeClippedSubviews` [​](https://reactnative.dev/docs/next/optimizing-flatlist-configuration\#removeclippedsubviews "Direct link to removeclippedsubviews")

| Type | Default |
| --- | --- |
| Boolean | `true` on Android, otherwise `false` |

If `true`, views that are outside of the viewport are detached from the native view hierarchy.

**Pros:** This reduces time spent on the main thread, and thus reduces the risk of dropped frames, by excluding views outside of the viewport from the native rendering and drawing traversals.

**Cons:** Be aware that this implementation can have bugs, such as missing content (mainly observed on iOS), especially if you are doing complex things with transforms and/or absolute positioning. Also note this does not save significant memory because the views are not deallocated, only detached.

### `maxToRenderPerBatch` [​](https://reactnative.dev/docs/next/optimizing-flatlist-configuration\#maxtorenderperbatch "Direct link to maxtorenderperbatch")

| Type | Default |
| --- | --- |
| Number | 10 |

It is a `VirtualizedList` prop that can be passed through `FlatList`. This controls the amount of items rendered per batch, which is the next chunk of items rendered on every scroll.

**Pros:** Setting a bigger number means less visual blank areas when scrolling (increases the fill rate).

**Cons:** More items per batch means longer periods of JavaScript execution potentially blocking other event processing, like presses, hurting responsiveness.

### `updateCellsBatchingPeriod` [​](https://reactnative.dev/docs/next/optimizing-flatlist-configuration\#updatecellsbatchingperiod "Direct link to updatecellsbatchingperiod")

| Type | Default |
| --- | --- |
| Number | 50 |

While `maxToRenderPerBatch` tells the amount of items rendered per batch, setting `updateCellsBatchingPeriod` tells your `VirtualizedList` the delay in milliseconds between batch renders (how frequently your component will be rendering the windowed items).

**Pros:** Combining this prop with `maxToRenderPerBatch` gives you the power to, for example, render more items in a less frequent batch, or less items in a more frequent batch.

**Cons:** Less frequent batches may cause blank areas, More frequent batches may cause responsiveness issues.

### initialNumToRender [​](https://reactnative.dev/docs/next/optimizing-flatlist-configuration\#initialnumtorender "Direct link to initialNumToRender")

The initial amount of items to render.

**Pros:** Define precise number of items that would cover the screen for every device. This can be a big performance boost for the initial render.

**Cons:** Setting a low `initialNumToRender` may cause blank areas, especially if it's too small to cover the viewport on initial render.

### `windowSize` [​](https://reactnative.dev/docs/next/optimizing-flatlist-configuration\#windowsize "Direct link to windowsize")

| Type | Default |
| --- | --- |
| Number | 21 |

The number passed here is a measurement unit where 1 is equivalent to your viewport height. The default value is 21 (10 viewports above, 10 below, and one in between).

**Pros:** Bigger `windowSize` will result in less chance of seeing blank space while scrolling. On the other hand, smaller `windowSize` will result in fewer items mounted simultaneously, saving memory.

**Cons:** For a bigger `windowSize`, you will have more memory consumption. For a lower `windowSize`, you will have a bigger chance of seeing blank areas.

## List items [​](https://reactnative.dev/docs/next/optimizing-flatlist-configuration\#list-items "Direct link to List items")

Below are some tips about list item components. They are the core of your list, so they need to be fast.

### Use basic components [​](https://reactnative.dev/docs/next/optimizing-flatlist-configuration\#use-basic-components "Direct link to Use basic components")

The more complex your components are, the slower they will render. Try to avoid a lot of logic and nesting in your list items. If you are reusing this list item component a lot in your app, create a component only for your big lists and make them with as little logic and nesting as possible.

### Use light components [​](https://reactnative.dev/docs/next/optimizing-flatlist-configuration\#use-light-components "Direct link to Use light components")

The heavier your components are, the slower they render. Avoid heavy images (use a cropped version or thumbnail for list items, as small as possible). Talk to your design team, use as little effects and interactions and information as possible in your list. Show them in your item's detail.

### Use `memo()` [​](https://reactnative.dev/docs/next/optimizing-flatlist-configuration\#use-memo "Direct link to use-memo")

`React.memo()` creates a memoized component that will be re-rendered only when the props passed to the component change. We can use this function to optimize the components in the FlatList.

tsx

```codeBlockLines_AclH
import React, {memo} from 'react';
import {View, Text} from 'react-native';

const MyListItem = memo(

return prevProps.title === nextProps.title;
},
);

export default MyListItem;

In this example, we have determined that MyListItem should be re-rendered only when the title changes. We passed the comparison function as the second argument to React.memo() so that the component is re-rendered only when the specified prop is changed. If the comparison function returns true, the component will not be re-rendered.

### Use cached optimized images [​](https://reactnative.dev/docs/next/optimizing-flatlist-configuration\#use-cached-optimized-images "Direct link to Use cached optimized images")

You can use the community packages (such as [react-native-fast-image](https://github.com/DylanVann/react-native-fast-image) from [@DylanVann](https://github.com/DylanVann)) for more performant images. Every image in your list is a `new Image()` instance. The faster it reaches the `loaded` hook, the faster your JavaScript thread will be free again.

### Use `getItemLayout` [​](https://reactnative.dev/docs/next/optimizing-flatlist-configuration\#use-getitemlayout "Direct link to use-getitemlayout")

If all your list item components have the same height (or width, for a horizontal list), providing the [getItemLayout](https://reactnative.dev/docs/next/flatlist#getitemlayout) prop removes the need for your `FlatList` to manage async layout calculations. This is a very desirable optimization technique.

If your components have dynamic size and you really need performance, consider asking your design team if they may think of a redesign in order to perform better.

### Use `keyExtractor` or `key` [​](https://reactnative.dev/docs/next/optimizing-flatlist-configuration\#use-keyextractor-or-key "Direct link to use-keyextractor-or-key")

You can set the [`keyExtractor`](https://reactnative.dev/docs/next/flatlist#keyextractor) to your `FlatList` component. This prop is used for caching and as the React `key` to track item re-ordering.

You can also use a `key` prop in your item component.

### Avoid anonymous function on `renderItem` [​](https://reactnative.dev/docs/next/optimizing-flatlist-configuration\#avoid-anonymous-function-on-renderitem "Direct link to avoid-anonymous-function-on-renderitem")

For functional components, move the `renderItem` function outside of the returned JSX. Also, ensure that it is wrapped in a `useCallback` hook to prevent it from being recreated each render.

For class components, move the `renderItem` function outside of the render function, so it won't recreate itself each time the render function is called.

```codeBlockLines_AclH

return (
// ...

// ...
);

Is this page useful?

- [Terms](https://reactnative.dev/docs/next/optimizing-flatlist-configuration#terms)
- [Props](https://reactnative.dev/docs/next/optimizing-flatlist-configuration#props)
- [`removeClippedSubviews`](https://reactnative.dev/docs/next/optimizing-flatlist-configuration#removeclippedsubviews)
- [`maxToRenderPerBatch`](https://reactnative.dev/docs/next/optimizing-flatlist-configuration#maxtorenderperbatch)
- [`updateCellsBatchingPeriod`](https://reactnative.dev/docs/next/optimizing-flatlist-configuration#updatecellsbatchingperiod)
- [initialNumToRender](https://reactnative.dev/docs/next/optimizing-flatlist-configuration#initialnumtorender)
- [`windowSize`](https://reactnative.dev/docs/next/optimizing-flatlist-configuration#windowsize)
- [List items](https://reactnative.dev/docs/next/optimizing-flatlist-configuration#list-items)
- [Use basic components](https://reactnative.dev/docs/next/optimizing-flatlist-configuration#use-basic-components)
- [Use light components](https://reactnative.dev/docs/next/optimizing-flatlist-configuration#use-light-components)
- [Use `memo()`](https://reactnative.dev/docs/next/optimizing-flatlist-configuration#use-memo)
- [Use cached optimized images](https://reactnative.dev/docs/next/optimizing-flatlist-configuration#use-cached-optimized-images)
- [Use `getItemLayout`](https://reactnative.dev/docs/next/optimizing-flatlist-configuration#use-getitemlayout)
- [Use `keyExtractor` or `key`](https://reactnative.dev/docs/next/optimizing-flatlist-configuration#use-keyextractor-or-key)
- [Avoid anonymous function on `renderItem`](https://reactnative.dev/docs/next/optimizing-flatlist-configuration#avoid-anonymous-function-on-renderitem)

Twitter Widget Iframe

# How are we doing?

Help us make the site even better by answering a few quick questions!

[No Thanks](https://reactnative.dev/docs/next/optimizing-flatlist-configuration#) [Give Feedback](https://www.surveymonkey.com/r/CCPP62S)

[powered by](https://www.surveymonkey.com/?ut_source=powered_by&ut_source2=new_website_collector)

---

# https://reactnative.dev/docs/next/the-new-architecture/using-codegen

[Skip to main content](https://reactnative.dev/docs/next/the-new-architecture/using-codegen#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/the-new-architecture/using-codegen)** (0.81).

Version: Next

On this page

This guide teaches how to:

- Configure **Codegen**.
- Invoke it manually for each platform.

It also describes the generated code.

## Prerequisites [​](https://reactnative.dev/docs/next/the-new-architecture/using-codegen\#prerequisites "Direct link to Prerequisites")

You always need a React Native app to generate the code properly, even when invoking the **Codegen** manually.

The **Codegen** process is tightly coupled with the build of the app, and the scripts are located in the `react-native` NPM package.

For the sake of this guide, create a project using the React Native CLI as follows:

shell

```codeBlockLines_AclH
npx @react-native-community/cli@latest init SampleApp --version latest

**Codegen** is used to generate the glue-code for your custom modules or components. See the guides for Turbo Native Modules and Fabric Native Components for more details on how to create them.

## Configuring **Codegen** [​](https://reactnative.dev/docs/next/the-new-architecture/using-codegen\#configuring-codegen "Direct link to configuring-codegen")

**Codegen** can be configured in your app by modifying the `package.json` file. **Codegen** is controlled by a custom field called `codegenConfig`.

package.json

```codeBlockLines_AclH
"codegenConfig": {

"android": {

},
"ios": {
"modules": {
"TestModule": {

"unstableRequiresMainQueueSetup": false,
"conformsToProtocols": ["RCTImageURLLoader", "RCTURLRequestHandler", "RCTImageDataDecoder"],
}
},
"components": {
"TestComponent": {

}
}
}
},

You can add this snippet to your app and customize the various fields:

- `name:` Name of the codegen config. This will customize the codegen output: the filenames, and the code.
- `type:`
- `modules:` Only generate code for modules.
- `components:` Only generate code for components.
- `all`: Generate code for everything.
- `jsSrcsDir`: The root folder where all your specs live.
- `android`: Codegen configuration for Android (all optional):
- `.javaPackageName`: Configure the package name of the Android Java codegen output.
- `ios`: Codegen configuration for iOS (all optional):
- `.modules[moduleName]:`
- `.className`: This module's ObjC class. Or, if it's a [C++-only module](https://reactnative.dev/docs/next/the-new-architecture/pure-cxx-modules), its `RCTModuleProvider` class.
- `.unstableRequiresMainQueueSetup`: Initialize this module on the UI Thread, before running any JavaScript.
- `.conformsToProtocols`: Annotate which of these protocols this module conforms to any of the following protocols: [`RCTImageURLLoader`](https://github.com/facebook/react-native/blob/00d5caee9921b6c10be8f7d5b3903c6afe8dbefa/packages/react-native/Libraries/Image/RCTImageURLLoader.h#L26-L81), [`RCTURLRequestHandler`](https://github.com/facebook/react-native/blob/00d5caee9921b6c10be8f7d5b3903c6afe8dbefa/packages/react-native/React/Base/RCTURLRequestHandler.h#L11-L52), [`RCTImageDataDecoder`](https://github.com/facebook/react-native/blob/00d5caee9921b6c10be8f7d5b3903c6afe8dbefa/packages/react-native/Libraries/Image/RCTImageDataDecoder.h#L15-L53).
- `.components[componentName]`:

When **Codegen** runs, it searches among all the dependencies of the app, looking for JS files that respects some specific conventions, and it generates the required code:

- Turbo Native Modules require that the spec files are prefixed with `Native`. For example, `NativeLocalStorage.ts` is a valid name for a spec file.
- Native Fabric Components require that the spec files are suffixed with `NativeComponent`. For example, `WebViewNativeComponent.ts` is a valid name for a spec file.

## Running **Codegen** [​](https://reactnative.dev/docs/next/the-new-architecture/using-codegen\#running-codegen "Direct link to running-codegen")

The rest of this guide assumes that you have a Native Turbo Module, a Native Fabric Component or both already set up in your project. We also assume that you have valid specification files in the `jsSrcsDir` specified in the `package.json`.

### Android [​](https://reactnative.dev/docs/next/the-new-architecture/using-codegen\#android "Direct link to Android")

**Codegen** for Android is integrated with the React Native Gradle Plugin (RNGP). The RNGP contains a task that can be invoked that reads the configurations defined in the `package.json` file and execute **Codegen**. To run the gradle task, first navigate inside the `android` folder of your project. Then run:

bash

```codeBlockLines_AclH
./gradlew generateCodegenArtifactsFromSchema

#### The Generated Code [​](https://reactnative.dev/docs/next/the-new-architecture/using-codegen\#the-generated-code "Direct link to The Generated Code")

After running the gradle command above, you will find the codegen code in the `SampleApp/android/app/build` folder. The structure will look like this:

```codeBlockLines_AclH
build
└── generated
└── source
└── codegen
├── java
│ └── com
│ ├── facebook
│ │ └── react
│ │ └── viewmanagers

│ └── sampleapp
│ └── NativeLocalStorageSpec.java
├── jni

│ ├── CMakeLists.txt
│ └── react
│ └── renderer
│ └── components

│ ├── ComponentDescriptors.cpp
│ ├── ComponentDescriptors.h
│ ├── EventEmitters.cpp
│ ├── EventEmitters.h
│ ├── Props.cpp
│ ├── Props.h
│ ├── ShadowNodes.cpp
│ ├── ShadowNodes.h
│ ├── States.cpp
│ └── States.h
└── schema.json

The generated code is split in two folders:

- `java` which contains the platform specific code
- `jni` which contains the C++ code required to let JS and Java interact correctly.

In the `java` folder, you can find the Fabric Native component generated code in the `com/facebook/viewmanagers` subfolder.

In the folder whose name was set up in the `codegenConfig.android.javaPackageName`, instead, you can find the abstract class that a Turbo Native Module has to implement to carry out its tasks.

In the `jni` folder, finally, there is all the boilerplate code to connect JS to Android.

This structure has been generated by using the value `all` for the `codegenConfig.type` field. If you use the value `modules`, expect to see no `react/renderer/components/` folder. If you use the value `components`, expect not to see any of the other files.

### iOS [​](https://reactnative.dev/docs/next/the-new-architecture/using-codegen\#ios "Direct link to iOS")

**Codegen** for iOS relies on some Node scripts that are invoked during the build process. The scripts are located in the `SampleApp/node_modules/react-native/scripts/` folder.

The main script is the `generate-codegen-artifacts.js` script. To invoke the script, you can run this command from the root folder of your app:

```codeBlockLines_AclH
node node_modules/react-native/scripts/generate-codegen-artifacts.js

Usage: generate-codegen-artifacts.js -p [path to app] -t [target platform] -o [output path]

Options:
--help Show help [boolean]
--version Show version number [boolean]
-p, --path Path to the React Native project root. [required]
-t, --targetPlatform Target platform. Supported values: "android", "ios",
"all". [required]
-o, --outputPath Path where generated artifacts will be output to.

where:

- `--path` is the path to the root folder of your app.
- `--outputPath` is the destination where **Codegen** will write the generated files.
- `--targetPlatform` is the platform you'd like to generate the code for.

#### The Generated Code [​](https://reactnative.dev/docs/next/the-new-architecture/using-codegen\#the-generated-code-1 "Direct link to The Generated Code")

Running the script with these arguments:

```codeBlockLines_AclH
node node_modules/react-native/scripts/generate-codegen-artifacts.js \
--path . \
--outputPath ios/ \
--targetPlatform ios

Will generate these files in the `ios/build` folder:

```codeBlockLines_AclH
build
└── generated
└── ios

├── FBReactNativeSpec
│ ├── FBReactNativeSpec-generated.mm
│ └── FBReactNativeSpec.h
├── FBReactNativeSpecJSI-generated.cpp
├── FBReactNativeSpecJSI.h
├── RCTModulesConformingToProtocolsProvider.h
├── RCTModulesConformingToProtocolsProvider.mm
└── react
└── renderer
└── components

├── ComponentDescriptors.h
├── EventEmitters.cpp
├── EventEmitters.h
├── Props.cpp
├── Props.h
├── RCTComponentViewHelpers.h
├── ShadowNodes.cpp
├── ShadowNodes.h
├── States.cpp
└── States.h

Part of these generated files are used by React Native in the Core. Then there is a set of files which contains the same name you specified in the package.json `codegenConfig.name` field.

Is this page useful?

- [Prerequisites](https://reactnative.dev/docs/next/the-new-architecture/using-codegen#prerequisites)
- [Configuring **Codegen**](https://reactnative.dev/docs/next/the-new-architecture/using-codegen#configuring-codegen)
- [Running **Codegen**](https://reactnative.dev/docs/next/the-new-architecture/using-codegen#running-codegen)
- [Android](https://reactnative.dev/docs/next/the-new-architecture/using-codegen#android)
- [iOS](https://reactnative.dev/docs/next/the-new-architecture/using-codegen#ios)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/legacy/direct-manipulation

[Skip to main content](https://reactnative.dev/docs/next/legacy/direct-manipulation#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/legacy/direct-manipulation)** (0.81).

Version: Next

On this page

It is sometimes necessary to make changes directly to a component without using state/props to trigger a re-render of the entire subtree. When using React in the browser for example, you sometimes need to directly modify a DOM node, and the same is true for views in mobile apps. `setNativeProps` is the React Native equivalent to setting properties directly on a DOM node.

caution

Use `setNativeProps` when frequent re-rendering creates a performance bottleneck!

Direct manipulation will not be a tool that you reach for frequently. You will typically only be using it for creating continuous animations to avoid the overhead of rendering the component hierarchy and reconciling many views.
`setNativeProps` is imperative and stores state in the native layer (DOM, UIView, etc.) and not within your React components, which makes your code more difficult to reason about.

Before you use it, try to solve your problem with `setState` and [`shouldComponentUpdate`](https://react.dev/reference/react/Component#shouldcomponentupdate).

## setNativeProps with TouchableOpacity [​](https://reactnative.dev/docs/next/legacy/direct-manipulation\#setnativeprops-with-touchableopacity "Direct link to setNativeProps with TouchableOpacity")

[TouchableOpacity](https://github.com/facebook/react-native/blob/main/packages/react-native/Libraries/Components/Touchable/TouchableOpacity.js) uses `setNativeProps` internally to update the opacity of its child component:

tsx

```codeBlockLines_AclH

// Redacted: animation related code
viewRef.current.setNativeProps({
opacity: value,
});
}, []);

This allows us to write the following code and know that the child will have its opacity updated in response to taps, without the child having any knowledge of that fact or requiring any changes to its implementation:

Let's imagine that `setNativeProps` was not available. One way that we might implement it with that constraint is to store the opacity value in the state, then update that value whenever `onPress` is fired:

```codeBlockLines_AclH
const [buttonOpacity, setButtonOpacity] = useState(1);
return (
<TouchableOpacity

This is computationally intensive compared to the original example - React needs to re-render the component hierarchy each time the opacity changes, even though other properties of the view and its children haven't changed. Usually this overhead isn't a concern but when performing continuous animations and responding to gestures, judiciously optimizing your components can improve your animations' fidelity.

If you look at the implementation of `setNativeProps` in [NativeMethodsMixin](https://github.com/facebook/react-native/blob/main/packages/react-native/Libraries/Renderer/implementations/ReactNativeRenderer-prod.js) you will notice that it is a wrapper around `RCTUIManager.updateView` \- this is the exact same function call that results from re-rendering - see [receiveComponent in ReactNativeBaseComponent](https://github.com/facebook/react-native/blob/fb2ec1ea47c53c2e7b873acb1cb46192ac74274e/Libraries/Renderer/oss/ReactNativeRenderer-prod.js#L5793-L5813).

## Composite components and setNativeProps [​](https://reactnative.dev/docs/next/legacy/direct-manipulation\#composite-components-and-setnativeprops "Direct link to Composite components and setNativeProps")

Composite components are not backed by a native view, so you cannot call `setNativeProps` on them. Consider this example:

- TypeScript
- JavaScript

If you run this you will immediately see this error: `Touchable child must either be native or forward setNativeProps to a native component`. This occurs because `MyButton` isn't directly backed by a native view whose opacity should be set. You can think about it like this: if you define a component with `createReactClass` you would not expect to be able to set a style prop on it and have that work - you would need to pass the style prop down to a child, unless you are wrapping a native component. Similarly, we are going to forward `setNativeProps` to a native-backed child component.

#### Forward setNativeProps to a child [​](https://reactnative.dev/docs/next/legacy/direct-manipulation\#forward-setnativeprops-to-a-child "Direct link to Forward setNativeProps to a child")

You can now use `MyButton` inside of `TouchableOpacity`!

You may have noticed that we passed all of the props down to the child view using `{...props}`. The reason for this is that `TouchableOpacity` is actually a composite component, and so in addition to depending on `setNativeProps` on its child, it also requires that the child perform touch handling. To do this, it passes on [various props](https://reactnative.dev/docs/next/view#onmoveshouldsetresponder) that call

Another very common use case of `setNativeProps` is to edit the value of the TextInput. The `controlled` prop of TextInput can sometimes drop characters when the `bufferDelay` is low and the user types very quickly. Some developers prefer to skip this prop entirely and instead use `setNativeProps` to directly manipulate the TextInput value when necessary. For example, the following code demonstrates editing the input when you tap a button:

You can use the [`clear`](https://reactnative.dev/docs/next/textinput#clear) method to clear the `TextInput` which clears the current input text using the same approach.

## Avoiding conflicts with the render function [​](https://reactnative.dev/docs/next/legacy/direct-manipulation\#avoiding-conflicts-with-the-render-function "Direct link to Avoiding conflicts with the render function")

If you update a property that is also managed by the render function, you might end up with some unpredictable and confusing bugs because anytime the component re-renders and that property changes, whatever value was previously set from `setNativeProps` will be completely ignored and overridden.

## setNativeProps & shouldComponentUpdate [​](https://reactnative.dev/docs/next/legacy/direct-manipulation\#setnativeprops--shouldcomponentupdate "Direct link to setNativeProps & shouldComponentUpdate")

By [intelligently applying `shouldComponentUpdate`](https://react.dev/reference/react/Component#shouldcomponentupdate) you can avoid the unnecessary overhead involved in reconciling unchanged component subtrees, to the point where it may be performant enough to use `setState` instead of `setNativeProps`.

## Other native methods [​](https://reactnative.dev/docs/next/legacy/direct-manipulation\#other-native-methods "Direct link to Other native methods")

The methods described here are available on most of the default components provided by React Native. Note, however, that they are _not_ available on composite components that aren't directly backed by a native view. This will generally include most components that you define in your own app.

### measure(callback) [​](https://reactnative.dev/docs/next/legacy/direct-manipulation\#measurecallback "Direct link to measure(callback)")

Determines the location on screen, width, and height in the viewport of the given view and returns the values via an async callback. If successful, the callback will be called with the following arguments:

- x
- y
- width
- height
- pageX
- pageY

Note that these measurements are not available until after the rendering has been completed in native. If you need the measurements as soon as possible and you don't need `pageX` and `pageY`, consider using the [`onLayout`](https://reactnative.dev/docs/next/view#onlayout) property instead.

Also the width and height returned by `measure()` are the width and height of the component in the viewport. If you need the actual size of the component, consider using the [`onLayout`](https://reactnative.dev/docs/next/view#onlayout) property instead.

### measureInWindow(callback) [​](https://reactnative.dev/docs/next/legacy/direct-manipulation\#measureinwindowcallback "Direct link to measureInWindow(callback)")

Determines the location of the given view in the window and returns the values via an async callback. If the React root view is embedded in another native view, this will give you the absolute coordinates. If successful, the callback will be called with the following arguments:

- x
- y
- width
- height

### measureLayout(relativeToNativeComponentRef, onSuccess, onFail) [​](https://reactnative.dev/docs/next/legacy/direct-manipulation\#measurelayoutrelativetonativecomponentref-onsuccess-onfail "Direct link to measureLayout(relativeToNativeComponentRef, onSuccess, onFail)")

Like `measure()`, but measures the view relative to an ancestor, specified with `relativeToNativeComponentRef` reference. This means that the returned coordinates are relative to the origin `x`, `y` of the ancestor view.

note

This method can also be called with a `relativeToNativeNode` handler (instead of reference), but this variant is obsolete with the new architecture.

### focus() [​](https://reactnative.dev/docs/next/legacy/direct-manipulation\#focus "Direct link to focus()")

Requests focus for the given input or view. The exact behavior triggered will depend on the platform and type of view.

### blur() [​](https://reactnative.dev/docs/next/legacy/direct-manipulation\#blur "Direct link to blur()")

Removes focus from an input or view. This is the opposite of `focus()`.

Is this page useful?

- [setNativeProps with TouchableOpacity](https://reactnative.dev/docs/next/legacy/direct-manipulation#setnativeprops-with-touchableopacity)
- [Composite components and setNativeProps](https://reactnative.dev/docs/next/legacy/direct-manipulation#composite-components-and-setnativeprops)
- [setNativeProps to edit TextInput value](https://reactnative.dev/docs/next/legacy/direct-manipulation#setnativeprops-to-edit-textinput-value)
- [Avoiding conflicts with the render function](https://reactnative.dev/docs/next/legacy/direct-manipulation#avoiding-conflicts-with-the-render-function)
- [setNativeProps & shouldComponentUpdate](https://reactnative.dev/docs/next/legacy/direct-manipulation#setnativeprops--shouldcomponentupdate)
- [Other native methods](https://reactnative.dev/docs/next/legacy/direct-manipulation#other-native-methods)
- [measure(callback)](https://reactnative.dev/docs/next/legacy/direct-manipulation#measurecallback)
- [measureInWindow(callback)](https://reactnative.dev/docs/next/legacy/direct-manipulation#measureinwindowcallback)
- [measureLayout(relativeToNativeComponentRef, onSuccess, onFail)](https://reactnative.dev/docs/next/legacy/direct-manipulation#measurelayoutrelativetonativecomponentref-onsuccess-onfail)
- [focus()](https://reactnative.dev/docs/next/legacy/direct-manipulation#focus)
- [blur()](https://reactnative.dev/docs/next/legacy/direct-manipulation#blur)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/shadow-props

[Skip to main content](https://reactnative.dev/docs/next/shadow-props#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/shadow-props)** (0.81).

Version: Next

On this page

- TypeScript
- JavaScript

* * *

# Reference

There are 3 sets of shadow APIs in React Native:

- `boxShadow`: A View style prop and a spec-compliant implementation of the [web style prop of the same name](https://developer.mozilla.org/en-US/docs/Web/CSS/box-shadow).
- `dropShadow`: A specific filter function available as part of the [`filter`](https://reactnative.dev/docs/next/view-style-props#filter) View style prop.
- Various `shadow` props ( `shadowColor`, `shadowOffset`, `shadowOpacity`, `shadowRadius`): These map directly to their native counterparts exposed by the platform-level APIs.

The difference between `dropShadow` and `boxShadow` are as follows:

- `dropShadow` exists as part of `filter`, whereas `boxShadow` is a standalone style prop.
- `dropShadow` is an alpha mask, so only pixels with a positive alpha value will "cast" a shadow. `boxShadow` will cast around the border box of the element no matter it's contents (unless it is inset).
- `dropShadow` is only available on Android, `boxShadow` is available on iOS and Android.
- `dropShadow` cannot be inset like `boxShadow`.
- `dropShadow` does not have the `spreadDistance` argument like `boxShadow`.

Both `boxShadow` and `dropShadow` are generally more capable than the `shadow` props. The `shadow` props, however, map to native platform-level APIs, so if you only need a straightforward shadow these props are recommended. Note that only `shadowColor` works on both Android and iOS, all other `shadow` props only work on iOS.

## Props [​](https://reactnative.dev/docs/next/shadow-props\#props "Direct link to Props")

### `boxShadow` [​](https://reactnative.dev/docs/next/shadow-props\#boxshadow "Direct link to boxshadow")

See [View Style Props](https://reactnative.dev/docs/next/view-style-props#boxshadow) for documentation.

### `dropShadow` Android [​](https://reactnative.dev/docs/next/shadow-props\#dropshadow-android "Direct link to dropshadow-android")

See [View Style Props](https://reactnative.dev/docs/next/view-style-props#filter) for documentation.

### `shadowColor` [​](https://reactnative.dev/docs/next/shadow-props\#shadowcolor "Direct link to shadowcolor")

Sets the drop shadow color.

This property will only work on Android API 28 and above. For similar functionality on lower Android APIs, use the [`elevation` property](https://reactnative.dev/docs/next/view-style-props#elevation-android).

| Type |
| --- |
| [color](https://reactnative.dev/docs/next/colors) |

### `shadowOffset` iOS [​](https://reactnative.dev/docs/next/shadow-props\#shadowoffset-ios "Direct link to shadowoffset-ios")

Sets the drop shadow offset.

| Type |
| --- |
| object: `{width: number,height: number}` |

### `shadowOpacity` iOS [​](https://reactnative.dev/docs/next/shadow-props\#shadowopacity-ios "Direct link to shadowopacity-ios")

Sets the drop shadow opacity (multiplied by the color's alpha component).

| Type |
| --- |
| number |

### `shadowRadius` iOS [​](https://reactnative.dev/docs/next/shadow-props\#shadowradius-ios "Direct link to shadowradius-ios")

Sets the drop shadow blur radius.

Is this page useful?

- [Props](https://reactnative.dev/docs/next/shadow-props#props)
- [`boxShadow`](https://reactnative.dev/docs/next/shadow-props#boxshadow)
- [`dropShadow` \\
Android](https://reactnative.dev/docs/next/shadow-props#dropshadow-android)
- [`shadowColor`](https://reactnative.dev/docs/next/shadow-props#shadowcolor)
- [`shadowOffset` \\
iOS](https://reactnative.dev/docs/next/shadow-props#shadowoffset-ios)
- [`shadowOpacity` \\
iOS](https://reactnative.dev/docs/next/shadow-props#shadowopacity-ios)
- [`shadowRadius` \\
iOS](https://reactnative.dev/docs/next/shadow-props#shadowradius-ios)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/platformcolor

[Skip to main content](https://reactnative.dev/docs/next/platformcolor#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/platformcolor)** (0.81).

Version: Next

On this page

js

```codeBlockLines_AclH
PlatformColor(color1, [color2, ...colorN]);

You can use the `PlatformColor` function to access native colors on the target platform by supplying the native color’s corresponding string value. You pass a string to the `PlatformColor` function and, provided it exists on that platform, it will return the corresponding native color, which you can apply in any part of your application.

If you pass more than one string value to the `PlatformColor` function, it will treat the first value as the default and the rest as fallback.

```codeBlockLines_AclH
PlatformColor('bogusName', 'linkColor');

Since native colors can be sensitive to themes and/or high contrast, this platform specific logic also translates inside your components.

### Supported colors [​](https://reactnative.dev/docs/next/platformcolor\#supported-colors "Direct link to Supported colors")

For a full list of the types of system colors supported, see:

- Android:
- [R.attr](https://developer.android.com/reference/android/R.attr) \- `?attr` prefix
- [R.color](https://developer.android.com/reference/android/R.color) \- `@android:color` prefix
- iOS (Objective-C and Swift notations):
- [UIColor Standard Colors](https://developer.apple.com/documentation/uikit/uicolor/standard_colors)
- [UIColor UI Element Colors](https://developer.apple.com/documentation/uikit/uicolor/ui_element_colors)

#### Developer notes [​](https://reactnative.dev/docs/next/platformcolor\#developer-notes "Direct link to Developer notes")

- Web

info

If you’re familiar with design systems, another way of thinking about this is that `PlatformColor` lets you tap into the local design system's color tokens so your app can blend right in!

## Example [​](https://reactnative.dev/docs/next/platformcolor\#example "Direct link to Example")

PlatformColor Example - Snack

# PlatformColor Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {Platform, PlatformColor, StyleSheet, Text} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const styles = StyleSheet.create({
label: {
padding: 16,
fontWeight: '800',
...Platform.select({
ios: {
color: PlatformColor('label'),
backgroundColor: PlatformColor('systemTealColor'),
},
android: {
color: PlatformColor('?android:attr/textColor'),
backgroundColor: PlatformColor('@android:color/holo\_blue\_bright'),
},
default: {color: 'black'},
}),
},
container: {
flex: 1,
alignItems: 'center',
justifyContent: 'center',
},
});

export default App;

const styles = StyleSheet.create({
label: {
padding: 16,
fontWeight: '800',
...Platform.select({
ios: {
color: PlatformColor('label'),
backgroundColor: PlatformColor('systemTealColor'),
},
android: {
color: PlatformColor('?android:attr/textColor'),
backgroundColor: PlatformColor('@android:color/holo_blue_bright'),
},
default: {color: 'black'},
}),
},
container: {
flex: 1,
alignItems: 'center',
justifyContent: 'center',
},
});

### Download [Expo Go](https://expo.dev/client) and scan the QR code to get started.

exp://u.expo.dev/933fd9c0-1666-11e7-afca-d980795c5824?runtime-version=exposdk%3A53.0.0&channel-name=production&snack-channel=LnAAtlRqb3

### Connected devices

0

[Log in](https://expo.dev/login) to open this Snack from Expo Go on your device or simulator.

PreviewMy DeviceAndroidiOS

The string value provided to the `PlatformColor` function must match the string as it exists on the native platform where the app is running. In order to avoid runtime errors, the function should be wrapped in a platform check, either through a `Platform.OS === 'platform'` or a `Platform.select()`, as shown on the example above.

note

You can find a complete example that demonstrates proper, intended use of `PlatformColor` in [PlatformColorExample.js](https://github.com/facebook/react-native/blob/main/packages/rn-tester/js/examples/PlatformColor/PlatformColorExample.js).

Is this page useful?

- [Supported colors](https://reactnative.dev/docs/next/platformcolor#supported-colors)
- [Example](https://reactnative.dev/docs/next/platformcolor#example)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/other-debugging-methods

[Skip to main content](https://reactnative.dev/docs/next/other-debugging-methods#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/other-debugging-methods)** (0.81).

Version: Next

On this page

This page covers how to use legacy JavaScript debugging methods. If you are getting started with a new React Native or Expo app, we recommend using [React Native DevTools](https://reactnative.dev/docs/next/react-native-devtools).

## Safari Developer Tools (direct JSC debugging) [​](https://reactnative.dev/docs/next/other-debugging-methods\#safari-developer-tools-direct-jsc-debugging "Direct link to Safari Developer Tools (direct JSC debugging)")

You can use Safari to debug the iOS version of your app when using [JavaScriptCore](https://trac.webkit.org/wiki/JavaScriptCore) (JSC) as your app's runtime.

3. Find your device under the Develop menu, and select the "JSContext" item from the submenu. This will open Safari's Web Inspector, which includes Console and Sources panels similar to Chrome DevTools.

tip

While source maps may not be enabled by default, you can follow [this guide](https://blog.nparashuram.com/2019/10/debugging-react-native-ios-apps-with.html) or [video](https://www.youtube.com/watch?v=GrGqIIz51k4) to enable them and set break points at the right places in the source code.

Every time the app is reloaded, a new JSContext is created. Choosing "Automatically Show Web Inspectors for JSContexts" saves you from having to select the latest JSContext manually.

## Remote JavaScript Debugging (removed) [​](https://reactnative.dev/docs/next/other-debugging-methods\#remote-javascript-debugging-removed "Direct link to Remote JavaScript Debugging (removed)")

Important

Remote JavaScript Debugging has been removed as of React Native 0.79. See the original [deprecation announcement](https://github.com/react-native-community/discussions-and-proposals/discussions/734).

If you are on an older version of React Native, please go to the docs [for your version](https://reactnative.dev/versions).

Is this page useful?

- [Safari Developer Tools (direct JSC debugging)](https://reactnative.dev/docs/next/other-debugging-methods#safari-developer-tools-direct-jsc-debugging)
- [Remote JavaScript Debugging (removed)](https://reactnative.dev/docs/next/other-debugging-methods#remote-javascript-debugging-removed)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/targetevent

[Skip to main content](https://reactnative.dev/docs/next/targetevent#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/targetevent)** (0.81).

Version: Next

On this page

`TargetEvent` object is returned in the callback as a result of focus change, for example `onFocus` or `onBlur` in the [TextInput](https://reactnative.dev/docs/next/textinput) component.

## Example [​](https://reactnative.dev/docs/next/targetevent\#example "Direct link to Example")

```codeBlockLines_AclH
{
target: 1127
}

## Keys and values [​](https://reactnative.dev/docs/next/targetevent\#keys-and-values "Direct link to Keys and values")

### `target` [​](https://reactnative.dev/docs/next/targetevent\#target "Direct link to target")

The node id of the element receiving the TargetEvent.

| Type | Optional |
| --- | --- |
| number, `null`, `undefined` | No |

## Used by [​](https://reactnative.dev/docs/next/targetevent\#used-by "Direct link to Used by")

- [`TextInput`](https://reactnative.dev/docs/next/textinput)
- [`TouchableWithoutFeedback`](https://reactnative.dev/docs/next/touchablewithoutfeedback)

Is this page useful?

- [Example](https://reactnative.dev/docs/next/targetevent#example)
- [Keys and values](https://reactnative.dev/docs/next/targetevent#keys-and-values)
- [`target`](https://reactnative.dev/docs/next/targetevent#target)
- [Used by](https://reactnative.dev/docs/next/targetevent#used-by)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/react-node

[Skip to main content](https://reactnative.dev/docs/next/react-node#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/react-node)** (0.81).

Version: Next

A React Node is one of the following types:

- Boolean (which is ignored)
- `null` or `undefined` (which is ignored)
- Number
- String
- A React element (result of JSX)
- An array of any of the above, possibly a nested one

Is this page useful?

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/performance

[Skip to main content](https://reactnative.dev/docs/next/performance#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/performance)** (0.81).

Version: Next

On this page

A compelling reason to use React Native instead of WebView-based tools is to achieve at least 60 frames per second and provide a native look and feel to your apps. Whenever feasible, we aim for React Native to handle optimizations automatically, allowing you to focus on your app without worrying about performance. However, there are certain areas where we haven't quite reached that level yet, and others where React Native (similar to writing native code directly) cannot determine the best optimization approach for you. In such cases, manual intervention becomes necessary. We strive to deliver buttery-smooth UI performance by default, but there may be instances where that isn't possible.

This guide is intended to teach you some basics to help you to [troubleshoot performance issues](https://reactnative.dev/docs/next/profiling), as well as discuss [common sources of problems and their suggested solutions](https://reactnative.dev/docs/next/performance#common-sources-of-performance-problems).

## What you need to know about frames [​](https://reactnative.dev/docs/next/performance\#what-you-need-to-know-about-frames "Direct link to What you need to know about frames")

Your grandparents' generation called movies ["moving pictures"](https://www.youtube.com/watch?v=F1i40rnpOsA) for a reason: realistic motion in video is an illusion created by quickly changing static images at a consistent speed. We refer to each of these images as frames. The number of frames that is displayed each second has a direct impact on how smooth and ultimately life-like a video (or user interface) seems to be. iOS and Android devices display at least 60 frames per second, which gives you and the UI system at most 16.67ms to do all of the work needed to generate the static image (frame) that the user will see on the screen for that interval. If you are unable to do the work necessary to generate that frame within the allotted time slot, then you will "drop a frame" and the UI will appear unresponsive.

Now to confuse the matter a little bit, open up the [Dev Menu](https://reactnative.dev/docs/next/debugging#opening-the-dev-menu) in your app and toggle `Show Perf Monitor`. You will notice that there are two different frame rates.

### JS frame rate (JavaScript thread) [​](https://reactnative.dev/docs/next/performance\#js-frame-rate-javascript-thread "Direct link to JS frame rate (JavaScript thread)")

For most React Native applications, your business logic will run on the JavaScript thread. This is where your React application lives, API calls are made, touch events are processed, and more. Updates to native-backed views are batched and sent over to the native side at the end of each iteration of the event loop, before the frame deadline (if all goes well). If the JavaScript thread is unresponsive for a frame, it will be considered a dropped frame. For example, if you were to set a new state on the root component of a complex application and it resulted in re-rendering computationally expensive component subtrees, it's conceivable that this might take 200ms and result in 12 frames being dropped. Any animations controlled by JavaScript would appear to freeze during that time. If enough frames are dropped, the user will feel it.

An example is responding to touches: if you are doing work across multiple frames on the JavaScript thread, you might notice a delay in responding to `TouchableOpacity`, for example. This is because the JavaScript thread is busy and cannot process the raw touch events sent over from the main thread. As a result, `TouchableOpacity` cannot react to the touch events and command the native view to adjust its opacity.

### UI frame rate (main thread) [​](https://reactnative.dev/docs/next/performance\#ui-frame-rate-main-thread "Direct link to UI frame rate (main thread)")

You may have noticed that performance of native stack navigators (such as the [@react-navigation/native-stack](https://reactnavigation.org/docs/native-stack-navigator) provided by React Navigation) is better out of the box than JavaScript-based stack navigators. This is because the transition animations are executed on the native main UI thread, so they are not interrupted by frame drops on the JavaScript thread.

Similarly, you can happily scroll up and down through a `ScrollView` when the JavaScript thread is locked up because the `ScrollView` lives on the main thread. The scroll events are dispatched to the JS thread, but their receipt is not necessary for the scroll to occur.

## Common sources of performance problems [​](https://reactnative.dev/docs/next/performance\#common-sources-of-performance-problems "Direct link to Common sources of performance problems")

### Running in development mode ( `dev=true`) [​](https://reactnative.dev/docs/next/performance\#running-in-development-mode-devtrue "Direct link to running-in-development-mode-devtrue")

JavaScript thread performance suffers greatly when running in dev mode. This is unavoidable: a lot more work needs to be done at runtime to provide you with good warnings and error messages. Always make sure to test performance in [release builds](https://reactnative.dev/docs/next/running-on-device#building-your-app-for-production).

### Using `console.log` statements [​](https://reactnative.dev/docs/next/performance\#using-consolelog-statements "Direct link to using-consolelog-statements")

When running a bundled app, these statements can cause a big bottleneck in the JavaScript thread. This includes calls from debugging libraries such as [redux-logger](https://github.com/evgenyrodionov/redux-logger), so make sure to remove them before bundling. You can also use this [babel plugin](https://babeljs.io/docs/plugins/transform-remove-console/) that removes all the `console.*` calls. You need to install it first with `npm i babel-plugin-transform-remove-console --save-dev`, and then edit the `.babelrc` file under your project directory like this:

json

```codeBlockLines_AclH
{
"env": {
"production": {
"plugins": ["transform-remove-console"]
}
}
}

This will automatically remove all `console.*` calls in the release (production) versions of your project.

It is recommended to use the plugin even if no `console.*` calls are made in your project. A third party library could also call them.

### `FlatList` rendering is too slow or scroll performance is bad for large lists [​](https://reactnative.dev/docs/next/performance\#flatlist-rendering-is-too-slow-or-scroll-performance-is-bad-for-large-lists "Direct link to flatlist-rendering-is-too-slow-or-scroll-performance-is-bad-for-large-lists")

If your [`FlatList`](https://reactnative.dev/docs/next/flatlist) is rendering slowly, be sure that you've implemented [`getItemLayout`](https://reactnative.dev/docs/next/flatlist#getitemlayout) to optimize rendering speed by skipping measurement of the rendered items.

There are also other third-party list libraries that are optimized for performance, including [FlashList](https://github.com/shopify/flash-list) and [Legend List](https://github.com/legendapp/legend-list).

### Dropping JS thread FPS because of doing a lot of work on the JavaScript thread at the same time [​](https://reactnative.dev/docs/next/performance\#dropping-js-thread-fps-because-of-doing-a-lot-of-work-on-the-javascript-thread-at-the-same-time "Direct link to Dropping JS thread FPS because of doing a lot of work on the JavaScript thread at the same time")

"Slow Navigator transitions" is the most common manifestation of this, but there are other times this can happen. Using [`InteractionManager`](https://reactnative.dev/docs/next/interactionmanager) can be a good approach, but if the user experience cost is too high to delay work during an animation, then you might want to consider [`LayoutAnimation`](https://reactnative.dev/docs/next/layoutanimation).

The [`Animated API`](https://reactnative.dev/docs/next/animated) currently calculates each keyframe on-demand on the JavaScript thread unless you [set `useNativeDriver: true`](https://reactnative.dev/blog/2017/02/14/using-native-driver-for-animated#how-do-i-use-this-in-my-app), while [`LayoutAnimation`](https://reactnative.dev/docs/next/layoutanimation) leverages Core Animation and is unaffected by JS thread and main thread frame drops.

One case for using this is animating in a modal (sliding down from top and fading in a translucent overlay) while initializing and perhaps receiving responses for several network requests, rendering the contents of the modal, and updating the view where the modal was opened from. See the [Animations guide](https://reactnative.dev/docs/next/animations) for more information about how to use `LayoutAnimation`.

**Caveats:**

- `LayoutAnimation` only works for fire-and-forget animations ("static" animations) -- if it must be interruptible, you will need to use [`Animated`](https://reactnative.dev/docs/next/animated).

### Moving a view on the screen (scrolling, translating, rotating) drops UI thread FPS [​](https://reactnative.dev/docs/next/performance\#moving-a-view-on-the-screen-scrolling-translating-rotating-drops-ui-thread-fps "Direct link to Moving a view on the screen (scrolling, translating, rotating) drops UI thread FPS")

This is especially true on Android when you have text with a transparent background positioned on top of an image, or any other situation where alpha compositing would be required to re-draw the view on each frame. You will find that enabling `renderToHardwareTextureAndroid` can help with this significantly. For iOS, `shouldRasterizeIOS` is already enabled by default.

Be careful not to overuse this or your memory usage could go through the roof. Profile your performance and memory usage when using these props. If you don't plan to move a view anymore, turn this property off.

### Animating the size of an image drops UI thread FPS [​](https://reactnative.dev/docs/next/performance\#animating-the-size-of-an-image-drops-ui-thread-fps "Direct link to Animating the size of an image drops UI thread FPS")

On iOS, each time you adjust the width or height of an [`Image` component](https://reactnative.dev/docs/next/image) it is re-cropped and scaled from the original image. This can be very expensive, especially for large images. Instead, use the `transform: [{scale}]` style property to animate the size. An example of when you might do this is when you tap an image and zoom it in to full screen.

### My TouchableX view isn't very responsive [​](https://reactnative.dev/docs/next/performance\#my-touchablex-view-isnt-very-responsive "Direct link to My TouchableX view isn't very responsive")

Sometimes, if we do an action in the same frame that we are adjusting the opacity or highlight of a component that is responding to a touch, we won't see that effect until after the `onPress` function has returned. This may occur if `onPress` sets a state that results in a heavy re-render and a few frames are dropped as a result. A solution to this is to wrap any action inside of your `onPress` handler in `requestAnimationFrame`:

tsx

```codeBlockLines_AclH
function handleOnPress() {

this.doExpensiveAction();
});
}

Is this page useful?

- [What you need to know about frames](https://reactnative.dev/docs/next/performance#what-you-need-to-know-about-frames)
- [JS frame rate (JavaScript thread)](https://reactnative.dev/docs/next/performance#js-frame-rate-javascript-thread)
- [UI frame rate (main thread)](https://reactnative.dev/docs/next/performance#ui-frame-rate-main-thread)
- [Common sources of performance problems](https://reactnative.dev/docs/next/performance#common-sources-of-performance-problems)
- [Running in development mode ( `dev=true`)](https://reactnative.dev/docs/next/performance#running-in-development-mode-devtrue)
- [Using `console.log` statements](https://reactnative.dev/docs/next/performance#using-consolelog-statements)
- [`FlatList` rendering is too slow or scroll performance is bad for large lists](https://reactnative.dev/docs/next/performance#flatlist-rendering-is-too-slow-or-scroll-performance-is-bad-for-large-lists)
- [Dropping JS thread FPS because of doing a lot of work on the JavaScript thread at the same time](https://reactnative.dev/docs/next/performance#dropping-js-thread-fps-because-of-doing-a-lot-of-work-on-the-javascript-thread-at-the-same-time)
- [Moving a view on the screen (scrolling, translating, rotating) drops UI thread FPS](https://reactnative.dev/docs/next/performance#moving-a-view-on-the-screen-scrolling-translating-rotating-drops-ui-thread-fps)
- [Animating the size of an image drops UI thread FPS](https://reactnative.dev/docs/next/performance#animating-the-size-of-an-image-drops-ui-thread-fps)
- [My TouchableX view isn't very responsive](https://reactnative.dev/docs/next/performance#my-touchablex-view-isnt-very-responsive)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/troubleshooting

[Skip to main content](https://reactnative.dev/docs/next/troubleshooting#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/troubleshooting)** (0.81).

Version: Next

On this page

These are some common issues you may run into while setting up React Native. If you encounter something that is not listed here, try [searching for the issue in GitHub](https://github.com/facebook/react-native/issues/).

### Port already in use [​](https://reactnative.dev/docs/next/troubleshooting\#port-already-in-use "Direct link to Port already in use")

The [Metro bundler](https://metrobundler.dev/) runs on port 8081. If another process is already using that port, you can either terminate that process, or change the port that the bundler uses.

#### Terminating a process on port 8081 [​](https://reactnative.dev/docs/next/troubleshooting\#terminating-a-process-on-port-8081 "Direct link to Terminating a process on port 8081")

Run the following command to find the id for the process that is listening on port 8081:

shell

```codeBlockLines_AclH
sudo lsof -i :8081

Then run the following to terminate the process:

```codeBlockLines_AclH

On Windows you can find the process using port 8081 using [Resource Monitor](https://stackoverflow.com/questions/48198/how-can-you-find-out-which-process-is-listening-on-a-port-on-windows) and stop it using Task Manager.

#### Using a port other than 8081 [​](https://reactnative.dev/docs/next/troubleshooting\#using-a-port-other-than-8081 "Direct link to Using a port other than 8081")

You can configure the bundler to use a port other than 8081 by using the `port` parameter, from the root of your project run:

- npm
- Yarn

```codeBlockLines_AclH
npm start -- --port=8088

```codeBlockLines_AclH
yarn start --port 8088

You will also need to update your applications to load the JavaScript bundle from the new port. If running on device from Xcode, you can do this by updating occurrences of `8081` to your chosen port in the `ios/__App_Name__.xcodeproj/project.pbxproj` file.

### NPM locking error [​](https://reactnative.dev/docs/next/troubleshooting\#npm-locking-error "Direct link to NPM locking error")

If you encounter an error such as `npm WARN locking Error: EACCES` while using the React Native CLI, try running the following:

```codeBlockLines_AclH
sudo chown -R $USER ~/.npm
sudo chown -R $USER /usr/local/lib/node_modules

### Missing libraries for React [​](https://reactnative.dev/docs/next/troubleshooting\#missing-libraries-for-react "Direct link to Missing libraries for React")

If you added React Native manually to your project, make sure you have included all the relevant dependencies that you are using, like `RCTText.xcodeproj`, `RCTImage.xcodeproj`. Next, the binaries built by these dependencies have to be linked to your app binary. Use the `Linked Frameworks and Binaries` section in the Xcode project settings. More detailed steps are here: [Linking Libraries](https://reactnative.dev/docs/next/linking-libraries-ios#content).

'RCTText',\
'RCTImage',\
'RCTNetwork',\
'RCTWebSocket',\
]

Next, make sure you have run `pod install` and that a `Pods/` directory has been created in your project with React installed. CocoaPods will instruct you to use the generated `.xcworkspace` file henceforth to be able to use these installed dependencies.

#### React Native does not compile when being used as a CocoaPod [​](https://reactnative.dev/docs/next/troubleshooting\#react-native-does-not-compile-when-being-used-as-a-cocoapod "Direct link to React Native does not compile when being used as a CocoaPod")

There is a CocoaPods plugin called [cocoapods-fix-react-native](https://github.com/orta/cocoapods-fix-react-native) which handles any potential post-fixing of the source code due to differences when using a dependency manager.

#### Argument list too long: recursive header expansion failed [​](https://reactnative.dev/docs/next/troubleshooting\#argument-list-too-long-recursive-header-expansion-failed "Direct link to Argument list too long: recursive header expansion failed")

In the project's build settings, `User Search Header Paths` and `Header Search Paths` are two configs that specify where Xcode should look for `#import` header files specified in the code. For Pods, CocoaPods uses a default array of specific folders to look in. Verify that this particular config is not overwritten, and that none of the folders configured are too large. If one of the folders is a large folder, Xcode will attempt to recursively search the entire directory and throw above error at some point.

To revert the `User Search Header Paths` and `Header Search Paths` build settings to their defaults set by CocoaPods - select the entry in the Build Settings panel, and hit delete. It will remove the custom override and

React Native implements a polyfill for WebSockets. These [polyfills](https://github.com/facebook/react-native/blob/main/packages/react-native/Libraries/Core/InitializeCore.js) are initialized as part of the react-native module that you include in your application through `import React from 'react'`. If you load another module that requires WebSockets, such as [Firebase](https://github.com/facebook/react-native/issues/3645), be sure to load/require it after react-native:

```codeBlockLines_AclH
import React from 'react';
import Firebase from 'firebase';

## Shell Command Unresponsive Exception [​](https://reactnative.dev/docs/next/troubleshooting\#shell-command-unresponsive-exception "Direct link to Shell Command Unresponsive Exception")

If you encounter a ShellCommandUnresponsiveException exception such as:

```codeBlockLines_AclH
Execution failed for task ':app:installDebug'.
com.android.builder.testing.api.DeviceException: com.android.ddmlib.ShellCommandUnresponsiveException

Restart the ADB server by running the following commands in your terminal:

```codeBlockLines_AclH
adb kill-server
adb start-server

## Unable to start react-native package manager (on Linux) [​](https://reactnative.dev/docs/next/troubleshooting\#unable-to-start-react-native-package-manager-on-linux "Direct link to Unable to start react-native package manager (on Linux)")

### Case 1: Error "code":"ENOSPC","errno":"ENOSPC" [​](https://reactnative.dev/docs/next/troubleshooting\#case-1-error-codeenospcerrnoenospc "Direct link to Case 1: Error \"code\":\"ENOSPC\",\"errno\":\"ENOSPC\"")

Issue caused by the number of directories [inotify](https://github.com/guard/listen/blob/master/README.md#increasing-the-amount-of-inotify-watchers) (used by watchman on Linux) can monitor. To solve it, run this command in your terminal window

```codeBlockLines_AclH
echo fs.inotify.max_user_watches=582222 | sudo tee -a /etc/sysctl.conf && sudo sysctl -p

### Error: spawnSync ./gradlew EACCES [​](https://reactnative.dev/docs/next/troubleshooting\#error-spawnsync-gradlew-eacces "Direct link to Error: spawnSync ./gradlew EACCES")

If you run into issue where executing `npm run android` or `yarn android` on macOS throws the above error, try to run `sudo chmod +x android/gradlew` command to make `gradlew` files into executable.

Is this page useful?

- [Port already in use](https://reactnative.dev/docs/next/troubleshooting#port-already-in-use)
- [NPM locking error](https://reactnative.dev/docs/next/troubleshooting#npm-locking-error)
- [Missing libraries for React](https://reactnative.dev/docs/next/troubleshooting#missing-libraries-for-react)
- [No transports available](https://reactnative.dev/docs/next/troubleshooting#no-transports-available)
- [Shell Command Unresponsive Exception](https://reactnative.dev/docs/next/troubleshooting#shell-command-unresponsive-exception)
- [Unable to start react-native package manager (on Linux)](https://reactnative.dev/docs/next/troubleshooting#unable-to-start-react-native-package-manager-on-linux)
- [Case 1: Error "code":"ENOSPC","errno":"ENOSPC"](https://reactnative.dev/docs/next/troubleshooting#case-1-error-codeenospcerrnoenospc)
- [Error: spawnSync ./gradlew EACCES](https://reactnative.dev/docs/next/troubleshooting#error-spawnsync-gradlew-eacces)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/scrollview

[Skip to main content](https://reactnative.dev/docs/next/scrollview#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/scrollview)** (0.81).

Version: Next

On this page

Component that wraps platform ScrollView while providing integration with touch locking "responder" system.

Keep in mind that ScrollViews must have a bounded height in order to work, since they contain unbounded-height children into a bounded container (via a scroll interaction). In order to bound the height of a ScrollView, either set the height of the view directly (discouraged) or make sure all parent views have bounded height. Forgetting to transfer `{flex: 1}` down the view stack can lead to errors here, which the element inspector makes quick to debug.

Doesn't yet support other contained responders from blocking this scroll view from becoming the responder.

`ScrollView` renders all its react child components at once, but this has a performance downside.

Imagine you have a very long list of items you want to display, maybe several screens worth of content. Creating JS components and native views for everything all at once, much of which may not even be shown, will contribute to slow rendering and increased memory usage.

This is where `FlatList` comes into play. `FlatList` renders items lazily, when they are about to appear, and removes items that scroll way off screen to save memory and processing time.

`FlatList` is also handy if you want to render separators between your items, multiple columns, infinite scroll loading, or any number of other features it supports out of the box.

## Example [​](https://reactnative.dev/docs/next/scrollview\#example "Direct link to Example")

ScrollView Example - Snack

# ScrollView Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {StyleSheet, Text, ScrollView, StatusBar} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad
minim veniam, quis nostrud exercitation ullamco laboris nisi ut
aliquip ex ea commodo consequat. Duis aute irure dolor in
reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla
pariatur. Excepteur sint occaecat cupidatat non proident, sunt in
culpa qui officia deserunt mollit anim id est laborum.

const styles = StyleSheet.create({
container: {
flex: 1,
paddingTop: StatusBar.currentHeight,
},
scrollView: {
backgroundColor: 'pink',
},
text: {
fontSize: 42,
padding: 12,
},
});

export default App;

eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad
minim veniam, quis nostrud exercitation ullamco laboris nisi ut
aliquip ex ea commodo consequat. Duis aute irure dolor in
reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla
pariatur. Excepteur sint occaecat cupidatat non proident, sunt in
culpa qui officia deserunt mollit anim id est laborum.

const styles = StyleSheet.create({
container: {
flex: 1,
paddingTop: StatusBar.currentHeight,
},
scrollView: {
backgroundColor: 'pink',
},
text: {
fontSize: 42,
padding: 12,
},
});

Snack

Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

Updating…

PreviewMy DeviceAndroidiOSWeb

* * *

# Reference

## Props [​](https://reactnative.dev/docs/next/scrollview\#props "Direct link to Props")

### [View Props](https://reactnative.dev/docs/next/view\#props) [​](https://reactnative.dev/docs/next/scrollview\#view-props "Direct link to view-props")

Inherits [View Props](https://reactnative.dev/docs/next/view#props).

### `StickyHeaderComponent` [​](https://reactnative.dev/docs/next/scrollview\#stickyheadercomponent "Direct link to stickyheadercomponent")

A React Component that will be used to render sticky headers, should be used together with `stickyHeaderIndices`. You may need to set this component if your sticky header uses custom transforms, for example, when you want your list to have an animated and hidable header. If a component has not been provided, the default [`ScrollViewStickyHeader`](https://github.com/facebook/react-native/blob/main/packages/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js) component will be used.

| Type |
| --- |
| component, element |

### `alwaysBounceHorizontal` iOS [​](https://reactnative.dev/docs/next/scrollview\#alwaysbouncehorizontal-ios "Direct link to alwaysbouncehorizontal-ios")

When true, the scroll view bounces horizontally when it reaches the end even if the content is smaller than the scroll view itself.

| Type | Default |
| --- | --- |

### `alwaysBounceVertical` iOS [​](https://reactnative.dev/docs/next/scrollview\#alwaysbouncevertical-ios "Direct link to alwaysbouncevertical-ios")

When true, the scroll view bounces vertically when it reaches the end even if the content is smaller than the scroll view itself.

### `automaticallyAdjustContentInsets` iOS [​](https://reactnative.dev/docs/next/scrollview\#automaticallyadjustcontentinsets-ios "Direct link to automaticallyadjustcontentinsets-ios")

Controls whether iOS should automatically adjust the content inset for scroll views that are placed behind a navigation bar or tab bar/toolbar.

| Type | Default |
| --- | --- |
| bool | `true` |

### `automaticallyAdjustKeyboardInsets` iOS [​](https://reactnative.dev/docs/next/scrollview\#automaticallyadjustkeyboardinsets-ios "Direct link to automaticallyadjustkeyboardinsets-ios")

Controls whether the ScrollView should automatically adjust its `contentInset` and `scrollViewInsets` when the Keyboard changes its size.

| Type | Default |
| --- | --- |
| bool | `false` |

### `automaticallyAdjustsScrollIndicatorInsets` iOS [​](https://reactnative.dev/docs/next/scrollview\#automaticallyadjustsscrollindicatorinsets-ios "Direct link to automaticallyadjustsscrollindicatorinsets-ios")

Controls whether iOS should automatically adjust the scroll indicator insets. See Apple's [documentation on the property](https://developer.apple.com/documentation/uikit/uiscrollview/3198043-automaticallyadjustsscrollindica).

### `bounces` iOS [​](https://reactnative.dev/docs/next/scrollview\#bounces-ios "Direct link to bounces-ios")

When true, the scroll view bounces when it reaches the end of the content if the content is larger than the scroll view along the axis of the scroll direction. When `false`, it disables all bouncing even if the `alwaysBounce*` props are `true`.

### `bouncesZoom` iOS [​](https://reactnative.dev/docs/next/scrollview\#bounceszoom-ios "Direct link to bounceszoom-ios")

When `true`, gestures can drive zoom past min/max and the zoom will animate to the min/max value at gesture end, otherwise the zoom will not exceed the limits.

### `canCancelContentTouches` iOS [​](https://reactnative.dev/docs/next/scrollview\#cancancelcontenttouches-ios "Direct link to cancancelcontenttouches-ios")

When `false`, once tracking starts, won't try to drag if the touch moves.

### `centerContent` iOS [​](https://reactnative.dev/docs/next/scrollview\#centercontent-ios "Direct link to centercontent-ios")

When `true`, the scroll view automatically centers the content when the content is smaller than the scroll view bounds; when the content is larger than the scroll view, this property has no effect.

### `contentContainerStyle` [​](https://reactnative.dev/docs/next/scrollview\#contentcontainerstyle "Direct link to contentcontainerstyle")

These styles will be applied to the scroll view content container which wraps all of the child views. Example:

```codeBlockLines_AclH
return (

...
const styles = StyleSheet.create({
contentContainer: {
paddingVertical: 20
}
});

| Type |
| --- |
| [View Style](https://reactnative.dev/docs/next/view-style-props) |

### `contentInset` iOS [​](https://reactnative.dev/docs/next/scrollview\#contentinset-ios "Direct link to contentinset-ios")

The amount by which the scroll view content is inset from the edges of the scroll view.

| Type | Default |
| --- | --- |
| object: `{top: number, left: number, bottom: number, right: number}` | `{top: 0, left: 0, bottom: 0, right: 0}` |

### `contentInsetAdjustmentBehavior` iOS [​](https://reactnative.dev/docs/next/scrollview\#contentinsetadjustmentbehavior-ios "Direct link to contentinsetadjustmentbehavior-ios")

This property specifies how the safe area insets are used to modify the content area of the scroll view. Available on iOS 11 and later.

| Type | Default |
| --- | --- |
| enum( `'automatic'`, `'scrollableAxes'`, `'never'`, `'always'`) | `'never'` |

### `contentOffset` [​](https://reactnative.dev/docs/next/scrollview\#contentoffset "Direct link to contentoffset")

Used to manually set the starting scroll offset.

| Type | Default |
| --- | --- |
| Point | `{x: 0, y: 0}` |

### `decelerationRate` [​](https://reactnative.dev/docs/next/scrollview\#decelerationrate "Direct link to decelerationrate")

A floating-point number that determines how quickly the scroll view decelerates after the user lifts their finger. You may also use string shortcuts `"normal"` and `"fast"` which match the underlying iOS settings for `UIScrollViewDecelerationRateNormal` and `UIScrollViewDecelerationRateFast` respectively.

- `'normal'` 0.998 on iOS, 0.985 on Android.
- `'fast'`, 0.99 on iOS, 0.9 on Android.

| Type | Default |
| --- | --- |
| enum( `'fast'`, `'normal'`), number | `'normal'` |

### `directionalLockEnabled` iOS [​](https://reactnative.dev/docs/next/scrollview\#directionallockenabled-ios "Direct link to directionallockenabled-ios")

When true, the ScrollView will try to lock to only vertical or horizontal scrolling while dragging.

### `disableIntervalMomentum` [​](https://reactnative.dev/docs/next/scrollview\#disableintervalmomentum "Direct link to disableintervalmomentum")

When true, the scroll view stops on the next index (in relation to scroll position at release) regardless of how fast the gesture is. This can be used for pagination when the page is less than the width of the horizontal ScrollView or the height of the vertical ScrollView.

### `disableScrollViewPanResponder` [​](https://reactnative.dev/docs/next/scrollview\#disablescrollviewpanresponder "Direct link to disablescrollviewpanresponder")

When true, the default JS pan responder on the ScrollView is disabled, and full control over touches inside the ScrollView is left to its child components. This is particularly useful if `snapToInterval` is enabled, since it does not follow typical touch patterns. Do not use this on regular ScrollView use cases without `snapToInterval` as it may cause unexpected touches to occur while scrolling.

### `endFillColor` Android [​](https://reactnative.dev/docs/next/scrollview\#endfillcolor-android "Direct link to endfillcolor-android")

Sometimes a scrollview takes up more space than its content fills. When this is the case, this prop will fill the rest of the scrollview with a color to avoid setting a background and creating unnecessary overdraw. This is an advanced optimization that is not needed in the general case.

| Type |
| --- |
| [color](https://reactnative.dev/docs/next/colors) |

### `fadingEdgeLength` Android [​](https://reactnative.dev/docs/next/scrollview\#fadingedgelength-android "Direct link to fadingedgelength-android")

Fades out the edges of the scroll content.

If the value is greater than `0`, the fading edges will be set accordingly to the current scroll direction and position, indicating if there is more content to show.

### `horizontal` [​](https://reactnative.dev/docs/next/scrollview\#horizontal "Direct link to horizontal")

When `true`, the scroll view's children are arranged horizontally in a row instead of vertically in a column.

### `indicatorStyle` iOS [​](https://reactnative.dev/docs/next/scrollview\#indicatorstyle-ios "Direct link to indicatorstyle-ios")

The style of the scroll indicators.

- `'default'` same as `black`.
- `'black'`, scroll indicator is `black`. This style is good against a light background.
- `'white'`, scroll indicator is `white`. This style is good against a dark background.

| Type | Default |
| --- | --- |
| enum( `'default'`, `'black'`, `'white'`) | `'default'` |

### `invertStickyHeaders` [​](https://reactnative.dev/docs/next/scrollview\#invertstickyheaders "Direct link to invertstickyheaders")

If sticky headers should stick at the bottom instead of the top of the ScrollView. This is usually used with inverted ScrollViews.

### `keyboardDismissMode` [​](https://reactnative.dev/docs/next/scrollview\#keyboarddismissmode "Direct link to keyboarddismissmode")

Determines whether the keyboard gets dismissed in response to a drag.

- `'none'`, drags do not dismiss the keyboard.
- `'on-drag'`, the keyboard is dismissed when a drag begins.

**iOS Only**

- `'interactive'`, the keyboard is dismissed interactively with the drag and moves in synchrony with the touch, dragging upwards cancels the dismissal. On Android this is not supported and it will have the same behavior as `'none'`.

### `keyboardShouldPersistTaps` [​](https://reactnative.dev/docs/next/scrollview\#keyboardshouldpersisttaps "Direct link to keyboardshouldpersisttaps")

Determines when the keyboard should stay visible after a tap.

- `'never'` tapping outside of the focused text input when the keyboard is up dismisses the keyboard. When this happens, children won't receive the tap.
- `'always'`, the keyboard will not dismiss automatically, and the scroll view will not catch taps, but children of the scroll view can catch taps.
- `'handled'`, the keyboard will not dismiss automatically when the tap was handled by children of the scroll view (or captured by an ancestor).
- `false`, **_deprecated_**, use `'never'` instead
- `true`, **_deprecated_**, use `'always'` instead

| Type | Default |
| --- | --- |
| enum( `'always'`, `'never'`, `'handled'`, `false`, `true`) | `'never'` |

### `maintainVisibleContentPosition` [​](https://reactnative.dev/docs/next/scrollview\#maintainvisiblecontentposition "Direct link to maintainvisiblecontentposition")

When set, the scroll view will adjust the scroll position so that the first child that is currently visible and at or beyond `minIndexForVisible` will not change position. This is useful for lists that are loading content in both directions, e.g. a chat thread, where new messages coming in might otherwise cause the scroll position to jump. A value of 0 is common, but other values such as 1 can be used to skip loading spinners or other content that should not maintain position.

The optional `autoscrollToTopThreshold` can be used to make the content automatically scroll to the top after making the adjustment if the user was within the threshold of the top before the adjustment was made. This is also useful for chat-like applications where you want to see new messages scroll into place, but not if the user has scrolled up a ways and it would be disruptive to scroll a bunch.

Caveat 1: Reordering elements in the scrollview with this enabled will probably cause jumpiness and jank. It can be fixed, but there are currently no plans to do so. For now, don't re-order the content of any ScrollViews or Lists that use this feature.

Caveat 2: This uses `contentOffset` and `frame.origin` in native code to compute visibility. Occlusion, transforms, and other complexity won't be taken into account as to whether content is "visible" or not.

| Type |
| --- |
| object: `{minIndexForVisible: number, autoscrollToTopThreshold: number}` |

### `maximumZoomScale` iOS [​](https://reactnative.dev/docs/next/scrollview\#maximumzoomscale-ios "Direct link to maximumzoomscale-ios")

The maximum allowed zoom scale.

| Type | Default |
| --- | --- |
| number | `1.0` |

### `minimumZoomScale` iOS [​](https://reactnative.dev/docs/next/scrollview\#minimumzoomscale-ios "Direct link to minimumzoomscale-ios")

The minimum allowed zoom scale.

### `nestedScrollEnabled` Android [​](https://reactnative.dev/docs/next/scrollview\#nestedscrollenabled-android "Direct link to nestedscrollenabled-android")

Enables nested scrolling for Android API level 21+.

### `onContentSizeChange` [​](https://reactnative.dev/docs/next/scrollview\#oncontentsizechange "Direct link to oncontentsizechange")

Called when scrollable content view of the ScrollView changes.

The handler function will receive two parameters: the content width and content height `(contentWidth, contentHeight)`.

It's implemented using onLayout handler attached to the content container which this ScrollView renders.

| Type |
| --- |
| function |

### `onMomentumScrollBegin` [​](https://reactnative.dev/docs/next/scrollview\#onmomentumscrollbegin "Direct link to onmomentumscrollbegin")

Called when the momentum scroll starts (scroll which occurs as the ScrollView starts gliding).

### `onMomentumScrollEnd` [​](https://reactnative.dev/docs/next/scrollview\#onmomentumscrollend "Direct link to onmomentumscrollend")

Called when the momentum scroll ends (scroll which occurs as the ScrollView glides to a stop).

### `onScroll` [​](https://reactnative.dev/docs/next/scrollview\#onscroll "Direct link to onscroll")

Fires at most once per frame during scrolling. The event has the following shape (all values with unspecified type are numbers):

js

```codeBlockLines_AclH
{
nativeEvent: {
contentInset: {bottom, left, right, top},
contentOffset: {x, y},
contentSize: {height, width},
layoutMeasurement: {height, width},
velocity: {x, y},
responderIgnoreScroll: boolean,
zoomScale,
// iOS only
targetContentOffset: {x, y}
}
}

### `onScrollBeginDrag` [​](https://reactnative.dev/docs/next/scrollview\#onscrollbegindrag "Direct link to onscrollbegindrag")

Called when the user begins to drag the scroll view.

### `onScrollEndDrag` [​](https://reactnative.dev/docs/next/scrollview\#onscrollenddrag "Direct link to onscrollenddrag")

Called when the user stops dragging the scroll view and it either stops or begins to glide.

### `onScrollToTop` iOS [​](https://reactnative.dev/docs/next/scrollview\#onscrolltotop-ios "Direct link to onscrolltotop-ios")

Fires when the scroll view scrolls to top after the status bar has been tapped.

### `overScrollMode` Android [​](https://reactnative.dev/docs/next/scrollview\#overscrollmode-android "Direct link to overscrollmode-android")

Used to override default value of overScroll mode.

Possible values:

- `'auto'` \- Allow a user to over-scroll this view only if the content is large enough to meaningfully scroll.
- `'always'` \- Always allow a user to over-scroll this view.
- `'never'` \- Never allow a user to over-scroll this view.

| Type | Default |
| --- | --- |
| enum( `'auto'`, `'always'`, `'never'`) | `'auto'` |

### `pagingEnabled` [​](https://reactnative.dev/docs/next/scrollview\#pagingenabled "Direct link to pagingenabled")

When true, the scroll view stops on multiples of the scroll view's size when scrolling. This can be used for horizontal pagination.

### `persistentScrollbar` Android [​](https://reactnative.dev/docs/next/scrollview\#persistentscrollbar-android "Direct link to persistentscrollbar-android")

Causes the scrollbars not to turn transparent when they are not in use.

### `pinchGestureEnabled` iOS [​](https://reactnative.dev/docs/next/scrollview\#pinchgestureenabled-ios "Direct link to pinchgestureenabled-ios")

When true, ScrollView allows use of pinch gestures to zoom in and out.

### `refreshControl` [​](https://reactnative.dev/docs/next/scrollview\#refreshcontrol "Direct link to refreshcontrol")

A RefreshControl component, used to provide pull-to-refresh functionality for the ScrollView. Only works for vertical ScrollViews ( `horizontal` prop must be `false`).

See [RefreshControl](https://reactnative.dev/docs/next/refreshcontrol).

| Type |
| --- |
| element |

### `removeClippedSubviews` [​](https://reactnative.dev/docs/next/scrollview\#removeclippedsubviews "Direct link to removeclippedsubviews")

warning

Using this property may lead to bugs (missing content) in some circumstances - use at your own risk.

When `true`, offscreen child views are removed from their native backing superview when offscreen. This may improve scroll performance for large lists. On Android the default value is `true`.

| Type |
| --- |
| boolean |

### `scrollEnabled` [​](https://reactnative.dev/docs/next/scrollview\#scrollenabled "Direct link to scrollenabled")

When false, the view cannot be scrolled via touch interaction.

Note that the view can always be scrolled by calling `scrollTo`.

### `scrollEventThrottle` [​](https://reactnative.dev/docs/next/scrollview\#scrolleventthrottle "Direct link to scrolleventthrottle")

Limits how often scroll events will be fired while scrolling, specified as a time interval in ms. This may be useful when expensive work is performed in response to scrolling. Values ≤ `16` will disable throttling, regardless of the refresh rate of the device.

| Type | Default |
| --- | --- |
| number | `0` |

### `scrollIndicatorInsets` iOS [​](https://reactnative.dev/docs/next/scrollview\#scrollindicatorinsets-ios "Direct link to scrollindicatorinsets-ios")

The amount by which the scroll view indicators are inset from the edges of the scroll view. This should normally be set to the same value as the `contentInset`.

### `scrollPerfTag` Android [​](https://reactnative.dev/docs/next/scrollview\#scrollperftag-android "Direct link to scrollperftag-android")

Tag used to log scroll performance on this scroll view. Will force momentum events to be turned on (see sendMomentumEvents). This doesn't do anything out of the box and you need to implement a custom native FpsListener for it to be useful.

| Type |
| --- |
| string |

### `scrollToOverflowEnabled` iOS [​](https://reactnative.dev/docs/next/scrollview\#scrolltooverflowenabled-ios "Direct link to scrolltooverflowenabled-ios")

When `true`, the scroll view can be programmatically scrolled beyond its content size.

### `scrollsToTop` iOS [​](https://reactnative.dev/docs/next/scrollview\#scrollstotop-ios "Direct link to scrollstotop-ios")

When `true`, the scroll view scrolls to top when the status bar is tapped.

### `showsHorizontalScrollIndicator` [​](https://reactnative.dev/docs/next/scrollview\#showshorizontalscrollindicator "Direct link to showshorizontalscrollindicator")

When `true`, shows a horizontal scroll indicator.

### `showsVerticalScrollIndicator` [​](https://reactnative.dev/docs/next/scrollview\#showsverticalscrollindicator "Direct link to showsverticalscrollindicator")

When `true`, shows a vertical scroll indicator.

### `snapToAlignment` [​](https://reactnative.dev/docs/next/scrollview\#snaptoalignment "Direct link to snaptoalignment")

When `snapToInterval` is set, `snapToAlignment` will define the relationship of the snapping to the scroll view.

- `'start'` will align the snap at the left (horizontal) or top (vertical).
- `'center'` will align the snap in the center.
- `'end'` will align the snap at the right (horizontal) or bottom (vertical).

| Type | Default |
| --- | --- |
| enum( `'start'`, `'center'`, `'end'`) | `'start'` |

### `snapToEnd` [​](https://reactnative.dev/docs/next/scrollview\#snaptoend "Direct link to snaptoend")

Use in conjunction with `snapToOffsets`. By default, the end of the list counts as a snap offset. Set `snapToEnd` to false to disable this behavior and allow the list to scroll freely between its end and the last `snapToOffsets` offset.

### `snapToInterval` [​](https://reactnative.dev/docs/next/scrollview\#snaptointerval "Direct link to snaptointerval")

When set, causes the scroll view to stop at multiples of the value of `snapToInterval`. This can be used for paginating through children that have lengths smaller than the scroll view. Typically used in combination with `snapToAlignment` and `decelerationRate="fast"`. Overrides less configurable `pagingEnabled` prop.

| Type |
| --- |
| number |

### `snapToOffsets` [​](https://reactnative.dev/docs/next/scrollview\#snaptooffsets "Direct link to snaptooffsets")

When set, causes the scroll view to stop at the defined offsets. This can be used for paginating through variously sized children that have lengths smaller than the scroll view. Typically used in combination with `decelerationRate="fast"`. Overrides less configurable `pagingEnabled` and `snapToInterval` props.

| Type |
| --- |
| array of number |

### `snapToStart` [​](https://reactnative.dev/docs/next/scrollview\#snaptostart "Direct link to snaptostart")

Use in conjunction with `snapToOffsets`. By default, the beginning of the list counts as a snap offset. Set `snapToStart` to `false` to disable this behavior and allow the list to scroll freely between its start and the first `snapToOffsets` offset.

### `stickyHeaderHiddenOnScroll` [​](https://reactnative.dev/docs/next/scrollview\#stickyheaderhiddenonscroll "Direct link to stickyheaderhiddenonscroll")

When set to `true`, sticky header will be hidden when scrolling down the list, and it will dock at the top of the list when scrolling up.

### `stickyHeaderIndices` [​](https://reactnative.dev/docs/next/scrollview\#stickyheaderindices "Direct link to stickyheaderindices")

An array of child indices determining which children get docked to the top of the screen when scrolling. For example, passing `stickyHeaderIndices={[0]}` will cause the first child to be fixed to the top of the scroll view. You can also use like \[x,y,z\] to make multiple items sticky when they are at the top. This property is not supported in conjunction with `horizontal={true}`.

### `zoomScale` iOS [​](https://reactnative.dev/docs/next/scrollview\#zoomscale-ios "Direct link to zoomscale-ios")

The current scale of the scroll view content.

## Methods [​](https://reactnative.dev/docs/next/scrollview\#methods "Direct link to Methods")

### `flashScrollIndicators()` [​](https://reactnative.dev/docs/next/scrollview\#flashscrollindicators "Direct link to flashscrollindicators")

tsx

```codeBlockLines_AclH
flashScrollIndicators();

Displays the scroll indicators momentarily.

### `scrollTo()` [​](https://reactnative.dev/docs/next/scrollview\#scrollto "Direct link to scrollto")

```codeBlockLines_AclH
scrollTo(
options?: {x?: number, y?: number, animated?: boolean} | number,
deprecatedX?: number,
deprecatedAnimated?: boolean,
);

Scrolls to a given x, y offset, either immediately, with a smooth animation.

**Example:**

`scrollTo({x: 0, y: 0, animated: true})`

note

The weird function signature is due to the fact that, for historical reasons, the function also accepts separate arguments as an alternative to the options object. This is deprecated due to ambiguity (y before x), and SHOULD NOT BE USED.

### `scrollToEnd()` [​](https://reactnative.dev/docs/next/scrollview\#scrolltoend "Direct link to scrolltoend")

```codeBlockLines_AclH
scrollToEnd(options?: {animated?: boolean});

If this is a vertical ScrollView scrolls to the bottom. If this is a horizontal ScrollView scrolls to the right.

Use `scrollToEnd({animated: true})` for smooth animated scrolling, `scrollToEnd({animated: false})` for immediate scrolling. If no options are passed, `animated` defaults to `true`.

Is this page useful?

- [Example](https://reactnative.dev/docs/next/scrollview#example)
- [Props](https://reactnative.dev/docs/next/scrollview#props)
- [View Props](https://reactnative.dev/docs/next/scrollview#view-props)
- [`StickyHeaderComponent`](https://reactnative.dev/docs/next/scrollview#stickyheadercomponent)
- [`alwaysBounceHorizontal` \\
iOS](https://reactnative.dev/docs/next/scrollview#alwaysbouncehorizontal-ios)
- [`alwaysBounceVertical` \\
iOS](https://reactnative.dev/docs/next/scrollview#alwaysbouncevertical-ios)
- [`automaticallyAdjustContentInsets` \\
iOS](https://reactnative.dev/docs/next/scrollview#automaticallyadjustcontentinsets-ios)
- [`automaticallyAdjustKeyboardInsets` \\
iOS](https://reactnative.dev/docs/next/scrollview#automaticallyadjustkeyboardinsets-ios)
- [`automaticallyAdjustsScrollIndicatorInsets` \\
iOS](https://reactnative.dev/docs/next/scrollview#automaticallyadjustsscrollindicatorinsets-ios)
- [`bounces` \\
iOS](https://reactnative.dev/docs/next/scrollview#bounces-ios)
- [`bouncesZoom` \\
iOS](https://reactnative.dev/docs/next/scrollview#bounceszoom-ios)
- [`canCancelContentTouches` \\
iOS](https://reactnative.dev/docs/next/scrollview#cancancelcontenttouches-ios)
- [`centerContent` \\
iOS](https://reactnative.dev/docs/next/scrollview#centercontent-ios)
- [`contentContainerStyle`](https://reactnative.dev/docs/next/scrollview#contentcontainerstyle)
- [`contentInset` \\
iOS](https://reactnative.dev/docs/next/scrollview#contentinset-ios)
- [`contentInsetAdjustmentBehavior` \\
iOS](https://reactnative.dev/docs/next/scrollview#contentinsetadjustmentbehavior-ios)
- [`contentOffset`](https://reactnative.dev/docs/next/scrollview#contentoffset)
- [`decelerationRate`](https://reactnative.dev/docs/next/scrollview#decelerationrate)
- [`directionalLockEnabled` \\
iOS](https://reactnative.dev/docs/next/scrollview#directionallockenabled-ios)
- [`disableIntervalMomentum`](https://reactnative.dev/docs/next/scrollview#disableintervalmomentum)
- [`disableScrollViewPanResponder`](https://reactnative.dev/docs/next/scrollview#disablescrollviewpanresponder)
- [`endFillColor` \\
Android](https://reactnative.dev/docs/next/scrollview#endfillcolor-android)
- [`fadingEdgeLength` \\
Android](https://reactnative.dev/docs/next/scrollview#fadingedgelength-android)
- [`horizontal`](https://reactnative.dev/docs/next/scrollview#horizontal)
- [`indicatorStyle` \\
iOS](https://reactnative.dev/docs/next/scrollview#indicatorstyle-ios)
- [`invertStickyHeaders`](https://reactnative.dev/docs/next/scrollview#invertstickyheaders)
- [`keyboardDismissMode`](https://reactnative.dev/docs/next/scrollview#keyboarddismissmode)
- [`keyboardShouldPersistTaps`](https://reactnative.dev/docs/next/scrollview#keyboardshouldpersisttaps)
- [`maintainVisibleContentPosition`](https://reactnative.dev/docs/next/scrollview#maintainvisiblecontentposition)
- [`maximumZoomScale` \\
iOS](https://reactnative.dev/docs/next/scrollview#maximumzoomscale-ios)
- [`minimumZoomScale` \\
iOS](https://reactnative.dev/docs/next/scrollview#minimumzoomscale-ios)
- [`nestedScrollEnabled` \\
Android](https://reactnative.dev/docs/next/scrollview#nestedscrollenabled-android)
- [`onContentSizeChange`](https://reactnative.dev/docs/next/scrollview#oncontentsizechange)
- [`onMomentumScrollBegin`](https://reactnative.dev/docs/next/scrollview#onmomentumscrollbegin)
- [`onMomentumScrollEnd`](https://reactnative.dev/docs/next/scrollview#onmomentumscrollend)
- [`onScroll`](https://reactnative.dev/docs/next/scrollview#onscroll)
- [`onScrollBeginDrag`](https://reactnative.dev/docs/next/scrollview#onscrollbegindrag)
- [`onScrollEndDrag`](https://reactnative.dev/docs/next/scrollview#onscrollenddrag)
- [`onScrollToTop` \\
iOS](https://reactnative.dev/docs/next/scrollview#onscrolltotop-ios)
- [`overScrollMode` \\
Android](https://reactnative.dev/docs/next/scrollview#overscrollmode-android)
- [`pagingEnabled`](https://reactnative.dev/docs/next/scrollview#pagingenabled)
- [`persistentScrollbar` \\
Android](https://reactnative.dev/docs/next/scrollview#persistentscrollbar-android)
- [`pinchGestureEnabled` \\
iOS](https://reactnative.dev/docs/next/scrollview#pinchgestureenabled-ios)
- [`refreshControl`](https://reactnative.dev/docs/next/scrollview#refreshcontrol)
- [`removeClippedSubviews`](https://reactnative.dev/docs/next/scrollview#removeclippedsubviews)
- [`scrollEnabled`](https://reactnative.dev/docs/next/scrollview#scrollenabled)
- [`scrollEventThrottle`](https://reactnative.dev/docs/next/scrollview#scrolleventthrottle)
- [`scrollIndicatorInsets` \\
iOS](https://reactnative.dev/docs/next/scrollview#scrollindicatorinsets-ios)
- [`scrollPerfTag` \\
Android](https://reactnative.dev/docs/next/scrollview#scrollperftag-android)
- [`scrollToOverflowEnabled` \\
iOS](https://reactnative.dev/docs/next/scrollview#scrolltooverflowenabled-ios)
- [`scrollsToTop` \\
iOS](https://reactnative.dev/docs/next/scrollview#scrollstotop-ios)
- [`showsHorizontalScrollIndicator`](https://reactnative.dev/docs/next/scrollview#showshorizontalscrollindicator)
- [`showsVerticalScrollIndicator`](https://reactnative.dev/docs/next/scrollview#showsverticalscrollindicator)
- [`snapToAlignment`](https://reactnative.dev/docs/next/scrollview#snaptoalignment)
- [`snapToEnd`](https://reactnative.dev/docs/next/scrollview#snaptoend)
- [`snapToInterval`](https://reactnative.dev/docs/next/scrollview#snaptointerval)
- [`snapToOffsets`](https://reactnative.dev/docs/next/scrollview#snaptooffsets)
- [`snapToStart`](https://reactnative.dev/docs/next/scrollview#snaptostart)
- [`stickyHeaderHiddenOnScroll`](https://reactnative.dev/docs/next/scrollview#stickyheaderhiddenonscroll)
- [`stickyHeaderIndices`](https://reactnative.dev/docs/next/scrollview#stickyheaderindices)
- [`zoomScale` \\
iOS](https://reactnative.dev/docs/next/scrollview#zoomscale-ios)
- [Methods](https://reactnative.dev/docs/next/scrollview#methods)
- [`flashScrollIndicators()`](https://reactnative.dev/docs/next/scrollview#flashscrollindicators)
- [`scrollTo()`](https://reactnative.dev/docs/next/scrollview#scrollto)
- [`scrollToEnd()`](https://reactnative.dev/docs/next/scrollview#scrolltoend)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/legacy/native-components-android

[Skip to main content](https://reactnative.dev/docs/next/legacy/native-components-android#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/legacy/native-components-android)** (0.81).

Version: Next

On this page

info

Native Module and Native Components are our stable technologies used by the legacy architecture.
They will be deprecated in the future when the New Architecture will be stable. The New Architecture uses [Turbo Native Module](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/turbo-modules.md) and [Fabric Native Components](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/fabric-native-components.md) to achieve similar results.

There are tons of native UI widgets out there ready to be used in the latest apps - some of them are part of the platform, others are available as third-party libraries, and still more might be in use in your very own portfolio. React Native has several of the most critical platform components already wrapped, like `ScrollView` and `TextInput`, but not all of them, and certainly not ones you might have written yourself for a previous app. Fortunately, we can wrap up these existing components for seamless integration with your React Native application.

Like the native module guide, this too is a more advanced guide that assumes you are somewhat familiar with Android SDK programming. This guide will show you how to build a native UI component, walking you through the implementation of a subset of the existing `ImageView` component available in the core React Native library.

You can also setup local library containing native component with one command. Read the guide to [Local libraries setup](https://reactnative.dev/docs/next/legacy/local-library-setup) for more details.

## ImageView example [​](https://reactnative.dev/docs/next/legacy/native-components-android\#imageview-example "Direct link to ImageView example")

For this example we are going to walk through the implementation requirements to allow the use of ImageViews in JavaScript.

Native views are created and manipulated by extending `ViewManager` or more commonly `SimpleViewManager` . A `SimpleViewManager` is convenient in this case because it applies common properties such as background color, opacity, and Flexbox layout.

These subclasses are essentially singletons - only one instance of each is created by the bridge. They send native views to the `NativeViewHierarchyManager`, which delegates

In this example we create view manager class `ReactImageManager` that extends `SimpleViewManager` of type `ReactImageView`. `ReactImageView` is the type of object managed by the manager, this will be the custom native view. Name returned by `getName` is used to reference the native view type from JavaScript.

- Java
- Kotlin

kotlin

```codeBlockLines_AclH
class ReactImageManager(
private val callerContext: ReactApplicationContext

override fun getName() = REACT_CLASS

companion object {
const val REACT_CLASS = "RCTImageView"
}
}

java

```codeBlockLines_AclH

public static final String REACT_CLASS = "RCTImageView";
ReactApplicationContext mCallerContext;

public ReactImageManager(ReactApplicationContext reactContext) {
mCallerContext = reactContext;
}

@Override
public String getName() {
return REACT_CLASS;
}
}

### 2\. Implement method `createViewInstance` [​](https://reactnative.dev/docs/next/legacy/native-components-android\#2-implement-method-createviewinstance "Direct link to 2-implement-method-createviewinstance")

Views are created in the `createViewInstance` method, the view should initialize itself in its default state, any properties will be set via a follow up call to `updateView.`

```codeBlockLines_AclH
override fun createViewInstance(context: ThemedReactContext) =
ReactImageView(context, Fresco.newDraweeControllerBuilder(), null, callerContext)

```codeBlockLines_AclH
@Override
public ReactImageView createViewInstance(ThemedReactContext context) {
return new ReactImageView(context, Fresco.newDraweeControllerBuilder(), null, mCallerContext);
}

### 3\. Expose view property setters using `@ReactProp` (or `@ReactPropGroup`) annotation [​](https://reactnative.dev/docs/next/legacy/native-components-android\#3-expose-view-property-setters-using-reactprop-or-reactpropgroup-annotation "Direct link to 3-expose-view-property-setters-using-reactprop-or-reactpropgroup-annotation")

Properties that are to be reflected in JavaScript needs to be exposed as setter method annotated with `@ReactProp` (or `@ReactPropGroup`). Setter method should take view to be updated (of the current view type) as a first argument and property value as a second argument. Setter should be public and not return a value (i.e. return type should be `void` in Java or `Unit` in Kotlin). Property type sent to JS is determined automatically based on the type of value argument of the setter. The following type of values are currently supported (in Java): `boolean`, `int`, `float`, `double`, `String`, `Boolean`, `Integer`, `ReadableArray`, `ReadableMap`. The corresponding types in Kotlin are `Boolean`, `Int`, `Float`, `Double`, `String`, `ReadableArray`, `ReadableMap`.

Annotation `@ReactProp` has one obligatory argument `name` of type `String`. Name assigned to the `@ReactProp` annotation linked to the setter method is used to reference the property on JS side.

Except from `name`, `@ReactProp` annotation may take following optional arguments: `defaultBoolean`, `defaultInt`, `defaultFloat`. Those arguments should be of the corresponding type (accordingly `boolean`, `int`, `float` in Java and `Boolean`, `Int`, `Float` in Kotlin) and the value provided will be passed to the setter method in case when the property that the setter is referencing has been removed from the component. Note that "default" values are only provided for primitive types, in case when setter is of some complex type, `null` will be provided as a default value in case when corresponding property gets removed.

Setter declaration requirements for methods annotated with `@ReactPropGroup` are different than for `@ReactProp`, please refer to the `@ReactPropGroup` annotation class docs for more information about it. **IMPORTANT!** in ReactJS updating the property value will result in setter method call. Note that one of the ways we can update component is by removing properties that have been set before. In that case setter method will be called as well to notify view manager that property has changed. In that case "default" value will be provided (for primitive types "default" value can be specified using `defaultBoolean`, `defaultFloat`, etc. arguments of `@ReactProp` annotation, for complex types setter will be called with value set to `null`).

```codeBlockLines_AclH
@ReactProp(name = "src")
fun setSrc(view: ReactImageView, sources: ReadableArray?) {
view.setSource(sources)
}

@ReactProp(name = "borderRadius", defaultFloat = 0f)
override fun setBorderRadius(view: ReactImageView, borderRadius: Float) {
view.setBorderRadius(borderRadius)
}

@ReactProp(name = ViewProps.RESIZE_MODE)
fun setResizeMode(view: ReactImageView, resizeMode: String?) {
view.setScaleType(ImageResizeMode.toScaleType(resizeMode))
}

```codeBlockLines_AclH
@ReactProp(name = "src")
public void setSrc(ReactImageView view, @Nullable ReadableArray sources) {
view.setSource(sources);
}

@ReactProp(name = "borderRadius", defaultFloat = 0f)
public void setBorderRadius(ReactImageView view, float borderRadius) {
view.setBorderRadius(borderRadius);
}

@ReactProp(name = ViewProps.RESIZE_MODE)
public void setResizeMode(ReactImageView view, @Nullable String resizeMode) {
view.setScaleType(ImageResizeMode.toScaleType(resizeMode));
}

### 4\. Register the `ViewManager` [​](https://reactnative.dev/docs/next/legacy/native-components-android\#4-register-the-viewmanager "Direct link to 4-register-the-viewmanager")

The final step is to register the ViewManager to the application, this happens in a similar way to [Native Modules](https://reactnative.dev/docs/next/legacy/native-modules-android), via the applications package member function `createViewManagers`.

```codeBlockLines_AclH
override fun createViewManagers(
reactContext: ReactApplicationContext
) = listOf(ReactImageManager(reactContext))

```codeBlockLines_AclH
@Override

ReactApplicationContext reactContext) {

new ReactImageManager(reactContext)
);
}

### 5\. Implement the JavaScript module [​](https://reactnative.dev/docs/next/legacy/native-components-android\#5-implement-the-javascript-module "Direct link to 5. Implement the JavaScript module")

The very final step is to create the JavaScript module that defines the interface layer between Java/Kotlin and JavaScript for the users of your new view. It is recommended for you to document the component interface in this module (e.g. using TypeScript, Flow, or plain old comments).

ImageView.tsx

```codeBlockLines_AclH
import {requireNativeComponent} from 'react-native';

/**
* Composes `View`.

* - resizeMode: 'cover' | 'contain' | 'stretch'
*/
export default requireNativeComponent('RCTImageView');

The `requireNativeComponent` function takes the name of the native view. Note that if your component needs to do anything more sophisticated (e.g. custom event handling), you should wrap the native component in another React component. This is illustrated in the `MyCustomView` example below.

## Events [​](https://reactnative.dev/docs/next/legacy/native-components-android\#events "Direct link to Events")

So now we know how to expose native view components that we can control freely from JS, but how do we deal with events from the user, like pinch-zooms or panning? When a native event occurs the native code should issue an event to the JavaScript representation of the View, and the two views are linked with the value returned from the `getId()` method.

```codeBlockLines_AclH
class MyCustomView(context: Context) : View(context) {
...
fun onReceiveNativeEvent() {
val event = Arguments.createMap().apply {
putString("message", "MyMessage")
}
val reactContext = context as ReactContext
reactContext
.getJSModule(RCTEventEmitter::class.java)
.receiveEvent(id, "topChange", event)
}
}

```codeBlockLines_AclH
class MyCustomView extends View {
...
public void onReceiveNativeEvent() {
WritableMap event = Arguments.createMap();
event.putString("message", "MyMessage");
ReactContext reactContext = (ReactContext)getContext();
reactContext
.getJSModule(RCTEventEmitter.class)
.receiveEvent(getId(), "topChange", event);
}
}

To map the `topChange` event name to the `onChange` callback prop in JavaScript, register it by overriding the `getExportedCustomBubblingEventTypeConstants` method in your `ViewManager`:

...

return mapOf(
"topChange" to mapOf(
"phasedRegistrationNames" to mapOf(
"bubbled" to "onChange"
)
)
)
}
}

...
public Map getExportedCustomBubblingEventTypeConstants() {
return MapBuilder.builder().put(
"topChange",
MapBuilder.of(
"phasedRegistrationNames",
MapBuilder.of("bubbled", "onChange")
)
).build();
}
}

This callback is invoked with the raw event, which we typically process in the wrapper component to make a simpler API:

MyCustomView.tsx

```codeBlockLines_AclH
import {useCallback} from 'react';
import {requireNativeComponent} from 'react-native';

const RCTMyCustomView = requireNativeComponent('RCTMyCustomView');

export default function MyCustomView(props: {
// ...
/**
* Callback that is called continuously when the user is dragging the map.
*/

}) {
const onChange = useCallback(

props.onChangeMessage?.(event.nativeEvent.message);
},
[props.onChangeMessage],
);

}

## Integration with an Android Fragment example [​](https://reactnative.dev/docs/next/legacy/native-components-android\#integration-with-an-android-fragment-example "Direct link to Integration with an Android Fragment example")

In order to integrate existing Native UI elements to your React Native app, you might need to use Android Fragments to give you a more granular control over your native component than returning a `View` from your `ViewManager`. You will need this if you want to add custom logic that is tied to your view with the help of [lifecycle methods](https://developer.android.com/guide/fragments/lifecycle), such as `onViewCreated`, `onPause`, `onResume`. The following steps will show you how to do it:

### 1\. Create an example custom view [​](https://reactnative.dev/docs/next/legacy/native-components-android\#1-create-an-example-custom-view "Direct link to 1. Create an example custom view")

First, let's create a `CustomView` class which extends `FrameLayout` (the content of this view can be any view that you'd like to render)

CustomView.kt

```codeBlockLines_AclH
// replace with your package
package com.mypackage

import android.content.Context
import android.graphics.Color
import android.widget.FrameLayout
import android.widget.TextView

class CustomView(context: Context) : FrameLayout(context) {
init {
// set padding and background color
setPadding(16,16,16,16)
setBackgroundColor(Color.parseColor("#5FD3F3"))

// add default text view
addView(TextView(context).apply {
text = "Welcome to Android Fragments with React Native."
})
}
}

CustomView.java

```codeBlockLines_AclH
// replace with your package
package com.mypackage;

import android.content.Context;
import android.graphics.Color;
import android.widget.FrameLayout;
import android.widget.ImageView;
import android.widget.TextView;

import androidx.annotation.NonNull;

public class CustomView extends FrameLayout {
public CustomView(@NonNull Context context) {
super(context);
// set padding and background color
this.setPadding(16,16,16,16);
this.setBackgroundColor(Color.parseColor("#5FD3F3"));

// add default text view
TextView text = new TextView(context);
text.setText("Welcome to Android Fragments with React Native.");
this.addView(text);
}
}

### 2\. Create a `Fragment` [​](https://reactnative.dev/docs/next/legacy/native-components-android\#2-create-a-fragment "Direct link to 2-create-a-fragment")

MyFragment.kt

import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.fragment.app.Fragment

// replace with your view's import
import com.mypackage.CustomView

class MyFragment : Fragment() {
private lateinit var customView: CustomView

override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View {
super.onCreateView(inflater, container, savedInstanceState)
customView = CustomView(requireNotNull(context))
return customView // this CustomView could be any view that you want to render
}

override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
super.onViewCreated(view, savedInstanceState)
// do any logic that should happen in an `onCreate` method, e.g:
// customView.onCreate(savedInstanceState);
}

override fun onPause() {
super.onPause()
// do any logic that should happen in an `onPause` method
// e.g.: customView.onPause();
}

override fun onResume() {
super.onResume()
// do any logic that should happen in an `onResume` method
// e.g.: customView.onResume();
}

override fun onDestroy() {
super.onDestroy()
// do any logic that should happen in an `onDestroy` method
// e.g.: customView.onDestroy();
}
}

MyFragment.java

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import androidx.fragment.app.Fragment;

// replace with your view's import
import com.mypackage.CustomView;

public class MyFragment extends Fragment {
CustomView customView;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup parent, Bundle savedInstanceState) {
super.onCreateView(inflater, parent, savedInstanceState);
customView = new CustomView(this.getContext());
return customView; // this CustomView could be any view that you want to render
}

@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
super.onViewCreated(view, savedInstanceState);
// do any logic that should happen in an `onCreate` method, e.g:
// customView.onCreate(savedInstanceState);
}

@Override
public void onPause() {
super.onPause();
// do any logic that should happen in an `onPause` method
// e.g.: customView.onPause();
}

@Override
public void onResume() {
super.onResume();
// do any logic that should happen in an `onResume` method
// e.g.: customView.onResume();
}

@Override
public void onDestroy() {
super.onDestroy();
// do any logic that should happen in an `onDestroy` method
// e.g.: customView.onDestroy();
}
}

### 3\. Create the `ViewManager` subclass [​](https://reactnative.dev/docs/next/legacy/native-components-android\#3-create-the-viewmanager-subclass "Direct link to 3-create-the-viewmanager-subclass")

MyViewManager.kt

import android.view.Choreographer
import android.view.View
import android.view.ViewGroup
import android.widget.FrameLayout
import androidx.fragment.app.FragmentActivity
import com.facebook.react.bridge.ReactApplicationContext
import com.facebook.react.bridge.ReadableArray
import com.facebook.react.uimanager.ThemedReactContext
import com.facebook.react.uimanager.ViewGroupManager
import com.facebook.react.uimanager.annotations.ReactPropGroup

class MyViewManager(
private val reactContext: ReactApplicationContext

private var propWidth: Int? = null
private var propHeight: Int? = null

/**
* Return a FrameLayout which will later hold the Fragment
*/
override fun createViewInstance(reactContext: ThemedReactContext) =
FrameLayout(reactContext)

/**
* Map the "create" command to an integer
*/
override fun getCommandsMap() = mapOf("create" to COMMAND_CREATE)

/**
* Handle "create" command (called from JS) and call createFragment method
*/
override fun receiveCommand(
root: FrameLayout,
commandId: String,
args: ReadableArray?
) {
super.receiveCommand(root, commandId, args)
val reactNativeViewId = requireNotNull(args).getInt(0)

when (commandId.toInt()) {

}
}

@ReactPropGroup(names = ["width", "height"], customType = "Style")
fun setStyle(view: FrameLayout, index: Int, value: Int) {
if (index == 0) propWidth = value
if (index == 1) propHeight = value
}

/**
* Replace your React Native view with a custom fragment
*/
fun createFragment(root: FrameLayout, reactNativeViewId: Int) {

setupLayout(parentView)

val myFragment = MyFragment()
val activity = reactContext.currentActivity as FragmentActivity
activity.supportFragmentManager
.beginTransaction()
.replace(reactNativeViewId, myFragment, reactNativeViewId.toString())
.commit()
}

fun setupLayout(view: View) {
Choreographer.getInstance().postFrameCallback(object: Choreographer.FrameCallback {
override fun doFrame(frameTimeNanos: Long) {
manuallyLayoutChildren(view)
view.viewTreeObserver.dispatchOnGlobalLayout()
Choreographer.getInstance().postFrameCallback(this)
}
})
}

/**
* Layout all children properly
*/
private fun manuallyLayoutChildren(view: View) {
// propWidth and propHeight coming from react-native props
val width = requireNotNull(propWidth)
val height = requireNotNull(propHeight)

view.measure(
View.MeasureSpec.makeMeasureSpec(width, View.MeasureSpec.EXACTLY),
View.MeasureSpec.makeMeasureSpec(height, View.MeasureSpec.EXACTLY))

view.layout(0, 0, width, height)
}

companion object {
private const val REACT_CLASS = "MyViewManager"
private const val COMMAND_CREATE = 1
}
}

MyViewManager.java

import android.view.Choreographer;
import android.view.View;
import android.view.ViewGroup;
import android.widget.FrameLayout;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.FragmentActivity;

import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.bridge.ReadableArray;
import com.facebook.react.common.MapBuilder;
import com.facebook.react.uimanager.annotations.ReactProp;
import com.facebook.react.uimanager.annotations.ReactPropGroup;
import com.facebook.react.uimanager.ViewGroupManager;
import com.facebook.react.uimanager.ThemedReactContext;

import java.util.Map;

public static final String REACT_CLASS = "MyViewManager";
public final int COMMAND_CREATE = 1;
private int propWidth;
private int propHeight;

ReactApplicationContext reactContext;

public MyViewManager(ReactApplicationContext reactContext) {
this.reactContext = reactContext;
}

@Override
public String getName() {
return REACT_CLASS;
}

/**
* Return a FrameLayout which will later hold the Fragment
*/
@Override
public FrameLayout createViewInstance(ThemedReactContext reactContext) {
return new FrameLayout(reactContext);
}

/**
* Map the "create" command to an integer
*/
@Nullable
@Override

return MapBuilder.of("create", COMMAND_CREATE);
}

/**
* Handle "create" command (called from JS) and call createFragment method
*/
@Override
public void receiveCommand(
@NonNull FrameLayout root,
String commandId,
@Nullable ReadableArray args
) {
super.receiveCommand(root, commandId, args);
int reactNativeViewId = args.getInt(0);
int commandIdInt = Integer.parseInt(commandId);

switch (commandIdInt) {
case COMMAND_CREATE:
createFragment(root, reactNativeViewId);
break;
default: {}
}
}

@ReactPropGroup(names = {"width", "height"}, customType = "Style")
public void setStyle(FrameLayout view, int index, Integer value) {
if (index == 0) {
propWidth = value;
}

if (index == 1) {
propHeight = value;
}
}

/**
* Replace your React Native view with a custom fragment
*/
public void createFragment(FrameLayout root, int reactNativeViewId) {
ViewGroup parentView = (ViewGroup) root.findViewById(reactNativeViewId);
setupLayout(parentView);

final MyFragment myFragment = new MyFragment();
FragmentActivity activity = (FragmentActivity) reactContext.getCurrentActivity();
activity.getSupportFragmentManager()
.beginTransaction()
.replace(reactNativeViewId, myFragment, String.valueOf(reactNativeViewId))
.commit();
}

public void setupLayout(View view) {
Choreographer.getInstance().postFrameCallback(new Choreographer.FrameCallback() {
@Override
public void doFrame(long frameTimeNanos) {
manuallyLayoutChildren(view);
view.getViewTreeObserver().dispatchOnGlobalLayout();
Choreographer.getInstance().postFrameCallback(this);
}
});
}

/**
* Layout all children properly
*/
public void manuallyLayoutChildren(View view) {
// propWidth and propHeight coming from react-native props
int width = propWidth;
int height = propHeight;

view.measure(
View.MeasureSpec.makeMeasureSpec(width, View.MeasureSpec.EXACTLY),
View.MeasureSpec.makeMeasureSpec(height, View.MeasureSpec.EXACTLY));

view.layout(0, 0, width, height);
}
}

### 4\. Register the `ViewManager` [​](https://reactnative.dev/docs/next/legacy/native-components-android\#4-register-the-viewmanager-1 "Direct link to 4-register-the-viewmanager-1")

MyPackage.kt

import com.facebook.react.ReactPackage
import com.facebook.react.bridge.ReactApplicationContext
import com.facebook.react.uimanager.ViewManager

class MyPackage : ReactPackage {
...
override fun createViewManagers(
reactContext: ReactApplicationContext
) = listOf(MyViewManager(reactContext))
}

MyPackage.java

import com.facebook.react.ReactPackage;
import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.uimanager.ViewManager;

import java.util.Arrays;
import java.util.List;

public class MyPackage implements ReactPackage {

@Override

new MyViewManager(reactContext)
);
}

### 5\. Register the `Package` [​](https://reactnative.dev/docs/next/legacy/native-components-android\#5-register-the-package "Direct link to 5-register-the-package")

MainApplication.kt

PackageList(this).packages.apply {
// Packages that cannot be autolinked yet can be added manually here, for example:
// add(MyReactNativePackage())
add(MyAppPackage())
}

MainApplication.java

```codeBlockLines_AclH
@Override

// Packages that cannot be autolinked yet can be added manually here, for example:
// packages.add(new MyReactNativePackage());
packages.add(new MyAppPackage());
return packages;
}

### 6\. Implement the JavaScript module [​](https://reactnative.dev/docs/next/legacy/native-components-android\#6-implement-the-javascript-module "Direct link to 6. Implement the JavaScript module")

I. Start with custom View manager:

MyViewManager.tsx

export const MyViewManager =
requireNativeComponent('MyViewManager');

II. Then implement custom View calling the `create` method:

MyView.tsx

```codeBlockLines_AclH
import React, {useEffect, useRef} from 'react';
import {
PixelRatio,
UIManager,
findNodeHandle,
} from 'react-native';

import {MyViewManager} from './my-view-manager';

viewId,
// we are calling the 'create' command
UIManager.MyViewManager.Commands.create.toString(),
[viewId],
);

const ref = useRef(null);

const viewId = findNodeHandle(ref.current);
createFragment(viewId);
}, []);

return (
<MyViewManager
style={{
// converts dpi to px, provide desired height
height: PixelRatio.getPixelSizeForLayoutSize(200),
// converts dpi to px, provide desired width
width: PixelRatio.getPixelSizeForLayoutSize(200),
}}
ref={ref}

};

If you want to expose property setters using `@ReactProp` (or `@ReactPropGroup`) annotation see the [ImageView example](https://reactnative.dev/docs/next/legacy/native-components-android#imageview-example) above.

Is this page useful?

- [ImageView example](https://reactnative.dev/docs/next/legacy/native-components-android#imageview-example)
- [1\. Create the `ViewManager` subclass](https://reactnative.dev/docs/next/legacy/native-components-android#1-create-the-viewmanager-subclass)
- [2\. Implement method `createViewInstance`](https://reactnative.dev/docs/next/legacy/native-components-android#2-implement-method-createviewinstance)
- [3\. Expose view property setters using `@ReactProp` (or `@ReactPropGroup`) annotation](https://reactnative.dev/docs/next/legacy/native-components-android#3-expose-view-property-setters-using-reactprop-or-reactpropgroup-annotation)
- [4\. Register the `ViewManager`](https://reactnative.dev/docs/next/legacy/native-components-android#4-register-the-viewmanager)
- [5\. Implement the JavaScript module](https://reactnative.dev/docs/next/legacy/native-components-android#5-implement-the-javascript-module)
- [Events](https://reactnative.dev/docs/next/legacy/native-components-android#events)
- [Integration with an Android Fragment example](https://reactnative.dev/docs/next/legacy/native-components-android#integration-with-an-android-fragment-example)
- [1\. Create an example custom view](https://reactnative.dev/docs/next/legacy/native-components-android#1-create-an-example-custom-view)
- [2\. Create a `Fragment`](https://reactnative.dev/docs/next/legacy/native-components-android#2-create-a-fragment)
- [3\. Create the `ViewManager` subclass](https://reactnative.dev/docs/next/legacy/native-components-android#3-create-the-viewmanager-subclass)
- [4\. Register the `ViewManager`](https://reactnative.dev/docs/next/legacy/native-components-android#4-register-the-viewmanager-1)
- [5\. Register the `Package`](https://reactnative.dev/docs/next/legacy/native-components-android#5-register-the-package)
- [6\. Implement the JavaScript module](https://reactnative.dev/docs/next/legacy/native-components-android#6-implement-the-javascript-module)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/settings

[Skip to main content](https://reactnative.dev/docs/next/settings#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/settings)** (0.81).

Version: Next

On this page

`Settings` serves as a wrapper for [`NSUserDefaults`](https://developer.apple.com/documentation/foundation/nsuserdefaults), a persistent key-value store available only on iOS.

## Example [​](https://reactnative.dev/docs/next/settings\#example "Direct link to Example")

Settings Example - Snack

# Settings Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React, {useState} from 'react';
import {Button, Settings, StyleSheet, Text} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

return (

Settings.set({data: 'React'});
setData(Settings.get('data'));
}}
title="Store 'React'"

Settings.set({data: 'Native'});
setData(Settings.get('data'));
}}
title="Store 'Native'"

};

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
alignItems: 'center',
},
value: {
fontSize: 24,
marginVertical: 12,
},
});

export default App;

Settings.set({data: 'React'});
setData(Settings.get('data'));
}}
title="Store 'React'"

Settings.set({data: 'Native'});
setData(Settings.get('data'));
}}
title="Store 'Native'"

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
alignItems: 'center',
},
value: {
fontSize: 24,
marginVertical: 12,
},
});

### Download [Expo Go](https://expo.dev/client) and scan the QR code to get started.

exp://u.expo.dev/933fd9c0-1666-11e7-afca-d980795c5824?runtime-version=exposdk%3A53.0.0&channel-name=production&snack-channel=RMFgmaok7T

### Connected devices

0

[Log in](https://expo.dev/login) to open this Snack from Expo Go on your device or simulator.

PreviewMy DeviceiOS

* * *

# Reference

## Methods [​](https://reactnative.dev/docs/next/settings\#methods "Direct link to Methods")

### `clearWatch()` [​](https://reactnative.dev/docs/next/settings\#clearwatch "Direct link to clearwatch")

tsx

```codeBlockLines_AclH
static clearWatch(watchId: number);

`watchId` is the number returned by `watchKeys()` when the subscription was originally configured.

### `get()` [​](https://reactnative.dev/docs/next/settings\#get "Direct link to get")

```codeBlockLines_AclH
static get(key: string): any;

Get the current value for a given `key` in `NSUserDefaults`.

### `set()` [​](https://reactnative.dev/docs/next/settings\#set "Direct link to set")

```codeBlockLines_AclH

Set one or more values in `NSUserDefaults`.

### `watchKeys()` [​](https://reactnative.dev/docs/next/settings\#watchkeys "Direct link to watchkeys")

Subscribe to be notified when the value for any of the keys specified by the `keys` parameter has been changed in `NSUserDefaults`. Returns a `watchId` number that may be used with `clearWatch()` to unsubscribe.

note

`watchKeys()` by design ignores internal `set()` calls and fires callback only on changes preformed outside of React Native code.

Is this page useful?

- [Example](https://reactnative.dev/docs/next/settings#example)
- [Methods](https://reactnative.dev/docs/next/settings#methods)
- [`clearWatch()`](https://reactnative.dev/docs/next/settings#clearwatch)
- [`get()`](https://reactnative.dev/docs/next/settings#get)
- [`set()`](https://reactnative.dev/docs/next/settings#set)
- [`watchKeys()`](https://reactnative.dev/docs/next/settings#watchkeys)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/stylesheet

[Skip to main content](https://reactnative.dev/docs/next/stylesheet#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/stylesheet)** (0.81).

Version: Next

On this page

A StyleSheet is an abstraction similar to CSS StyleSheets.

StyleSheet - Snack

# StyleSheet

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {StyleSheet, Text} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const styles = StyleSheet.create({
container: {
flex: 1,
padding: 24,
backgroundColor: '#eaeaea',
},
title: {
marginTop: 16,
paddingVertical: 8,
borderWidth: 4,
borderColor: '#20232a',
borderRadius: 6,
backgroundColor: '#61dafb',
color: '#20232a',
textAlign: 'center',
fontSize: 30,
fontWeight: 'bold',
},
});

export default App;

const styles = StyleSheet.create({
container: {
flex: 1,
padding: 24,
backgroundColor: '#eaeaea',
},
title: {
marginTop: 16,
paddingVertical: 8,
borderWidth: 4,
borderColor: '#20232a',
borderRadius: 6,
backgroundColor: '#61dafb',
color: '#20232a',
textAlign: 'center',
fontSize: 30,
fontWeight: 'bold',
},
});

Snack

React Native

Updating…

PreviewMy DeviceAndroidiOSWeb

Code quality tips:

- By moving styles away from the render function, you're making the code easier to understand.
- Naming the styles is a good way to add meaning to the low level components in the render function, and encourage reuse.
- In most IDEs, using `StyleSheet.create()` will offer static type checking and suggestions to help you write valid styles.

* * *

# Reference

## Methods [​](https://reactnative.dev/docs/next/stylesheet\#methods "Direct link to Methods")

### `compose()` [​](https://reactnative.dev/docs/next/stylesheet\#compose "Direct link to compose")

tsx

```codeBlockLines_AclH
static compose(style1: Object, style2: Object): Object | Object[];

Combines two styles such that `style2` will override any styles in `style1`. If either style is falsy, the other one is returned without allocating an array, saving allocations and maintaining reference equality for PureComponent checks.

Compose - Snack

# Compose

const page = StyleSheet.create({
container: {
flex: 1,
padding: 24,
backgroundColor: '#fff',
},
text: {
fontSize: 30,
color: '#000',
},
});

const lists = StyleSheet.create({
listContainer: {
flex: 1,
backgroundColor: '#61dafb',
},
listItem: {
fontWeight: 'bold',
},
});

const container = StyleSheet.compose(page.container, lists.listContainer);
const text = StyleSheet.compose(page.text, lists.listItem);

const page = StyleSheet.create({
container: {
flex: 1,
padding: 24,
backgroundColor: '#fff',
},
text: {
fontSize: 30,
color: '#000',
},
});

const lists = StyleSheet.create({
listContainer: {
flex: 1,
backgroundColor: '#61dafb',
},
listItem: {
fontWeight: 'bold',
},
});

### `create()` [​](https://reactnative.dev/docs/next/stylesheet\#create "Direct link to create")

```codeBlockLines_AclH

An identity function for creating styles. The main practical benefit of creating styles inside `StyleSheet.create()` is static type checking against native style properties.

### `flatten()` [​](https://reactnative.dev/docs/next/stylesheet\#flatten "Direct link to flatten")

```codeBlockLines_AclH
static flatten(style: Array<Object extends Record<string, ViewStyle | ImageStyle | TextStyle>>): Object;

Flattens an array of style objects, into one aggregated style object.

Flatten - Snack

# Flatten

const page = StyleSheet.create({
container: {
flex: 1,
padding: 24,
alignItems: 'center',
},
text: {
color: '#000',
fontSize: 14,
fontWeight: 'bold',
},
code: {
marginTop: 12,
padding: 12,
borderRadius: 8,
color: '#666',
backgroundColor: '#eaeaea',
},
});

const typography = StyleSheet.create({
header: {
color: '#61dafb',
fontSize: 30,
marginBottom: 36,
},
});

const flattenStyle = StyleSheet.flatten(\[page.text, typography.header\]);

const page = StyleSheet.create({
container: {
flex: 1,
padding: 24,
alignItems: 'center',
},
text: {
color: '#000',
fontSize: 14,
fontWeight: 'bold',
},
code: {
marginTop: 12,
padding: 12,
borderRadius: 8,
color: '#666',
backgroundColor: '#eaeaea',
},
});

const typography = StyleSheet.create({
header: {
color: '#61dafb',
fontSize: 30,
marginBottom: 36,
},
});

const flattenStyle = StyleSheet.flatten([page.text, typography.header]);

Flatten Style

{
"color": "#61dafb",
"fontSize": 30,
"fontWeight": "bold",
"marginBottom": 36
}

### `setStyleAttributePreprocessor()` [​](https://reactnative.dev/docs/next/stylesheet\#setstyleattributepreprocessor "Direct link to setstyleattributepreprocessor")

Experimental

Breaking changes will probably happen a lot and will not be reliably announced. The whole thing might be deleted, who knows? Use at your own risk.

```codeBlockLines_AclH
static setStyleAttributePreprocessor(
property: string,

);

Sets a function to use to pre-process a style property value. This is used internally to process color and transform values. You should not use this unless you really know what you are doing and have exhausted other options.

## Properties [​](https://reactnative.dev/docs/next/stylesheet\#properties "Direct link to Properties")

### `absoluteFill` [​](https://reactnative.dev/docs/next/stylesheet\#absolutefill "Direct link to absolutefill")

A very common pattern is to create overlays with position absolute and zero positioning ( `position: 'absolute', left: 0, right: 0, top: 0, bottom: 0`), so `absoluteFill` can be used for convenience and to reduce duplication of these repeated styles. If you want, absoluteFill can be used to create a customized entry in a StyleSheet, e.g.:

absoluteFill - Snack

# absoluteFill

import React from 'react';
import {StyleSheet, Text, View} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const styles = StyleSheet.create({
container: {
flex: 1,
},
box1: {
position: 'absolute',
top: 40,
left: 40,
width: 100,
height: 100,
backgroundColor: 'red',
},
box2: {
width: 100,
height: 100,
backgroundColor: 'blue',
},
box3: {
position: 'absolute',
top: 120,
left: 120,
width: 100,
height: 100,
backgroundColor: 'green',
},
text: {
color: '#FFF',
fontSize: 80,
},
});

const styles = StyleSheet.create({
container: {
flex: 1,
},
box1: {
position: 'absolute',
top: 40,
left: 40,
width: 100,
height: 100,
backgroundColor: 'red',
},
box2: {
width: 100,
height: 100,
backgroundColor: 'blue',
},
box3: {
position: 'absolute',
top: 120,
left: 120,
width: 100,
height: 100,
backgroundColor: 'green',
},
text: {
color: '#FFF',
fontSize: 80,
},
});

1

2

3

### `absoluteFillObject` [​](https://reactnative.dev/docs/next/stylesheet\#absolutefillobject "Direct link to absolutefillobject")

Sometimes you may want `absoluteFill` but with a couple tweaks - `absoluteFillObject` can be used to create a customized entry in a `StyleSheet`, e.g.:

absoluteFillObject - Snack

# absoluteFillObject

const styles = StyleSheet.create({
container: {
flex: 1,
},
box1: {
position: 'absolute',
top: 40,
left: 40,
width: 100,
height: 100,
backgroundColor: 'red',
},
box2: {
...StyleSheet.absoluteFillObject,
top: 120,
left: 50,
width: 100,
height: 100,
backgroundColor: 'blue',
},
box3: {
...StyleSheet.absoluteFillObject,
top: 120,
left: 120,
width: 100,
height: 100,
backgroundColor: 'green',
},
text: {
color: '#FFF',
fontSize: 80,
},
});

const styles = StyleSheet.create({
container: {
flex: 1,
},
box1: {
position: 'absolute',
top: 40,
left: 40,
width: 100,
height: 100,
backgroundColor: 'red',
},
box2: {
...StyleSheet.absoluteFillObject,
top: 120,
left: 50,
width: 100,
height: 100,
backgroundColor: 'blue',
},
box3: {
...StyleSheet.absoluteFillObject,
top: 120,
left: 120,
width: 100,
height: 100,
backgroundColor: 'green',
},
text: {
color: '#FFF',
fontSize: 80,
},
});

### `hairlineWidth` [​](https://reactnative.dev/docs/next/stylesheet\#hairlinewidth "Direct link to hairlinewidth")

This is defined as the width of a thin line on the platform. It can be used as the thickness of a border or division between two elements. Example:

hairlineWidth - Snack

# hairlineWidth

import React from 'react';
import {StyleSheet, Text, View} from 'react-native';

const styles = StyleSheet.create({
container: {
flex: 1,
padding: 24,
},
row: {
padding: 4,
borderBottomColor: 'red',
borderBottomWidth: StyleSheet.hairlineWidth,
},
});

const styles = StyleSheet.create({
container: {
flex: 1,
padding: 24,
},
row: {
padding: 4,
borderBottomColor: 'red',
borderBottomWidth: StyleSheet.hairlineWidth,
},
});

React

Native

This constant will always be a round number of pixels (so a line defined by it can look crisp) and will try to match the standard width of a thin line on the underlying platform. However, you should not rely on it being a constant size, because on different platforms and screen densities its value may be calculated differently.

A line with hairline width may not be visible if your simulator is downscaled.

Is this page useful?

- [Methods](https://reactnative.dev/docs/next/stylesheet#methods)
- [`compose()`](https://reactnative.dev/docs/next/stylesheet#compose)
- [`create()`](https://reactnative.dev/docs/next/stylesheet#create)
- [`flatten()`](https://reactnative.dev/docs/next/stylesheet#flatten)
- [`setStyleAttributePreprocessor()`](https://reactnative.dev/docs/next/stylesheet#setstyleattributepreprocessor)
- [Properties](https://reactnative.dev/docs/next/stylesheet#properties)
- [`absoluteFill`](https://reactnative.dev/docs/next/stylesheet#absolutefill)
- [`absoluteFillObject`](https://reactnative.dev/docs/next/stylesheet#absolutefillobject)
- [`hairlineWidth`](https://reactnative.dev/docs/next/stylesheet#hairlinewidth)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/typescript

[Skip to main content](https://reactnative.dev/docs/next/typescript#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/typescript)** (0.81).

Version: Next

On this page

[TypeScript](https://www.typescriptlang.org/) is a language which extends JavaScript by adding type definitions. New React Native projects target TypeScript by default, but also support JavaScript and Flow.

## Getting Started with TypeScript [​](https://reactnative.dev/docs/next/typescript\#getting-started-with-typescript "Direct link to Getting Started with TypeScript")

New projects created by the [React Native CLI](https://reactnative.dev/docs/next/getting-started-without-a-framework#step-1-creating-a-new-application) or popular templates like [Ignite](https://github.com/infinitered/ignite) will use TypeScript by default.

TypeScript may also be used with [Expo](https://expo.io/), which maintains TypeScript templates, or will prompt you to automatically install and configure TypeScript when a `.ts` or `.tsx` file is added to your project.

shell

```codeBlockLines_AclH
npx create-expo-app --template

## Adding TypeScript to an Existing Project [​](https://reactnative.dev/docs/next/typescript\#adding-typescript-to-an-existing-project "Direct link to Adding TypeScript to an Existing Project")

1. Add TypeScript, types, and ESLint plugins to your project.

- npm
- Yarn

```codeBlockLines_AclH
npm install -D typescript @react-native/typescript-config @types/jest @types/react @types/react-test-renderer

```codeBlockLines_AclH
yarn add --dev typescript @react-native/typescript-config @types/jest @types/react @types/react-test-renderer

note

This command adds the latest version of every dependency. The versions may need to be changed to match the existing packages used by your project. You can use a tool like [React Native Upgrade Helper](https://react-native-community.github.io/upgrade-helper/) to see the versions shipped by React Native.

2. Add a TypeScript config file. Create a `tsconfig.json` in the root of your project:

tsconfig.json

```codeBlockLines_AclH
{
"extends": "@react-native/typescript-config"
}

3. Rename a JavaScript file to be `*.tsx`

warning

You should leave the `./index.js` entrypoint file as it is otherwise you may run into an issue when it comes to bundling a production build.

4. Run `tsc` to type-check your new TypeScript files.

```codeBlockLines_AclH
npx tsc

```codeBlockLines_AclH
yarn tsc

## Using JavaScript Instead of TypeScript [​](https://reactnative.dev/docs/next/typescript\#using-javascript-instead-of-typescript "Direct link to Using JavaScript Instead of TypeScript")

React Native defaults new applications to TypeScript, but JavaScript may still be used. Files with a `.jsx` extension are treated as JavaScript instead of TypeScript, and will not be typechecked. JavaScript modules may still be imported by TypeScript modules, along with the reverse.

## How TypeScript and React Native works [​](https://reactnative.dev/docs/next/typescript\#how-typescript-and-react-native-works "Direct link to How TypeScript and React Native works")

Out of the box, TypeScript sources are transformed by [Babel](https://reactnative.dev/docs/javascript-environment#javascript-syntax-transformers) during bundling. We recommend that you use the TypeScript compiler only for type checking. This is the default behavior of `tsc` for newly created applications. If you have existing TypeScript code being ported to React Native, there are [one or two caveats](https://babeljs.io/docs/en/next/babel-plugin-transform-typescript) to using Babel instead of TypeScript.

## What does React Native + TypeScript look like [​](https://reactnative.dev/docs/next/typescript\#what-does-react-native--typescript-look-like "Direct link to What does React Native + TypeScript look like")

components/Hello.tsx

```codeBlockLines_AclH
import {useState} from 'react';
import {Button, StyleSheet, Text, View} from 'react-native';

export type Props = {
name: string;
baseEnthusiasmLevel?: number;
};

function Hello({name, baseEnthusiasmLevel = 0}: Props) {
const [enthusiasmLevel, setEnthusiasmLevel] = useState(
baseEnthusiasmLevel,
);

);

return (

{getExclamationMarks(enthusiasmLevel)}

title="Increase enthusiasm"
accessibilityLabel="increment"
onPress={onIncrement}
color="blue"

title="Decrease enthusiasm"
accessibilityLabel="decrement"
onPress={onDecrement}
color="red"

}

const styles = StyleSheet.create({
container: {
flex: 1,
alignItems: 'center',
justifyContent: 'center',
},
greeting: {
fontSize: 20,
fontWeight: 'bold',
margin: 16,
},
});

export default Hello;

You can explore the syntax more in the [TypeScript playground](https://www.typescriptlang.org/play?strictNullChecks=false&jsx=3#code/JYWwDg9gTgLgBAJQKYEMDG8BmUIjgcilQ3wG4BYAKFEljgG8AhAVxhggDsAaOAZRgCeAGyS8AFkiQweAFSQAPaXABqwJAHcAvnGy4CRdDAC0HFDGAA3JGSpUFteILBI4ABRxgAznAC8DKnBwpiBIAFxwnjBQwBwA5hSUgQBGKJ5IAKIcMGLMnsCpIAAySFZCAPzhHMwgSUhQCZq2lGickXAAEkhCQhDhyIYAdABiAMIAPO4QXgB8vnAAFPRBKCE8KWmZ2bn5nkUlXXMADHCaAJS+s-QBcC0cbQDaSFk5eQXFpTxpMJsvO3ulAF05v0MANcqIYGYkPN1hlnts3vshKcEtdbm1OABJDhoIghLJzebnHyzL4-BG7d5deZPLavSlIuAAajgAEYUWjWvBOAARJC4pD4+B+IkXCJScn0-7U2m-RGlOCzY5lOCyinSoRwIxsuDhQ4cyicu7wWIS+RoIQrMzATgAWRQUAA1t4RVUQCMxA7PJVqrUoMTZm6PV7FXBlXAAIJQKAoATzIOeqDeFnsgYAKwgMXm+AAhPhzuF8DZDYk4EQYMwoBwFtdAmNVBoIoIRD56JFhEhPANbpCYnVNNNa4E4GM5Iomx3W+2RF3YkQpDFYgOh8OOl0evR8ARGqXV4F6MEkDu98P6KbvubLSBrXaHc6afCpVTkce92MAPRjmCD3fD+tqdQfxPOsWDYTgVz3cwYBbAAibEBVSFw1SlGCINXdA0E7PIkmAIRgEEQoUFqIQfBgmIBSFVDfxPTh3Cw1ssRxPFaVfYCbggHooFIpIhGYJAqLY98gOAsZQPYDg0OHKDYL5BC0lVR8-gEti4AwrDgBwvCCKIrpSIAE35ZismUtjaKITxPAYjhZKMmBWOAlpONIog9JMvchIgj8G0AocvIA4SDU0VFmi5CcZzmfgO3ESQYG7AwYGhK5Sx7FA+ygcIktXTARHkcJWS4IcUDw2IOExBKQG9OAYMwrI6hggrfzTXJzEwAQRk4BKsnCaraTq65NAawI5xixcMqHTAOt4YAAC8wjgAAmQ5BuHCasgAdSQYBYjEGBCySDi9PwZbAmvKBYhiPKADZloGqgzmC+xoHgAzMBQZghHgTpuggBIgA).

## Where to Find Useful Advice [​](https://reactnative.dev/docs/next/typescript\#where-to-find-useful-advice "Direct link to Where to Find Useful Advice")

- [TypeScript Handbook](https://www.typescriptlang.org/docs/handbook/intro.html)
- [React's documentation on TypeScript](https://react.dev/learn/typescript)
- [React + TypeScript Cheatsheets](https://github.com/typescript-cheatsheets/react-typescript-cheatsheet#reacttypescript-cheatsheets) has a good overview on how to use React with TypeScript

## Using Custom Path Aliases with TypeScript [​](https://reactnative.dev/docs/next/typescript\#using-custom-path-aliases-with-typescript "Direct link to Using Custom Path Aliases with TypeScript")

To use custom path aliases with TypeScript, you need to set the path aliases to work from both Babel and TypeScript. Here's how:

1. Edit your `tsconfig.json` to have your [custom path mappings](https://www.typescriptlang.org/docs/handbook/module-resolution.html#path-mapping). Set anything in the root of `src` to be available with no preceding path reference, and allow any test file to be accessed by using `tests/File.tsx`:

diff

```codeBlockLines_AclH
{
- "extends": "@react-native/typescript-config"
+ "extends": "@react-native/typescript-config",
+ "compilerOptions": {
+ "baseUrl": ".",
+ "paths": {
+ "*": ["src/*"],
+ "tests": ["tests/*"],
+ "@components/*": ["src/components/*"],
+ },
+ }
}

2. Add [`babel-plugin-module-resolver`](https://github.com/tleunen/babel-plugin-module-resolver) as a development package to your project:

```codeBlockLines_AclH
npm install --save-dev babel-plugin-module-resolver

```codeBlockLines_AclH
yarn add --dev babel-plugin-module-resolver

3. Finally, configure your `babel.config.js` (note that the syntax for your `babel.config.js` is different from your `tsconfig.json`):

```codeBlockLines_AclH
{
presets: ['module:metro-react-native-babel-preset'],
+ plugins: [\
+ [\
+ 'module-resolver',\
+ {\
+ root: ['./src'],\
+ extensions: ['.ios.js', '.android.js', '.js', '.ts', '.tsx', '.json'],\
+ alias: {\
+ tests: ['./tests/'],\
+ "@components": "./src/components",\
+ }\
+ }\
+ ]\
+ ]
}

Is this page useful?

- [Getting Started with TypeScript](https://reactnative.dev/docs/next/typescript#getting-started-with-typescript)
- [Adding TypeScript to an Existing Project](https://reactnative.dev/docs/next/typescript#adding-typescript-to-an-existing-project)
- [Using JavaScript Instead of TypeScript](https://reactnative.dev/docs/next/typescript#using-javascript-instead-of-typescript)
- [How TypeScript and React Native works](https://reactnative.dev/docs/next/typescript#how-typescript-and-react-native-works)
- [What does React Native + TypeScript look like](https://reactnative.dev/docs/next/typescript#what-does-react-native--typescript-look-like)
- [Where to Find Useful Advice](https://reactnative.dev/docs/next/typescript#where-to-find-useful-advice)
- [Using Custom Path Aliases with TypeScript](https://reactnative.dev/docs/next/typescript#using-custom-path-aliases-with-typescript)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/virtualizedlist

[Skip to main content](https://reactnative.dev/docs/next/virtualizedlist#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/virtualizedlist)** (0.81).

Version: Next

On this page

Virtualization massively improves memory consumption and performance of large lists by maintaining a finite render window of active items and replacing all items outside of the render window with appropriately sized blank space. The window adapts to scrolling behavior, and items are rendered incrementally with low-pri (after any running interactions) if they are far from the visible area, or with hi-pri otherwise to minimize the potential of seeing blank space.

## Example [​](https://reactnative.dev/docs/next/virtualizedlist\#example "Direct link to Example")

- TypeScript
- JavaScript

* * *

Some caveats:

- Internal state is not preserved when content scrolls out of the render window. Make sure all your data is captured in the item data or external stores like Flux, Redux, or Relay.
- This is a `PureComponent` which means that it will not re-render if `props` are shallow-equal. Make sure that everything your `renderItem` function depends on is passed as a prop (e.g. `extraData`) that is not `===` after updates, otherwise your UI may not update on changes. This includes the `data` prop and parent component state.
- In order to constrain memory and enable smooth scrolling, content is rendered asynchronously offscreen. This means it's possible to scroll faster than the fill rate and momentarily see blank content. This is a tradeoff that can be adjusted to suit the needs of each application, and we are working on improving it behind the scenes.
- By default, the list looks for a `key` prop on each item and uses that for the React key. Alternatively, you can provide a custom `keyExtractor` prop.

# Reference

## Props [​](https://reactnative.dev/docs/next/virtualizedlist\#props "Direct link to Props")

### [ScrollView Props](https://reactnative.dev/docs/next/scrollview\#props) [​](https://reactnative.dev/docs/next/virtualizedlist\#scrollview-props "Direct link to scrollview-props")

Inherits [ScrollView Props](https://reactnative.dev/docs/next/scrollview#props).

### `data` [​](https://reactnative.dev/docs/next/virtualizedlist\#data "Direct link to data")

Opaque data type passed to `getItem` and `getItemCount` to retrieve items.

| Type |
| --- |
| any |

### Required **`getItem`** [​](https://reactnative.dev/docs/next/virtualizedlist\#required-getitem "Direct link to required-getitem")

tsx

```codeBlockLines_AclH

A generic accessor for extracting an item from any sort of data blob.

| Type |
| --- |
| function |

### Required **`getItemCount`** [​](https://reactnative.dev/docs/next/virtualizedlist\#required-getitemcount "Direct link to required-getitemcount")

Determines how many items are in the data blob.

### Required **`renderItem`** [​](https://reactnative.dev/docs/next/virtualizedlist\#required-renderitem "Direct link to required-renderitem")

Takes an item from `data` and renders it into the list

### `CellRendererComponent` [​](https://reactnative.dev/docs/next/virtualizedlist\#cellrenderercomponent "Direct link to cellrenderercomponent")

CellRendererComponent allows customizing how cells rendered by `renderItem`/ `ListItemComponent` are wrapped when placed into the underlying ScrollView. This component must accept event handlers which notify VirtualizedList of changes within the cell.

| Type |
| --- |

### `ItemSeparatorComponent` [​](https://reactnative.dev/docs/next/virtualizedlist\#itemseparatorcomponent "Direct link to itemseparatorcomponent")

| Type |
| --- |
| component, function, element |

### `ListEmptyComponent` [​](https://reactnative.dev/docs/next/virtualizedlist\#listemptycomponent "Direct link to listemptycomponent")

| Type |
| --- |
| component, element |

### `ListItemComponent` [​](https://reactnative.dev/docs/next/virtualizedlist\#listitemcomponent "Direct link to listitemcomponent")

Each data item is rendered using this element. Can be a React Component Class, or a render function.

| Type |
| --- |
| component, function |

### `ListFooterComponent` [​](https://reactnative.dev/docs/next/virtualizedlist\#listfootercomponent "Direct link to listfootercomponent")

### `ListFooterComponentStyle` [​](https://reactnative.dev/docs/next/virtualizedlist\#listfootercomponentstyle "Direct link to listfootercomponentstyle")

Styling for internal View for `ListFooterComponent`.

| Type | Required |
| --- | --- |
| ViewStyleProp | No |

### `ListHeaderComponent` [​](https://reactnative.dev/docs/next/virtualizedlist\#listheadercomponent "Direct link to listheadercomponent")

### `ListHeaderComponentStyle` [​](https://reactnative.dev/docs/next/virtualizedlist\#listheadercomponentstyle "Direct link to listheadercomponentstyle")

Styling for internal View for `ListHeaderComponent`.

| Type |
| --- |
| [View Style](https://reactnative.dev/docs/next/view-style-props) |

### `debug` [​](https://reactnative.dev/docs/next/virtualizedlist\#debug "Direct link to debug")

`debug` will turn on extra logging and visual overlays to aid with debugging both usage and implementation, but with a significant perf hit.

| Type |
| --- |
| boolean |

### `disableVirtualization` [​](https://reactnative.dev/docs/next/virtualizedlist\#disablevirtualization "Direct link to disablevirtualization")

Deprecated

Virtualization provides significant performance and memory optimizations, but fully unmounts react instances that are outside of the render window. You should only need to disable this for debugging purposes.

### `extraData` [​](https://reactnative.dev/docs/next/virtualizedlist\#extradata "Direct link to extradata")

A marker property for telling the list to re-render (since it implements `PureComponent`). If any of your `renderItem`, Header, Footer, etc. functions depend on anything outside of the `data` prop, stick it here and treat it immutably.

### `getItemLayout` [​](https://reactnative.dev/docs/next/virtualizedlist\#getitemlayout "Direct link to getitemlayout")

```codeBlockLines_AclH
(
data: any,
index: number,

### `horizontal` [​](https://reactnative.dev/docs/next/virtualizedlist\#horizontal "Direct link to horizontal")

If `true`, renders items next to each other horizontally instead of stacked vertically.

### `initialNumToRender` [​](https://reactnative.dev/docs/next/virtualizedlist\#initialnumtorender "Direct link to initialnumtorender")

How many items to render in the initial batch. This should be enough to fill the screen but not much more. Note these items will never be unmounted as part of the windowed rendering in order to improve perceived performance of scroll-to-top actions.

| Type | Default |
| --- | --- |
| number | `10` |

### `initialScrollIndex` [​](https://reactnative.dev/docs/next/virtualizedlist\#initialscrollindex "Direct link to initialscrollindex")

Instead of starting at the top with the first item, start at `initialScrollIndex`. This disables the "scroll to top" optimization that keeps the first `initialNumToRender` items always rendered and immediately renders the items starting at this initial index. Requires `getItemLayout` to be implemented.

| Type |
| --- |
| number |

### `inverted` [​](https://reactnative.dev/docs/next/virtualizedlist\#inverted "Direct link to inverted")

Reverses the direction of scroll. Uses scale transforms of `-1`.

### `keyExtractor` [​](https://reactnative.dev/docs/next/virtualizedlist\#keyextractor "Direct link to keyextractor")

Used to extract a unique key for a given item at the specified index. Key is used for caching and as the react key to track item re-ordering. The default extractor checks `item.key`, then `item.id`, and then falls

The maximum number of items to render in each incremental render batch. The more rendered at once, the better the fill rate, but responsiveness may suffer because rendering content may interfere with responding to button taps or other interactions.

### `onEndReached` [​](https://reactnative.dev/docs/next/virtualizedlist\#onendreached "Direct link to onendreached")

Called once when the scroll position gets within `onEndReachedThreshold` from the logical end of the list.

### `onEndReachedThreshold` [​](https://reactnative.dev/docs/next/virtualizedlist\#onendreachedthreshold "Direct link to onendreachedthreshold")

How far from the end (in units of visible length of the list) the trailing edge of the list must be from the end of the content to trigger the `onEndReached` callback. Thus, a value of 0.5 will trigger `onEndReached` when the end of the content is within half the visible length of the list.

| Type | Default |
| --- | --- |
| number | `2` |

### `onRefresh` [​](https://reactnative.dev/docs/next/virtualizedlist\#onrefresh "Direct link to onrefresh")

If provided, a standard `RefreshControl` will be added for "Pull to Refresh" functionality. Make sure to also set the `refreshing` prop correctly.

### `onScrollToIndexFailed` [​](https://reactnative.dev/docs/next/virtualizedlist\#onscrolltoindexfailed "Direct link to onscrolltoindexfailed")

```codeBlockLines_AclH
(info: {
index: number,
highestMeasuredFrameIndex: number,
averageItemLength: number,

Used to handle failures when scrolling to an index that has not been measured yet. Recommended action is to either compute your own offset and `scrollTo` it, or scroll as far as possible and then try again after more items have been rendered.

### `onStartReached` [​](https://reactnative.dev/docs/next/virtualizedlist\#onstartreached "Direct link to onstartreached")

Called once when the scroll position gets within `onStartReachedThreshold` from the logical start of the list.

### `onStartReachedThreshold` [​](https://reactnative.dev/docs/next/virtualizedlist\#onstartreachedthreshold "Direct link to onstartreachedthreshold")

How far from the start (in units of visible length of the list) the leading edge of the list must be from the start of the content to trigger the `onStartReached` callback. Thus, a value of 0.5 will trigger `onStartReached` when the start of the content is within half the visible length of the list.

### `onViewableItemsChanged` [​](https://reactnative.dev/docs/next/virtualizedlist\#onviewableitemschanged "Direct link to onviewableitemschanged")

Called when the viewability of rows changes, as defined by the `viewabilityConfig` prop.

### `persistentScrollbar` [​](https://reactnative.dev/docs/next/virtualizedlist\#persistentscrollbar "Direct link to persistentscrollbar")

| Type |
| --- |
| bool |

### `progressViewOffset` [​](https://reactnative.dev/docs/next/virtualizedlist\#progressviewoffset "Direct link to progressviewoffset")

Set this when offset is needed for the loading indicator to show correctly.

### `refreshControl` [​](https://reactnative.dev/docs/next/virtualizedlist\#refreshcontrol "Direct link to refreshcontrol")

| Type |
| --- |
| element |

### `refreshing` [​](https://reactnative.dev/docs/next/virtualizedlist\#refreshing "Direct link to refreshing")

Set this true while waiting for new data from a refresh.

### `removeClippedSubviews` [​](https://reactnative.dev/docs/next/virtualizedlist\#removeclippedsubviews "Direct link to removeclippedsubviews")

warning

Using this property may lead to bugs (missing content) in some circumstances - use at your own risk.

When `true`, offscreen child views are removed from their native backing superview when offscreen. This may improve scroll performance for large lists. On Android the default value is `true`.

### `renderScrollComponent` [​](https://reactnative.dev/docs/next/virtualizedlist\#renderscrollcomponent "Direct link to renderscrollcomponent")

Render a custom scroll component, e.g. with a differently styled `RefreshControl`.

### `viewabilityConfig` [​](https://reactnative.dev/docs/next/virtualizedlist\#viewabilityconfig "Direct link to viewabilityconfig")

See `ViewabilityHelper.js` for flow type and further documentation.

| Type |
| --- |
| ViewabilityConfig |

### `viewabilityConfigCallbackPairs` [​](https://reactnative.dev/docs/next/virtualizedlist\#viewabilityconfigcallbackpairs "Direct link to viewabilityconfigcallbackpairs")

List of `ViewabilityConfig`/ `onViewableItemsChanged` pairs. A specific `onViewableItemsChanged` will be called when its corresponding `ViewabilityConfig`'s conditions are met. See `ViewabilityHelper.js` for flow type and further documentation.

| Type |
| --- |
| array of ViewabilityConfigCallbackPair |

### `updateCellsBatchingPeriod` [​](https://reactnative.dev/docs/next/virtualizedlist\#updatecellsbatchingperiod "Direct link to updatecellsbatchingperiod")

Amount of time between low-pri item render batches, e.g. for rendering items quite a ways off screen. Similar fill rate/responsiveness tradeoff as `maxToRenderPerBatch`.

### `windowSize` [​](https://reactnative.dev/docs/next/virtualizedlist\#windowsize "Direct link to windowsize")

Determines the maximum number of items rendered outside of the visible area, in units of visible lengths. So if your list fills the screen, then `windowSize={21}` (the default) will render the visible screen area plus up to 10 screens above and 10 below the viewport. Reducing this number will reduce memory consumption and may improve performance, but will increase the chance that fast scrolling may reveal momentary blank areas of unrendered content.

## Methods [​](https://reactnative.dev/docs/next/virtualizedlist\#methods "Direct link to Methods")

### `flashScrollIndicators()` [​](https://reactnative.dev/docs/next/virtualizedlist\#flashscrollindicators "Direct link to flashscrollindicators")

```codeBlockLines_AclH
flashScrollIndicators();

### `getScrollableNode()` [​](https://reactnative.dev/docs/next/virtualizedlist\#getscrollablenode "Direct link to getscrollablenode")

```codeBlockLines_AclH
getScrollableNode(): any;

### `getScrollRef()` [​](https://reactnative.dev/docs/next/virtualizedlist\#getscrollref "Direct link to getscrollref")

```codeBlockLines_AclH
getScrollRef():

### `getScrollResponder()` [​](https://reactnative.dev/docs/next/virtualizedlist\#getscrollresponder "Direct link to getscrollresponder")

Provides a handle to the underlying scroll responder. Note that `this._scrollRef` might not be a `ScrollView`, so we need to check that it responds to `getScrollResponder` before calling it.

### `scrollToEnd()` [​](https://reactnative.dev/docs/next/virtualizedlist\#scrolltoend "Direct link to scrolltoend")

```codeBlockLines_AclH
scrollToEnd(params?: {animated?: boolean});

Scrolls to the end of the content. May be janky without `getItemLayout` prop.

**Parameters:**

| Name | Type |
| --- | --- |
| params | object |

Valid `params` keys are:

- `'animated'` (boolean) - Whether the list should do an animation while scrolling. Defaults to `true`.

### `scrollToIndex()` [​](https://reactnative.dev/docs/next/virtualizedlist\#scrolltoindex "Direct link to scrolltoindex")

```codeBlockLines_AclH
scrollToIndex(params: {
index: number;
animated?: boolean;
viewOffset?: number;
viewPosition?: number;
});

Valid `params` consist of:

- 'index' (number). Required.
- 'animated' (boolean). Optional.
- 'viewOffset' (number). Optional.
- 'viewPosition' (number). Optional.

### `scrollToItem()` [​](https://reactnative.dev/docs/next/virtualizedlist\#scrolltoitem "Direct link to scrolltoitem")

```codeBlockLines_AclH
scrollToItem(params: {
item: ItemT;
animated?: boolean;
viewOffset?: number;
viewPosition?: number;
);

- 'item' (Item). Required.
- 'animated' (boolean). Optional.
- 'viewOffset' (number). Optional.
- 'viewPosition' (number). Optional.

### `scrollToOffset()` [​](https://reactnative.dev/docs/next/virtualizedlist\#scrolltooffset "Direct link to scrolltooffset")

```codeBlockLines_AclH
scrollToOffset(params: {
offset: number;
animated?: boolean;
});

Scroll to a specific content pixel offset in the list.

Param `offset` expects the offset to scroll to. In case of `horizontal` is true, the offset is the x-value, in any other case the offset is the y-value.

Param `animated` ( `true` by default) defines whether the list should do an animation while scrolling.

Is this page useful?

- [Example](https://reactnative.dev/docs/next/virtualizedlist#example)
- [Props](https://reactnative.dev/docs/next/virtualizedlist#props)
- [ScrollView Props](https://reactnative.dev/docs/next/virtualizedlist#scrollview-props)
- [`data`](https://reactnative.dev/docs/next/virtualizedlist#data)
- [Required\\
**`getItem`**](https://reactnative.dev/docs/next/virtualizedlist#required-getitem)
- [Required\\
**`getItemCount`**](https://reactnative.dev/docs/next/virtualizedlist#required-getitemcount)
- [Required\\
**`renderItem`**](https://reactnative.dev/docs/next/virtualizedlist#required-renderitem)
- [`CellRendererComponent`](https://reactnative.dev/docs/next/virtualizedlist#cellrenderercomponent)
- [`ItemSeparatorComponent`](https://reactnative.dev/docs/next/virtualizedlist#itemseparatorcomponent)
- [`ListEmptyComponent`](https://reactnative.dev/docs/next/virtualizedlist#listemptycomponent)
- [`ListItemComponent`](https://reactnative.dev/docs/next/virtualizedlist#listitemcomponent)
- [`ListFooterComponent`](https://reactnative.dev/docs/next/virtualizedlist#listfootercomponent)
- [`ListFooterComponentStyle`](https://reactnative.dev/docs/next/virtualizedlist#listfootercomponentstyle)
- [`ListHeaderComponent`](https://reactnative.dev/docs/next/virtualizedlist#listheadercomponent)
- [`ListHeaderComponentStyle`](https://reactnative.dev/docs/next/virtualizedlist#listheadercomponentstyle)
- [`debug`](https://reactnative.dev/docs/next/virtualizedlist#debug)
- [`disableVirtualization`](https://reactnative.dev/docs/next/virtualizedlist#disablevirtualization)
- [`extraData`](https://reactnative.dev/docs/next/virtualizedlist#extradata)
- [`getItemLayout`](https://reactnative.dev/docs/next/virtualizedlist#getitemlayout)
- [`horizontal`](https://reactnative.dev/docs/next/virtualizedlist#horizontal)
- [`initialNumToRender`](https://reactnative.dev/docs/next/virtualizedlist#initialnumtorender)
- [`initialScrollIndex`](https://reactnative.dev/docs/next/virtualizedlist#initialscrollindex)
- [`inverted`](https://reactnative.dev/docs/next/virtualizedlist#inverted)
- [`keyExtractor`](https://reactnative.dev/docs/next/virtualizedlist#keyextractor)
- [`maxToRenderPerBatch`](https://reactnative.dev/docs/next/virtualizedlist#maxtorenderperbatch)
- [`onEndReached`](https://reactnative.dev/docs/next/virtualizedlist#onendreached)
- [`onEndReachedThreshold`](https://reactnative.dev/docs/next/virtualizedlist#onendreachedthreshold)
- [`onRefresh`](https://reactnative.dev/docs/next/virtualizedlist#onrefresh)
- [`onScrollToIndexFailed`](https://reactnative.dev/docs/next/virtualizedlist#onscrolltoindexfailed)
- [`onStartReached`](https://reactnative.dev/docs/next/virtualizedlist#onstartreached)
- [`onStartReachedThreshold`](https://reactnative.dev/docs/next/virtualizedlist#onstartreachedthreshold)
- [`onViewableItemsChanged`](https://reactnative.dev/docs/next/virtualizedlist#onviewableitemschanged)
- [`persistentScrollbar`](https://reactnative.dev/docs/next/virtualizedlist#persistentscrollbar)
- [`progressViewOffset`](https://reactnative.dev/docs/next/virtualizedlist#progressviewoffset)
- [`refreshControl`](https://reactnative.dev/docs/next/virtualizedlist#refreshcontrol)
- [`refreshing`](https://reactnative.dev/docs/next/virtualizedlist#refreshing)
- [`removeClippedSubviews`](https://reactnative.dev/docs/next/virtualizedlist#removeclippedsubviews)
- [`renderScrollComponent`](https://reactnative.dev/docs/next/virtualizedlist#renderscrollcomponent)
- [`viewabilityConfig`](https://reactnative.dev/docs/next/virtualizedlist#viewabilityconfig)
- [`viewabilityConfigCallbackPairs`](https://reactnative.dev/docs/next/virtualizedlist#viewabilityconfigcallbackpairs)
- [`updateCellsBatchingPeriod`](https://reactnative.dev/docs/next/virtualizedlist#updatecellsbatchingperiod)
- [`windowSize`](https://reactnative.dev/docs/next/virtualizedlist#windowsize)
- [Methods](https://reactnative.dev/docs/next/virtualizedlist#methods)
- [`flashScrollIndicators()`](https://reactnative.dev/docs/next/virtualizedlist#flashscrollindicators)
- [`getScrollableNode()`](https://reactnative.dev/docs/next/virtualizedlist#getscrollablenode)
- [`getScrollRef()`](https://reactnative.dev/docs/next/virtualizedlist#getscrollref)
- [`getScrollResponder()`](https://reactnative.dev/docs/next/virtualizedlist#getscrollresponder)
- [`scrollToEnd()`](https://reactnative.dev/docs/next/virtualizedlist#scrolltoend)
- [`scrollToIndex()`](https://reactnative.dev/docs/next/virtualizedlist#scrolltoindex)
- [`scrollToItem()`](https://reactnative.dev/docs/next/virtualizedlist#scrolltoitem)
- [`scrollToOffset()`](https://reactnative.dev/docs/next/virtualizedlist#scrolltooffset)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/view

[Skip to main content](https://reactnative.dev/docs/next/view#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/view)** (0.81).

Version: Next

On this page

`View` is designed to be nested inside other views and can have 0 to many children of any type.

This example creates a `View` that wraps two boxes with color and a text component in a row with padding.

View Example - Snack

# View Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {View, Text} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

return (

};

export default ViewBoxesWithColorAndText;

Snack

Hello World!

Updating…

PreviewMy DeviceAndroidiOSWeb

note

`View` s are designed to be used with [`StyleSheet`](https://reactnative.dev/docs/next/style) for clarity and performance, although inline styles are also supported.

### Synthetic Touch Events [​](https://reactnative.dev/docs/next/view\#synthetic-touch-events "Direct link to Synthetic Touch Events")

For `View` responder props (e.g., `onResponderMove`), the synthetic touch event passed to them are in form of [PressEvent](https://reactnative.dev/docs/next/pressevent).

* * *

# Reference

## Props [​](https://reactnative.dev/docs/next/view\#props "Direct link to Props")

### `accessibilityActions` [​](https://reactnative.dev/docs/next/view\#accessibilityactions "Direct link to accessibilityactions")

Accessibility actions allow an assistive technology to programmatically invoke the actions of a component. The `accessibilityActions` property should contain a list of action objects. Each action object should contain the field name and label.

See the [Accessibility guide](https://reactnative.dev/docs/next/accessibility#accessibility-actions) for more information.

| Type |
| --- |
| array |

### `accessibilityElementsHidden` iOS [​](https://reactnative.dev/docs/next/view\#accessibilityelementshidden-ios "Direct link to accessibilityelementshidden-ios")

A boolean value indicating whether the given accessibility element, and any accessibility elements it contains, are hidden. Default is `false`.

See the [Accessibility guide](https://reactnative.dev/docs/next/accessibility#accessibilityelementshidden-ios) for more information.

| Type |
| --- |
| bool |

### `accessibilityHint` [​](https://reactnative.dev/docs/next/view\#accessibilityhint "Direct link to accessibilityhint")

An accessibility hint helps users understand what will happen when they perform an action on the accessibility element when that result is not clear from the accessibility label.

| Type |
| --- |
| string |

### `accessibilityLanguage` iOS [​](https://reactnative.dev/docs/next/view\#accessibilitylanguage-ios "Direct link to accessibilitylanguage-ios")

A value indicating which language should be used by the screen reader when the user interacts with the element. It should follow the [BCP 47 specification](https://www.rfc-editor.org/info/bcp47).

See the [iOS `accessibilityLanguage` doc](https://developer.apple.com/documentation/objectivec/nsobject/1615192-accessibilitylanguage) for more information.

### `accessibilityIgnoresInvertColors` iOS [​](https://reactnative.dev/docs/next/view\#accessibilityignoresinvertcolors-ios "Direct link to accessibilityignoresinvertcolors-ios")

A value indicating this view should or should not be inverted when color inversion is turned on. A value of `true` will tell the view to not be inverted even if color inversion is turned on.

See the [Accessibility guide](https://reactnative.dev/docs/next/accessibility#accessibilityignoresinvertcolors) for more information.

### `accessibilityLabel` [​](https://reactnative.dev/docs/next/view\#accessibilitylabel "Direct link to accessibilitylabel")

Overrides the text that's read by the screen reader when the user interacts with the element. By default, the label is constructed by traversing all the children and accumulating all the `Text` nodes separated by space.

### `accessibilityLiveRegion` Android [​](https://reactnative.dev/docs/next/view\#accessibilityliveregion-android "Direct link to accessibilityliveregion-android")

- `'none'` \- Accessibility services should not announce changes to this view.
- `'polite'`\- Accessibility services should announce changes to this view.
- `'assertive'` \- Accessibility services should interrupt ongoing speech to immediately announce changes to this view.

See the [Android `View` docs](https://developer.android.com/reference/android/view/View.html#attr_android:accessibilityLiveRegion) for reference.

| Type |
| --- |
| enum('none', 'polite', 'assertive') |

### `accessibilityRole` [​](https://reactnative.dev/docs/next/view\#accessibilityrole "Direct link to accessibilityrole")

`accessibilityRole` communicates the purpose of a component to the user of an assistive technology.

`accessibilityRole` can be one of the following:

- `'none'` \- Used when the element has no role.
- `'button'` \- Used when the element should be treated as a button.
- `'link'` \- Used when the element should be treated as a link.
- `'search'` \- Used when the text field element should also be treated as a search field.
- `'image'` \- Used when the element should be treated as an image. Can be combined with button or link, for example.
- `'keyboardkey'` \- Used when the element acts as a keyboard key.
- `'text'` \- Used when the element should be treated as static text that cannot change.
- `'adjustable'` \- Used when an element can be "adjusted" (e.g. a slider).
- `'imagebutton'` \- Used when the element should be treated as a button and is also an image.
- `'header'` \- Used when an element acts as a header for a content section (e.g. the title of a navigation bar).
- `'summary'` \- Used when an element can be used to provide a quick summary of current conditions in the app when the app first launches.
- `'alert'` \- Used when an element contains important text to be presented to the user.
- `'checkbox'` \- Used when an element represents a checkbox which can be checked, unchecked, or have mixed checked state.
- `'combobox'` \- Used when an element represents a combo box, which allows the user to select among several choices.
- `'menu'` \- Used when the component is a menu of choices.
- `'menubar'` \- Used when a component is a container of multiple menus.
- `'menuitem'` \- Used to represent an item within a menu.
- `'progressbar'` \- Used to represent a component which indicates progress of a task.
- `'radio'` \- Used to represent a radio button.
- `'radiogroup'` \- Used to represent a group of radio buttons.
- `'scrollbar'` \- Used to represent a scroll bar.
- `'spinbutton'` \- Used to represent a button which opens a list of choices.
- `'switch'` \- Used to represent a switch which can be turned on and off.
- `'tab'` \- Used to represent a tab.
- `'tablist'` \- Used to represent a list of tabs.
- `'timer'` \- Used to represent a timer.
- `'toolbar'` \- Used to represent a tool bar (a container of action buttons or components).
- `'grid'` \- Used with ScrollView, VirtualizedList, FlatList, or SectionList to represent a grid. Adds the in/out of grid announcements to the android GridView.

### `accessibilityState` [​](https://reactnative.dev/docs/next/view\#accessibilitystate "Direct link to accessibilitystate")

Describes the current state of a component to the user of an assistive technology.

See the [Accessibility guide](https://reactnative.dev/docs/next/accessibility#accessibilitystate-ios-android) for more information.

| Type |
| --- |
| object: `{disabled: bool, selected: bool, checked: bool or 'mixed', busy: bool, expanded: bool}` |

### `accessibilityValue` [​](https://reactnative.dev/docs/next/view\#accessibilityvalue "Direct link to accessibilityvalue")

Represents the current value of a component. It can be a textual description of a component's value, or for range-based components, such as sliders and progress bars, it contains range information (minimum, current, and maximum).

See the [Accessibility guide](https://reactnative.dev/docs/next/accessibility#accessibilityvalue-ios-android) for more information.

| Type |
| --- |
| object: `{min: number, max: number, now: number, text: string}` |

### `accessibilityViewIsModal` iOS [​](https://reactnative.dev/docs/next/view\#accessibilityviewismodal-ios "Direct link to accessibilityviewismodal-ios")

A value indicating whether VoiceOver should ignore the elements within views that are siblings of the receiver. Default is `false`.

See the [Accessibility guide](https://reactnative.dev/docs/next/accessibility#accessibilityviewismodal-ios) for more information.

### `accessible` [​](https://reactnative.dev/docs/next/view\#accessible "Direct link to accessible")

When `true`, indicates that the view is an accessibility element and discoverable by assistive technologies such as screen readers and hardware keyboards. By default, all the touchable elements are accessible.

See the [Accessibility guide](https://reactnative.dev/docs/next/accessibility#accessible) for more information.

### `aria-busy` [​](https://reactnative.dev/docs/next/view\#aria-busy "Direct link to aria-busy")

Indicates an element is being modified and that assistive technologies may want to wait until the changes are complete before informing the user about the update.

| Type | Default |
| --- | --- |
| boolean | false |

### `aria-checked` [​](https://reactnative.dev/docs/next/view\#aria-checked "Direct link to aria-checked")

Indicates the state of a checkable element. This field can either take a boolean or the "mixed" string to represent mixed checkboxes.

| Type | Default |
| --- | --- |
| boolean, 'mixed' | false |

### `aria-disabled` [​](https://reactnative.dev/docs/next/view\#aria-disabled "Direct link to aria-disabled")

Indicates that the element is perceivable but disabled, so it is not editable or otherwise operable.

### `aria-expanded` [​](https://reactnative.dev/docs/next/view\#aria-expanded "Direct link to aria-expanded")

Indicates whether an expandable element is currently expanded or collapsed.

### `aria-hidden` [​](https://reactnative.dev/docs/next/view\#aria-hidden "Direct link to aria-hidden")

Indicates whether the element is hidden from assistive technologies.

For example, in a window that contains sibling views `A` and `B`, setting `aria-hidden` to `true` on view `B` causes VoiceOver to ignore the `B` element and its children.

### `aria-label` [​](https://reactnative.dev/docs/next/view\#aria-label "Direct link to aria-label")

Defines a string value that labels an interactive element.

### `aria-labelledby` Android [​](https://reactnative.dev/docs/next/view\#aria-labelledby-android "Direct link to aria-labelledby-android")

Identifies the element that labels the element it is applied to. The value of `aria-labelledby` should match the [`nativeID`](https://reactnative.dev/docs/next/view#nativeid) of the related element:

tsx

```codeBlockLines_AclH

### `aria-live` Android [​](https://reactnative.dev/docs/next/view\#aria-live-android "Direct link to aria-live-android")

Indicates that an element will be updated, and describes the types of updates the user agents, assistive technologies, and user can expect from the live region.

- **off** Accessibility services should not announce changes to this view.
- **polite** Accessibility services should announce changes to this view.
- **assertive** Accessibility services should interrupt ongoing speech to immediately announce changes to this view.

| Type | Default |
| --- | --- |
| enum( `'assertive'`, `'off'`, `'polite'`) | `'off'` |

### `aria-modal` iOS [​](https://reactnative.dev/docs/next/view\#aria-modal-ios "Direct link to aria-modal-ios")

Boolean value indicating whether VoiceOver should ignore the elements within views that are siblings of the receiver. Has precedence over the [`accessibilityViewIsModal`](https://reactnative.dev/docs/next/view#accessibilityviewismodal-ios) prop.

### `aria-selected` [​](https://reactnative.dev/docs/next/view\#aria-selected "Direct link to aria-selected")

Indicates whether a selectable element is currently selected or not.

| Type |
| --- |
| boolean |

### `aria-valuemax` [​](https://reactnative.dev/docs/next/view\#aria-valuemax "Direct link to aria-valuemax")

Represents the maximum value for range-based components, such as sliders and progress bars. Has precedence over the `max` value in the `accessibilityValue` prop.

| Type |
| --- |
| number |

### `aria-valuemin` [​](https://reactnative.dev/docs/next/view\#aria-valuemin "Direct link to aria-valuemin")

Represents the minimum value for range-based components, such as sliders and progress bars. Has precedence over the `min` value in the `accessibilityValue` prop.

### `aria-valuenow` [​](https://reactnative.dev/docs/next/view\#aria-valuenow "Direct link to aria-valuenow")

Represents the current value for range-based components, such as sliders and progress bars. Has precedence over the `now` value in the `accessibilityValue` prop.

### `aria-valuetext` [​](https://reactnative.dev/docs/next/view\#aria-valuetext "Direct link to aria-valuetext")

Represents the textual description of the component. Has precedence over the `text` value in the `accessibilityValue` prop.

### `collapsable` [​](https://reactnative.dev/docs/next/view\#collapsable "Direct link to collapsable")

Views that are only used to layout their children or otherwise don't draw anything may be automatically removed from the native hierarchy as an optimization. Set this property to `false` to disable this optimization and ensure that this `View` exists in the native view hierarchy.

| Type | Default |
| --- | --- |
| boolean | true |

### `collapsableChildren` [​](https://reactnative.dev/docs/next/view\#collapsablechildren "Direct link to collapsablechildren")

Setting to false prevents direct children of the view from being removed from the native view hierarchy, similar to the effect of setting `collapsable={false}` on each child.

### `experimental_accessibilityOrder` [​](https://reactnative.dev/docs/next/view\#experimental_accessibilityorder "Direct link to experimental_accessibilityorder")

Experimental 🧪

**This API is experimental.** Experimental APIs may contain bugs and are likely to change in a future version of React Native. Don't use them in production.

`experimental_accessibilityOrder` indicates the order in which an assistive technology focuses descendants of this `View`. This prop takes an array of strings where each string is a [`nativeID`](https://reactnative.dev/docs/next/view#nativeid) of some descendant component whose order is being defined. This prop does not enable accessibility itself, each referenced component still needs to be accessible by setting [`accessible`](https://reactnative.dev/docs/next/view#accessible) to true. This prop is both **nestable** and **exhaustive** meaning

- If `experimental_accessibilityOrder` contains a reference to some non-accessible component, it will focus the descendants of that component in the default order. Additionally, it can also contain a reference to other components that also have an `experimental_accessibilityOrder`.
- If some component that is otherwise accessible is not directly referenced in `experimental_accessibilityOrder`, or nested within some container directly referenced in `experimental_accessibilityOrder`, then it will not be accessible.

See the [accessibility guide](https://reactnative.dev/docs/next/accessibility#experimental_accessibilityorder) for more information.

| Type |
| --- |
| array of strings |

### `focusable` Android [​](https://reactnative.dev/docs/next/view\#focusable-android "Direct link to focusable-android")

Whether this `View` should be focusable with a non-touch input device, eg. receive focus with a hardware keyboard.

### `hitSlop` [​](https://reactnative.dev/docs/next/view\#hitslop "Direct link to hitslop")

This defines how far a touch event can start away from the view. Typical interface guidelines recommend touch targets that are at least 30 - 40 points/density-independent pixels.

For example, if a touchable view has a height of 20 the touchable height can be extended to 40 with `hitSlop={{top: 10, bottom: 10, left: 0, right: 0}}`

The touch area never extends past the parent view bounds, and the Z-index of sibling views always takes precedence if a touch hits two overlapping views.

| Type |
| --- |
| object: `{top: number, left: number, bottom: number, right: number}` |

### `id` [​](https://reactnative.dev/docs/next/view\#id "Direct link to id")

Used to locate this view from native classes. Has precedence over `nativeID` prop.

warning

This disables the 'layout-only view removal' optimization for this view!

### `importantForAccessibility` Android [​](https://reactnative.dev/docs/next/view\#importantforaccessibility-android "Direct link to importantforaccessibility-android")

Controls how view is important for accessibility which is if it fires accessibility events and if it is reported to accessibility services that query the screen. Works for Android only.

Possible values:

- `'auto'` \- The system determines whether the view is important for accessibility - default (recommended).
- `'yes'` \- The view is important for accessibility.
- `'no'` \- The view is not important for accessibility.
- `'no-hide-descendants'` \- The view is not important for accessibility, nor are any of its descendant views.

See the [Android `importantForAccessibility` docs](https://developer.android.com/reference/android/R.attr.html#importantForAccessibility) for reference.

| Type |
| --- |
| enum('auto', 'yes', 'no', 'no-hide-descendants') |

### `nativeID` [​](https://reactnative.dev/docs/next/view\#nativeid "Direct link to nativeid")

Used to locate this view from native classes.

### `needsOffscreenAlphaCompositing` [​](https://reactnative.dev/docs/next/view\#needsoffscreenalphacompositing "Direct link to needsoffscreenalphacompositing")

Whether this `View` needs to rendered offscreen and composited with an alpha in order to preserve 100% correct colors and blending behavior. The default ( `false`) falls

Designates the next view to receive focus when the user navigates down. See the [Android documentation](https://developer.android.com/reference/android/view/View.html#attr_android:nextFocusDown).

### `nextFocusForward` Android [​](https://reactnative.dev/docs/next/view\#nextfocusforward-android "Direct link to nextfocusforward-android")

Designates the next view to receive focus when the user navigates forward. See the [Android documentation](https://developer.android.com/reference/android/view/View.html#attr_android:nextFocusForward).

### `nextFocusLeft` Android [​](https://reactnative.dev/docs/next/view\#nextfocusleft-android "Direct link to nextfocusleft-android")

Designates the next view to receive focus when the user navigates left. See the [Android documentation](https://developer.android.com/reference/android/view/View.html#attr_android:nextFocusLeft).

### `nextFocusRight` Android [​](https://reactnative.dev/docs/next/view\#nextfocusright-android "Direct link to nextfocusright-android")

Designates the next view to receive focus when the user navigates right. See the [Android documentation](https://developer.android.com/reference/android/view/View.html#attr_android:nextFocusRight).

### `nextFocusUp` Android [​](https://reactnative.dev/docs/next/view\#nextfocusup-android "Direct link to nextfocusup-android")

Designates the next view to receive focus when the user navigates up. See the [Android documentation](https://developer.android.com/reference/android/view/View.html#attr_android:nextFocusUp).

### `onAccessibilityAction` [​](https://reactnative.dev/docs/next/view\#onaccessibilityaction "Direct link to onaccessibilityaction")

Invoked when the user performs the accessibility actions. The only argument to this function is an event containing the name of the action to perform.

| Type |
| --- |
| function |

### `onAccessibilityEscape` iOS [​](https://reactnative.dev/docs/next/view\#onaccessibilityescape-ios "Direct link to onaccessibilityescape-ios")

When `accessible` is `true`, the system will invoke this function when the user performs the escape gesture.

### `onAccessibilityTap` iOS [​](https://reactnative.dev/docs/next/view\#onaccessibilitytap-ios "Direct link to onaccessibilitytap-ios")

When `accessible` is true, the system will try to invoke this function when the user performs accessibility tap gesture.

### `onLayout` [​](https://reactnative.dev/docs/next/view\#onlayout "Direct link to onlayout")

Invoked on mount and on layout changes.

This event is fired immediately once the layout has been calculated, but the new layout may not yet be reflected on the screen at the time the event is received, especially if a layout animation is in progress.

| Type |
| --- |

### `onMagicTap` iOS [​](https://reactnative.dev/docs/next/view\#onmagictap-ios "Direct link to onmagictap-ios")

When `accessible` is `true`, the system will invoke this function when the user performs the magic tap gesture.

### `onMoveShouldSetResponder` [​](https://reactnative.dev/docs/next/view\#onmoveshouldsetresponder "Direct link to onmoveshouldsetresponder")

Does this view want to "claim" touch responsiveness? This is called for every touch move on the `View` when it is not the responder.

### `onMoveShouldSetResponderCapture` [​](https://reactnative.dev/docs/next/view\#onmoveshouldsetrespondercapture "Direct link to onmoveshouldsetrespondercapture")

If a parent `View` wants to prevent a child `View` from becoming responder on a move, it should have this handler which returns `true`.

### `onResponderGrant` [​](https://reactnative.dev/docs/next/view\#onrespondergrant "Direct link to onrespondergrant")

The View is now responding for touch events. This is the time to highlight and show the user what is happening.

### `onResponderMove` [​](https://reactnative.dev/docs/next/view\#onrespondermove "Direct link to onrespondermove")

The user is moving their finger.

### `onResponderReject` [​](https://reactnative.dev/docs/next/view\#onresponderreject "Direct link to onresponderreject")

Another responder is already active and will not release it to that `View` asking to be the responder.

### `onResponderRelease` [​](https://reactnative.dev/docs/next/view\#onresponderrelease "Direct link to onresponderrelease")

Fired at the end of the touch.

### `onResponderTerminate` [​](https://reactnative.dev/docs/next/view\#onresponderterminate "Direct link to onresponderterminate")

The responder has been taken from the `View`. Might be taken by other views after a call to `onResponderTerminationRequest`, or might be taken by the OS without asking (e.g., happens with control center/ notification center on iOS)

### `onResponderTerminationRequest` [​](https://reactnative.dev/docs/next/view\#onresponderterminationrequest "Direct link to onresponderterminationrequest")

Some other `View` wants to become responder and is asking this `View` to release its responder. Returning `true` allows its release.

### `onStartShouldSetResponder` [​](https://reactnative.dev/docs/next/view\#onstartshouldsetresponder "Direct link to onstartshouldsetresponder")

Does this view want to become responder on the start of a touch?

### `onStartShouldSetResponderCapture` [​](https://reactnative.dev/docs/next/view\#onstartshouldsetrespondercapture "Direct link to onstartshouldsetrespondercapture")

If a parent `View` wants to prevent a child `View` from becoming responder on a touch start, it should have this handler which returns `true`.

### `pointerEvents` [​](https://reactnative.dev/docs/next/view\#pointerevents "Direct link to pointerevents")

Controls whether the `View` can be the target of touch events.

- `'auto'`: The View can be the target of touch events.
- `'none'`: The View is never the target of touch events.
- `'box-none'`: The View is never the target of touch events but its subviews can be. It behaves like if the view had the following classes in CSS:

css

```codeBlockLines_AclH
.box-none {
pointer-events: none;
}
.box-none * {
pointer-events: auto;
}

- `'box-only'`: The view can be the target of touch events but its subviews cannot be. It behaves like if the view had the following classes in CSS:

```codeBlockLines_AclH
.box-only {
pointer-events: auto;
}
.box-only * {
pointer-events: none;
}

| Type |
| --- |
| enum('box-none', 'none', 'box-only', 'auto') |

### `ref` [​](https://reactnative.dev/docs/next/view\#ref "Direct link to ref")

A ref setter that will be assigned an [element node](https://reactnative.dev/docs/next/element-nodes) when mounted.

### `removeClippedSubviews` [​](https://reactnative.dev/docs/next/view\#removeclippedsubviews "Direct link to removeclippedsubviews")

This is a reserved performance property exposed by `RCTView` and is useful for scrolling content when there are many subviews, most of which are offscreen. For this property to be effective, it must be applied to a view that contains many subviews that extend outside its bound. The subviews must also have `overflow: hidden`, as should the containing view (or one of its superviews).

### `renderToHardwareTextureAndroid` Android [​](https://reactnative.dev/docs/next/view\#rendertohardwaretextureandroid-android "Direct link to rendertohardwaretextureandroid-android")

Whether this `View` should render itself (and all of its children) into a single hardware texture on the GPU.

On Android, this is useful for animations and interactions that only modify opacity, rotation, translation, and/or scale: in those cases, the view doesn't have to be redrawn and display lists don't need to be re-executed. The texture can be re-used and re-composited with different parameters. The downside is that this can use up limited video memory, so this prop should be set

`role` communicates the purpose of a component to the user of an assistive technology. Has precedence over the [`accessibilityRole`](https://reactnative.dev/docs/next/view#accessibilityrole) prop.

| Type |
| --- |
| [Role](https://reactnative.dev/docs/next/accessibility#role) |

### `shouldRasterizeIOS` iOS [​](https://reactnative.dev/docs/next/view\#shouldrasterizeios-ios "Direct link to shouldrasterizeios-ios")

Whether this `View` should be rendered as a bitmap before compositing.

On iOS, this is useful for animations and interactions that do not modify this component's dimensions nor its children; for example, when translating the position of a static view, rasterization allows the renderer to reuse a cached bitmap of a static view and quickly composite it during each frame.

Rasterization incurs an off-screen drawing pass and the bitmap consumes memory. Test and measure when using this property.

### `style` [​](https://reactnative.dev/docs/next/view\#style "Direct link to style")

| Type |
| --- |
| [View Style](https://reactnative.dev/docs/next/view-style-props) |

### `tabIndex` Android [​](https://reactnative.dev/docs/next/view\#tabindex-android "Direct link to tabindex-android")

Whether this `View` should be focusable with a non-touch input device, eg. receive focus with a hardware keyboard.
Supports the following values:

- `0` \- View is focusable
- `-1` \- View is not focusable

| Type |
| --- |
| enum(0, -1) |

### `testID` [​](https://reactnative.dev/docs/next/view\#testid "Direct link to testid")

Used to locate this view in end-to-end tests.

Is this page useful?

- [Synthetic Touch Events](https://reactnative.dev/docs/next/view#synthetic-touch-events)
- [Props](https://reactnative.dev/docs/next/view#props)
- [`accessibilityActions`](https://reactnative.dev/docs/next/view#accessibilityactions)
- [`accessibilityElementsHidden` \\
iOS](https://reactnative.dev/docs/next/view#accessibilityelementshidden-ios)
- [`accessibilityHint`](https://reactnative.dev/docs/next/view#accessibilityhint)
- [`accessibilityLanguage` \\
iOS](https://reactnative.dev/docs/next/view#accessibilitylanguage-ios)
- [`accessibilityIgnoresInvertColors` \\
iOS](https://reactnative.dev/docs/next/view#accessibilityignoresinvertcolors-ios)
- [`accessibilityLabel`](https://reactnative.dev/docs/next/view#accessibilitylabel)
- [`accessibilityLiveRegion` \\
Android](https://reactnative.dev/docs/next/view#accessibilityliveregion-android)
- [`accessibilityRole`](https://reactnative.dev/docs/next/view#accessibilityrole)
- [`accessibilityState`](https://reactnative.dev/docs/next/view#accessibilitystate)
- [`accessibilityValue`](https://reactnative.dev/docs/next/view#accessibilityvalue)
- [`accessibilityViewIsModal` \\
iOS](https://reactnative.dev/docs/next/view#accessibilityviewismodal-ios)
- [`accessible`](https://reactnative.dev/docs/next/view#accessible)
- [`aria-busy`](https://reactnative.dev/docs/next/view#aria-busy)
- [`aria-checked`](https://reactnative.dev/docs/next/view#aria-checked)
- [`aria-disabled`](https://reactnative.dev/docs/next/view#aria-disabled)
- [`aria-expanded`](https://reactnative.dev/docs/next/view#aria-expanded)
- [`aria-hidden`](https://reactnative.dev/docs/next/view#aria-hidden)
- [`aria-label`](https://reactnative.dev/docs/next/view#aria-label)
- [`aria-labelledby` \\
Android](https://reactnative.dev/docs/next/view#aria-labelledby-android)
- [`aria-live` \\
Android](https://reactnative.dev/docs/next/view#aria-live-android)
- [`aria-modal` \\
iOS](https://reactnative.dev/docs/next/view#aria-modal-ios)
- [`aria-selected`](https://reactnative.dev/docs/next/view#aria-selected)
- [`aria-valuemax`](https://reactnative.dev/docs/next/view#aria-valuemax)
- [`aria-valuemin`](https://reactnative.dev/docs/next/view#aria-valuemin)
- [`aria-valuenow`](https://reactnative.dev/docs/next/view#aria-valuenow)
- [`aria-valuetext`](https://reactnative.dev/docs/next/view#aria-valuetext)
- [`collapsable`](https://reactnative.dev/docs/next/view#collapsable)
- [`collapsableChildren`](https://reactnative.dev/docs/next/view#collapsablechildren)
- [`experimental_accessibilityOrder`](https://reactnative.dev/docs/next/view#experimental_accessibilityorder)
- [`focusable` \\
Android](https://reactnative.dev/docs/next/view#focusable-android)
- [`hitSlop`](https://reactnative.dev/docs/next/view#hitslop)
- [`id`](https://reactnative.dev/docs/next/view#id)
- [`importantForAccessibility` \\
Android](https://reactnative.dev/docs/next/view#importantforaccessibility-android)
- [`nativeID`](https://reactnative.dev/docs/next/view#nativeid)
- [`needsOffscreenAlphaCompositing`](https://reactnative.dev/docs/next/view#needsoffscreenalphacompositing)
- [`nextFocusDown` \\
Android](https://reactnative.dev/docs/next/view#nextfocusdown-android)
- [`nextFocusForward` \\
Android](https://reactnative.dev/docs/next/view#nextfocusforward-android)
- [`nextFocusLeft` \\
Android](https://reactnative.dev/docs/next/view#nextfocusleft-android)
- [`nextFocusRight` \\
Android](https://reactnative.dev/docs/next/view#nextfocusright-android)
- [`nextFocusUp` \\
Android](https://reactnative.dev/docs/next/view#nextfocusup-android)
- [`onAccessibilityAction`](https://reactnative.dev/docs/next/view#onaccessibilityaction)
- [`onAccessibilityEscape` \\
iOS](https://reactnative.dev/docs/next/view#onaccessibilityescape-ios)
- [`onAccessibilityTap` \\
iOS](https://reactnative.dev/docs/next/view#onaccessibilitytap-ios)
- [`onLayout`](https://reactnative.dev/docs/next/view#onlayout)
- [`onMagicTap` \\
iOS](https://reactnative.dev/docs/next/view#onmagictap-ios)
- [`onMoveShouldSetResponder`](https://reactnative.dev/docs/next/view#onmoveshouldsetresponder)
- [`onMoveShouldSetResponderCapture`](https://reactnative.dev/docs/next/view#onmoveshouldsetrespondercapture)
- [`onResponderGrant`](https://reactnative.dev/docs/next/view#onrespondergrant)
- [`onResponderMove`](https://reactnative.dev/docs/next/view#onrespondermove)
- [`onResponderReject`](https://reactnative.dev/docs/next/view#onresponderreject)
- [`onResponderRelease`](https://reactnative.dev/docs/next/view#onresponderrelease)
- [`onResponderTerminate`](https://reactnative.dev/docs/next/view#onresponderterminate)
- [`onResponderTerminationRequest`](https://reactnative.dev/docs/next/view#onresponderterminationrequest)
- [`onStartShouldSetResponder`](https://reactnative.dev/docs/next/view#onstartshouldsetresponder)
- [`onStartShouldSetResponderCapture`](https://reactnative.dev/docs/next/view#onstartshouldsetrespondercapture)
- [`pointerEvents`](https://reactnative.dev/docs/next/view#pointerevents)
- [`ref`](https://reactnative.dev/docs/next/view#ref)
- [`removeClippedSubviews`](https://reactnative.dev/docs/next/view#removeclippedsubviews)
- [`renderToHardwareTextureAndroid` \\
Android](https://reactnative.dev/docs/next/view#rendertohardwaretextureandroid-android)
- [`role`](https://reactnative.dev/docs/next/view#role)
- [`shouldRasterizeIOS` \\
iOS](https://reactnative.dev/docs/next/view#shouldrasterizeios-ios)
- [`style`](https://reactnative.dev/docs/next/view#style)
- [`tabIndex` \\
Android](https://reactnative.dev/docs/next/view#tabindex-android)
- [`testID`](https://reactnative.dev/docs/next/view#testid)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/vibration

[Skip to main content](https://reactnative.dev/docs/next/vibration#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/vibration)** (0.81).

Version: Next

On this page

Vibrates the device.

## Example [​](https://reactnative.dev/docs/next/vibration\#example "Direct link to Example")

Vibration Example - Snack

# Vibration Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {
Button,
Platform,
Text,
Vibration,
View,
StyleSheet,
} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

};

const ONE\_SECOND\_IN\_MS = 1000;

const PATTERN = \[\
1 \* ONE\_SECOND\_IN\_MS,\
2 \* ONE\_SECOND\_IN\_MS,\
3 \* ONE\_SECOND\_IN\_MS,\
\];

const PATTERN\_DESC =
Platform.OS === 'android'
? 'wait 1s, vibrate 2s, wait 3s'
: 'wait 1s, vibrate, wait 2s, vibrate, wait 3s';

return (

? \[\

<Button\
title="Vibrate for 10 seconds"\

\]
: null}

title="Vibrate with pattern"

title="Vibrate with pattern until cancelled"

title="Stop vibration pattern"

color="#FF0000"

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
paddingTop: 44,
padding: 8,
},
header: {
fontSize: 18,
fontWeight: 'bold',
textAlign: 'center',
},
paragraph: {
margin: 24,
textAlign: 'center',
},
separator: {
marginVertical: 8,
borderBottomColor: '#737373',
borderBottomWidth: StyleSheet.hairlineWidth,
},
});

export default App;

import React from 'react';
import {
Button,
Platform,
Text,
Vibration,
View,
StyleSheet,
} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const ONE_SECOND_IN_MS = 1000;

const PATTERN = [\
1 * ONE_SECOND_IN_MS,\
2 * ONE_SECOND_IN_MS,\
3 * ONE_SECOND_IN_MS,\
];

const PATTERN_DESC =
Platform.OS === 'android'
? 'wait 1s, vibrate 2s, wait 3s'
: 'wait 1s, vibrate, wait 2s, vibrate, wait 3s';

? [\

<Button\
title="Vibrate for 10 seconds"\

]
: null}

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'center',
paddingTop: 44,
padding: 8,
},
header: {
fontSize: 18,
fontWeight: 'bold',
textAlign: 'center',
},
paragraph: {
margin: 24,
textAlign: 'center',
},
separator: {
marginVertical: 8,
borderBottomColor: '#737373',
borderBottomWidth: StyleSheet.hairlineWidth,
},
});

### Download [Expo Go](https://expo.dev/client) and scan the QR code to get started.

exp://u.expo.dev/933fd9c0-1666-11e7-afca-d980795c5824?runtime-version=exposdk%3A53.0.0&channel-name=production&snack-channel=RCZbq1CH3a

### Connected devices

0

[Log in](https://expo.dev/login) to open this Snack from Expo Go on your device or simulator.

PreviewMy DeviceAndroidiOS

info

note

The Vibration API is implemented as a `AudioServicesPlaySystemSound(kSystemSoundID_Vibrate)` call on iOS.

* * *

# Reference

## Methods [​](https://reactnative.dev/docs/next/vibration\#methods "Direct link to Methods")

### `cancel()` [​](https://reactnative.dev/docs/next/vibration\#cancel "Direct link to cancel")

tsx

```codeBlockLines_AclH
static cancel();

Call this to stop vibrating after having invoked `vibrate()` with repetition enabled.

### `vibrate()` [​](https://reactnative.dev/docs/next/vibration\#vibrate "Direct link to vibrate")

```codeBlockLines_AclH
static vibrate(
pattern?: number | number[],
repeat?: boolean
);

Triggers a vibration with a fixed duration.

**On Android,** the vibration duration defaults to 400 milliseconds, and an arbitrary vibration duration can be specified by passing a number as the value for the `pattern` argument. **On iOS,** the vibration duration is fixed at roughly 400 milliseconds.

The `vibrate()` method can take a `pattern` argument with an array of numbers that represent time in milliseconds. You may set `repeat` to true to run through the vibration pattern in a loop until `cancel()` is called.

**On Android,** the odd indices of the `pattern` array represent the vibration duration, while the even ones represent the separation time. **On iOS,** the numbers in the `pattern` array represent the separation time, as the vibration duration is fixed.

**Parameters:**

| Name | Type | Default | Description |
| --- | --- | --- | --- |

| repeat | boolean | `false` | Repeat vibration pattern until `cancel()`. |

Is this page useful?

- [Example](https://reactnative.dev/docs/next/vibration#example)
- [Methods](https://reactnative.dev/docs/next/vibration#methods)
- [`cancel()`](https://reactnative.dev/docs/next/vibration#cancel)
- [`vibrate()`](https://reactnative.dev/docs/next/vibration#vibrate)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/view-style-props

[Skip to main content](https://reactnative.dev/docs/next/view-style-props#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/view-style-props)** (0.81).

Version: Next

On this page

### Example [​](https://reactnative.dev/docs/next/view-style-props\#example "Direct link to Example")

ViewStyleProps - Snack

# ViewStyleProps

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {View, StyleSheet} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'space-between',
padding: 20,
margin: 10,
},
top: {
flex: 0.3,
backgroundColor: 'grey',
borderWidth: 5,
borderTopLeftRadius: 20,
borderTopRightRadius: 20,
},
middle: {
flex: 0.3,
backgroundColor: 'beige',
borderWidth: 5,
},
bottom: {
flex: 0.3,
backgroundColor: 'pink',
borderWidth: 5,
borderBottomLeftRadius: 20,
borderBottomRightRadius: 20,
},
});

export default App;

const styles = StyleSheet.create({
container: {
flex: 1,
justifyContent: 'space-between',
padding: 20,
margin: 10,
},
top: {
flex: 0.3,
backgroundColor: 'grey',
borderWidth: 5,
borderTopLeftRadius: 20,
borderTopRightRadius: 20,
},
middle: {
flex: 0.3,
backgroundColor: 'beige',
borderWidth: 5,
},
bottom: {
flex: 0.3,
backgroundColor: 'pink',
borderWidth: 5,
borderBottomLeftRadius: 20,
borderBottomRightRadius: 20,
},
});

Snack

Updating…

PreviewMy DeviceAndroidiOSWeb

# Reference

## Props [​](https://reactnative.dev/docs/next/view-style-props\#props "Direct link to Props")

### `backfaceVisibility` [​](https://reactnative.dev/docs/next/view-style-props\#backfacevisibility "Direct link to backfacevisibility")

| Type |
| --- |
| enum( `'visible'`, `'hidden'`) |

* * *

### `backgroundColor` [​](https://reactnative.dev/docs/next/view-style-props\#backgroundcolor "Direct link to backgroundcolor")

| Type |
| --- |
| [color](https://reactnative.dev/docs/next/colors) |

### `borderBottomColor` [​](https://reactnative.dev/docs/next/view-style-props\#borderbottomcolor "Direct link to borderbottomcolor")

### `borderBlockColor` [​](https://reactnative.dev/docs/next/view-style-props\#borderblockcolor "Direct link to borderblockcolor")

### `borderBlockEndColor` [​](https://reactnative.dev/docs/next/view-style-props\#borderblockendcolor "Direct link to borderblockendcolor")

### `borderBlockStartColor` [​](https://reactnative.dev/docs/next/view-style-props\#borderblockstartcolor "Direct link to borderblockstartcolor")

### `borderBottomEndRadius` [​](https://reactnative.dev/docs/next/view-style-props\#borderbottomendradius "Direct link to borderbottomendradius")

| Type |
| --- |
| number, string (percentage value) |

### `borderBottomLeftRadius` [​](https://reactnative.dev/docs/next/view-style-props\#borderbottomleftradius "Direct link to borderbottomleftradius")

### `borderBottomRightRadius` [​](https://reactnative.dev/docs/next/view-style-props\#borderbottomrightradius "Direct link to borderbottomrightradius")

### `borderBottomStartRadius` [​](https://reactnative.dev/docs/next/view-style-props\#borderbottomstartradius "Direct link to borderbottomstartradius")

### `borderStartEndRadius` [​](https://reactnative.dev/docs/next/view-style-props\#borderstartendradius "Direct link to borderstartendradius")

### `borderStartStartRadius` [​](https://reactnative.dev/docs/next/view-style-props\#borderstartstartradius "Direct link to borderstartstartradius")

### `borderEndEndRadius` [​](https://reactnative.dev/docs/next/view-style-props\#borderendendradius "Direct link to borderendendradius")

### `borderEndStartRadius` [​](https://reactnative.dev/docs/next/view-style-props\#borderendstartradius "Direct link to borderendstartradius")

### `borderBottomWidth` [​](https://reactnative.dev/docs/next/view-style-props\#borderbottomwidth "Direct link to borderbottomwidth")

| Type |
| --- |
| number |

### `borderColor` [​](https://reactnative.dev/docs/next/view-style-props\#bordercolor "Direct link to bordercolor")

### `borderCurve` iOS [​](https://reactnative.dev/docs/next/view-style-props\#bordercurve-ios "Direct link to bordercurve-ios")

On , it is possible to change the corner curve of borders.

| Type |
| --- |
| enum( `'circular'`, `'continuous'`) |

### `borderEndColor` [​](https://reactnative.dev/docs/next/view-style-props\#borderendcolor "Direct link to borderendcolor")

### `borderLeftColor` [​](https://reactnative.dev/docs/next/view-style-props\#borderleftcolor "Direct link to borderleftcolor")

### `borderLeftWidth` [​](https://reactnative.dev/docs/next/view-style-props\#borderleftwidth "Direct link to borderleftwidth")

### `borderRadius` [​](https://reactnative.dev/docs/next/view-style-props\#borderradius "Direct link to borderradius")

If the rounded border is not visible, try applying `overflow: 'hidden'` as well.

### `borderRightColor` [​](https://reactnative.dev/docs/next/view-style-props\#borderrightcolor "Direct link to borderrightcolor")

### `borderRightWidth` [​](https://reactnative.dev/docs/next/view-style-props\#borderrightwidth "Direct link to borderrightwidth")

### `borderStartColor` [​](https://reactnative.dev/docs/next/view-style-props\#borderstartcolor "Direct link to borderstartcolor")

### `borderStyle` [​](https://reactnative.dev/docs/next/view-style-props\#borderstyle "Direct link to borderstyle")

| Type |
| --- |
| enum( `'solid'`, `'dotted'`, `'dashed'`) |

### `borderTopColor` [​](https://reactnative.dev/docs/next/view-style-props\#bordertopcolor "Direct link to bordertopcolor")

### `borderTopEndRadius` [​](https://reactnative.dev/docs/next/view-style-props\#bordertopendradius "Direct link to bordertopendradius")

### `borderTopLeftRadius` [​](https://reactnative.dev/docs/next/view-style-props\#bordertopleftradius "Direct link to bordertopleftradius")

### `borderTopRightRadius` [​](https://reactnative.dev/docs/next/view-style-props\#bordertoprightradius "Direct link to bordertoprightradius")

### `borderTopStartRadius` [​](https://reactnative.dev/docs/next/view-style-props\#bordertopstartradius "Direct link to bordertopstartradius")

### `borderTopWidth` [​](https://reactnative.dev/docs/next/view-style-props\#bordertopwidth "Direct link to bordertopwidth")

### `borderWidth` [​](https://reactnative.dev/docs/next/view-style-props\#borderwidth "Direct link to borderwidth")

### `boxShadow` [​](https://reactnative.dev/docs/next/view-style-props\#boxshadow "Direct link to boxshadow")

note

`boxShadow` is only available on the [New Architecture](https://reactnative.dev/architecture/landing-page). Outset shadows are only supported on **Android 9+**. Inset shadows are only supported on **Android 10+**.

Adds a shadow effect to an element, with the ability to control the position, color, size, and blurriness of the shadow. This shadow either appears around the outside or inside of the border box of the element, depending on whether or not the shadow is _inset_. This is a spec-compliant implementation of the [web style prop of the same name](https://developer.mozilla.org/en-US/docs/Web/CSS/box-shadow). Read more about all the arguments available in the [BoxShadowValue](https://reactnative.dev/docs/next/boxshadowvalue) documentation.

These shadows can be composed together so that a single `boxShadow` can be comprised of multiple different shadows.

`boxShadow` takes either a string which mimics the [web syntax](https://developer.mozilla.org/en-US/docs/Web/CSS/box-shadow#syntax) or an array of [BoxShadowValue](https://reactnative.dev/docs/next/boxshadowvalue) objects.

| Type |
| --- |
| array of BoxShadowValue objects \| string |

### `cursor` iOS [​](https://reactnative.dev/docs/next/view-style-props\#cursor-ios "Direct link to cursor-ios")

On , Setting to `pointer` allows hover effects when a pointer (such as a trackpad or stylus on iOS, or the users' gaze on visionOS) is over the view.

| Type |
| --- |
| enum( `'auto'`, `'pointer'`) |

### `elevation` Android [​](https://reactnative.dev/docs/next/view-style-props\#elevation-android "Direct link to elevation-android")

Sets the elevation of a view, using Android's underlying [elevation API](https://developer.android.com/training/material/shadows-clipping.html#Elevation). This adds a drop shadow to the item and affects z-order for overlapping views. Only supported on Android 5.0+, has no effect on earlier versions.

### `filter` [​](https://reactnative.dev/docs/next/view-style-props\#filter "Direct link to filter")

`filter` is only available on the [New Architecture](https://reactnative.dev/architecture/landing-page)

Adds a graphical filter to the `View`. This filter is comprised of any number of _filter functions_, which each represent some atomic change to the graphical composition of the `View`. The complete list of valid filter functions is defined below. `filter` will apply to descendants of the `View` as well as the `View` itself. `filter` implies `overflow: hidden`, so descendants will be clipped to fit the bounds of the `View`.

The following filter functions work across all platforms:

- `brightness`: Changes the brightness of the `View`. Takes a non-negative number or percentage.
- `opacity`: Changes the opacity, or alpha, of the `View`. Takes a non-negative number or percentage.

Due to issues with performance and spec compliance, these are the only two filter functions available on iOS. There are plans to explore some potential workarounds using SwiftUI instead of UIKit for this implementation.

Android

The following filter functions work on Android only:

- `blur`: Blurs the `View` with a [Guassian blur](https://en.wikipedia.org/wiki/Gaussian_blur), where the specified length represents the radius used in the blurring algorithm. Any non-negative DIP value is valid (no percents). The larger the value, the blurrier the result.
- `contrast`: Changes the contrast of the `View`. Takes a non-negative number or percentage.
- `dropShadow`: Adds a shadow around the alpha mask of the `View` (only non-zero alpha pixels in the `View` will cast a shadow). Takes an optional color representing the shadow color, and 2 or 3 lengths. If 2 lengths are specified they are interperted as `offsetX` and `offsetY` which will translate the shadow in the X and Y dimensions respectfully. If a 3rd length is given it is interpreted as the standard deviation of the Guassian blur used on the shadow - so a larger value will blur the shadow more. Read more about the arguments in [DropShadowValue](https://reactnative.dev/docs/next/dropshadowvalue).
- `grayscale`: Converts the `View` to [grayscale](https://en.wikipedia.org/wiki/Grayscale) by the specified amount. Takes a non-negative number or percentage, where `1` or `100%` represents complete grayscale.
- `hueRotate`: Changes the [hue](https://en.wikipedia.org/wiki/Hue) of the View. The argument of this function defines the angle of a color wheel around which the hue will be rotated, so e.g., `360deg` would have no effect. This angle can have either `deg` or `rad` units.
- `invert`: Inverts the colors in the `View`. Takes a non-negative number or percentage, where `1` or `100%` represents complete inversion.
- `sepia`: Converts the `View` to [sepia](https://en.wikipedia.org/wiki/Sepia_(color)). Takes a non-negative number or percentage, where `1` or `100%` represents complete sepia.
- `saturate`: Changes the [saturation](https://en.wikipedia.org/wiki/Colorfulness) of the `View`. Takes a non-negative number or percentage.

`blur` and `dropShadow` are only supported on **Android 12+**

`filter` takes either an array of objects comprising of the above filter functions or a string which mimics the [web syntax](https://developer.mozilla.org/en-US/docs/Web/CSS/filter#syntax).

| Type |
| --- |
| array of objects: `{brightness: number|string}`, `{opacity: number|string}`, `{blur: number|string}`, `{contrast: number|string}`, `{dropShadow: DropShadowValue|string}`, `{grayscale: number|string}`, `{hueRotate: number|string}`, `{invert: number|string}`, `{sepia: number|string}`, `{saturate: number|string}` or string |

### `opacity` [​](https://reactnative.dev/docs/next/view-style-props\#opacity "Direct link to opacity")

### `outlineColor` [​](https://reactnative.dev/docs/next/view-style-props\#outlinecolor "Direct link to outlinecolor")

`outlineColor` is only available on the [New Architecture](https://reactnative.dev/architecture/landing-page)

Sets the color of an element's outline. See [web documentation](https://developer.mozilla.org/en-US/docs/Web/CSS/outline-color) for more details.

### `outlineOffset` [​](https://reactnative.dev/docs/next/view-style-props\#outlineoffset "Direct link to outlineoffset")

`outlineOffset` is only available on the [New Architecture](https://reactnative.dev/architecture/landing-page)

Sets the amount of space between an outline and the bounds of an element. Does not affect layout. See [web documentation](https://developer.mozilla.org/en-US/docs/Web/CSS/outline-offset) for more details.

### `outlineStyle` [​](https://reactnative.dev/docs/next/view-style-props\#outlinestyle "Direct link to outlinestyle")

`outlineStyle` is only available on the [New Architecture](https://reactnative.dev/architecture/landing-page)

Sets the style of an element's outline. See [web documentation](https://developer.mozilla.org/en-US/docs/Web/CSS/outline-style) for more details.

### `outlineWidth` [​](https://reactnative.dev/docs/next/view-style-props\#outlinewidth "Direct link to outlinewidth")

`outlineWidth` is only available on the [New Architecture](https://reactnative.dev/architecture/landing-page)

The width of an outline which is drawn around an element, outside the border. Does not affect layout. See [web documentation](https://developer.mozilla.org/en-US/docs/Web/CSS/outline-width) for more details.

### `pointerEvents` [​](https://reactnative.dev/docs/next/view-style-props\#pointerevents "Direct link to pointerevents")

Controls whether the `View` can be the target of touch events.

- `'auto'`: The View can be the target of touch events.
- `'none'`: The View is never the target of touch events.
- `'box-none'`: The View is never the target of touch events but its subviews can be.
- `'box-only'`: The view can be the target of touch events but its subviews cannot be.

| Type |
| --- |
| enum( `'auto'`, `'box-none'`, `'box-only'`, `'none'` ) |

Is this page useful?

- [Example](https://reactnative.dev/docs/next/view-style-props#example)
- [Props](https://reactnative.dev/docs/next/view-style-props#props)
- [`backfaceVisibility`](https://reactnative.dev/docs/next/view-style-props#backfacevisibility)
- [`backgroundColor`](https://reactnative.dev/docs/next/view-style-props#backgroundcolor)
- [`borderBottomColor`](https://reactnative.dev/docs/next/view-style-props#borderbottomcolor)
- [`borderBlockColor`](https://reactnative.dev/docs/next/view-style-props#borderblockcolor)
- [`borderBlockEndColor`](https://reactnative.dev/docs/next/view-style-props#borderblockendcolor)
- [`borderBlockStartColor`](https://reactnative.dev/docs/next/view-style-props#borderblockstartcolor)
- [`borderBottomEndRadius`](https://reactnative.dev/docs/next/view-style-props#borderbottomendradius)
- [`borderBottomLeftRadius`](https://reactnative.dev/docs/next/view-style-props#borderbottomleftradius)
- [`borderBottomRightRadius`](https://reactnative.dev/docs/next/view-style-props#borderbottomrightradius)
- [`borderBottomStartRadius`](https://reactnative.dev/docs/next/view-style-props#borderbottomstartradius)
- [`borderStartEndRadius`](https://reactnative.dev/docs/next/view-style-props#borderstartendradius)
- [`borderStartStartRadius`](https://reactnative.dev/docs/next/view-style-props#borderstartstartradius)
- [`borderEndEndRadius`](https://reactnative.dev/docs/next/view-style-props#borderendendradius)
- [`borderEndStartRadius`](https://reactnative.dev/docs/next/view-style-props#borderendstartradius)
- [`borderBottomWidth`](https://reactnative.dev/docs/next/view-style-props#borderbottomwidth)
- [`borderColor`](https://reactnative.dev/docs/next/view-style-props#bordercolor)
- [`borderCurve` \\
iOS](https://reactnative.dev/docs/next/view-style-props#bordercurve-ios)
- [`borderEndColor`](https://reactnative.dev/docs/next/view-style-props#borderendcolor)
- [`borderLeftColor`](https://reactnative.dev/docs/next/view-style-props#borderleftcolor)
- [`borderLeftWidth`](https://reactnative.dev/docs/next/view-style-props#borderleftwidth)
- [`borderRadius`](https://reactnative.dev/docs/next/view-style-props#borderradius)
- [`borderRightColor`](https://reactnative.dev/docs/next/view-style-props#borderrightcolor)
- [`borderRightWidth`](https://reactnative.dev/docs/next/view-style-props#borderrightwidth)
- [`borderStartColor`](https://reactnative.dev/docs/next/view-style-props#borderstartcolor)
- [`borderStyle`](https://reactnative.dev/docs/next/view-style-props#borderstyle)
- [`borderTopColor`](https://reactnative.dev/docs/next/view-style-props#bordertopcolor)
- [`borderTopEndRadius`](https://reactnative.dev/docs/next/view-style-props#bordertopendradius)
- [`borderTopLeftRadius`](https://reactnative.dev/docs/next/view-style-props#bordertopleftradius)
- [`borderTopRightRadius`](https://reactnative.dev/docs/next/view-style-props#bordertoprightradius)
- [`borderTopStartRadius`](https://reactnative.dev/docs/next/view-style-props#bordertopstartradius)
- [`borderTopWidth`](https://reactnative.dev/docs/next/view-style-props#bordertopwidth)
- [`borderWidth`](https://reactnative.dev/docs/next/view-style-props#borderwidth)
- [`boxShadow`](https://reactnative.dev/docs/next/view-style-props#boxshadow)
- [`cursor` \\
iOS](https://reactnative.dev/docs/next/view-style-props#cursor-ios)
- [`elevation` \\
Android](https://reactnative.dev/docs/next/view-style-props#elevation-android)
- [`filter`](https://reactnative.dev/docs/next/view-style-props#filter)
- [`opacity`](https://reactnative.dev/docs/next/view-style-props#opacity)
- [`outlineColor`](https://reactnative.dev/docs/next/view-style-props#outlinecolor)
- [`outlineOffset`](https://reactnative.dev/docs/next/view-style-props#outlineoffset)
- [`outlineStyle`](https://reactnative.dev/docs/next/view-style-props#outlinestyle)
- [`outlineWidth`](https://reactnative.dev/docs/next/view-style-props#outlinewidth)
- [`pointerEvents`](https://reactnative.dev/docs/next/view-style-props#pointerevents)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/upgrading

[Skip to main content](https://reactnative.dev/docs/next/upgrading#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/upgrading)** (0.81).

Version: Next

On this page

Upgrading to new versions of React Native will give you access to more APIs, views, developer tools and other goodies. Upgrading requires a small amount of effort, but we try to make it straightforward for you.

## Expo projects [​](https://reactnative.dev/docs/next/upgrading\#expo-projects "Direct link to Expo projects")

Upgrading your Expo project to a new version of React Native requires updating the `react-native`, `react`, and `expo` package versions in your `package.json` file. Expo recommends upgrading SDK versions incrementally, one at a time. Doing so will help you pinpoint breakages and issues that arise during the upgrade process. See the [Upgrading Expo SDK Walkthrough](https://docs.expo.dev/workflow/upgrading-expo-sdk-walkthrough/) for up-to-date information about upgrading your project.

## React Native projects [​](https://reactnative.dev/docs/next/upgrading\#react-native-projects "Direct link to React Native projects")

Because typical React Native projects are essentially made up of an Android project, an iOS project, and a JavaScript project, upgrading can be rather tricky. The [Upgrade Helper](https://react-native-community.github.io/upgrade-helper/) is a web tool to help you out when upgrading your apps by providing the full set of changes happening between any two versions. It also shows comments on specific files to help understanding why that change is needed.

### 1\. Select the versions [​](https://reactnative.dev/docs/next/upgrading\#1-select-the-versions "Direct link to 1. Select the versions")

You first need to select from and to which version you wish to upgrade, by default the latest major versions are selected. After selecting you can click the button "Show me how to upgrade".

💡 Major updates will show a "useful content" section on the top with links to help you out when upgrading.

### 2\. Upgrade dependencies [​](https://reactnative.dev/docs/next/upgrading\#2-upgrade-dependencies "Direct link to 2. Upgrade dependencies")

The first file that is shown is the `package.json`, it's good to update the dependencies that are showing in there. For example, if `react-native` and `react` appears as changes then you can install it in your project by running following commands:

- npm
- Yarn

shell

```codeBlockLines_AclH
# {{VERSION}} and {{REACT_VERSION}} are the release versions showing in the diff
npm install react-native@{{VERSION}}
npm install react@{{REACT_VERSION}}

```codeBlockLines_AclH
yarn add react-native@{{VERSION}}
yarn add react@{{REACT_VERSION}}

### 3\. Upgrade your project files [​](https://reactnative.dev/docs/next/upgrading\#3-upgrade-your-project-files "Direct link to 3. Upgrade your project files")

The new release may contain updates to other files that are generated when you run `npx react-native init`, those files are listed after the `package.json` in the [Upgrade Helper](https://react-native-community.github.io/upgrade-helper/) page. If there aren't other changes then you only need to rebuild the project to continue developing. In case there are changes you need to manually apply them into your project.

#### I have done all the changes but my app is still using an old version [​](https://reactnative.dev/docs/next/upgrading\#i-have-done-all-the-changes-but-my-app-is-still-using-an-old-version "Direct link to I have done all the changes but my app is still using an old version")

These sort of errors are usually related to caching, it's recommended to install [react-native-clean-project](https://github.com/pmadruga/react-native-clean-project) to clear all your project's cache and then you can run it again.

Is this page useful?

- [Expo projects](https://reactnative.dev/docs/next/upgrading#expo-projects)
- [React Native projects](https://reactnative.dev/docs/next/upgrading#react-native-projects)
- [1\. Select the versions](https://reactnative.dev/docs/next/upgrading#1-select-the-versions)
- [2\. Upgrade dependencies](https://reactnative.dev/docs/next/upgrading#2-upgrade-dependencies)
- [3\. Upgrade your project files](https://reactnative.dev/docs/next/upgrading#3-upgrade-your-project-files)
- [Troubleshooting](https://reactnative.dev/docs/next/upgrading#troubleshooting)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/turbo-native-modules-introduction

[Skip to main content](https://reactnative.dev/docs/next/turbo-native-modules-introduction#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/turbo-native-modules-introduction)** (0.81).

Version: Next

On this page

Your React Native application code may need to interact with native platform APIs that aren't provided by React Native or an existing library. You can write the integration code yourself using a **Turbo Native Module**. This guide will show you how to write one.

The basic steps are:

1. **define a typed JavaScript specification** using one of the most popular JavaScript type annotation languages: Flow or TypeScript;
2. **configure your dependency management system to run Codegen**, which converts the specification into native language interfaces;
3. **write your application code** using your specification; and
4. **write your native platform code using the generated interfaces** to write and hook your native code into the React Native runtime environment.

Lets work through each of these steps by building an example Turbo Native Module. The rest of this guide assume that you have created your application running the command:

shell

```codeBlockLines_AclH
npx @react-native-community/cli@latest init TurboModuleExample --version latest

## Native Persistent Storage [​](https://reactnative.dev/docs/next/turbo-native-modules-introduction\#native-persistent-storage "Direct link to Native Persistent Storage")

This guide will show you how to write an implementation of the [Web Storage API](https://html.spec.whatwg.org/multipage/webstorage.html#dom-localstorage-dev): `localStorage`. The API is relatable to a React developer who might be writing application code on your project.

To make this work on mobile, we need to use Android and iOS APIs:

- Android: [SharedPreferences](https://developer.android.com/reference/android/content/SharedPreferences), and
- iOS: [NSUserDefaults](https://developer.apple.com/documentation/foundation/nsuserdefaults).

### 1\. Declare Typed Specification [​](https://reactnative.dev/docs/next/turbo-native-modules-introduction\#1-declare-typed-specification "Direct link to 1. Declare Typed Specification")

React Native provides a tool called [Codegen](https://reactnative.dev/docs/the-new-architecture/what-is-codegen), which takes a specification written in TypeScript or Flow and generates platform specific code for Android and iOS. The specification declares the methods and data types that will pass back and forth between your native code and the React Native JavaScript runtime. A Turbo Native Module is both your specification, the native code you write, and the Codegen interfaces generated from your specification.

To create a specs file:

1. Inside the root folder of your app, create a new folder called `specs`.
2. Create a new file called `NativeLocalStorage.ts`.

info

You can see all of the types you can use in your specification and the native types that are generated in the [Appendix](https://reactnative.dev/docs/appendix) documentation.

Here is an implementation of the `localStorage` specification:

- TypeScript
- Flow

specs/NativeLocalStorage.ts

```codeBlockLines_AclH
import type {TurboModule} from 'react-native';
import {TurboModuleRegistry} from 'react-native';

export interface Spec extends TurboModule {
setItem(value: string, key: string): void;
getItem(key: string): string | null;
removeItem(key: string): void;
clear(): void;
}

'NativeLocalStorage',
);

NativeLocalStorage.js

```codeBlockLines_AclH
import type {TurboModule} from 'react-native';
import {TurboModule, TurboModuleRegistry} from 'react-native';

export interface Spec extends TurboModule {
setItem(value: string, key: string): void;
getItem(key: string): ?string;
removeItem(key: string): void;
clear(): void;
}

### 2\. Configure Codegen to run [​](https://reactnative.dev/docs/next/turbo-native-modules-introduction\#2-configure-codegen-to-run "Direct link to 2. Configure Codegen to run")

The specification is used by the React Native Codegen tools to generate platform specific interfaces and boilerplate for us. To do this, Codegen needs to know where to find our specification and what to do with it. Update your `package.json` to include:

package.json

```codeBlockLines_AclH
"start": "react-native start",
"test": "jest"
},
"codegenConfig": {
"name": "NativeLocalStorageSpec",
"type": "modules",
"jsSrcsDir": "specs",
"android": {
"javaPackageName": "com.nativelocalstorage"
}
},
"dependencies": {

With everything wired up for Codegen, we need to prepare our native code to hook into our generated code.

- Android
- iOS

Codegen is executed through the `generateCodegenArtifactsFromSchema` Gradle task:

bash

```codeBlockLines_AclH
cd android
./gradlew generateCodegenArtifactsFromSchema

BUILD SUCCESSFUL in 837ms
14 actionable tasks: 3 executed, 11 up-to-date

This is automatically run when you build your Android application.

Codegen is run as part of the script phases that's automatically added to the project generated by CocoaPods.

```codeBlockLines_AclH
cd ios
bundle install
bundle exec pod install

The output will look like this:

```codeBlockLines_AclH
...
Framework build type is static library
[Codegen] Adding script_phases to ReactCodegen.
[Codegen] Generating ./build/generated/ios/ReactCodegen.podspec.json
[Codegen] Analyzing /Users/me/src/TurboModuleExample/package.json
[Codegen] Searching for codegen-enabled libraries in the app.
[Codegen] Found TurboModuleExample
[Codegen] Searching for codegen-enabled libraries in the project dependencies.
[Codegen] Found react-native
...

### 3\. Write Application Code using the Turbo Native Module [​](https://reactnative.dev/docs/next/turbo-native-modules-introduction\#3-write-application-code-using-the-turbo-native-module "Direct link to 3. Write Application Code using the Turbo Native Module")

Using `NativeLocalStorage`, here’s a modified `App.tsx` that includes some text we want persisted, an input field and some buttons to update this value.

The `TurboModuleRegistry` supports 2 modes of retrieving a Turbo Native Module:

App.tsx

```codeBlockLines_AclH
import React from 'react';
import {
SafeAreaView,
StyleSheet,
Text,
TextInput,
Button,
} from 'react-native';

import NativeLocalStorage from './specs/NativeLocalStorage';

function App(): React.JSX.Element {

const [editingValue, setEditingValue] = React.useState<

const storedValue = NativeLocalStorage?.getItem('myKey');
setValue(storedValue ?? '');
}, []);

function saveValue() {
NativeLocalStorage?.setItem(editingValue ?? EMPTY, 'myKey');
setValue(editingValue);
}

function clearAll() {
NativeLocalStorage?.clear();
setValue('');
}

function deleteValue() {
NativeLocalStorage?.removeItem('myKey');
setValue('');
}

return (

placeholder="Enter the text you want to store"
style={styles.textInput}
onChangeText={setEditingValue}

}

const styles = StyleSheet.create({
text: {
margin: 10,
fontSize: 20,
},
textInput: {
margin: 10,
height: 40,
borderColor: 'black',
borderWidth: 1,
paddingLeft: 5,
paddingRight: 5,
borderRadius: 5,
},
});

export default App;

### 4\. Write your Native Platform code [​](https://reactnative.dev/docs/next/turbo-native-modules-introduction\#4-write-your-native-platform-code "Direct link to 4. Write your Native Platform code")

With everything prepared, we're going to start writing native platform code. We do this in 2 parts:

note

This guide shows you how to create a Turbo Native Module that only works with the New Architecture. If you need to support both the New Architecture and the Legacy Architecture, please refer to our [backwards compatibility guide](https://github.com/reactwg/react-native-new-architecture/blob/main/docs/backwards-compat.md).

Now it's time to write some Android platform code to make sure `localStorage` survives after the application is closed.

The first step is to implement the generated `NativeLocalStorageSpec` interface:

- Java
- Kotlin

android/app/src/main/java/com/nativelocalstorage/NativeLocalStorageModule.java

```codeBlockLines_AclH
package com.nativelocalstorage;

import android.content.Context;
import android.content.SharedPreferences;
import com.nativelocalstorage.NativeLocalStorageSpec;
import com.facebook.react.bridge.ReactApplicationContext;

public class NativeLocalStorageModule extends NativeLocalStorageSpec {

public static final String NAME = "NativeLocalStorage";

public NativeLocalStorageModule(ReactApplicationContext reactContext) {
super(reactContext);
}

@Override
public String getName() {
return NAME;
}

@Override
public void setItem(String value, String key) {
SharedPreferences sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE);
SharedPreferences.Editor editor = sharedPref.edit();
editor.putString(key, value);
editor.apply();
}

@Override
public String getItem(String key) {
SharedPreferences sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE);
String username = sharedPref.getString(key, null);
return username;
}

@Override
public void removeItem(String key) {
SharedPreferences sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE);
sharedPref.edit().remove(key).apply();
}
}

android/app/src/main/java/com/nativelocalstorage/NativeLocalStorageModule.kt

```codeBlockLines_AclH
package com.nativelocalstorage

import android.content.Context
import android.content.SharedPreferences
import com.nativelocalstorage.NativeLocalStorageSpec
import com.facebook.react.bridge.ReactApplicationContext

class NativeLocalStorageModule(reactContext: ReactApplicationContext) : NativeLocalStorageSpec(reactContext) {

override fun getName() = NAME

override fun setItem(value: String, key: String) {
val sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE)
val editor = sharedPref.edit()
editor.putString(key, value)
editor.apply()
}

override fun getItem(key: String): String? {
val sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE)
val username = sharedPref.getString(key, null)
return username.toString()
}

override fun removeItem(key: String) {
val sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE)
val editor = sharedPref.edit()
editor.remove(key)
editor.apply()
}

override fun clear() {
val sharedPref = getReactApplicationContext().getSharedPreferences("my_prefs", Context.MODE_PRIVATE)
val editor = sharedPref.edit()
editor.clear()
editor.apply()
}

companion object {
const val NAME = "NativeLocalStorage"
}
}

Next we need to create `NativeLocalStoragePackage`. It provides an object to register our Module in the React Native runtime, by wrapping it as a Base Native Package:

android/app/src/main/java/com/nativelocalstorage/NativeLocalStoragePackage.java

import com.facebook.react.BaseReactPackage;
import com.facebook.react.bridge.NativeModule;
import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.module.model.ReactModuleInfo;
import com.facebook.react.module.model.ReactModuleInfoProvider;

import java.util.HashMap;
import java.util.Map;

public class NativeLocalStoragePackage extends BaseReactPackage {

@Override
public NativeModule getModule(String name, ReactApplicationContext reactContext) {
if (name.equals(NativeLocalStorageModule.NAME)) {
return new NativeLocalStorageModule(reactContext);
} else {
return null;
}
}

@Override
public ReactModuleInfoProvider getReactModuleInfoProvider() {
return new ReactModuleInfoProvider() {
@Override

map.put(NativeLocalStorageModule.NAME, new ReactModuleInfo(
NativeLocalStorageModule.NAME, // name
NativeLocalStorageModule.NAME, // className
false, // canOverrideExistingModule
false, // needsEagerInit
false, // isCXXModule
true // isTurboModule
));
return map;
}
};
}
}

android/app/src/main/java/com/nativelocalstorage/NativeLocalStoragePackage.kt

import com.facebook.react.BaseReactPackage
import com.facebook.react.bridge.NativeModule
import com.facebook.react.bridge.ReactApplicationContext
import com.facebook.react.module.model.ReactModuleInfo
import com.facebook.react.module.model.ReactModuleInfoProvider

class NativeLocalStoragePackage : BaseReactPackage() {

override fun getModule(name: String, reactContext: ReactApplicationContext): NativeModule? =
if (name == NativeLocalStorageModule.NAME) {
NativeLocalStorageModule(reactContext)
} else {
null
}

override fun getReactModuleInfoProvider() = ReactModuleInfoProvider {
mapOf(
NativeLocalStorageModule.NAME to ReactModuleInfo(
name = NativeLocalStorageModule.NAME,
className = NativeLocalStorageModule.NAME,
canOverrideExistingModule = false,
needsEagerInit = false,
isCxxModule = false,
isTurboModule = true
)
)
}
}

Finally, we need to tell the React Native in our main application how to find this `Package`. We call this "registering" the package in React Native.

In this case, you add it to be returned by the [getPackages](https://github.com/facebook/react-native/blob/8d8b8c343e62115a5509e1aed62047053c2f6e39/packages/react-native/ReactAndroid/src/main/java/com/facebook/react/ReactNativeHost.java#L233) method.

Later you’ll learn how to distribute your Native Modules as [npm packages](https://reactnative.dev/docs/next/the-new-architecture/create-module-library#publish-the-library-on-npm), which our build tooling will autolink for you.

android/app/src/main/java/com/turobmoduleexample/MainApplication.java

```codeBlockLines_AclH
package com.inappmodule;

import android.app.Application;
import com.facebook.react.PackageList;
import com.facebook.react.ReactApplication;
import com.facebook.react.ReactHost;
import com.facebook.react.ReactNativeHost;
import com.facebook.react.ReactPackage;
import com.facebook.react.defaults.DefaultNewArchitectureEntryPoint;
import com.facebook.react.defaults.DefaultReactHost;
import com.facebook.react.defaults.DefaultReactNativeHost;
import com.facebook.soloader.SoLoader;
import com.nativelocalstorage.NativeLocalStoragePackage;

import java.util.ArrayList;
import java.util.List;

public class MainApplication extends Application implements ReactApplication {

private final ReactNativeHost reactNativeHost = new DefaultReactNativeHost(this) {
@Override

// Packages that cannot be autolinked yet can be added manually here, for example:
// packages.add(new MyReactNativePackage());
packages.add(new NativeLocalStoragePackage());
return packages;
}

@Override
public String getJSMainModuleName() {
return "index";
}

@Override
public boolean getUseDeveloperSupport() {
return BuildConfig.DEBUG;
}

@Override
public boolean isNewArchEnabled() {
return BuildConfig.IS_NEW_ARCHITECTURE_ENABLED;
}

@Override
public boolean isHermesEnabled() {
return BuildConfig.IS_HERMES_ENABLED;
}
};

@Override
public ReactHost getReactHost() {
return DefaultReactHost.getDefaultReactHost(getApplicationContext(), reactNativeHost);
}

@Override
public void onCreate() {
super.onCreate();
SoLoader.init(this, false);
if (BuildConfig.IS_NEW_ARCHITECTURE_ENABLED) {
// If you opted-in for the New Architecture, we load the native entry point for this app.
DefaultNewArchitectureEntryPoint.load();
}
}
}

android/app/src/main/java/com/turobmoduleexample/MainApplication.kt

```codeBlockLines_AclH
package com.inappmodule

import android.app.Application
import com.facebook.react.PackageList
import com.facebook.react.ReactApplication
import com.facebook.react.ReactHost
import com.facebook.react.ReactNativeHost
import com.facebook.react.ReactPackage
import com.facebook.react.defaults.DefaultNewArchitectureEntryPoint.load
import com.facebook.react.defaults.DefaultReactHost.getDefaultReactHost
import com.facebook.react.defaults.DefaultReactNativeHost
import com.facebook.soloader.SoLoader
import com.nativelocalstorage.NativeLocalStoragePackage

class MainApplication : Application(), ReactApplication {

override val reactNativeHost: ReactNativeHost =
object : DefaultReactNativeHost(this) {

PackageList(this).packages.apply {
// Packages that cannot be autolinked yet can be added manually here, for example:
// add(MyReactNativePackage())
add(NativeLocalStoragePackage())
}

override fun getJSMainModuleName(): String = "index"

override fun getUseDeveloperSupport(): Boolean = BuildConfig.DEBUG

override val isNewArchEnabled: Boolean = BuildConfig.IS_NEW_ARCHITECTURE_ENABLED
override val isHermesEnabled: Boolean = BuildConfig.IS_HERMES_ENABLED
}

override val reactHost: ReactHost
get() = getDefaultReactHost(applicationContext, reactNativeHost)

override fun onCreate() {
super.onCreate()
SoLoader.init(this, false)
if (BuildConfig.IS_NEW_ARCHITECTURE_ENABLED) {
// If you opted-in for the New Architecture, we load the native entry point for this app.
load()
}
}
}

You can now build and run your code on an emulator:

- npm
- Yarn

```codeBlockLines_AclH
npm run android

```codeBlockLines_AclH
yarn run android

Now it's time to write some iOS platform code to make sure `localStorage` survives after the application is closed.

## Prepare your Xcode Project [​](https://reactnative.dev/docs/next/turbo-native-modules-introduction\#prepare-your-xcode-project "Direct link to Prepare your Xcode Project")

We need to prepare your iOS project using Xcode. After completing these **6 steps** you'll have `RCTNativeLocalStorage` that implements the generated `NativeLocalStorageSpec` interface.

1. Open the CocoaPods generated Xcode Workspace:

```codeBlockLines_AclH
cd ios
open TurboModuleExample.xcworkspace

2. Right click on app and select `New Group`, call the new group `NativeLocalStorage`.

3. In the `NativeLocalStorage` group, create `New` → `File from Template`.

4. Use the `Cocoa Touch Class`.

5. Name the Cocoa Touch Class `RCTNativeLocalStorage` with the `Objective-C` language.

6. Rename `RCTNativeLocalStorage.m` → `RCTNativeLocalStorage.mm` making it an Objective-C++ file.

## Implement localStorage with NSUserDefaults [​](https://reactnative.dev/docs/next/turbo-native-modules-introduction\#implement-localstorage-with-nsuserdefaults "Direct link to Implement localStorage with NSUserDefaults")

Start by updating `RCTNativeLocalStorage.h`:

NativeLocalStorage/RCTNativeLocalStorage.h

```codeBlockLines_AclH
// RCTNativeLocalStorage.h
// TurboModuleExample

@interface RCTNativeLocalStorage : NSObject

Then update our implementation to use `NSUserDefaults` with a custom [suite name](https://developer.apple.com/documentation/foundation/nsuserdefaults/1409957-initwithsuitename).

NativeLocalStorage/RCTNativeLocalStorage.mm

```codeBlockLines_AclH
// RCTNativeLocalStorage.m
// TurboModuleExample

#import "RCTNativeLocalStorage.h"

static NSString *const RCTNativeLocalStorageKey = @"local-storage";

@interface RCTNativeLocalStorage()
@property (strong, nonatomic) NSUserDefaults *localStorage;
@end

@implementation RCTNativeLocalStorage

- (id) init {
if (self = [super init]) {
_localStorage = [[NSUserDefaults alloc] initWithSuiteName:RCTNativeLocalStorageKey];
}
return self;
}

- (NSString * _Nullable)getItem:(NSString *)key {
return [self.localStorage stringForKey:key];
}

- (void)setItem:(NSString *)value
key:(NSString *)key {
[self.localStorage setObject:value forKey:key];
}

- (void)removeItem:(NSString *)key {
[self.localStorage removeObjectForKey:key];
}

- (void)clear {
NSDictionary *keys = [self.localStorage dictionaryRepresentation];
for (NSString *key in keys) {
[self removeItem:key];
}
}

+ (NSString *)moduleName
{
return @"NativeLocalStorage";
}

@end

Important things to note:

- You can use Xcode to jump to the Codegen `@protocol NativeLocalStorageSpec`. You can also use Xcode to generate stubs for you.

## Register the Native Module in your app [​](https://reactnative.dev/docs/next/turbo-native-modules-introduction\#register-the-native-module-in-your-app "Direct link to Register the Native Module in your app")

The last step consist in updating the `package.json` to tell React Native about the link between the JS specs of the Native Module and the concrete implementation of those specs in native code.

Modify the `package.json` as it follows:

```codeBlockLines_AclH
"start": "react-native start",
"test": "jest"
},
"codegenConfig": {
"name": "AppSpecs",
"type": "modules",
"jsSrcsDir": "specs",
"android": {
"javaPackageName": "com.sampleapp.specs"
},
"ios": {
"modulesProvider": {
"NativeLocalStorage": "RCTNativeLocalStorage"
}
}
},

"dependencies": {

At this point, you need to re-install the pods to make sure that codegen runs again to generate the new files:

```codeBlockLines_AclH
# from the ios folder
bundle exec pod install
open SampleApp.xcworkspace

If you now build your application from Xcode, you should be able to build successfully.

## Build and run your code on a Simulator [​](https://reactnative.dev/docs/next/turbo-native-modules-introduction\#build-and-run-your-code-on-a-simulator "Direct link to Build and run your code on a Simulator")

```codeBlockLines_AclH
npm run ios

```codeBlockLines_AclH
yarn run ios

Is this page useful?

- [Native Persistent Storage](https://reactnative.dev/docs/next/turbo-native-modules-introduction#native-persistent-storage)
- [1\. Declare Typed Specification](https://reactnative.dev/docs/next/turbo-native-modules-introduction#1-declare-typed-specification)
- [2\. Configure Codegen to run](https://reactnative.dev/docs/next/turbo-native-modules-introduction#2-configure-codegen-to-run)
- [3\. Write Application Code using the Turbo Native Module](https://reactnative.dev/docs/next/turbo-native-modules-introduction#3-write-application-code-using-the-turbo-native-module)
- [4\. Write your Native Platform code](https://reactnative.dev/docs/next/turbo-native-modules-introduction#4-write-your-native-platform-code)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/usecolorscheme

[Skip to main content](https://reactnative.dev/docs/next/usecolorscheme#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/usecolorscheme)** (0.81).

Version: Next

On this page

tsx

```codeBlockLines_AclH
import {useColorScheme} from 'react-native';

The `useColorScheme` React hook provides and subscribes to color scheme updates from the [`Appearance`](https://reactnative.dev/docs/next/appearance) module. The return value indicates the current user preferred color scheme. The value may be updated later, either through direct user action (e.g. theme selection in device settings) or on a schedule (e.g. light and dark themes that follow the day/night cycle).

### Supported color schemes [​](https://reactnative.dev/docs/next/usecolorscheme\#supported-color-schemes "Direct link to Supported color schemes")

- `"light"`: The user prefers a light color theme.
- `"dark"`: The user prefers a dark color theme.
- `null`: The user has not indicated a preferred color theme.

* * *

## Example [​](https://reactnative.dev/docs/next/usecolorscheme\#example "Direct link to Example")

Example - Snack

# Example

Example usage

[![](https://snack.expo.dev/dist/assets/e55497eefbab3e0f30f38e569972c7ef.png)](https://expo.dev/)

import React from 'react';
import {Text, StyleSheet, useColorScheme} from 'react-native';
import {SafeAreaView, SafeAreaProvider} from 'react-native-safe-area-context';

const colorScheme = useColorScheme();
return (

};

const styles = StyleSheet.create({
container: {
flex: 1,
alignItems: 'center',
justifyContent: 'center',
},
});

export default App;

const colorScheme = useColorScheme();
return (

const styles = StyleSheet.create({
container: {
flex: 1,
alignItems: 'center',
justifyContent: 'center',
},
});

Snack

useColorScheme(): light

Updating…

PreviewMy DeviceAndroidiOSWeb

You can find a complete example that demonstrates the use of this hook alongside a React context to add support for light and dark themes to your application in [`AppearanceExample.js`](https://github.com/facebook/react-native/blob/main/packages/rn-tester/js/examples/Appearance/AppearanceExample.js).

Is this page useful?

- [Supported color schemes](https://reactnative.dev/docs/next/usecolorscheme#supported-color-schemes)
- [Example](https://reactnative.dev/docs/next/usecolorscheme#example)

Twitter Widget Iframe

---

# https://reactnative.dev/docs/next/viewtoken

[Skip to main content](https://reactnative.dev/docs/next/viewtoken#__docusaurus_skipToContent_fallback)

Join us for React Conf on Oct 7-8. [Learn more](https://conf.react.dev/).

This is unreleased documentation for React Native **Next** version.

For up-to-date documentation, see the **[latest version](https://reactnative.dev/docs/viewtoken)** (0.81).

Version: Next

On this page

`ViewToken` object is returned as one of the properties in the `onViewableItemsChanged` callback (for example, in the [FlatList](https://reactnative.dev/docs/next/flatlist) component). It is exported by [`ViewabilityHelper.js`](https://github.com/facebook/react-native/blob/main/packages/react-native/Libraries/Lists/ViewabilityHelper.js).

## Example [​](https://reactnative.dev/docs/next/viewtoken\#example "Direct link to Example")

js

```codeBlockLines_AclH
{
item: {key: "key-12"},
key: "key-12",
index: 11,
isViewable: true
}

## Keys and values [​](https://reactnative.dev/docs/next/viewtoken\#keys-and-values "Direct link to Keys and values")

### `index` [​](https://reactnative.dev/docs/next/viewtoken\#index "Direct link to index")

Unique numeric identifier assigned to the data element.

| Type | Optional |
| --- | --- |
| number | Yes |

### `isViewable` [​](https://reactnative.dev/docs/next/viewtoken\#isviewable "Direct link to isviewable")

Specifies if at least some part of list element is visible in the viewport.

| Type | Optional |
| --- | --- |
| boolean | No |

### `item` [​](https://reactnative.dev/docs/next/viewtoken\#item "Direct link to item")

Item data

| Type | Optional |
| --- | --- |
| any | No |

### `key` [​](https://reactnative.dev/docs/next/viewtoken\#key "Direct link to key")

Key identifier assigned to the data element extracted to the top level.

| Type | Optional |
| --- | --- |
| string | No |

### `section` [​](https://reactnative.dev/docs/next/viewtoken\#section "Direct link to section")

Item section data when used with `SectionList`.

| Type | Optional |
| --- | --- |
| any | Yes |

## Used by [​](https://reactnative.dev/docs/next/viewtoken\#used-by "Direct link to Used by")

- [`FlatList`](https://reactnative.dev/docs/next/flatlist)
- [`SectionList`](https://reactnative.dev/docs/next/sectionlist)
- [`VirtualizedList`](https://reactnative.dev/docs/next/virtualizedlist)

Is this page useful?

- [Example](https://reactnative.dev/docs/next/viewtoken#example)
- [Keys and values](https://reactnative.dev/docs/next/viewtoken#keys-and-values)
- [`index`](https://reactnative.dev/docs/next/viewtoken#index)
- [`isViewable`](https://reactnative.dev/docs/next/viewtoken#isviewable)
- [`item`](https://reactnative.dev/docs/next/viewtoken#item)
- [`key`](https://reactnative.dev/docs/next/viewtoken#key)
- [`section`](https://reactnative.dev/docs/next/viewtoken#section)
- [Used by](https://reactnative.dev/docs/next/viewtoken#used-by)

Twitter Widget Iframe

---

